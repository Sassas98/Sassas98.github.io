import{a as T,b as we,c as qx,d as Zp,e as _,f as Gx,g as Ju,h as Wx,i as Kx,j as Qx,k as Xp,l as Yx,m as ed,n as Zx,o as td,p as Xx,q as Jx,r as Ue,s as io,t as ti,u as nd,v as pc,w as eI,x as tI,y as ir,z as rn}from"./chunk-KZ55BCB2.js";var nI=null;var Jp=1;function vt(t){let e=nI;return nI=t,e}var iI={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function RO(t){if(!(ng(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Jp)){if(!t.producerMustRecompute(t)&&!eg(t)){t.dirty=!1,t.lastCleanEpoch=Jp;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Jp}}function rI(t){return t&&(t.nextProducerIndex=0),vt(t)}function oI(t,e){if(vt(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(ng(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)tg(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function eg(t){id(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],i=t.producerLastReadVersion[e];if(i!==n.version||(RO(n),i!==n.version))return!0}return!1}function sI(t){if(id(t),ng(t))for(let e=0;e<t.producerNode.length;e++)tg(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function tg(t,e){if(kO(t),id(t),t.liveConsumerNode.length===1)for(let i=0;i<t.producerNode.length;i++)tg(t.producerNode[i],t.producerIndexOfThis[i]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let i=t.liveConsumerIndexOfThis[e],r=t.liveConsumerNode[e];id(r),r.producerIndexOfThis[i]=e}}function ng(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function id(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function kO(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function PO(){throw new Error}var NO=PO;function aI(t){NO=t}function G(t){return typeof t=="function"}function vs(t){let n=t(i=>{Error.call(i),i.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var rd=vs(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function ro(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Ee=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:i}=this;if(G(i))try{i()}catch(o){e=o instanceof rd?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{cI(o)}catch(s){e=e??[],s instanceof rd?e=[...e,...s.errors]:e.push(s)}}if(e)throw new rd(e)}}add(e){var n;if(e&&e!==this)if(this.closed)cI(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&ro(n,e)}remove(e){let{_finalizers:n}=this;n&&ro(n,e),e instanceof t&&e._removeParent(this)}};Ee.EMPTY=(()=>{let t=new Ee;return t.closed=!0,t})();var ig=Ee.EMPTY;function od(t){return t instanceof Ee||t&&"closed"in t&&G(t.remove)&&G(t.add)&&G(t.unsubscribe)}function cI(t){G(t)?t():t.unsubscribe()}var Fn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ws={setTimeout(t,e,...n){let{delegate:i}=ws;return i?.setTimeout?i.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=ws;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function sd(t){ws.setTimeout(()=>{let{onUnhandledError:e}=Fn;if(e)e(t);else throw t})}function gc(){}var lI=(()=>rg("C",void 0,void 0))();function uI(t){return rg("E",void 0,t)}function dI(t){return rg("N",t,void 0)}function rg(t,e,n){return{kind:t,value:e,error:n}}var oo=null;function Es(t){if(Fn.useDeprecatedSynchronousErrorHandling){let e=!oo;if(e&&(oo={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:i}=oo;if(oo=null,n)throw i}}else t()}function hI(t){Fn.useDeprecatedSynchronousErrorHandling&&oo&&(oo.errorThrown=!0,oo.error=t)}var so=class extends Ee{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,od(e)&&e.add(this)):this.destination=LO}static create(e,n,i){return new Pi(e,n,i)}next(e){this.isStopped?sg(dI(e),this):this._next(e)}error(e){this.isStopped?sg(uI(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?sg(lI,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},OO=Function.prototype.bind;function og(t,e){return OO.call(t,e)}var ag=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(i){ad(i)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(i){ad(i)}else ad(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){ad(n)}}},Pi=class extends so{constructor(e,n,i){super();let r;if(G(e)||!e)r={next:e??void 0,error:n??void 0,complete:i??void 0};else{let o;this&&Fn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&og(e.next,o),error:e.error&&og(e.error,o),complete:e.complete&&og(e.complete,o)}):r=e}this.destination=new ag(r)}};function ad(t){Fn.useDeprecatedSynchronousErrorHandling?hI(t):sd(t)}function FO(t){throw t}function sg(t,e){let{onStoppedNotification:n}=Fn;n&&ws.setTimeout(()=>n(t,e))}var LO={closed:!0,next:gc,error:FO,complete:gc};var xs=(()=>typeof Symbol=="function"&&Symbol.observable||"@@observable")();function Nt(t){return t}function cg(...t){return lg(t)}function lg(t){return t.length===0?Nt:t.length===1?t[0]:function(n){return t.reduce((i,r)=>r(i),n)}}var K=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let i=new t;return i.source=this,i.operator=n,i}subscribe(n,i,r){let o=jO(n)?n:new Pi(n,i,r);return Es(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(i){n.error(i)}}forEach(n,i){return i=fI(i),new i((r,o)=>{let s=new Pi({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(n){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(n)}[xs](){return this}pipe(...n){return lg(n)(this)}toPromise(n){return n=fI(n),new n((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return t.create=e=>new t(e),t})();function fI(t){var e;return(e=t??Fn.Promise)!==null&&e!==void 0?e:Promise}function VO(t){return t&&G(t.next)&&G(t.error)&&G(t.complete)}function jO(t){return t&&t instanceof so||VO(t)&&od(t)}function ug(t){return G(t?.lift)}function X(t){return e=>{if(ug(e))return e.lift(function(n){try{return t(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Y(t,e,n,i,r){return new dg(t,e,n,i,r)}var dg=class extends so{constructor(e,n,i,r,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=r?function(a){try{r(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Is(){return X((t,e)=>{let n=null;t._refCount++;let i=Y(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let r=t._connection,o=n;n=null,r&&(!o||r===o)&&r.unsubscribe(),e.unsubscribe()});t.subscribe(i),i.closed||(n=t.connect())})}var Ds=class extends K{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,ug(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ee;let n=this.getSubject();e.add(this.source.subscribe(Y(n,void 0,()=>{this._teardown(),n.complete()},i=>{this._teardown(),n.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ee.EMPTY)}return e}refCount(){return Is()(this)}};var mI=vs(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var le=(()=>{class t extends K{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let i=new cd(this,this);return i.operator=n,i}_throwIfClosed(){if(this.closed)throw new mI}next(n){Es(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(n)}})}error(n){Es(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:i}=this;for(;i.length;)i.shift().error(n)}})}complete(){Es(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:i,isStopped:r,observers:o}=this;return i||r?ig:(this.currentObservers=null,o.push(n),new Ee(()=>{this.currentObservers=null,ro(o,n)}))}_checkFinalizedStatuses(n){let{hasError:i,thrownError:r,isStopped:o}=this;i?n.error(r):o&&n.complete()}asObservable(){let n=new K;return n.source=this,n}}return t.create=(e,n)=>new cd(e,n),t})(),cd=class extends le{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.next)===null||i===void 0||i.call(n,e)}error(e){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.error)===null||i===void 0||i.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,i;return(i=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&i!==void 0?i:ig}};var et=class extends le{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:i}=this;if(e)throw n;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}};var bc={now(){return(bc.delegate||Date).now()},delegate:void 0};var ld=class extends le{constructor(e=1/0,n=1/0,i=bc){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:o,_windowTime:s}=this;n||(i.push(e),!r&&i.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,o=r.slice();for(let s=0;s<o.length&&!e.closed;s+=i?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:i,_infiniteTimeWindow:r}=this,o=(r?1:2)*e;if(e<1/0&&o<i.length&&i.splice(0,i.length-o),!r){let s=n.now(),a=0;for(let c=1;c<i.length&&i[c]<=s;c+=2)a=c;a&&i.splice(0,a+1)}}};var ud=class extends Ee{constructor(e,n){super()}schedule(e,n=0){return this}};var yc={setInterval(t,e,...n){let{delegate:i}=yc;return i?.setInterval?i.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=yc;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Cs=class extends ud{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var i;if(this.closed)return this;this.state=e;let r=this.id,o=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(o,r,n)),this.pending=!0,this.delay=n,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,i=0){return yc.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,n,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return n;n!=null&&yc.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(e,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i=!1,r;try{this.work(e)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:i}=n;this.work=this.state=this.scheduler=null,this.pending=!1,ro(i,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Ts=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,i){return new this.schedulerActionCtor(this,e).schedule(i,n)}};Ts.now=bc.now;var Ss=class extends Ts{constructor(e,n=Ts.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let i;this._active=!0;do if(i=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,i){for(;e=n.shift();)e.unsubscribe();throw i}}};var ni=new Ss(Cs),hg=ni;var dd=class extends Cs{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,i=0){return i!=null&&i>0||i==null&&this.delay>0?super.requestAsyncId(e,n,i):(e.flush(this),0)}};var hd=class extends Ss{};var fg=new hd(dd);var Tt=new K(t=>t.complete());function fd(t){return t&&G(t.schedule)}function mg(t){return t[t.length-1]}function md(t){return G(mg(t))?t.pop():void 0}function ii(t){return fd(mg(t))?t.pop():void 0}function pI(t,e){return typeof mg(t)=="number"?t.pop():e}var As=t=>t&&typeof t.length=="number"&&typeof t!="function";function pd(t){return G(t?.then)}function gd(t){return G(t[xs])}function bd(t){return Symbol.asyncIterator&&G(t?.[Symbol.asyncIterator])}function yd(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function BO(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var _d=BO();function vd(t){return G(t?.[_d])}function wd(t){return Wx(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:i,done:r}=yield Ju(n.read());if(r)return yield Ju(void 0);yield yield Ju(i)}}finally{n.releaseLock()}})}function Ed(t){return G(t?.getReader)}function Ie(t){if(t instanceof K)return t;if(t!=null){if(gd(t))return UO(t);if(As(t))return zO(t);if(pd(t))return $O(t);if(bd(t))return gI(t);if(vd(t))return HO(t);if(Ed(t))return qO(t)}throw yd(t)}function UO(t){return new K(e=>{let n=t[xs]();if(G(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function zO(t){return new K(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function $O(t){return new K(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,sd)})}function HO(t){return new K(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function gI(t){return new K(e=>{GO(t,e).catch(n=>e.error(n))})}function qO(t){return gI(wd(t))}function GO(t,e){var n,i,r,o;return Gx(this,void 0,void 0,function*(){try{for(n=Kx(t);i=yield n.next(),!i.done;){let s=i.value;if(e.next(s),e.closed)return}}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=n.return)&&(yield o.call(n))}finally{if(r)throw r.error}}e.complete()})}function zt(t,e,n,i=0,r=!1){let o=e.schedule(function(){n(),r?t.add(this.schedule(null,i)):this.unsubscribe()},i);if(t.add(o),!r)return o}function In(t,e=0){return X((n,i)=>{n.subscribe(Y(i,r=>zt(i,t,()=>i.next(r),e),()=>zt(i,t,()=>i.complete(),e),r=>zt(i,t,()=>i.error(r),e)))})}function Ln(t,e=0){return X((n,i)=>{i.add(t.schedule(()=>n.subscribe(i),e))})}function bI(t,e){return Ie(t).pipe(Ln(e),In(e))}function yI(t,e){return Ie(t).pipe(Ln(e),In(e))}function _I(t,e){return new K(n=>{let i=0;return e.schedule(function(){i===t.length?n.complete():(n.next(t[i++]),n.closed||this.schedule())})})}function vI(t,e){return new K(n=>{let i;return zt(n,e,()=>{i=t[_d](),zt(n,e,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){n.error(s);return}o?n.complete():n.next(r)},0,!0)}),()=>G(i?.return)&&i.return()})}function xd(t,e){if(!t)throw new Error("Iterable cannot be null");return new K(n=>{zt(n,e,()=>{let i=t[Symbol.asyncIterator]();zt(n,e,()=>{i.next().then(r=>{r.done?n.complete():n.next(r.value)})},0,!0)})})}function wI(t,e){return xd(wd(t),e)}function EI(t,e){if(t!=null){if(gd(t))return bI(t,e);if(As(t))return _I(t,e);if(pd(t))return yI(t,e);if(bd(t))return xd(t,e);if(vd(t))return vI(t,e);if(Ed(t))return wI(t,e)}throw yd(t)}function fe(t,e){return e?EI(t,e):Ie(t)}function V(...t){let e=ii(t);return fe(t,e)}function Ms(t,e){let n=G(t)?t:()=>t,i=r=>r.error(n());return new K(e?r=>e.schedule(i,0,r):i)}function Id(t){return!!t&&(t instanceof K||G(t.lift)&&G(t.subscribe))}var Ni=vs(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function xI(t){return t instanceof Date&&!isNaN(t)}function B(t,e){return X((n,i)=>{let r=0;n.subscribe(Y(i,o=>{i.next(t.call(e,o,r++))}))})}var{isArray:WO}=Array;function KO(t,e){return WO(e)?t(...e):t(e)}function Rs(t){return B(e=>KO(t,e))}var{isArray:QO}=Array,{getPrototypeOf:YO,prototype:ZO,keys:XO}=Object;function Dd(t){if(t.length===1){let e=t[0];if(QO(e))return{args:e,keys:null};if(JO(e)){let n=XO(e);return{args:n.map(i=>e[i]),keys:n}}}return{args:t,keys:null}}function JO(t){return t&&typeof t=="object"&&YO(t)===ZO}function Cd(t,e){return t.reduce((n,i,r)=>(n[i]=e[r],n),{})}function ao(...t){let e=ii(t),n=md(t),{args:i,keys:r}=Dd(t);if(i.length===0)return fe([],e);let o=new K(eF(i,e,r?s=>Cd(r,s):Nt));return n?o.pipe(Rs(n)):o}function eF(t,e,n=Nt){return i=>{II(e,()=>{let{length:r}=t,o=new Array(r),s=r,a=r;for(let c=0;c<r;c++)II(e,()=>{let l=fe(t[c],e),u=!1;l.subscribe(Y(i,d=>{o[c]=d,u||(u=!0,a--),a||i.next(n(o.slice()))},()=>{--s||i.complete()}))},i)},i)}}function II(t,e,n){t?zt(n,t,e):e()}function DI(t,e,n,i,r,o,s,a){let c=[],l=0,u=0,d=!1,h=()=>{d&&!c.length&&!l&&e.complete()},f=p=>l<i?m(p):c.push(p),m=p=>{o&&e.next(p),l++;let g=!1;Ie(n(p,u++)).subscribe(Y(e,w=>{r?.(w),o?f(w):e.next(w)},()=>{g=!0},void 0,()=>{if(g)try{for(l--;c.length&&l<i;){let w=c.shift();s?zt(e,s,()=>m(w)):m(w)}h()}catch(w){e.error(w)}}))};return t.subscribe(Y(e,f,()=>{d=!0,h()})),()=>{a?.()}}function He(t,e,n=1/0){return G(e)?He((i,r)=>B((o,s)=>e(i,o,r,s))(Ie(t(i,r))),n):(typeof e=="number"&&(n=e),X((i,r)=>DI(i,r,t,n)))}function rr(t=1/0){return He(Nt,t)}function CI(){return rr(1)}function or(...t){return CI()(fe(t,ii(t)))}function Td(t){return new K(e=>{Ie(t()).subscribe(e)})}function pg(...t){let e=md(t),{args:n,keys:i}=Dd(t),r=new K(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let u=0;u<s;u++){let d=!1;Ie(n[u]).subscribe(Y(o,h=>{d||(d=!0,l--),a[u]=h},()=>c--,void 0,()=>{(!c||!d)&&(l||o.next(i?Cd(i,a):a),o.complete())}))}});return e?r.pipe(Rs(e)):r}var tF=["addListener","removeListener"],nF=["addEventListener","removeEventListener"],iF=["on","off"];function sr(t,e,n,i){if(G(n)&&(i=n,n=void 0),i)return sr(t,e,n).pipe(Rs(i));let[r,o]=sF(t)?nF.map(s=>a=>t[s](e,a,n)):rF(t)?tF.map(TI(t,e)):oF(t)?iF.map(TI(t,e)):[];if(!r&&As(t))return He(s=>sr(s,e,n))(Ie(t));if(!r)throw new TypeError("Invalid event target");return new K(s=>{let a=(...c)=>s.next(1<c.length?c:c[0]);return r(a),()=>o(a)})}function TI(t,e){return n=>i=>t[n](e,i)}function rF(t){return G(t.addListener)&&G(t.removeListener)}function oF(t){return G(t.on)&&G(t.off)}function sF(t){return G(t.addEventListener)&&G(t.removeEventListener)}function _c(t=0,e,n=hg){let i=-1;return e!=null&&(fd(e)?n=e:i=e),new K(r=>{let o=xI(t)?+t-n.now():t;o<0&&(o=0);let s=0;return n.schedule(function(){r.closed||(r.next(s++),0<=i?this.schedule(void 0,i):r.complete())},o)})}function co(...t){let e=ii(t),n=pI(t,1/0),i=t;return i.length?i.length===1?Ie(i[0]):rr(n)(fe(i,e)):Tt}function Pe(t,e){return X((n,i)=>{let r=0;n.subscribe(Y(i,o=>t.call(e,o,r++)&&i.next(o)))})}function SI(t){return X((e,n)=>{let i=!1,r=null,o=null,s=!1,a=()=>{if(o?.unsubscribe(),o=null,i){i=!1;let l=r;r=null,n.next(l)}s&&n.complete()},c=()=>{o=null,s&&n.complete()};e.subscribe(Y(n,l=>{i=!0,r=l,o||Ie(t(l)).subscribe(o=Y(n,a,c))},()=>{s=!0,(!i||!o||o.closed)&&n.complete()}))})}function gg(t,e=ni){return SI(()=>_c(t,e))}function ar(t){return X((e,n)=>{let i=null,r=!1,o;i=e.subscribe(Y(n,void 0,void 0,s=>{o=Ie(t(s,ar(t)(e))),i?(i.unsubscribe(),i=null,o.subscribe(n)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(n))})}function AI(t,e,n,i,r){return(o,s)=>{let a=n,c=e,l=0;o.subscribe(Y(s,u=>{let d=l++;c=a?t(c,u,d):(a=!0,u),i&&s.next(c)},r&&(()=>{a&&s.next(c),s.complete()})))}}function cr(t,e){return G(e)?He(t,e,1):He(t,1)}function lo(t,e=ni){return X((n,i)=>{let r=null,o=null,s=null,a=()=>{if(r){r.unsubscribe(),r=null;let l=o;o=null,i.next(l)}};function c(){let l=s+t,u=e.now();if(u<l){r=this.schedule(void 0,l-u),i.add(r);return}a()}n.subscribe(Y(i,l=>{o=l,s=e.now(),r||(r=e.schedule(c,t),i.add(r))},()=>{a(),i.complete()},void 0,()=>{o=r=null}))})}function lr(t){return X((e,n)=>{let i=!1;e.subscribe(Y(n,r=>{i=!0,n.next(r)},()=>{i||n.next(t),n.complete()}))})}function $t(t){return t<=0?()=>Tt:X((e,n)=>{let i=0;e.subscribe(Y(n,r=>{++i<=t&&(n.next(r),t<=i&&n.complete())}))})}function bg(t){return B(()=>t)}function ur(t,e=Nt){return t=t??aF,X((n,i)=>{let r,o=!0;n.subscribe(Y(i,s=>{let a=e(s);(o||!t(r,a))&&(o=!1,r=a,i.next(s))}))})}function aF(t,e){return t===e}function Sd(t=cF){return X((e,n)=>{let i=!1;e.subscribe(Y(n,r=>{i=!0,n.next(r)},()=>i?n.complete():n.error(t())))})}function cF(){return new Ni}function ks(t){return X((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function on(t,e){let n=arguments.length>=2;return i=>i.pipe(t?Pe((r,o)=>t(r,o,i)):Nt,$t(1),n?lr(e):Sd(()=>new Ni))}function Ps(t){return t<=0?()=>Tt:X((e,n)=>{let i=[];e.subscribe(Y(n,r=>{i.push(r),t<i.length&&i.shift()},()=>{for(let r of i)n.next(r);n.complete()},void 0,()=>{i=null}))})}function yg(t,e){let n=arguments.length>=2;return i=>i.pipe(t?Pe((r,o)=>t(r,o,i)):Nt,Ps(1),n?lr(e):Sd(()=>new Ni))}function Ns(){return X((t,e)=>{let n,i=!1;t.subscribe(Y(e,r=>{let o=n;n=r,i&&e.next([o,r]),i=!0}))})}function uo(t,e){return X(AI(t,e,arguments.length>=2,!0))}function MI(t={}){let{connector:e=()=>new le,resetOnError:n=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=t;return o=>{let s,a,c,l=0,u=!1,d=!1,h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),s=c=void 0,u=d=!1},m=()=>{let p=s;f(),p?.unsubscribe()};return X((p,g)=>{l++,!d&&!u&&h();let w=c=c??e();g.add(()=>{l--,l===0&&!d&&!u&&(a=_g(m,r))}),w.subscribe(g),!s&&l>0&&(s=new Pi({next:A=>w.next(A),error:A=>{d=!0,h(),a=_g(f,n,A),w.error(A)},complete:()=>{u=!0,h(),a=_g(f,i),w.complete()}}),Ie(p).subscribe(s))})(o)}}function _g(t,e,...n){if(e===!0){t();return}if(e===!1)return;let i=new Pi({next:()=>{i.unsubscribe(),t()}});return Ie(e(...n)).subscribe(i)}function vc(t,e,n){let i,r=!1;return t&&typeof t=="object"?{bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:n}=t:i=t??1/0,MI({connector:()=>new ld(i,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function ho(t){return Pe((e,n)=>t<=n)}function Ht(...t){let e=ii(t);return X((n,i)=>{(e?or(t,n,e):or(t,n)).subscribe(i)})}function Re(t,e){return X((n,i)=>{let r=null,o=0,s=!1,a=()=>s&&!r&&i.complete();n.subscribe(Y(i,c=>{r?.unsubscribe();let l=0,u=o++;Ie(t(c,u)).subscribe(r=Y(i,d=>i.next(e?e(c,d,u,l++):d),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function Ad(t,e){return G(e)?Re(()=>t,e):Re(()=>t)}function qt(t){return X((e,n)=>{Ie(t).subscribe(Y(n,()=>n.complete(),gc)),!n.closed&&e.subscribe(n)})}function Fe(t,e,n){let i=G(t)||e||n?{next:t,error:e,complete:n}:t;return i?X((r,o)=>{var s;(s=i.subscribe)===null||s===void 0||s.call(i);let a=!0;r.subscribe(Y(o,c=>{var l;(l=i.next)===null||l===void 0||l.call(i,c),o.next(c)},()=>{var c;a=!1,(c=i.complete)===null||c===void 0||c.call(i),o.complete()},c=>{var l;a=!1,(l=i.error)===null||l===void 0||l.call(i,c),o.error(c)},()=>{var c,l;a&&((c=i.unsubscribe)===null||c===void 0||c.call(i)),(l=i.finalize)===null||l===void 0||l.call(i)}))}):Nt}function Ae(t){for(let e in t)if(t[e]===Ae)return e;throw Error("Could not find renamed property on target object.")}function Md(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Lt(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Lt).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function Lg(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var lF=Ae({__forward_ref__:Ae});function xo(t){return t.__forward_ref__=xo,t.toString=function(){return Lt(this())},t}function Ot(t){return pD(t)?t():t}function pD(t){return typeof t=="function"&&t.hasOwnProperty(lF)&&t.__forward_ref__===xo}function gD(t){return t&&!!t.\u0275providers}var uF="https://g.co/ng/security#xss",D=class extends Error{constructor(e,n){super(fh(e,n)),this.code=e}};function fh(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}var dF=Ae({\u0275cmp:Ae}),hF=Ae({\u0275dir:Ae}),fF=Ae({\u0275pipe:Ae}),mF=Ae({\u0275mod:Ae}),$d=Ae({\u0275fac:Ae}),Ec=Ae({__NG_ELEMENT_ID__:Ae}),RI=Ae({__NG_ENV_ID__:Ae});function $b(t){return typeof t=="string"?t:t==null?"":String(t)}function pF(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():$b(t)}function gF(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new D(-200,`Circular dependency in DI detected for ${t}${n}`)}function Hb(t,e){let n=e?` in ${e}`:"";throw new D(-201,!1)}function bF(t,e){t==null&&yF(e,t,null,"!=")}function yF(t,e,n,i){throw new Error(`ASSERTION ERROR: ${t}`+(i==null?"":` [Expected=> ${n} ${i} ${e} <=Actual]`))}function R(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ee(t){return{providers:t.providers||[],imports:t.imports||[]}}function mh(t){return kI(t,yD)||kI(t,_D)}function bD(t){return mh(t)!==null}function kI(t,e){return t.hasOwnProperty(e)?t[e]:null}function _F(t){let e=t&&(t[yD]||t[_D]);return e||null}function PI(t){return t&&(t.hasOwnProperty(NI)||t.hasOwnProperty(vF))?t[NI]:null}var yD=Ae({\u0275prov:Ae}),NI=Ae({\u0275inj:Ae}),_D=Ae({ngInjectableDef:Ae}),vF=Ae({ngInjectorDef:Ae}),ce=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(ce||{}),Vg;function vD(){return Vg}function Dn(t){let e=Vg;return Vg=t,e}function wD(t,e,n){let i=mh(t);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(n&ce.Optional)return null;if(e!==void 0)return e;Hb(Lt(t),"Injector")}var sn=globalThis;var M=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=R({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};var wF={},Ic=wF,jg="__NG_DI_FLAG__",Hd="ngTempTokenPath",EF="ngTokenPath",xF=/\n/gm,IF="\u0275",OI="__source",js;function DF(){return js}function dr(t){let e=js;return js=t,e}function CF(t,e=ce.Default){if(js===void 0)throw new D(-203,!1);return js===null?wD(t,void 0,e):js.get(t,e&ce.Optional?null:void 0,e)}function v(t,e=ce.Default){return(vD()||CF)(Ot(t),e)}function I(t,e=ce.Default){return v(t,ph(e))}function ph(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Bg(t){let e=[];for(let n=0;n<t.length;n++){let i=Ot(t[n]);if(Array.isArray(i)){if(i.length===0)throw new D(900,!1);let r,o=ce.Default;for(let s=0;s<i.length;s++){let a=i[s],c=TF(a);typeof c=="number"?c===-1?r=a.token:o|=c:r=a}e.push(v(r,o))}else e.push(v(i))}return e}function ED(t,e){return t[jg]=e,t.prototype[jg]=e,t}function TF(t){return t[jg]}function SF(t,e,n,i){let r=t[Hd];throw e[OI]&&r.unshift(e[OI]),t.message=AF(`
`+t.message,r,n,i),t[EF]=r,t[Hd]=null,t}function AF(t,e,n,i=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==IF?t.slice(2):t;let r=Lt(e);if(Array.isArray(e))r=e.map(Lt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Lt(a)))}r=`{${o.join(", ")}}`}return`${n}${i?"("+i+")":""}[${r}]: ${t.replace(xF,`
  `)}`}function Fc(t){return{toString:t}.toString()}var xD=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(xD||{}),ci=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(ci||{}),Us={},Ft=[];function ID(t,e,n){let i=t.length;for(;;){let r=t.indexOf(e,n);if(r===-1)return r;if(r===0||t.charCodeAt(r-1)<=32){let o=e.length;if(r+o===i||t.charCodeAt(r+o)<=32)return r}n=r+1}}function Ug(t,e,n){let i=0;for(;i<n.length;){let r=n[i];if(typeof r=="number"){if(r!==0)break;i++;let o=n[i++],s=n[i++],a=n[i++];t.setAttribute(e,s,a,o)}else{let o=r,s=n[++i];RF(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),i++}}return i}function MF(t){return t===3||t===4||t===6}function RF(t){return t.charCodeAt(0)===64}function Dc(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let i=0;i<e.length;i++){let r=e[i];typeof r=="number"?n=r:n===0||(n===-1||n===2?FI(t,n,r,null,e[++i]):FI(t,n,r,null,null))}}return t}function FI(t,e,n,i,r){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){if(i===null){r!==null&&(t[o+1]=r);return}else if(i===t[o+1]){t[o+2]=r;return}}o++,i!==null&&o++,r!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i),r!==null&&t.splice(o++,0,r)}var DD="ng-template";function kF(t,e,n){let i=0,r=!0;for(;i<t.length;){let o=t[i++];if(typeof o=="string"&&r){let s=t[i++];if(n&&o==="class"&&ID(s.toLowerCase(),e,0)!==-1)return!0}else if(o===1){for(;i<t.length&&typeof(o=t[i++])=="string";)if(o.toLowerCase()===e)return!0;return!1}else typeof o=="number"&&(r=!1)}return!1}function CD(t){return t.type===4&&t.value!==DD}function PF(t,e,n){let i=t.type===4&&!n?DD:t.value;return e===i}function NF(t,e,n){let i=4,r=t.attrs||[],o=LF(r),s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!Vn(i)&&!Vn(c))return!1;if(s&&Vn(c))continue;s=!1,i=c|i&1;continue}if(!s)if(i&4){if(i=2|i&1,c!==""&&!PF(t,c,n)||c===""&&e.length===1){if(Vn(i))return!1;s=!0}}else{let l=i&8?c:e[++a];if(i&8&&t.attrs!==null){if(!kF(t.attrs,l,n)){if(Vn(i))return!1;s=!0}continue}let u=i&8?"class":c,d=OF(u,r,CD(t),n);if(d===-1){if(Vn(i))return!1;s=!0;continue}if(l!==""){let h;d>o?h="":h=r[d+1].toLowerCase();let f=i&8?h:null;if(f&&ID(f,l,0)!==-1||i&2&&l!==h){if(Vn(i))return!1;s=!0}}}}return Vn(i)||s}function Vn(t){return(t&1)===0}function OF(t,e,n,i){if(e===null)return-1;let r=0;if(i||!n){let o=!1;for(;r<e.length;){let s=e[r];if(s===t)return r;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++r];for(;typeof a=="string";)a=e[++r];continue}else{if(s===4)break;if(s===0){r+=4;continue}}r+=o?1:2}return-1}else return VF(e,t)}function TD(t,e,n=!1){for(let i=0;i<e.length;i++)if(NF(t,e[i],n))return!0;return!1}function FF(t){let e=t.attrs;if(e!=null){let n=e.indexOf(5);if(!(n&1))return e[n+1]}return null}function LF(t){for(let e=0;e<t.length;e++){let n=t[e];if(MF(n))return e}return t.length}function VF(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let i=t[n];if(typeof i=="number")return-1;if(i===e)return n;n++}return-1}function jF(t,e){e:for(let n=0;n<e.length;n++){let i=e[n];if(t.length===i.length){for(let r=0;r<t.length;r++)if(t[r]!==i[r])continue e;return!0}}return!1}function LI(t,e){return t?":not("+e.trim()+")":e}function BF(t){let e=t[0],n=1,i=2,r="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(i&2){let a=t[++n];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else i&8?r+="."+s:i&4&&(r+=" "+s);else r!==""&&!Vn(s)&&(e+=LI(o,r),r=""),i=s,o=o||!Vn(i);n++}return r!==""&&(e+=LI(o,r)),e}function UF(t){return t.map(BF).join(",")}function zF(t){let e=[],n=[],i=1,r=2;for(;i<t.length;){let o=t[i];if(typeof o=="string")r===2?o!==""&&e.push(o,t[++i]):r===8&&n.push(o);else{if(!Vn(r))break;r=o}i++}return{attrs:e,classes:n}}function tt(t){return Fc(()=>{let e=kD(t),n=we(T({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===xD.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||ci.Emulated,styles:t.styles||Ft,_:null,schemas:t.schemas||null,tView:null,id:""});PD(n);let i=t.dependencies;return n.directiveDefs=jI(i,!1),n.pipeDefs=jI(i,!0),n.id=qF(n),n})}function $F(t){return fr(t)||SD(t)}function HF(t){return t!==null}function te(t){return Fc(()=>({type:t.type,bootstrap:t.bootstrap||Ft,declarations:t.declarations||Ft,imports:t.imports||Ft,exports:t.exports||Ft,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function VI(t,e){if(t==null)return Us;let n={};for(let i in t)if(t.hasOwnProperty(i)){let r=t[i],o=r;Array.isArray(r)&&(o=r[1],r=r[0]),n[r]=i,e&&(e[r]=o)}return n}function _e(t){return Fc(()=>{let e=kD(t);return PD(e),e})}function fr(t){return t[dF]||null}function SD(t){return t[hF]||null}function AD(t){return t[fF]||null}function MD(t){let e=fr(t)||SD(t)||AD(t);return e!==null?e.standalone:!1}function RD(t,e){let n=t[mF]||null;if(!n&&e===!0)throw new Error(`Type ${Lt(t)} does not have '\u0275mod' property.`);return n}function kD(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Us,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Ft,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:VI(t.inputs,e),outputs:VI(t.outputs),debugInfo:null}}function PD(t){t.features?.forEach(e=>e(t))}function jI(t,e){if(!t)return null;let n=e?AD:$F;return()=>(typeof t=="function"?t():t).map(i=>n(i)).filter(HF)}function qF(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let r of n)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483647+1,"c"+e}var an=0,J=1,Q=2,Qe=3,Bn=4,ln=5,Un=6,Cc=7,St=8,zs=9,mr=10,Le=11,Tc=12,BI=13,Qs=14,Gt=15,Lc=16,Os=17,si=18,gh=19,ND=20,hr=21,vg=22,mo=23,mt=25,OD=1,Sc=6,Oi=7,qd=8,$s=9,wt=10,Hs=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t[t.HasChildViewsToRefresh=4]="HasChildViewsToRefresh",t}(Hs||{});function ai(t){return Array.isArray(t)&&typeof t[OD]=="object"}function Cn(t){return Array.isArray(t)&&t[OD]===!0}function FD(t){return(t.flags&4)!==0}function Vc(t){return t.componentOffset>-1}function qb(t){return(t.flags&1)===1}function pr(t){return!!t.template}function LD(t){return(t[Q]&512)!==0}function qs(t,e){let n=t.hasOwnProperty($d);return n?t[$d]:null}var zg=class{constructor(e,n,i){this.previousValue=e,this.currentValue=n,this.firstChange=i}isFirstChange(){return this.firstChange}};function fi(){return VD}function VD(t){return t.type.prototype.ngOnChanges&&(t.setInput=WF),GF}fi.ngInherit=!0;function GF(){let t=BD(this),e=t?.current;if(e){let n=t.previous;if(n===Us)t.previous=e;else for(let i in e)n[i]=e[i];t.current=null,this.ngOnChanges(e)}}function WF(t,e,n,i){let r=this.declaredInputs[n],o=BD(t)||KF(t,{previous:Us,current:null}),s=o.current||(o.current={}),a=o.previous,c=a[r];s[r]=new zg(c&&c.currentValue,e,a===Us),t[i]=e}var jD="__ngSimpleChanges__";function BD(t){return t[jD]||null}function KF(t,e){return t[jD]=e}var UI=null;var ri=function(t,e,n){UI?.(t,e,n)},QF="svg",YF="math",ZF=!1;function XF(){return ZF}function zn(t){for(;Array.isArray(t);)t=t[an];return t}function UD(t,e){return zn(e[t])}function un(t,e){return zn(e[t.index])}function Gb(t,e){return t.data[e]}function JF(t,e){return t[e]}function yr(t,e){let n=e[t];return ai(n)?n:n[an]}function eL(t){return(t[Q]&4)===4}function Wb(t){return(t[Q]&128)===128}function tL(t){return Cn(t[Qe])}function Gd(t,e){return e==null?null:t[e]}function zD(t){t[Os]=0}function nL(t){t[Q]&1024||(t[Q]|=1024,Wb(t)&&Ac(t))}function iL(t,e){for(;t>0;)e=e[Qs],t--;return e}function $D(t){return t[Q]&9216||t[mo]?.dirty}function $g(t){$D(t)?Ac(t):t[Q]&64&&(XF()?(t[Q]|=1024,Ac(t)):t[mr].changeDetectionScheduler?.notify())}function Ac(t){t[mr].changeDetectionScheduler?.notify();let e=t[Qe];for(;e!==null&&!(Cn(e)&&e[Q]&Hs.HasChildViewsToRefresh||ai(e)&&e[Q]&8192);){if(Cn(e))e[Q]|=Hs.HasChildViewsToRefresh;else if(e[Q]|=8192,!Wb(e))break;e=e[Qe]}}function HD(t,e){if((t[Q]&256)===256)throw new D(911,!1);t[hr]===null&&(t[hr]=[]),t[hr].push(e)}function rL(t,e){if(t[hr]===null)return;let n=t[hr].indexOf(e);n!==-1&&t[hr].splice(n,1)}var ae={lFrame:eC(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function oL(){return ae.lFrame.elementDepthCount}function sL(){ae.lFrame.elementDepthCount++}function aL(){ae.lFrame.elementDepthCount--}function qD(){return ae.bindingsEnabled}function Ys(){return ae.skipHydrationRootTNode!==null}function cL(t){return ae.skipHydrationRootTNode===t}function lL(t){ae.skipHydrationRootTNode=t}function uL(){ae.skipHydrationRootTNode=null}function me(){return ae.lFrame.lView}function At(){return ae.lFrame.tView}function jc(t){return ae.lFrame.contextLView=t,t[St]}function Bc(t){return ae.lFrame.contextLView=null,t}function dn(){let t=GD();for(;t!==null&&t.type===64;)t=t.parent;return t}function GD(){return ae.lFrame.currentTNode}function dL(){let t=ae.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Uc(t,e){let n=ae.lFrame;n.currentTNode=t,n.isParent=e}function WD(){return ae.lFrame.isParent}function KD(){ae.lFrame.isParent=!1}function hL(){return ae.lFrame.contextLView}function QD(){let t=ae.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function fL(t){return ae.lFrame.bindingIndex=t}function zc(){return ae.lFrame.bindingIndex++}function YD(t){let e=ae.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function mL(){return ae.lFrame.inI18n}function pL(t,e){let n=ae.lFrame;n.bindingIndex=n.bindingRootIndex=t,Hg(e)}function gL(){return ae.lFrame.currentDirectiveIndex}function Hg(t){ae.lFrame.currentDirectiveIndex=t}function bL(t){let e=ae.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function ZD(){return ae.lFrame.currentQueryIndex}function Kb(t){ae.lFrame.currentQueryIndex=t}function yL(t){let e=t[J];return e.type===2?e.declTNode:e.type===1?t[ln]:null}function XD(t,e,n){if(n&ce.SkipSelf){let r=e,o=t;for(;r=r.parent,r===null&&!(n&ce.Host);)if(r=yL(o),r===null||(o=o[Qs],r.type&10))break;if(r===null)return!1;e=r,t=o}let i=ae.lFrame=JD();return i.currentTNode=e,i.lView=t,!0}function Qb(t){let e=JD(),n=t[J];ae.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function JD(){let t=ae.lFrame,e=t===null?null:t.child;return e===null?eC(t):e}function eC(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function tC(){let t=ae.lFrame;return ae.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var nC=tC;function Yb(){let t=tC();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function _L(t){return(ae.lFrame.contextLView=iL(t,ae.lFrame.contextLView))[St]}function _r(){return ae.lFrame.selectedIndex}function po(t){ae.lFrame.selectedIndex=t}function iC(){let t=ae.lFrame;return Gb(t.tView,t.selectedIndex)}function rC(){return ae.lFrame.currentNamespace}var oC=!0;function Zb(){return oC}function vr(t){oC=t}function vL(t,e,n){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(i){let s=VD(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}r&&(n.preOrderHooks??=[]).push(0-t,r),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function Xb(t,e){for(let n=e.directiveStart,i=e.directiveEnd;n<i;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),u!=null&&(t.destroyHooks??=[]).push(n,u)}}function Ld(t,e,n){sC(t,e,3,n)}function Vd(t,e,n,i){(t[Q]&3)===n&&sC(t,e,n,i)}function wg(t,e){let n=t[Q];(n&3)===e&&(n&=16383,n+=1,t[Q]=n)}function sC(t,e,n,i){let r=i!==void 0?t[Os]&65535:0,o=i??-1,s=e.length-1,a=0;for(let c=r;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],i!=null&&a>=i)break}else e[c]<0&&(t[Os]+=65536),(a<o||o==-1)&&(wL(t,n,e,c),t[Os]=(t[Os]&4294901760)+c+2),c++}function zI(t,e){ri(4,t,e);let n=vt(null);try{e.call(t)}finally{vt(n),ri(5,t,e)}}function wL(t,e,n,i){let r=n[i]<0,o=n[i+1],s=r?-n[i]:n[i],a=t[s];r?t[Q]>>14<t[Os]>>16&&(t[Q]&3)===e&&(t[Q]+=16384,zI(a,o)):zI(a,o)}var Bs=-1,go=class{constructor(e,n,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=i}};function EL(t){return t instanceof go}function xL(t){return(t.flags&8)!==0}function IL(t){return(t.flags&16)!==0}function aC(t){return t!==Bs}function Wd(t){let e=t&32767;return t&32767}function DL(t){return t>>16}function Kd(t,e){let n=DL(t),i=e;for(;n>0;)i=i[Qs],n--;return i}var qg=!0;function $I(t){let e=qg;return qg=t,e}var CL=256,cC=CL-1,lC=5,TL=0,oi={};function SL(t,e,n){let i;typeof n=="string"?i=n.charCodeAt(0)||0:n.hasOwnProperty(Ec)&&(i=n[Ec]),i==null&&(i=n[Ec]=TL++);let r=i&cC,o=1<<r;e.data[t+(r>>lC)]|=o}function Qd(t,e){let n=uC(t,e);if(n!==-1)return n;let i=e[J];i.firstCreatePass&&(t.injectorIndex=e.length,Eg(i.data,t),Eg(e,null),Eg(i.blueprint,null));let r=Jb(t,e),o=t.injectorIndex;if(aC(r)){let s=Wd(r),a=Kd(r,e),c=a[J].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=r,o}function Eg(t,e){t.push(0,0,0,0,0,0,0,0,e)}function uC(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Jb(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,i=null,r=e;for(;r!==null;){if(i=pC(r),i===null)return Bs;if(n++,r=r[Qs],i.injectorIndex!==-1)return i.injectorIndex|n<<16}return Bs}function Gg(t,e,n){SL(t,e,n)}function dC(t,e,n){if(n&ce.Optional||t!==void 0)return t;Hb(e,"NodeInjector")}function hC(t,e,n,i){if(n&ce.Optional&&i===void 0&&(i=null),!(n&(ce.Self|ce.Host))){let r=t[zs],o=Dn(void 0);try{return r?r.get(e,i,n&ce.Optional):wD(e,i,n&ce.Optional)}finally{Dn(o)}}return dC(i,e,n)}function fC(t,e,n,i=ce.Default,r){if(t!==null){if(e[Q]&2048&&!(i&ce.Self)){let s=kL(t,e,n,i,oi);if(s!==oi)return s}let o=mC(t,e,n,i,oi);if(o!==oi)return o}return hC(e,n,i,r)}function mC(t,e,n,i,r){let o=ML(n);if(typeof o=="function"){if(!XD(e,t,i))return i&ce.Host?dC(r,n,i):hC(e,n,i,r);try{let s;if(s=o(i),s==null&&!(i&ce.Optional))Hb(n);else return s}finally{nC()}}else if(typeof o=="number"){let s=null,a=uC(t,e),c=Bs,l=i&ce.Host?e[Gt][ln]:null;for((a===-1||i&ce.SkipSelf)&&(c=a===-1?Jb(t,e):e[a+8],c===Bs||!qI(i,!1)?a=-1:(s=e[J],a=Wd(c),e=Kd(c,e)));a!==-1;){let u=e[J];if(HI(o,a,u.data)){let d=AL(a,e,n,s,i,l);if(d!==oi)return d}c=e[a+8],c!==Bs&&qI(i,e[J].data[a+8]===l)&&HI(o,a,e)?(s=u,a=Wd(c),e=Kd(c,e)):a=-1}}return r}function AL(t,e,n,i,r,o){let s=e[J],a=s.data[t+8],c=i==null?Vc(a)&&qg:i!=s&&(a.type&3)!==0,l=r&ce.Host&&o===a,u=jd(a,s,n,c,l);return u!==null?bo(e,s,u,a):oi}function jd(t,e,n,i,r){let o=t.providerIndexes,s=e.data,a=o&1048575,c=t.directiveStart,l=t.directiveEnd,u=o>>20,d=i?a:a+u,h=r?a+u:l;for(let f=d;f<h;f++){let m=s[f];if(f<c&&n===m||f>=c&&m.type===n)return f}if(r){let f=s[c];if(f&&pr(f)&&f.type===n)return c}return null}function bo(t,e,n,i){let r=t[n],o=e.data;if(EL(r)){let s=r;s.resolving&&gF(pF(o[n]));let a=$I(s.canSeeViewProviders);s.resolving=!0;let c,l=s.injectImpl?Dn(s.injectImpl):null,u=XD(t,i,ce.Default);try{r=t[n]=s.factory(void 0,o,t,i),e.firstCreatePass&&n>=i.directiveStart&&vL(n,o[n],e)}finally{l!==null&&Dn(l),$I(a),s.resolving=!1,nC()}}return r}function ML(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Ec)?t[Ec]:void 0;return typeof e=="number"?e>=0?e&cC:RL:e}function HI(t,e,n){let i=1<<t;return!!(n[e+(t>>lC)]&i)}function qI(t,e){return!(t&ce.Self)&&!(t&ce.Host&&e)}var fo=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,i){return fC(this._tNode,this._lView,e,ph(i),n)}};function RL(){return new fo(dn(),me())}function Zs(t){return Fc(()=>{let e=t.prototype.constructor,n=e[$d]||Wg(e),i=Object.prototype,r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==i;){let o=r[$d]||Wg(r);if(o&&o!==n)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function Wg(t){return pD(t)?()=>{let e=Wg(Ot(t));return e&&e()}:qs(t)}function kL(t,e,n,i,r){let o=t,s=e;for(;o!==null&&s!==null&&s[Q]&2048&&!(s[Q]&512);){let a=mC(o,s,n,i|ce.Self,oi);if(a!==oi)return a;let c=o.parent;if(!c){let l=s[ND];if(l){let u=l.get(n,oi,i);if(u!==oi)return u}c=pC(s),s=s[Qs]}o=c}return r}function pC(t){let e=t[J],n=e.type;return n===2?e.declTNode:n===1?t[ln]:null}var Rd="__parameters__";function PL(t){return function(...n){if(t){let i=t(...n);for(let r in i)this[r]=i[r]}}}function gC(t,e,n){return Fc(()=>{let i=PL(e);function r(...o){if(this instanceof r)return i.apply(this,o),this;let s=new r(...o);return a.annotation=s,a;function a(c,l,u){let d=c.hasOwnProperty(Rd)?c[Rd]:Object.defineProperty(c,Rd,{value:[]})[Rd];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),c}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r})}function NL(t){let e=sn.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function OL(t){return typeof t=="function"}function FL(t,e,n){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++){let r=t[i],o=e[i];if(n&&(r=n(r),o=n(o)),o!==r)return!1}return!0}function LL(t){return t.flat(Number.POSITIVE_INFINITY)}function ey(t,e){t.forEach(n=>Array.isArray(n)?ey(n,e):e(n))}function bC(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Yd(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function yC(t,e){let n=[];for(let i=0;i<t;i++)n.push(e);return n}function VL(t,e,n,i){let r=t.length;if(r==e)t.push(n,i);else if(r===1)t.push(i,t[0]),t[0]=n;else{for(r--,t.push(t[r-1],t[r]);r>e;){let o=r-2;t[r]=t[o],r--}t[e]=n,t[e+1]=i}}function ty(t,e,n){let i=$c(t,e);return i>=0?t[i|1]=n:(i=~i,VL(t,i,e,n)),i}function xg(t,e){let n=$c(t,e);if(n>=0)return t[n|1]}function $c(t,e){return jL(t,e,1)}function jL(t,e,n){let i=0,r=t.length>>n;for(;r!==i;){let o=i+(r-i>>1),s=t[o<<n];if(e===s)return o<<n;s>e?r=o:i=o+1}return~(r<<n)}var Io=ED(gC("Optional"),8);var bh=ED(gC("SkipSelf"),4);function BL(t){let e=[],n=new Map;function i(r){let o=n.get(r);if(!o){let s=t(r);n.set(r,o=s.then(HL))}return o}return Zd.forEach((r,o)=>{let s=[];r.templateUrl&&s.push(i(r.templateUrl).then(l=>{r.template=l}));let a=typeof r.styles=="string"?[r.styles]:r.styles||[];if(r.styles=a,r.styleUrl&&r.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(r.styleUrls?.length){let l=r.styles.length,u=r.styleUrls;r.styleUrls.forEach((d,h)=>{a.push(""),s.push(i(d).then(f=>{a[l+h]=f,u.splice(u.indexOf(d),1),u.length==0&&(r.styleUrls=void 0)}))})}else r.styleUrl&&s.push(i(r.styleUrl).then(l=>{a.push(l),r.styleUrl=void 0}));let c=Promise.all(s).then(()=>qL(o));e.push(c)}),zL(),Promise.all(e).then(()=>{})}var Zd=new Map,UL=new Set;function zL(){let t=Zd;return Zd=new Map,t}function $L(){return Zd.size===0}function HL(t){return typeof t=="string"?t:t.text()}function qL(t){UL.delete(t)}var yo=new M("ENVIRONMENT_INITIALIZER"),_C=new M("INJECTOR",-1),vC=new M("INJECTOR_DEF_TYPES"),Xd=class{get(e,n=Ic){if(n===Ic){let i=new Error(`NullInjectorError: No provider for ${Lt(e)}!`);throw i.name="NullInjectorError",i}return n}};function Hc(t){return{\u0275providers:t}}function GL(...t){return{\u0275providers:wC(!0,t),\u0275fromNgModule:!0}}function wC(t,...e){let n=[],i=new Set,r,o=s=>{n.push(s)};return ey(e,s=>{let a=s;Kg(a,o,[],i)&&(r||=[],r.push(a))}),r!==void 0&&EC(r,o),n}function EC(t,e){for(let n=0;n<t.length;n++){let{ngModule:i,providers:r}=t[n];ny(r,o=>{e(o,i)})}}function Kg(t,e,n,i){if(t=Ot(t),!t)return!1;let r=null,o=PI(t),s=!o&&fr(t);if(!o&&!s){let c=t.ngModule;if(o=PI(c),o)r=c;else return!1}else{if(s&&!s.standalone)return!1;r=t}let a=i.has(r);if(s){if(a)return!1;if(i.add(r),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)Kg(l,e,n,i)}}else if(o){if(o.imports!=null&&!a){i.add(r);let l;try{ey(o.imports,u=>{Kg(u,e,n,i)&&(l||=[],l.push(u))})}finally{}l!==void 0&&EC(l,e)}if(!a){let l=qs(r)||(()=>new r);e({provide:r,useFactory:l,deps:Ft},r),e({provide:vC,useValue:r,multi:!0},r),e({provide:yo,useValue:()=>v(r),multi:!0},r)}let c=o.providers;if(c!=null&&!a){let l=t;ny(c,u=>{e(u,l)})}}else return!1;return r!==t&&t.providers!==void 0}function ny(t,e){for(let n of t)gD(n)&&(n=n.\u0275providers),Array.isArray(n)?ny(n,e):e(n)}var WL=Ae({provide:String,useValue:Ae});function xC(t){return t!==null&&typeof t=="object"&&WL in t}function KL(t){return!!(t&&t.useExisting)}function QL(t){return!!(t&&t.useFactory)}function Gs(t){return typeof t=="function"}function YL(t){return!!t.useClass}var yh=new M("Set Injector scope."),Bd={},ZL={},Ig;function iy(){return Ig===void 0&&(Ig=new Xd),Ig}var cn=class{},Mc=class extends cn{get destroyed(){return this._destroyed}constructor(e,n,i,r){super(),this.parent=n,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Yg(e,s=>this.processProvider(s)),this.records.set(_C,Fs(void 0,this)),r.has("environment")&&this.records.set(cn,Fs(void 0,this));let o=this.records.get(yh);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(vC,Ft,ce.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(let n of this._ngOnDestroyHooks)n.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=dr(this),i=Dn(void 0),r;try{return e()}finally{dr(n),Dn(i)}}get(e,n=Ic,i=ce.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(RI))return e[RI](this);i=ph(i);let r,o=dr(this),s=Dn(void 0);try{if(!(i&ce.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=nV(e)&&mh(e);l&&this.injectableDefInScope(l)?c=Fs(Qg(e),Bd):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=i&ce.Self?iy():this.parent;return n=i&ce.Optional&&n===Ic?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Hd]=a[Hd]||[]).unshift(Lt(e)),o)throw a;return SF(a,e,"R3InjectorError",this.source)}else throw a}finally{Dn(s),dr(o)}}resolveInjectorInitializers(){let e=dr(this),n=Dn(void 0),i;try{let r=this.get(yo,Ft,ce.Self);for(let o of r)o()}finally{dr(e),Dn(n)}}toString(){let e=[],n=this.records;for(let i of n.keys())e.push(Lt(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new D(205,!1)}processProvider(e){e=Ot(e);let n=Gs(e)?e:Ot(e&&e.provide),i=JL(e);if(!Gs(e)&&e.multi===!0){let r=this.records.get(n);r||(r=Fs(void 0,Bd,!0),r.factory=()=>Bg(r.multi),this.records.set(n,r)),n=e,r.multi.push(e)}else{let r=this.records.get(n)}this.records.set(n,i)}hydrate(e,n){return n.value===Bd&&(n.value=ZL,n.value=n.factory()),typeof n.value=="object"&&n.value&&tV(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Ot(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Qg(t){let e=mh(t),n=e!==null?e.factory:qs(t);if(n!==null)return n;if(t instanceof M)throw new D(204,!1);if(t instanceof Function)return XL(t);throw new D(204,!1)}function XL(t){let e=t.length;if(e>0){let i=yC(e,"?");throw new D(204,!1)}let n=_F(t);return n!==null?()=>n.factory(t):()=>new t}function JL(t){if(xC(t))return Fs(void 0,t.useValue);{let e=IC(t);return Fs(e,Bd)}}function IC(t,e,n){let i;if(Gs(t)){let r=Ot(t);return qs(r)||Qg(r)}else if(xC(t))i=()=>Ot(t.useValue);else if(QL(t))i=()=>t.useFactory(...Bg(t.deps||[]));else if(KL(t))i=()=>v(Ot(t.useExisting));else{let r=Ot(t&&(t.useClass||t.provide));if(eV(t))i=()=>new r(...Bg(t.deps));else return qs(r)||Qg(r)}return i}function Fs(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function eV(t){return!!t.deps}function tV(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function nV(t){return typeof t=="function"||typeof t=="object"&&t instanceof M}function Yg(t,e){for(let n of t)Array.isArray(n)?Yg(n,e):n&&gD(n)?Yg(n.\u0275providers,e):e(n)}function Li(t,e){t instanceof Mc&&t.assertNotDestroyed();let n,i=dr(t),r=Dn(void 0);try{return e()}finally{dr(i),Dn(r)}}function iV(t){if(!vD()&&!DF())throw new D(-203,!1)}function GI(t,e=null,n=null,i){let r=DC(t,e,n,i);return r.resolveInjectorInitializers(),r}function DC(t,e=null,n=null,i,r=new Set){let o=[n||Ft,GL(t)];return i=i||(typeof t=="object"?void 0:Lt(t)),new Mc(o,e||iy(),i||null,r)}var Kt=(()=>{let e=class e{static create(i,r){if(Array.isArray(i))return GI({name:""},r,i,"");{let o=i.name??"";return GI({name:o},i.parent,i.providers,o)}}};e.THROW_IF_NOT_FOUND=Ic,e.NULL=new Xd,e.\u0275prov=R({token:e,providedIn:"any",factory:()=>v(_C)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var Zg;function CC(t){Zg=t}function _h(){if(Zg!==void 0)return Zg;if(typeof document<"u")return document;throw new D(210,!1)}var Xs=new M("AppId",{providedIn:"root",factory:()=>rV}),rV="ng",ry=new M("Platform Initializer"),Et=new M("Platform ID",{providedIn:"platform",factory:()=>"unknown"});var Qt=new M("AnimationModuleType"),qc=new M("CSP nonce",{providedIn:"root",factory:()=>_h().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function oV(t){return t.ownerDocument.body}function TC(t){return t instanceof Function?t():t}function wc(t){return(t??I(Kt)).get(Et)==="browser"}var sV="ngSkipHydration",aV="ngskiphydration";function SC(t){let e=t.mergedAttrs;if(e===null)return!1;for(let n=0;n<e.length;n+=2){let i=e[n];if(typeof i=="number")return!1;if(typeof i=="string"&&i.toLowerCase()===aV)return!0}return!1}function AC(t){return t.hasAttribute(sV)}function Jd(t){return(t.flags&128)===128}function cV(t){if(Jd(t))return!0;let e=t.parent;for(;e;){if(Jd(t)||SC(e))return!0;e=e.parent}return!1}var Fi=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Fi||{}),lV=/^>|^->|<!--|-->|--!>|<!-$/g,uV=/(<|>)/g,dV="\u200B$1\u200B";function hV(t){return t.replace(lV,e=>e.replace(uV,dV))}var MC=new Map,fV=0;function mV(){return fV++}function pV(t){MC.set(t[gh],t)}function gV(t){MC.delete(t[gh])}var WI="__ngContext__";function _o(t,e){ai(e)?(t[WI]=e[gh],pV(e)):t[WI]=e}var bV;function oy(t,e){return bV(t,e)}function sy(t){let e=t[Qe];return Cn(e)?e[Qe]:e}function RC(t){return PC(t[Tc])}function kC(t){return PC(t[Bn])}function PC(t){for(;t!==null&&!Cn(t);)t=t[Bn];return t}function Ls(t,e,n,i,r){if(i!=null){let o,s=!1;Cn(i)?o=i:ai(i)&&(s=!0,i=i[an]);let a=zn(i);t===0&&n!==null?r==null?VC(e,n,a):eh(e,n,a,r||null,!0):t===1&&n!==null?eh(e,n,a,r||null,!0):t===2?UC(e,a,s):t===3&&e.destroyNode(a),o!=null&&PV(e,t,o,n,r)}}function NC(t,e){return t.createText(e)}function yV(t,e,n){t.setValue(e,n)}function OC(t,e){return t.createComment(hV(e))}function ay(t,e,n){return t.createElement(e,n)}function _V(t,e){let n=e[Le];Gc(t,e,n,2,null,null),e[an]=null,e[ln]=null}function vV(t,e,n,i,r,o){i[an]=r,i[ln]=e,Gc(t,i,n,1,r,o)}function wV(t,e){Gc(t,e,e[Le],2,null,null)}function EV(t){let e=t[Tc];if(!e)return Dg(t[J],t);for(;e;){let n=null;if(ai(e))n=e[Tc];else{let i=e[wt];i&&(n=i)}if(!n){for(;e&&!e[Bn]&&e!==t;)ai(e)&&Dg(e[J],e),e=e[Qe];e===null&&(e=t),ai(e)&&Dg(e[J],e),n=e&&e[Bn]}e=n}}function xV(t,e,n,i){let r=wt+i,o=n.length;i>0&&(n[r-1][Bn]=e),i<o-wt?(e[Bn]=n[r],bC(n,wt+i,e)):(n.push(e),e[Bn]=null),e[Qe]=n;let s=e[Lc];s!==null&&n!==s&&IV(s,e);let a=e[si];a!==null&&a.insertView(t),$g(e),e[Q]|=128}function IV(t,e){let n=t[$s],r=e[Qe][Qe][Gt];e[Gt]!==r&&(t[Q]|=Hs.HasTransplantedViews),n===null?t[$s]=[e]:n.push(e)}function FC(t,e){let n=t[$s],i=n.indexOf(e),r=e[Qe];n.splice(i,1)}function Rc(t,e){if(t.length<=wt)return;let n=wt+e,i=t[n];if(i){let r=i[Lc];r!==null&&r!==t&&FC(r,i),e>0&&(t[n-1][Bn]=i[Bn]);let o=Yd(t,wt+e);_V(i[J],i);let s=o[si];s!==null&&s.detachView(o[J]),i[Qe]=null,i[Bn]=null,i[Q]&=-129}return i}function vh(t,e){if(!(e[Q]&256)){let n=e[Le];n.destroyNode&&Gc(t,e,n,3,null,null),EV(e)}}function Dg(t,e){if(!(e[Q]&256)){e[Q]&=-129,e[Q]|=256,e[mo]&&sI(e[mo]),CV(t,e),DV(t,e),e[J].type===1&&e[Le].destroy();let n=e[Lc];if(n!==null&&Cn(e[Qe])){n!==e[Qe]&&FC(n,e);let i=e[si];i!==null&&i.detachView(t)}gV(e)}}function DV(t,e){let n=t.cleanup,i=e[Cc];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?i[s]():i[-s].unsubscribe(),o+=2}else{let s=i[n[o+1]];n[o].call(s)}i!==null&&(e[Cc]=null);let r=e[hr];if(r!==null){e[hr]=null;for(let o=0;o<r.length;o++){let s=r[o];s()}}}function CV(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let i=0;i<n.length;i+=2){let r=e[n[i]];if(!(r instanceof go)){let o=n[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=r[o[s]],c=o[s+1];ri(4,a,c);try{c.call(a)}finally{ri(5,a,c)}}else{ri(4,r,o);try{o.call(r)}finally{ri(5,r,o)}}}}}function LC(t,e,n){return TV(t,e.parent,n)}function TV(t,e,n){let i=e;for(;i!==null&&i.type&40;)e=i,i=e.parent;if(i===null)return n[an];{let{componentOffset:r}=i;if(r>-1){let{encapsulation:o}=t.data[i.directiveStart+r];if(o===ci.None||o===ci.Emulated)return null}return un(i,n)}}function eh(t,e,n,i,r){t.insertBefore(e,n,i,r)}function VC(t,e,n){t.appendChild(e,n)}function KI(t,e,n,i,r){i!==null?eh(t,e,n,i,r):VC(t,e,n)}function SV(t,e,n,i){t.removeChild(e,n,i)}function cy(t,e){return t.parentNode(e)}function AV(t,e){return t.nextSibling(e)}function jC(t,e,n){return RV(t,e,n)}function MV(t,e,n){return t.type&40?un(t,n):null}var RV=MV,QI;function ly(t,e,n,i){let r=LC(t,i,e),o=e[Le],s=i.parent||e[ln],a=jC(s,i,e);if(r!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)KI(o,r,n[c],a,!1);else KI(o,r,n,a,!1);QI!==void 0&&QI(o,i,e,n,r)}function Ud(t,e){if(e!==null){let n=e.type;if(n&3)return un(e,t);if(n&4)return Xg(-1,t[e.index]);if(n&8){let i=e.child;if(i!==null)return Ud(t,i);{let r=t[e.index];return Cn(r)?Xg(-1,r):zn(r)}}else{if(n&32)return oy(e,t)()||zn(t[e.index]);{let i=BC(t,e);if(i!==null){if(Array.isArray(i))return i[0];let r=sy(t[Gt]);return Ud(r,i)}else return Ud(t,e.next)}}}return null}function BC(t,e){if(e!==null){let i=t[Gt][ln],r=e.projection;return i.projection[r]}return null}function Xg(t,e){let n=wt+t+1;if(n<e.length){let i=e[n],r=i[J].firstChild;if(r!==null)return Ud(i,r)}return e[Oi]}function UC(t,e,n){let i=cy(t,e);i&&SV(t,i,e,n)}function zC(t){t.textContent=""}function uy(t,e,n,i,r,o,s){for(;n!=null;){let a=i[n.index],c=n.type;if(s&&e===0&&(a&&_o(zn(a),i),n.flags|=2),(n.flags&32)!==32)if(c&8)uy(t,e,n.child,i,r,o,!1),Ls(e,t,r,a,o);else if(c&32){let l=oy(n,i),u;for(;u=l();)Ls(e,t,r,u,o);Ls(e,t,r,a,o)}else c&16?$C(t,e,i,n,r,o):Ls(e,t,r,a,o);n=s?n.projectionNext:n.next}}function Gc(t,e,n,i,r,o){uy(n,i,t.firstChild,e,r,o,!1)}function kV(t,e,n){let i=e[Le],r=LC(t,n,e),o=n.parent||e[ln],s=jC(o,n,e);$C(i,0,e,n,r,s)}function $C(t,e,n,i,r,o){let s=n[Gt],c=s[ln].projection[i.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];Ls(e,t,r,u,o)}else{let l=c,u=s[Qe];Jd(i)&&(l.flags|=128),uy(t,e,l,u,r,o,!0)}}function PV(t,e,n,i,r){let o=n[Oi],s=zn(n);o!==s&&Ls(e,t,i,o,r);for(let a=wt;a<n.length;a++){let c=n[a];Gc(c[J],c,t,e,i,o)}}function NV(t,e,n,i,r){if(e)r?t.addClass(n,i):t.removeClass(n,i);else{let o=i.indexOf("-")===-1?void 0:Fi.DashCase;r==null?t.removeStyle(n,i,o):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=Fi.Important),t.setStyle(n,i,r,o))}}function OV(t,e,n){t.setAttribute(e,"style",n)}function HC(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function qC(t,e,n){let{mergedAttrs:i,classes:r,styles:o}=n;i!==null&&Ug(t,e,i),r!==null&&HC(t,e,r),o!==null&&OV(t,e,o)}var Jg=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${uF})`}};function wh(t){return t instanceof Jg?t.changingThisBreaksApplicationSecurity:t}var eb=class{};function FV(){let t=new Do;return I(Et)==="browser"&&(t.store=LV(_h(),I(Xs))),t}var Do=(()=>{let e=class e{constructor(){this.store={},this.onSerializeCallbacks={}}get(i,r){return this.store[i]!==void 0?this.store[i]:r}set(i,r){this.store[i]=r}remove(i){delete this.store[i]}hasKey(i){return this.store.hasOwnProperty(i)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(i,r){this.onSerializeCallbacks[i]=r}toJson(){for(let i in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(i))try{this.store[i]=this.onSerializeCallbacks[i]()}catch(r){console.warn("Exception in onSerialize callback: ",r)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}};e.\u0275prov=R({token:e,providedIn:"root",factory:FV});let t=e;return t})();function LV(t,e){let n=t.getElementById(e+"-state");if(n?.textContent)try{return JSON.parse(n.textContent)}catch(i){console.warn("Exception while restoring TransferState for app "+e,i)}return{}}var GC="h",WC="b",tb=function(t){return t.FirstChild="f",t.NextSibling="n",t}(tb||{}),VV="e",jV="t",dy="c",KC="x",th="r",BV="i",UV="n",zV="d",$V="__nghData__",QC=$V,Cg="ngh",HV="nghm",YC=(t,e,n)=>null;function qV(t,e,n=!1){let i=t.getAttribute(Cg);if(i==null)return null;let[r,o]=i.split("|");if(i=n?o:r,!i)return null;let s=n?r:o?`|${o}`:"",a={};if(i!==""){let l=e.get(Do,null,{optional:!0});l!==null&&(a=l.get(QC,[])[Number(i)])}let c={data:a,firstChild:t.firstChild??null};return n&&(c.firstChild=t,Eh(c,0,t.nextSibling)),s?t.setAttribute(Cg,s):t.removeAttribute(Cg),c}function GV(){YC=qV}function hy(t,e,n=!1){return YC(t,e,n)}function WV(t){let e=t._lView;return e[J].type===2?null:(LD(e)&&(e=e[mt]),e)}function KV(t){return t.textContent?.replace(/\s/gm,"")}function QV(t){let e=_h(),n=e.createNodeIterator(t,NodeFilter.SHOW_COMMENT,{acceptNode(o){let s=KV(o);return s==="ngetn"||s==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),i,r=[];for(;i=n.nextNode();)r.push(i);for(let o of r)o.textContent==="ngetn"?o.replaceWith(e.createTextNode("")):o.remove()}function Eh(t,e,n){t.segmentHeads??={},t.segmentHeads[e]=n}function nb(t,e){return t.segmentHeads?.[e]??null}function YV(t,e){let n=t.data,i=n[VV]?.[e]??null;return i===null&&n[dy]?.[e]&&(i=fy(t,e)),i}function ZC(t,e){return t.data[dy]?.[e]??null}function fy(t,e){let n=ZC(t,e)??[],i=0;for(let r of n)i+=r[th]*(r[KC]??1);return i}function xh(t,e){if(typeof t.disconnectedNodes>"u"){let n=t.data[zV];t.disconnectedNodes=n?new Set(n):null}return!!t.disconnectedNodes?.has(e)}var ib=class{},nh=class{};function ZV(t){let e=Error(`No component factory found for ${Lt(t)}.`);return e[XV]=t,e}var XV="ngComponent";var rb=class{resolveComponentFactory(e){throw ZV(e)}},wr=(()=>{let e=class e{};e.NULL=new rb;let t=e;return t})();function JV(){return Js(dn(),me())}function Js(t,e){return new de(un(t,e))}var de=(()=>{let e=class e{constructor(i){this.nativeElement=i}};e.__NG_ELEMENT_ID__=JV;let t=e;return t})();function e2(t){return t instanceof de?t.nativeElement:t}var vo=class{},Co=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>t2();let t=e;return t})();function t2(){let t=me(),e=dn(),n=yr(e.index,t);return(ai(n)?n:t)[Le]}var n2=(()=>{let e=class e{};e.\u0275prov=R({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),Tg={};function XC(t){return my(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function i2(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),i;for(;!(i=n.next()).done;)e(i.value)}}function my(t){return t!==null&&(typeof t=="function"||typeof t=="object")}var ob=class{constructor(){}supports(e){return XC(e)}create(e){return new sb(e)}},r2=(t,e)=>e,sb=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||r2}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,i=this._removalsHead,r=0,o=null;for(;n||i;){let s=!i||n&&n.currentIndex<YI(i,r,o)?n:i,a=YI(s,r,o),c=s.currentIndex;if(s===i)r--,i=i._nextRemoved;else if(n=n._next,s.previousIndex==null)r++;else{o||(o=[]);let l=a-r,u=c-r;if(l!=u){for(let h=0;h<l;h++){let f=h<o.length?o[h]:o[h]=0,m=f+h;u<=m&&m<l&&(o[h]=f+1)}let d=s.previousIndex;o[d]=u-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!XC(e))throw new D(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,i=!1,r,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),i=!0):(i&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else r=0,i2(e,a=>{s=this._trackByFn(r,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,r),i=!0):(i&&(n=this._verifyReinsertion(n,a,s,r)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,r++}),this.length=r;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,i,r){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,r)):(e=this._linkedRecords===null?null:this._linkedRecords.get(i,r),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,r)):e=this._addAfter(new ab(n,i),o,r)),e}_verifyReinsertion(e,n,i,r){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return o!==null?e=this._reinsertAfter(o,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let r=e._prevRemoved,o=e._nextRemoved;return r===null?this._removalsHead=o:r._nextRemoved=o,o===null?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(e,n,i),this._addToMoves(e,i),e}_moveAfter(e,n,i){return this._unlink(e),this._insertAfter(e,n,i),this._addToMoves(e,i),e}_addAfter(e,n,i){return this._insertAfter(e,n,i),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,i){let r=n===null?this._itHead:n._next;return e._next=r,e._prev=n,r===null?this._itTail=e:r._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new ih),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,i=e._next;return n===null?this._itHead=i:n._next=i,i===null?this._itTail=n:i._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new ih),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},ab=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},cb=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let i;for(i=this._head;i!==null;i=i._nextDup)if((n===null||n<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){let n=e._prevDup,i=e._nextDup;return n===null?this._head=i:n._nextDup=i,i===null?this._tail=n:i._prevDup=n,this._head===null}},ih=class{constructor(){this.map=new Map}put(e){let n=e.trackById,i=this.map.get(n);i||(i=new cb,this.map.set(n,i)),i.add(e)}get(e,n){let i=e,r=this.map.get(i);return r?r.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function YI(t,e,n){let i=t.previousIndex;if(i===null)return i;let r=0;return n&&i<n.length&&(r=n[i]),i+e+r}var lb=class{constructor(){}supports(e){return e instanceof Map||my(e)}create(){return new ub}},ub=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let n;for(n=this._mapHead;n!==null;n=n._next)e(n)}forEachPreviousItem(e){let n;for(n=this._previousMapHead;n!==null;n=n._nextPrevious)e(n)}forEachChangedItem(e){let n;for(n=this._changesHead;n!==null;n=n._nextChanged)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||my(e)))throw new D(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(i,r)=>{if(n&&n.key===r)this._maybeAddToChanges(n,i),this._appendAfter=n,n=n._next;else{let o=this._getOrCreateRecordForKey(r,i);n=this._insertBeforeOrAppend(n,o)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let i=n;i!==null;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,n){if(e){let i=e._prev;return n._next=e,n._prev=i,e._prev=n,i&&(i._next=n),e===this._mapHead&&(this._mapHead=n),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(e,n){if(this._records.has(e)){let r=this._records.get(e);this._maybeAddToChanges(r,n);let o=r._prev,s=r._next;return o&&(o._next=s),s&&(s._prev=o),r._next=null,r._prev=null,r}let i=new db(e);return this._records.set(e,i),i.currentValue=n,this._addToAdditions(i),i}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,n){Object.is(n,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=n,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,n){e instanceof Map?e.forEach(n):Object.keys(e).forEach(i=>n(e[i],i))}},db=class{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function ZI(){return new Ih([new ob])}var Ih=(()=>{let e=class e{constructor(i){this.factories=i}static create(i,r){if(r!=null){let o=r.factories.slice();i=i.concat(o)}return new e(i)}static extend(i){return{provide:e,useFactory:r=>e.create(i,r||ZI()),deps:[[e,new bh,new Io]]}}find(i){let r=this.factories.find(o=>o.supports(i));if(r!=null)return r;throw new D(901,!1)}};e.\u0275prov=R({token:e,providedIn:"root",factory:ZI});let t=e;return t})();function XI(){return new py([new lb])}var py=(()=>{let e=class e{constructor(i){this.factories=i}static create(i,r){if(r){let o=r.factories.slice();i=i.concat(o)}return new e(i)}static extend(i){return{provide:e,useFactory:r=>e.create(i,r||XI()),deps:[[e,new bh,new Io]]}}find(i){let r=this.factories.find(o=>o.supports(i));if(r)return r;throw new D(901,!1)}};e.\u0275prov=R({token:e,providedIn:"root",factory:XI});let t=e;return t})();function rh(t,e,n,i,r=!1){for(;n!==null;){let o=e[n.index];o!==null&&i.push(zn(o)),Cn(o)&&o2(o,i);let s=n.type;if(s&8)rh(t,e,n.child,i);else if(s&32){let a=oy(n,e),c;for(;c=a();)i.push(c)}else if(s&16){let a=BC(e,n);if(Array.isArray(a))i.push(...a);else{let c=sy(e[Gt]);rh(c[J],c,a,i,!0)}}n=r?n.projectionNext:n.next}return i}function o2(t,e){for(let n=wt;n<t.length;n++){let i=t[n],r=i[J].firstChild;r!==null&&rh(i[J],i,r,e)}t[Oi]!==t[an]&&e.push(t[Oi])}var JC=[];function s2(t){return t[mo]??a2(t)}function a2(t){let e=JC.pop()??Object.create(l2);return e.lView=t,e}function c2(t){t.lView[mo]!==t&&(t.lView=null,JC.push(t))}var l2=we(T({},iI),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Ac(t.lView)},consumerOnSignalRead(){this.lView[mo]=this}}),u2="ngOriginalError";function Sg(t){return t[u2]}var li=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Sg(e);for(;n&&Sg(n);)n=Sg(n);return n||null}},eT=new M("",{providedIn:"root",factory:()=>I(li).handleError.bind(void 0)}),kd=new M(""),tT=!1,nT=new M("",{providedIn:"root",factory:()=>tT});var Vi={};function nt(t){iT(At(),me(),_r()+t,!1)}function iT(t,e,n,i){if(!i)if((e[Q]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Ld(e,o,n)}else{let o=t.preOrderHooks;o!==null&&Vd(e,o,0,n)}po(n)}function S(t,e=ce.Default){let n=me();if(n===null)return v(t,e);let i=dn();return fC(i,n,Ot(t),e)}function Dh(){let t="invalid";throw new Error(t)}function d2(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let i=0;i<n.length;i++){let r=n[i];if(r<0)po(~r);else{let o=r,s=n[++i],a=n[++i];pL(s,o);let c=e[o];a(2,c)}}}finally{po(-1)}}function Ch(t,e,n,i,r,o,s,a,c,l,u){let d=e.blueprint.slice();return d[an]=r,d[Q]=i|4|128|8|64,(l!==null||t&&t[Q]&2048)&&(d[Q]|=2048),zD(d),d[Qe]=d[Qs]=t,d[St]=n,d[mr]=s||t&&t[mr],d[Le]=a||t&&t[Le],d[zs]=c||t&&t[zs]||null,d[ln]=o,d[gh]=mV(),d[Un]=u,d[ND]=l,d[Gt]=e.type==2?t[Gt]:d,d}function Wc(t,e,n,i,r){let o=t.data[e];if(o===null)o=h2(t,e,n,i,r),mL()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=i,o.attrs=r;let s=dL();o.injectorIndex=s===null?-1:s.injectorIndex}return Uc(o,!0),o}function h2(t,e,n,i,r){let o=GD(),s=WD(),a=s?o:o&&o.parent,c=t.data[e]=_2(t,a,n,e,i,r);return t.firstChild===null&&(t.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function rT(t,e,n,i){if(n===0)return-1;let r=e.length;for(let o=0;o<n;o++)e.push(i),t.blueprint.push(i),t.data.push(null);return r}function oT(t,e,n,i,r){let o=_r(),s=i&2;try{po(-1),s&&e.length>mt&&iT(t,e,mt,!1),ri(s?2:0,r),n(i,r)}finally{po(o),ri(s?3:1,r)}}function sT(t,e,n){if(FD(e)){let i=vt(null);try{let r=e.directiveStart,o=e.directiveEnd;for(let s=r;s<o;s++){let a=t.data[s];a.contentQueries&&a.contentQueries(1,n[s],s)}}finally{vt(i)}}}function aT(t,e,n){qD()&&(C2(t,e,n,un(n,e)),(n.flags&64)===64&&fT(t,e,n))}function cT(t,e,n=un){let i=e.localNames;if(i!==null){let r=e.index+1;for(let o=0;o<i.length;o+=2){let s=i[o+1],a=s===-1?n(e,t):t[s];t[r++]=a}}}function lT(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=gy(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function gy(t,e,n,i,r,o,s,a,c,l,u){let d=mt+i,h=d+r,f=f2(d,h),m=typeof l=="function"?l():l;return f[J]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:m,incompleteFirstPass:!1,ssrId:u}}function f2(t,e){let n=[];for(let i=0;i<e;i++)n.push(i<t?null:Vi);return n}function m2(t,e,n,i){let o=i.get(nT,tT)||n===ci.ShadowDom,s=t.selectRootElement(e,o);return p2(s),s}function p2(t){uT(t)}var uT=t=>null;function g2(t){AC(t)?zC(t):QV(t)}function b2(){uT=g2}function y2(t,e,n,i){let r=bT(e);r.push(n),t.firstCreatePass&&yT(t).push(i,r.length-1)}function _2(t,e,n,i,r,o){let s=e?e.injectorIndex:-1,a=0;return Ys()&&(a|=128),{type:n,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function JI(t,e,n,i){for(let r in t)if(t.hasOwnProperty(r)){n=n===null?{}:n;let o=t[r];i===null?eD(n,e,r,o):i.hasOwnProperty(r)&&eD(n,e,i[r],o)}return n}function eD(t,e,n,i){t.hasOwnProperty(n)?t[n].push(e,i):t[n]=[e,i]}function v2(t,e,n){let i=e.directiveStart,r=e.directiveEnd,o=t.data,s=e.attrs,a=[],c=null,l=null;for(let u=i;u<r;u++){let d=o[u],h=n?n.get(d):null,f=h?h.inputs:null,m=h?h.outputs:null;c=JI(d.inputs,u,c,f),l=JI(d.outputs,u,l,m);let p=c!==null&&s!==null&&!CD(e)?L2(c,u,s):null;a.push(p)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function w2(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function E2(t,e,n,i,r,o,s,a){let c=un(e,n),l=e.inputs,u;!a&&l!=null&&(u=l[i])?(by(t,n,u,i,r),Vc(e)&&x2(n,e.index)):e.type&3?(i=w2(i),r=s!=null?s(r,e.value||"",i):r,o.setProperty(c,i,r)):e.type&12}function x2(t,e){let n=yr(e,t);n[Q]&16||(n[Q]|=64)}function dT(t,e,n,i){if(qD()){let r=i===null?null:{"":-1},o=S2(t,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&hT(t,e,n,s,r,a),r&&A2(n,i,r)}n.mergedAttrs=Dc(n.mergedAttrs,n.attrs)}function hT(t,e,n,i,r,o){for(let l=0;l<i.length;l++)Gg(Qd(n,e),t,i[l].type);R2(n,t.data.length,i.length);for(let l=0;l<i.length;l++){let u=i[l];u.providersResolver&&u.providersResolver(u)}let s=!1,a=!1,c=rT(t,e,i.length,null);for(let l=0;l<i.length;l++){let u=i[l];n.mergedAttrs=Dc(n.mergedAttrs,u.hostAttrs),k2(t,n,e,c,u),M2(c,u,r),u.contentQueries!==null&&(n.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(n.flags|=64);let d=u.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}v2(t,n,o)}function I2(t,e,n,i,r){let o=r.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;D2(s)!=a&&s.push(a),s.push(n,i,o)}}function D2(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function C2(t,e,n,i){let r=n.directiveStart,o=n.directiveEnd;Vc(n)&&P2(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||Qd(n,e),_o(i,e);let s=n.initialInputs;for(let a=r;a<o;a++){let c=t.data[a],l=bo(e,t,a,n);if(_o(l,e),s!==null&&F2(e,a-r,l,c,n,s),pr(c)){let u=yr(n.index,e);u[St]=bo(e,t,a,n)}}}function fT(t,e,n){let i=n.directiveStart,r=n.directiveEnd,o=n.index,s=gL();try{po(o);for(let a=i;a<r;a++){let c=t.data[a],l=e[a];Hg(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&T2(c,l)}}finally{po(-1),Hg(s)}}function T2(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function S2(t,e){let n=t.directiveRegistry,i=null,r=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(TD(e,s.selectors,!1))if(i||(i=[]),pr(s))if(s.findHostDirectiveDefs!==null){let a=[];r=r||new Map,s.findHostDirectiveDefs(s,a,r),i.unshift(...a,s);let c=a.length;hb(t,e,c)}else i.unshift(s),hb(t,e,0);else r=r||new Map,s.findHostDirectiveDefs?.(s,i,r),i.push(s)}return i===null?null:[i,r]}function hb(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function A2(t,e,n){if(e){let i=t.localNames=[];for(let r=0;r<e.length;r+=2){let o=n[e[r+1]];if(o==null)throw new D(-301,!1);i.push(e[r],o)}}}function M2(t,e,n){if(n){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)n[e.exportAs[i]]=t;pr(e)&&(n[""]=t)}}function R2(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function k2(t,e,n,i,r){t.data[i]=r;let o=r.factory||(r.factory=qs(r.type,!0)),s=new go(o,pr(r),S);t.blueprint[i]=s,n[i]=s,I2(t,e,i,rT(t,n,r.hostVars,Vi),r)}function P2(t,e,n){let i=un(e,t),r=lT(n),o=t[mr].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=Th(t,Ch(t,r,null,s,i,e,null,o.createRenderer(i,n),null,null,null));t[e.index]=a}function N2(t,e,n,i,r,o){let s=un(t,e);O2(e[Le],s,o,t.value,n,i,r)}function O2(t,e,n,i,r,o,s){if(o==null)t.removeAttribute(e,r,n);else{let a=s==null?$b(o):s(o,i||"",r);t.setAttribute(e,r,a,n)}}function F2(t,e,n,i,r,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],l=s[a++],u=s[a++];mT(i,n,c,l,u)}}function mT(t,e,n,i,r){let o=vt(null);try{let s=t.inputTransforms;s!==null&&s.hasOwnProperty(i)&&(r=s[i].call(e,r)),t.setInput!==null?t.setInput(e,r,n,i):e[i]=r}finally{vt(o)}}function L2(t,e,n){let i=null,r=0;for(;r<n.length;){let o=n[r];if(o===0){r+=4;continue}else if(o===5){r+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){i===null&&(i=[]);let s=t[o];for(let a=0;a<s.length;a+=2)if(s[a]===e){i.push(o,s[a+1],n[r+1]);break}}r+=2}return i}function pT(t,e,n,i){return[t,!0,0,e,null,i,null,n,null,null]}function gT(t,e){let n=t.contentQueries;if(n!==null){let i=vt(null);try{for(let r=0;r<n.length;r+=2){let o=n[r],s=n[r+1];if(s!==-1){let a=t.data[s];Kb(o),a.contentQueries(2,e[s],s)}}}finally{vt(i)}}}function Th(t,e){return t[Tc]?t[BI][Bn]=e:t[Tc]=e,t[BI]=e,e}function fb(t,e,n){Kb(0);let i=vt(null);try{e(t,n)}finally{vt(i)}}function bT(t){return t[Cc]||(t[Cc]=[])}function yT(t){return t.cleanup||(t.cleanup=[])}function _T(t,e){let n=t[zs],i=n?n.get(li,null):null;i&&i.handleError(e)}function by(t,e,n,i,r){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],c=e[s],l=t.data[s];mT(l,c,i,a,r)}}function V2(t,e,n){let i=UD(e,t);yV(t[Le],i,n)}var j2=100;function B2(t,e=!0){let n=t[mr],i=n.rendererFactory,r=n.afterRenderEventManager,o=!1;o||(i.begin?.(),r?.begin());try{U2(t)}catch(s){throw e&&_T(t,s),s}finally{o||(i.end?.(),n.inlineEffectRunner?.flush(),r?.end())}}function U2(t){mb(t,0);let e=0;for(;$D(t);){if(e===j2)throw new D(103,!1);e++,mb(t,1)}}function z2(t,e,n,i){let r=e[Q];if((r&256)===256)return;let o=!1;!o&&e[mr].inlineEffectRunner?.flush(),Qb(e);let s=null,a=null;!o&&$2(t)&&(a=s2(e),s=rI(a));try{zD(e),fL(t.bindingStartIndex),n!==null&&oT(t,e,n,2,i);let c=(r&3)===3;if(!o)if(c){let d=t.preOrderCheckHooks;d!==null&&Ld(e,d,null)}else{let d=t.preOrderHooks;d!==null&&Vd(e,d,0,null),wg(e,0)}if(H2(e),vT(e,0),t.contentQueries!==null&&gT(t,e),!o)if(c){let d=t.contentCheckHooks;d!==null&&Ld(e,d)}else{let d=t.contentHooks;d!==null&&Vd(e,d,1),wg(e,1)}d2(t,e);let l=t.components;l!==null&&ET(e,l,0);let u=t.viewQuery;if(u!==null&&fb(2,u,i),!o)if(c){let d=t.viewCheckHooks;d!==null&&Ld(e,d)}else{let d=t.viewHooks;d!==null&&Vd(e,d,2),wg(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[vg]){for(let d of e[vg])d();e[vg]=null}o||(e[Q]&=-73)}catch(c){throw Ac(e),c}finally{a!==null&&(oI(a,s),c2(a)),Yb()}}function $2(t){return t.type!==2}function vT(t,e){for(let n=RC(t);n!==null;n=kC(n)){n[Q]&=~Hs.HasChildViewsToRefresh;for(let i=wt;i<n.length;i++){let r=n[i];wT(r,e)}}}function H2(t){for(let e=RC(t);e!==null;e=kC(e)){if(!(e[Q]&Hs.HasTransplantedViews))continue;let n=e[$s];for(let i=0;i<n.length;i++){let r=n[i],o=r[Qe];nL(r)}}}function q2(t,e,n){let i=yr(e,t);wT(i,n)}function wT(t,e){Wb(t)&&mb(t,e)}function mb(t,e){let i=t[J],r=t[Q],o=t[mo],s=!!(e===0&&r&16);if(s||=!!(r&64&&e===0),s||=!!(r&1024),s||=!!(o?.dirty&&eg(o)),o&&(o.dirty=!1),t[Q]&=-9217,s)z2(i,t,i.template,t[St]);else if(r&8192){vT(t,1);let a=i.components;a!==null&&ET(t,a,1)}}function ET(t,e,n){for(let i=0;i<e.length;i++)q2(t,e[i],n)}function yy(t){for(t[mr].changeDetectionScheduler?.notify();t;){t[Q]|=64;let e=sy(t);if(LD(t)&&!e)return t;t=e}return null}var wo=class{get rootNodes(){let e=this._lView,n=e[J];return rh(n,e,n.firstChild,[])}constructor(e,n,i=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[St]}set context(e){this._lView[St]=e}get destroyed(){return(this._lView[Q]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Qe];if(Cn(e)){let n=e[qd],i=n?n.indexOf(this):-1;i>-1&&(Rc(e,i),Yd(n,i))}this._attachedToViewContainer=!1}vh(this._lView[J],this._lView)}onDestroy(e){HD(this._lView,e)}markForCheck(){yy(this._cdRefInjectingView||this._lView)}detach(){this._lView[Q]&=-129}reattach(){$g(this._lView),this._lView[Q]|=128}detectChanges(){this._lView[Q]|=1024,B2(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new D(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,wV(this._lView[J],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new D(902,!1);this._appRef=e,$g(this._lView)}},Yt=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=G2;let t=e;return t})();function G2(t){return W2(dn(),me(),(t&16)===16)}function W2(t,e,n){if(Vc(t)&&!n){let i=yr(t.index,e);return new wo(i,i)}else if(t.type&47){let i=e[Gt];return new wo(i,e)}return null}var xT=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=K2,e.__NG_ENV_ID__=i=>i;let t=e;return t})(),pb=class extends xT{constructor(e){super(),this._lView=e}onDestroy(e){return HD(this._lView,e),()=>rL(this._lView,e)}};function K2(){return new pb(me())}var tD=new Set;function Er(t){tD.has(t)||(tD.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var gb=class extends le{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,i){let r=e,o=n||(()=>null),s=i;if(e&&typeof e=="object"){let c=e;r=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=Ag(o),r&&(r=Ag(r)),s&&(s=Ag(s)));let a=super.subscribe({next:r,error:o,complete:s});return e instanceof Ee&&e.add(a),a}};function Ag(t){return e=>{setTimeout(t,void 0,e)}}var se=gb;function nD(...t){}function Q2(){let t=typeof sn.requestAnimationFrame=="function",e=sn[t?"requestAnimationFrame":"setTimeout"],n=sn[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i);let r=n[Zone.__symbol__("OriginalDelegate")];r&&(n=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var U=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new se(!1),this.onMicrotaskEmpty=new se(!1),this.onStable=new se(!1),this.onError=new se(!1),typeof Zone>"u")throw new D(908,!1);Zone.assertZonePatched();let r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&n,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=Q2().nativeRequestAnimationFrame,X2(r)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new D(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new D(909,!1)}run(e,n,i){return this._inner.run(e,n,i)}runTask(e,n,i,r){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,e,Y2,nD,nD);try{return o.runTask(s,n,i)}finally{o.cancelTask(s)}}runGuarded(e,n,i){return this._inner.runGuarded(e,n,i)}runOutsideAngular(e){return this._outer.run(e)}},Y2={};function _y(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Z2(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(sn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,bb(t),t.isCheckStableRunning=!0,_y(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),bb(t))}function X2(t){let e=()=>{Z2(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,i,r,o,s,a)=>{if(J2(a))return n.invokeTask(r,o,s,a);try{return iD(t),n.invokeTask(r,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),rD(t)}},onInvoke:(n,i,r,o,s,a,c)=>{try{return iD(t),n.invoke(r,o,s,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),rD(t)}},onHasTask:(n,i,r,o)=>{n.hasTask(r,o),i===r&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,bb(t),_y(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,i,r,o)=>(n.handleError(r,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function bb(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function iD(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function rD(t){t._nesting--,_y(t)}var yb=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new se,this.onMicrotaskEmpty=new se,this.onStable=new se,this.onError=new se}run(e,n,i){return e.apply(n,i)}runGuarded(e,n,i){return e.apply(n,i)}runOutsideAngular(e){return e()}runTask(e,n,i,r){return e.apply(n,i)}};function J2(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}function ej(t="zone.js",e){return t==="noop"?new yb:t==="zone.js"?new U(e):t}var Vs=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(Vs||{}),tj={destroy(){}};function vy(t,e){!e&&iV(vy);let n=e?.injector??I(Kt);if(!wc(n))return tj;Er("NgAfterNextRender");let i=n.get(IT),r=i.handler??=new vb,o=e?.phase??Vs.MixedReadWrite,s=()=>{r.unregister(c),a()},a=n.get(xT).onDestroy(s),c=new _b(n,o,()=>{s(),t()});return r.register(c),{destroy:s}}var _b=class{constructor(e,n,i){this.phase=n,this.callbackFn=i,this.zone=e.get(U),this.errorHandler=e.get(li,null,{optional:!0})}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},vb=class{constructor(){this.executingCallbacks=!1,this.buckets={[Vs.EarlyRead]:new Set,[Vs.Write]:new Set,[Vs.MixedReadWrite]:new Set,[Vs.Read]:new Set},this.deferredCallbacks=new Set}validateBegin(){if(this.executingCallbacks)throw new D(102,!1)}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let n of e)n.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},IT=(()=>{let e=class e{constructor(){this.renderDepth=0,this.handler=null,this.internalCallbacks=[]}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){if(this.renderDepth--,this.renderDepth===0){for(let i of this.internalCallbacks)i();this.internalCallbacks.length=0,this.handler?.execute()}}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=R({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function nj(t,e){let n=yr(e,t),i=n[J];ij(i,n);let r=n[an];r!==null&&n[Un]===null&&(n[Un]=hy(r,n[zs])),wy(i,n,n[St])}function ij(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function wy(t,e,n){Qb(e);try{let i=t.viewQuery;i!==null&&fb(1,i,n);let r=t.template;r!==null&&oT(t,e,r,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&gT(t,e),t.staticViewQueries&&fb(2,t.viewQuery,n);let o=t.components;o!==null&&rj(e,o)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{e[Q]&=-5,Yb()}}function rj(t,e){for(let n=0;n<e.length;n++)nj(t,e[n])}function wb(t,e,n){let i=n?t.styles:null,r=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)r=Lg(r,a);else if(o==2){let c=a,l=e[++s];i=Lg(i,c+": "+l+";")}}n?t.styles=i:t.stylesWithoutHost=i,n?t.classes=r:t.classesWithoutHost=r}var oh=class extends wr{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=fr(e);return new Ws(n,this.ngModule)}};function oD(t){let e=[];for(let n in t)if(t.hasOwnProperty(n)){let i=t[n];e.push({propName:i,templateName:n})}return e}function oj(t){let e=t.toLowerCase();return e==="svg"?QF:e==="math"?YF:null}var Eb=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,i){i=ph(i);let r=this.injector.get(e,Tg,i);return r!==Tg||n===Tg?r:this.parentInjector.get(e,n,i)}},Ws=class extends nh{get inputs(){let e=this.componentDef,n=e.inputTransforms,i=oD(e.inputs);if(n!==null)for(let r of i)n.hasOwnProperty(r.propName)&&(r.transform=n[r.propName]);return i}get outputs(){return oD(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=UF(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,i,r){r=r||this.ngModule;let o=r instanceof cn?r:r?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let s=o?new Eb(e,o):e,a=s.get(vo,null);if(a===null)throw new D(407,!1);let c=s.get(n2,null),l=s.get(IT,null),u=s.get(eb,null),d={rendererFactory:a,sanitizer:c,inlineEffectRunner:null,afterRenderEventManager:l,changeDetectionScheduler:u},h=a.createRenderer(null,this.componentDef),f=this.componentDef.selectors[0][0]||"div",m=i?m2(h,i,this.componentDef.encapsulation,s):ay(h,f,oj(f)),p=512;this.componentDef.signals?p|=4096:this.componentDef.onPush||(p|=16);let g=null;m!==null&&(g=hy(m,s,!0));let w=gy(0,null,null,1,0,null,null,null,null,null,null),A=Ch(null,w,null,p,null,null,d,h,s,null,g);Qb(A);let C,O;try{let z=this.componentDef,H,oe=null;z.findHostDirectiveDefs?(H=[],oe=new Map,z.findHostDirectiveDefs(z,H,oe),H.push(z)):H=[z];let $e=sj(A,m),tn=aj($e,m,z,H,A,d,h);O=Gb(w,mt),m&&uj(h,z,m,i),n!==void 0&&dj(O,this.ngContentSelectors,n),C=lj(tn,z,H,oe,A,[hj]),wy(w,A,null)}finally{Yb()}return new xb(this.componentType,C,Js(O,A),A,O)}},xb=class extends ib{constructor(e,n,i,r,o){super(),this.location=i,this._rootLView=r,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new wo(r,void 0,!1),this.componentType=e}setInput(e,n){let i=this._tNode.inputs,r;if(i!==null&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;by(o[J],o,r,e,n),this.previousInputValues.set(e,n);let s=yr(this._tNode.index,o);yy(s)}}get injector(){return new fo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function sj(t,e){let n=t[J],i=mt;return t[i]=e,Wc(n,i,2,"#host",null)}function aj(t,e,n,i,r,o,s){let a=r[J];cj(i,t,e,s);let c=null;e!==null&&(c=hy(e,r[zs]));let l=o.rendererFactory.createRenderer(e,n),u=16;n.signals?u=4096:n.onPush&&(u=64);let d=Ch(r,lT(n),null,u,r[t.index],t,o,l,null,null,c);return a.firstCreatePass&&hb(a,t,i.length-1),Th(r,d),r[t.index]=d}function cj(t,e,n,i){for(let r of t)e.mergedAttrs=Dc(e.mergedAttrs,r.hostAttrs);e.mergedAttrs!==null&&(wb(e,e.mergedAttrs,!0),n!==null&&qC(i,n,e))}function lj(t,e,n,i,r,o){let s=dn(),a=r[J],c=un(s,r);hT(a,r,s,n,null,i);for(let u=0;u<n.length;u++){let d=s.directiveStart+u,h=bo(r,a,d,s);_o(h,r)}fT(a,r,s),c&&_o(c,r);let l=bo(r,a,s.directiveStart+s.componentOffset,s);if(t[St]=r[St]=l,o!==null)for(let u of o)u(l,e);return sT(a,s,t),l}function uj(t,e,n,i){if(i)Ug(t,n,["ng-version","17.0.8"]);else{let{attrs:r,classes:o}=zF(e.selectors[0]);r&&Ug(t,n,r),o&&o.length>0&&HC(t,n,o.join(" "))}}function dj(t,e,n){let i=t.projection=[];for(let r=0;r<e.length;r++){let o=n[r];i.push(o!=null?Array.from(o):null)}}function hj(){let t=dn();Xb(me()[J],t)}function fj(t){return Object.getPrototypeOf(t.prototype).constructor}function Ye(t){let e=fj(t.type),n=!0,i=[t];for(;e;){let r;if(pr(t))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new D(903,!1);r=e.\u0275dir}if(r){if(n){i.push(r);let s=t;s.inputs=Pd(t.inputs),s.inputTransforms=Pd(t.inputTransforms),s.declaredInputs=Pd(t.declaredInputs),s.outputs=Pd(t.outputs);let a=r.hostBindings;a&&bj(t,a);let c=r.viewQuery,l=r.contentQueries;if(c&&pj(t,c),l&&gj(t,l),Md(t.inputs,r.inputs),Md(t.declaredInputs,r.declaredInputs),Md(t.outputs,r.outputs),r.inputTransforms!==null&&(s.inputTransforms===null&&(s.inputTransforms={}),Md(s.inputTransforms,r.inputTransforms)),pr(r)&&r.data.animation){let u=t.data;u.animation=(u.animation||[]).concat(r.data.animation)}}let o=r.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===Ye&&(n=!1)}}e=Object.getPrototypeOf(e)}mj(i)}function mj(t){let e=0,n=null;for(let i=t.length-1;i>=0;i--){let r=t[i];r.hostVars=e+=r.hostVars,r.hostAttrs=Dc(r.hostAttrs,n=Dc(n,r.hostAttrs))}}function Pd(t){return t===Us?{}:t===Ft?[]:t}function pj(t,e){let n=t.viewQuery;n?t.viewQuery=(i,r)=>{e(i,r),n(i,r)}:t.viewQuery=e}function gj(t,e){let n=t.contentQueries;n?t.contentQueries=(i,r,o)=>{e(i,r,o),n(i,r,o)}:t.contentQueries=e}function bj(t,e){let n=t.hostBindings;n?t.hostBindings=(i,r)=>{e(i,r),n(i,r)}:t.hostBindings=e}function ji(t){let e=t.inputConfig,n={};for(let i in e)if(e.hasOwnProperty(i)){let r=e[i];Array.isArray(r)&&r[2]&&(n[i]=r[2])}t.inputTransforms=n}function DT(t,e,n){return t[e]=n}function ui(t,e,n){let i=t[e];return Object.is(i,n)?!1:(t[e]=n,!0)}function yj(t,e,n,i){let r=ui(t,e,n);return ui(t,e+1,i)||r}function Tn(t,e,n,i){let r=me(),o=zc();if(ui(r,o,e)){let s=At(),a=iC();N2(a,r,t,e,n,i)}return Tn}function _j(t,e,n,i){return ui(t,zc(),n)?e+$b(n)+i:Vi}function Nd(t,e){return t<<17|e<<2}function Eo(t){return t>>17&32767}function vj(t){return(t&2)==2}function wj(t,e){return t&131071|e<<17}function Ib(t){return t|2}function Ks(t){return(t&131068)>>2}function Mg(t,e){return t&-131069|e<<2}function Ej(t){return(t&1)===1}function Db(t){return t|1}function xj(t,e,n,i,r,o){let s=o?e.classBindings:e.styleBindings,a=Eo(s),c=Ks(s);t[i]=n;let l=!1,u;if(Array.isArray(n)){let d=n;u=d[1],(u===null||$c(d,u)>0)&&(l=!0)}else u=n;if(r)if(c!==0){let h=Eo(t[a+1]);t[i+1]=Nd(h,a),h!==0&&(t[h+1]=Mg(t[h+1],i)),t[a+1]=wj(t[a+1],i)}else t[i+1]=Nd(a,0),a!==0&&(t[a+1]=Mg(t[a+1],i)),a=i;else t[i+1]=Nd(c,0),a===0?a=i:t[c+1]=Mg(t[c+1],i),c=i;l&&(t[i+1]=Ib(t[i+1])),sD(t,u,i,!0,o),sD(t,u,i,!1,o),Ij(e,u,t,i,o),s=Nd(a,c),o?e.classBindings=s:e.styleBindings=s}function Ij(t,e,n,i,r){let o=r?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&$c(o,e)>=0&&(n[i+1]=Db(n[i+1]))}function sD(t,e,n,i,r){let o=t[n+1],s=e===null,a=i?Eo(o):Ks(o),c=!1;for(;a!==0&&(c===!1||s);){let l=t[a],u=t[a+1];Dj(l,e)&&(c=!0,t[a+1]=i?Db(u):Ib(u)),a=i?Eo(u):Ks(u)}c&&(t[n+1]=i?Ib(o):Db(o))}function Dj(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?$c(t,e)>=0:!1}var jn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Cj(t){return t.substring(jn.key,jn.keyEnd)}function Tj(t){return Sj(t),CT(t,TT(t,0,jn.textEnd))}function CT(t,e){let n=jn.textEnd;return n===e?-1:(e=jn.keyEnd=Aj(t,jn.key=e,n),TT(t,e,n))}function Sj(t){jn.key=0,jn.keyEnd=0,jn.value=0,jn.valueEnd=0,jn.textEnd=t.length}function TT(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function Aj(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function it(t,e,n){let i=me(),r=zc();if(ui(i,r,e)){let o=At(),s=iC();E2(o,s,i,t,e,i[Le],n,!1)}return it}function Cb(t,e,n,i,r){let o=e.inputs,s=r?"class":"style";by(t,n,o[s],s,i)}function Kc(t,e,n){return AT(t,e,n,!1),Kc}function qe(t,e){return AT(t,e,null,!0),qe}function ST(t){Rj(Lj,Mj,t,!0)}function Mj(t,e){for(let n=Tj(e);n>=0;n=CT(e,n))ty(t,Cj(e),!0)}function AT(t,e,n,i){let r=me(),o=At(),s=YD(2);if(o.firstUpdatePass&&RT(o,t,s,i),e!==Vi&&ui(r,s,e)){let a=o.data[_r()];kT(o,a,r,r[Le],t,r[s+1]=jj(e,n),i,s)}}function Rj(t,e,n,i){let r=At(),o=YD(2);r.firstUpdatePass&&RT(r,null,o,i);let s=me();if(n!==Vi&&ui(s,o,n)){let a=r.data[_r()];if(PT(a,i)&&!MT(r,o)){let c=i?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(n=Lg(c,n||"")),Cb(r,a,s,n,i)}else Vj(r,a,s,s[Le],s[o+1],s[o+1]=Fj(t,e,n),i,o)}}function MT(t,e){return e>=t.expandoStartIndex}function RT(t,e,n,i){let r=t.data;if(r[n+1]===null){let o=r[_r()],s=MT(t,n);PT(o,i)&&e===null&&!s&&(e=!1),e=kj(r,o,e,i),xj(r,o,e,n,s,i)}}function kj(t,e,n,i){let r=bL(t),o=i?e.residualClasses:e.residualStyles;if(r===null)(i?e.classBindings:e.styleBindings)===0&&(n=Rg(null,t,e,n,i),n=kc(n,e.attrs,i),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==r)if(n=Rg(r,t,e,n,i),o===null){let c=Pj(t,e,i);c!==void 0&&Array.isArray(c)&&(c=Rg(null,t,e,c[1],i),c=kc(c,e.attrs,i),Nj(t,e,i,c))}else o=Oj(t,e,i)}return o!==void 0&&(i?e.residualClasses=o:e.residualStyles=o),n}function Pj(t,e,n){let i=n?e.classBindings:e.styleBindings;if(Ks(i)!==0)return t[Eo(i)]}function Nj(t,e,n,i){let r=n?e.classBindings:e.styleBindings;t[Eo(r)]=i}function Oj(t,e,n){let i,r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++){let s=t[o].hostAttrs;i=kc(i,s,n)}return kc(i,e.attrs,n)}function Rg(t,e,n,i,r){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],i=kc(i,o.hostAttrs,r),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),i}function kc(t,e,n){let i=n?1:2,r=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?r=s:r===i&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),ty(t,s,n?!0:e[++o]))}return t===void 0?null:t}function Fj(t,e,n){if(n==null||n==="")return Ft;let i=[],r=wh(n);if(Array.isArray(r))for(let o=0;o<r.length;o++)t(i,r[o],!0);else if(typeof r=="object")for(let o in r)r.hasOwnProperty(o)&&t(i,o,r[o]);else typeof r=="string"&&e(i,r);return i}function Lj(t,e,n){let i=String(e);i!==""&&!i.includes(" ")&&ty(t,i,n)}function Vj(t,e,n,i,r,o,s,a){r===Vi&&(r=Ft);let c=0,l=0,u=0<r.length?r[0]:null,d=0<o.length?o[0]:null;for(;u!==null||d!==null;){let h=c<r.length?r[c+1]:void 0,f=l<o.length?o[l+1]:void 0,m=null,p;u===d?(c+=2,l+=2,h!==f&&(m=d,p=f)):d===null||u!==null&&u<d?(c+=2,m=u):(l+=2,m=d,p=f),m!==null&&kT(t,e,n,i,m,p,s,a),u=c<r.length?r[c]:null,d=l<o.length?o[l]:null}}function kT(t,e,n,i,r,o,s,a){if(!(e.type&3))return;let c=t.data,l=c[a+1],u=Ej(l)?aD(c,e,n,r,Ks(l),s):void 0;if(!sh(u)){sh(o)||vj(l)&&(o=aD(c,null,n,r,a,s));let d=UD(_r(),n);NV(i,s,d,r,o)}}function aD(t,e,n,i,r,o){let s=e===null,a;for(;r>0;){let c=t[r],l=Array.isArray(c),u=l?c[1]:c,d=u===null,h=n[r+1];h===Vi&&(h=d?Ft:void 0);let f=d?xg(h,i):u===i?h:void 0;if(l&&!sh(f)&&(f=xg(c,i)),sh(f)&&(a=f,s))return a;let m=t[r+1];r=s?Eo(m):Ks(m)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=xg(c,i))}return a}function sh(t){return t!==void 0}function jj(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Lt(wh(t)))),t}function PT(t,e){return(t.flags&(e?8:16))!==0}function NT(t){let e=t[Sc]??[],i=t[Qe][Le];for(let r of e)Bj(r,i);t[Sc]=Ft}function Bj(t,e){let n=0,i=t.firstChild;if(i){let r=t.data[th];for(;n<r;){let o=i.nextSibling;UC(e,i,!1),i=o,n++}}}function OT(t){NT(t);for(let e=wt;e<t.length;e++)ah(t[e])}function ah(t){let e=t[J];for(let n=mt;n<e.bindingStartIndex;n++)if(Cn(t[n])){let i=t[n];OT(i)}else ai(t[n])&&ah(t[n])}function Uj(t){let e=t._views;for(let n of e){let i=WV(n);if(i!==null&&i[an]!==null)if(ai(i))ah(i);else{let r=i[an];ah(r),OT(i)}}}var zj=new RegExp(`^(\\d+)*(${WC}|${GC})*(.*)`);function $j(t){let e=t.match(zj),[n,i,r,o]=e,s=i?parseInt(i,10):r,a=[];for(let[c,l,u]of o.matchAll(/(f|n)(\d*)/g)){let d=parseInt(u,10)||1;a.push(l,d)}return[s,...a]}function Hj(t){return!t.prev&&t.parent?.type===8}function kg(t){return t.index-mt}function Sh(t,e,n,i){let r=null,o=kg(i),s=t.data[UV];if(s?.[o])r=Gj(s[o],n);else if(e.firstChild===i)r=t.firstChild;else{let a=i.prev===null,c=i.prev??i.parent;if(Hj(i)){let l=kg(i.parent);r=nb(t,l)}else{let l=un(c,n);if(a)r=l.firstChild;else{let u=kg(c),d=nb(t,u);if(c.type===2&&d){let f=fy(t,u)+1;r=Ah(f,d)}else r=l.nextSibling}}}return r}function Ah(t,e){let n=e;for(let i=0;i<t;i++)n=n.nextSibling;return n}function qj(t,e){let n=t;for(let i=0;i<e.length;i+=2){let r=e[i],o=e[i+1];for(let s=0;s<o;s++)switch(r){case tb.FirstChild:n=n.firstChild;break;case tb.NextSibling:n=n.nextSibling;break}}return n}function Gj(t,e){let[n,...i]=$j(t),r;if(n===GC)r=e[Gt][an];else if(n===WC)r=oV(e[Gt][an]);else{let o=Number(n);r=zn(e[o+mt])}return qj(r,i)}function Wj(t,e){let n=[];for(let i of e)for(let r=0;r<(i[KC]??1);r++){let o={data:i,firstChild:null};i[th]>0&&(o.firstChild=t,t=Ah(i[th],t)),n.push(o)}return[t,n]}var FT=(t,e)=>null;function Kj(t,e){let n=t[Sc];return!e||n===null||n.length===0?null:n[0].data[BV]===e?n.shift():(NT(t),null)}function Qj(){FT=Kj}function Pc(t,e){return FT(t,e)}var Tb=class{destroy(e){}updateValue(e,n){}swap(e,n){let i=Math.min(e,n),r=Math.max(e,n),o=this.detach(r);if(r-i>1){let s=this.detach(i);this.attach(i,o),this.attach(r,s)}else this.attach(i,o)}move(e,n){this.attach(n,this.detach(e))}};function Pg(t,e,n,i,r){return t===n&&Object.is(e,i)?1:Object.is(r(t,e),r(n,i))?-1:0}function Yj(t,e,n){let i,r,o=0,s=t.length-1;if(Array.isArray(e)){let a=e.length-1;for(;o<=s&&o<=a;){let c=t.at(o),l=e[o],u=Pg(o,c,o,l,n);if(u!==0){u<0&&t.updateValue(o,l),o++;continue}let d=t.at(s),h=e[a],f=Pg(s,d,a,h,n);if(f!==0){f<0&&t.updateValue(s,h),s--,a--;continue}let m=n(o,c),p=n(s,d),g=n(o,l);if(Object.is(g,p)){let w=n(a,h);Object.is(w,m)?(t.swap(o,s),t.updateValue(s,h),a--,s--):t.move(s,o),t.updateValue(o,l),o++;continue}if(i??=new ch,r??=lD(t,o,s,n),Sb(t,i,o,g))t.updateValue(o,l),o++,s++;else if(r.has(g))i.set(m,t.detach(o)),s--;else{let w=t.create(o,e[o]);t.attach(o,w),o++,s++}}for(;o<=a;)cD(t,i,n,o,e[o]),o++}else if(e!=null){let a=e[Symbol.iterator](),c=a.next();for(;!c.done&&o<=s;){let l=t.at(o),u=c.value,d=Pg(o,l,o,u,n);if(d!==0)d<0&&t.updateValue(o,u),o++,c=a.next();else{i??=new ch,r??=lD(t,o,s,n);let h=n(o,u);if(Sb(t,i,o,h))t.updateValue(o,u),o++,s++,c=a.next();else if(!r.has(h))t.attach(o,t.create(o,u)),o++,s++,c=a.next();else{let f=n(o,l);i.set(f,t.detach(o)),s--}}}for(;!c.done;)cD(t,i,n,t.length,c.value),c=a.next()}for(;o<=s;)t.destroy(t.detach(s--));i?.forEach(a=>{t.destroy(a)})}function Sb(t,e,n,i){return e!==void 0&&e.has(i)?(t.attach(n,e.get(i)),e.delete(i),!0):!1}function cD(t,e,n,i,r){if(Sb(t,e,i,n(i,r)))t.updateValue(i,r);else{let o=t.create(i,r);t.attach(i,o)}}function lD(t,e,n,i){let r=new Set;for(let o=e;o<=n;o++)r.add(i(o,t.at(o)));return r}var ch=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let i=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let r=this._vMap;for(;r.has(i);)i=r.get(i);r.set(i,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,i]of this.kvMap)if(e(i,n),this._vMap!==void 0){let r=this._vMap;for(;r.has(i);)i=r.get(i),e(i,n)}}};function Mh(t,e,n,i){let r=e.tView,s=t[Q]&4096?4096:16,a=Ch(t,r,n,s,null,e,null,null,null,i?.injector??null,i?.dehydratedView??null),c=t[e.index];a[Lc]=c;let l=t[si];return l!==null&&(a[si]=l.createEmbeddedView(r)),wy(r,a,n),a}function LT(t,e){let n=wt+e;if(n<t.length)return t[n]}function Nc(t,e){return!e||e.firstChild===null||Jd(t)}function Rh(t,e,n,i=!0){let r=e[J];if(xV(r,e,t,n),i){let s=Xg(n,t),a=e[Le],c=cy(a,t[Oi]);c!==null&&vV(r,t[ln],a,e,c,s)}let o=e[Un];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function VT(t,e){let n=Rc(t,e);return n!==void 0&&vh(n[J],n),n}var Zt=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=Zj;let t=e;return t})();function Zj(){let t=dn();return BT(t,me())}var Xj=Zt,jT=class extends Xj{constructor(e,n,i){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=i}get element(){return Js(this._hostTNode,this._hostLView)}get injector(){return new fo(this._hostTNode,this._hostLView)}get parentInjector(){let e=Jb(this._hostTNode,this._hostLView);if(aC(e)){let n=Kd(e,this._hostLView),i=Wd(e),r=n[J].data[i+8];return new fo(r,n)}else return new fo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=uD(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-wt}createEmbeddedView(e,n,i){let r,o;typeof i=="number"?r=i:i!=null&&(r=i.index,o=i.injector);let s=Pc(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,r,Nc(this._hostTNode,s)),a}createComponent(e,n,i,r,o){let s=e&&!OL(e),a;if(s)a=n;else{let m=n||{};a=m.index,i=m.injector,r=m.projectableNodes,o=m.environmentInjector||m.ngModuleRef}let c=s?e:new Ws(fr(e)),l=i||this.parentInjector;if(!o&&c.ngModule==null){let p=(s?l:this.parentInjector).get(cn,null);p&&(o=p)}let u=fr(c.componentType??{}),d=Pc(this._lContainer,u?.id??null),h=d?.firstChild??null,f=c.create(l,r,h,o);return this.insertImpl(f.hostView,a,Nc(this._hostTNode,d)),f}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,i){let r=e._lView;if(tL(r)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=r[Qe],l=new jT(c,c[ln],c[Qe]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return Rh(s,r,o,i),e.attachToViewContainerRef(),bC(Ng(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=uD(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),i=Rc(this._lContainer,n);i&&(Yd(Ng(this._lContainer),n),vh(i[J],i))}detach(e){let n=this._adjustIndex(e,-1),i=Rc(this._lContainer,n);return i&&Yd(Ng(this._lContainer),n)!=null?new wo(i):null}_adjustIndex(e,n=0){return e??this.length+n}};function uD(t){return t[qd]}function Ng(t){return t[qd]||(t[qd]=[])}function BT(t,e){let n,i=e[t.index];return Cn(i)?n=i:(n=pT(i,e,null,t),e[t.index]=n,Th(e,n)),UT(n,e,t,i),new jT(n,t,e)}function Jj(t,e){let n=t[Le],i=n.createComment(""),r=un(e,t),o=cy(n,r);return eh(n,o,i,AV(n,r),!1),i}var UT=zT,Ey=(t,e,n)=>!1;function eB(t,e,n){return Ey(t,e,n)}function zT(t,e,n,i){if(t[Oi])return;let r;n.type&8?r=zn(i):r=Jj(e,n),t[Oi]=r}function tB(t,e,n){if(t[Oi]&&t[Sc])return!0;let i=n[Un],r=e.index-mt;if(!i||cV(e)||xh(i,r))return!1;let s=nb(i,r),a=i.data[dy]?.[r],[c,l]=Wj(s,a);return t[Oi]=c,t[Sc]=l,!0}function nB(t,e,n,i){Ey(t,n,e)||zT(t,e,n,i)}function iB(){UT=nB,Ey=tB}function rB(t,e,n,i,r,o,s,a,c){let l=e.consts,u=Wc(e,t,4,s||null,Gd(l,a));dT(e,n,u,Gd(l,c)),Xb(e,u);let d=u.tView=gy(2,u,i,r,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}function di(t,e,n,i,r,o,s,a){let c=me(),l=At(),u=t+mt,d=l.firstCreatePass?rB(u,l,c,e,n,i,r,o,s):l.data[u];Uc(d,!1);let h=$T(l,c,d,t);Zb()&&ly(l,c,h,d),_o(h,c);let f=pT(h,c,h,d);return c[u]=f,Th(c,f),eB(f,d,c),qb(d)&&aT(l,c,d),s!=null&&cT(c,d,a),di}var $T=HT;function HT(t,e,n,i){return vr(!0),e[Le].createComment("")}function oB(t,e,n,i){let r=e[Un],o=!r||Ys()||xh(r,i);if(vr(o),o)return HT(t,e,n,i);let s=r.data[jV]?.[i]??null;s!==null&&n.tView!==null&&n.tView.ssrId===null&&(n.tView.ssrId=s);let a=Sh(r,t,e,n);Eh(r,i,a);let c=fy(r,i);return Ah(c,a)}function sB(){$T=oB}function kh(t,e,n){Er("NgControlFlow");let i=me(),r=zc(),o=kb(i,mt+t),s=0;if(ui(i,r,e)){let a=vt(null);try{if(VT(o,s),e!==-1){let c=Pb(i[J],mt+e),l=Pc(o,c.tView.ssrId),u=Mh(i,c,n,{dehydratedView:l});Rh(o,u,s,Nc(c,l))}}finally{vt(a)}}else{let a=LT(o,s);a!==void 0&&(a[St]=n)}}var Ab=class{constructor(e,n,i){this.lContainer=e,this.$implicit=n,this.$index=i}get $count(){return this.lContainer.length-wt}};function xy(t,e){return e}var Mb=class{constructor(e,n,i){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=i}};function Iy(t,e,n,i,r,o,s,a,c,l,u){Er("NgControlFlow");let d=c!==void 0,h=me(),f=a?s.bind(h[Gt][St]):s,m=new Mb(d,f);h[mt+t]=m,di(t+1,e,n,i,r,o),d&&di(t+2,c,l,u)}var Rb=class extends Tb{constructor(e,n,i){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=i,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-wt}at(e){return this.getLView(e)[St].$implicit}attach(e,n){let i=n[Un];this.needsIndexUpdate||=e!==this.length,Rh(this.lContainer,n,e,Nc(this.templateTNode,i))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,aB(this.lContainer,e)}create(e,n){let i=Pc(this.lContainer,this.templateTNode.tView.ssrId);return Mh(this.hostLView,this.templateTNode,new Ab(this.lContainer,n,e),{dehydratedView:i})}destroy(e){vh(e[J],e)}updateValue(e,n){this.getLView(e)[St].$implicit=n}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[St].$index=e}getLView(e){return cB(this.lContainer,e)}};function Dy(t){let e=vt(null),n=_r();try{let i=me(),r=i[J],o=i[n];if(o.liveCollection===void 0){let a=n+1,c=kb(i,a),l=Pb(r,a);o.liveCollection=new Rb(c,i,l)}else o.liveCollection.reset();let s=o.liveCollection;if(Yj(s,t,o.trackByFn),s.updateIndexes(),o.hasEmptyBlock){let a=zc(),c=s.length===0;if(ui(i,a,c)){let l=n+2,u=kb(i,l);if(c){let d=Pb(r,l),h=Pc(u,d.tView.ssrId),f=Mh(i,d,void 0,{dehydratedView:h});Rh(u,f,0,Nc(d,h))}else VT(u,0)}}}finally{vt(e)}}function kb(t,e){return t[e]}function aB(t,e){return Rc(t,e)}function cB(t,e){return LT(t,e)}function Pb(t,e){return Gb(t,e)}function lB(t,e,n,i,r,o){let s=e.consts,a=Gd(s,r),c=Wc(e,t,2,i,a);return dT(e,n,c,Gd(s,o)),c.attrs!==null&&wb(c,c.attrs,!1),c.mergedAttrs!==null&&wb(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function pe(t,e,n,i){let r=me(),o=At(),s=mt+t,a=r[Le],c=o.firstCreatePass?lB(s,o,r,e,n,i):o.data[s],l=qT(o,r,c,a,e,t);r[s]=l;let u=qb(c);return Uc(c,!0),qC(a,l,c),(c.flags&32)!==32&&Zb()&&ly(o,r,l,c),oL()===0&&_o(l,r),sL(),u&&(aT(o,r,c),sT(o,c,r)),i!==null&&cT(r,c),pe}function De(){let t=dn();WD()?KD():(t=t.parent,Uc(t,!1));let e=t;cL(e)&&uL(),aL();let n=At();return n.firstCreatePass&&(Xb(n,t),FD(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&xL(e)&&Cb(n,e,me(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&IL(e)&&Cb(n,e,me(),e.stylesWithoutHost,!1),De}function pt(t,e,n,i){return pe(t,e,n,i),De(),pt}var qT=(t,e,n,i,r,o)=>(vr(!0),ay(i,r,rC()));function uB(t,e,n,i,r,o){let s=e[Un],a=!s||Ys()||xh(s,o);if(vr(a),a)return ay(i,r,rC());let c=Sh(s,t,e,n);return ZC(s,o)&&Eh(s,o,c.nextSibling),s&&(SC(n)||AC(c))&&Vc(n)&&(lL(n),zC(c)),c}function dB(){qT=uB}var hB=(t,e,n,i)=>(vr(!0),OC(e[Le],""));function fB(t,e,n,i){let r,o=e[Un],s=!o||Ys();if(vr(s),s)return OC(e[Le],"");let a=Sh(o,t,e,n),c=YV(o,i);return Eh(o,i,a),r=Ah(c,a),r}function mB(){hB=fB}function Cy(){return me()}var lh="en-US";var pB=lh;function gB(t){bF(t,"Expected localeId to be defined"),typeof t=="string"&&(pB=t.toLowerCase().replace(/_/g,"-"))}function To(t){return!!t&&typeof t.then=="function"}function GT(t){return!!t&&typeof t.subscribe=="function"}function Ve(t,e,n,i){let r=me(),o=At(),s=dn();return yB(o,r,r[Le],s,t,e,i),Ve}function bB(t,e,n,i){let r=t.cleanup;if(r!=null)for(let o=0;o<r.length-1;o+=2){let s=r[o];if(s===n&&r[o+1]===i){let a=e[Cc],c=r[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function yB(t,e,n,i,r,o,s){let a=qb(i),l=t.firstCreatePass&&yT(t),u=e[St],d=bT(e),h=!0;if(i.type&3||s){let p=un(i,e),g=s?s(p):p,w=d.length,A=s?O=>s(zn(O[i.index])):i.index,C=null;if(!s&&a&&(C=bB(t,e,r,i.index)),C!==null){let O=C.__ngLastListenerFn__||C;O.__ngNextListenerFn__=o,C.__ngLastListenerFn__=o,h=!1}else{o=hD(i,e,u,o,!1);let O=n.listen(g,r,o);d.push(o,O),l&&l.push(r,A,w,w+1)}}else o=hD(i,e,u,o,!1);let f=i.outputs,m;if(h&&f!==null&&(m=f[r])){let p=m.length;if(p)for(let g=0;g<p;g+=2){let w=m[g],A=m[g+1],z=e[w][A].subscribe(o),H=d.length;d.push(o,z),l&&l.push(r,i.index,H,-(H+1))}}}function dD(t,e,n,i){try{return ri(6,e,n),n(i)!==!1}catch(r){return _T(t,r),!1}finally{ri(7,e,n)}}function hD(t,e,n,i,r){return function o(s){if(s===Function)return i;let a=t.componentOffset>-1?yr(t.index,e):e;yy(a);let c=dD(e,n,i,s),l=o.__ngNextListenerFn__;for(;l;)c=dD(e,n,l,s)&&c,l=l.__ngNextListenerFn__;return r&&c===!1&&s.preventDefault(),c}}function $n(t=1){return _L(t)}function _B(t,e){let n=null,i=FF(t);for(let r=0;r<e.length;r++){let o=e[r];if(o==="*"){n=r;continue}if(i===null?TD(t,o,!0):jF(i,o))return r}return n}function mi(t){let e=me()[Gt][ln];if(!e.projection){let n=t?t.length:1,i=e.projection=yC(n,null),r=i.slice(),o=e.child;for(;o!==null;){let s=t?_B(o,t):0;s!==null&&(r[s]?r[s].projectionNext=o:i[s]=o,r[s]=o),o=o.next}}}function hn(t,e=0,n){let i=me(),r=At(),o=Wc(r,mt+t,16,null,n||null);o.projection===null&&(o.projection=e),KD(),(!i[Un]||Ys())&&(o.flags&32)!==32&&kV(r,i,o)}function Ph(t){let e=hL();return JF(e,mt+t)}function fn(t,e=""){let n=me(),i=At(),r=t+mt,o=i.firstCreatePass?Wc(i,r,1,e,null):i.data[r],s=WT(i,n,o,e,t);n[r]=s,Zb()&&ly(i,n,s,o),Uc(o,!1)}var WT=(t,e,n,i,r)=>(vr(!0),NC(e[Le],i));function vB(t,e,n,i,r){let o=e[Un],s=!o||Ys()||xh(o,r);return vr(s),s?NC(e[Le],i):Sh(o,t,e,n)}function wB(){WT=vB}function So(t){return Ty("",t,""),So}function Ty(t,e,n){let i=me(),r=_j(i,t,e,n);return r!==Vi&&V2(i,_r(),r),Ty}function EB(t,e,n){let i=At();if(i.firstCreatePass){let r=pr(t);Nb(n,i.data,i.blueprint,r,!0),Nb(e,i.data,i.blueprint,r,!1)}}function Nb(t,e,n,i,r){if(t=Ot(t),Array.isArray(t))for(let o=0;o<t.length;o++)Nb(t[o],e,n,i,r);else{let o=At(),s=me(),a=dn(),c=Gs(t)?t:Ot(t.provide),l=IC(t),u=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(Gs(t)||!t.multi){let f=new go(l,r,S),m=Fg(c,e,r?u:u+h,d);m===-1?(Gg(Qd(a,s),o,c),Og(o,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),n.push(f),s.push(f)):(n[m]=f,s[m]=f)}else{let f=Fg(c,e,u+h,d),m=Fg(c,e,u,u+h),p=f>=0&&n[f],g=m>=0&&n[m];if(r&&!g||!r&&!p){Gg(Qd(a,s),o,c);let w=DB(r?IB:xB,n.length,r,i,l);!r&&g&&(n[m].providerFactory=w),Og(o,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),n.push(w),s.push(w)}else{let w=KT(n[r?m:f],l,!r&&i);Og(o,t,f>-1?f:m,w)}!r&&i&&g&&n[m].componentProviders++}}}function Og(t,e,n,i){let r=Gs(e),o=YL(e);if(r||o){let c=(o?Ot(e.useClass):e).prototype.ngOnDestroy;if(c){let l=t.destroyHooks||(t.destroyHooks=[]);if(!r&&e.multi){let u=l.indexOf(n);u===-1?l.push(n,[i,c]):l[u+1].push(i,c)}else l.push(n,c)}}}function KT(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Fg(t,e,n,i){for(let r=n;r<i;r++)if(e[r]===t)return r;return-1}function xB(t,e,n,i){return Ob(this.multi,[])}function IB(t,e,n,i){let r=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=bo(n,n[J],this.providerFactory.index,i);o=a.slice(0,s),Ob(r,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],Ob(r,o);return o}function Ob(t,e){for(let n=0;n<t.length;n++){let i=t[n];e.push(i())}return e}function DB(t,e,n,i,r){let o=new go(t,n,S);return o.multi=[],o.index=e,o.componentProviders=0,KT(o,r,i&&!n),o}function mn(t,e=[]){return n=>{n.providersResolver=(i,r)=>EB(i,r?r(t):t,e)}}var gr=class{},Oc=class{};var uh=class extends gr{constructor(e,n,i){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new oh(this);let r=RD(e);this._bootstrapComponents=TC(r.bootstrap),this._r3Injector=DC(e,n,[{provide:gr,useValue:this},{provide:wr,useValue:this.componentFactoryResolver},...i],Lt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},dh=class extends Oc{constructor(e){super(),this.moduleType=e}create(e){return new uh(this.moduleType,e,[])}};function CB(t,e,n){return new uh(t,e,n)}var Fb=class extends gr{constructor(e){super(),this.componentFactoryResolver=new oh(this),this.instance=null;let n=new Mc([...e.providers,{provide:gr,useValue:this},{provide:wr,useValue:this.componentFactoryResolver}],e.parent||iy(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Nh(t,e,n=null){return new Fb({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var TB=(()=>{let e=class e{constructor(i){this._injector=i,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(i){if(!i.standalone)return null;if(!this.cachedInjectors.has(i)){let r=wC(!1,i.type),o=r.length>0?Nh([r],this._injector,`Standalone[${i.type.name}]`):null;this.cachedInjectors.set(i,o)}return this.cachedInjectors.get(i)}ngOnDestroy(){try{for(let i of this.cachedInjectors.values())i!==null&&i.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=R({token:e,providedIn:"environment",factory:()=>new e(v(cn))});let t=e;return t})();function Sy(t){Er("NgStandalone"),t.getStandaloneInjector=e=>e.get(TB).getOrCreateStandaloneInjector(t)}function QT(t,e,n,i){return SB(me(),QD(),t,e,n,i)}function YT(t,e,n,i,r){return AB(me(),QD(),t,e,n,i,r)}function ZT(t,e){let n=t[e];return n===Vi?void 0:n}function SB(t,e,n,i,r,o){let s=e+n;return ui(t,s,r)?DT(t,s+1,o?i.call(o,r):i(r)):ZT(t,s+1)}function AB(t,e,n,i,r,o,s){let a=e+n;return yj(t,a,r,o)?DT(t,a+2,s?i.call(s,r,o):i(r,o)):ZT(t,a+2)}function MB(){return this._results[Symbol.iterator]()}var br=class t{get changes(){return this._changes??=new se}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=t.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=MB)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let i=LL(e);(this._changesDetected=!FL(this._results,i,n))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}},Wt=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=PB;let t=e;return t})(),RB=Wt,kB=class extends RB{constructor(e,n,i){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,i){let r=Mh(this._declarationLView,this._declarationTContainer,e,{injector:n,dehydratedView:i});return new wo(r)}};function PB(){return Ay(dn(),me())}function Ay(t,e){return t.type&4?new kB(e,t,Js(t,e)):null}var Lb=class t{constructor(e){this.queryList=e,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},Vb=class t{constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let i=e.contentQueries!==null?e.contentQueries[0]:n.length,r=[];for(let o=0;o<i;o++){let s=n.getByIndex(o),a=this.queries[s.indexInDeclarationView];r.push(a.clone())}return new t(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)tS(e,n).matches!==null&&this.queries[n].setDirty()}},hh=class{constructor(e,n,i=null){this.predicate=e,this.flags=n,this.read=i}},jb=class t{constructor(e=[]){this.queries=e}elementStart(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let i=0;i<this.length;i++){let r=n!==null?n.length:0,o=this.getByIndex(i).embeddedTView(e,r);o&&(o.indexInDeclarationView=i,n!==null?n.push(o):n=[o])}return n!==null?new t(n):null}template(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Bb=class t{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,i=e.parent;for(;i!==null&&i.type&8&&i.index!==n;)i=i.parent;return n===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let o=i[r];this.matchTNodeWithReadOption(e,n,NB(n,o)),this.matchTNodeWithReadOption(e,n,jd(n,e,o,!1,!1))}else i===Wt?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,jd(n,e,i,!1,!1))}matchTNodeWithReadOption(e,n,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===de||r===Zt||r===Wt&&n.type&4)this.addMatch(n.index,-2);else{let o=jd(n,e,r,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,i)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function NB(t,e){let n=t.localNames;if(n!==null){for(let i=0;i<n.length;i+=2)if(n[i]===e)return n[i+1]}return null}function OB(t,e){return t.type&11?Js(t,e):t.type&4?Ay(t,e):null}function FB(t,e,n,i){return n===-1?OB(e,t):n===-2?LB(t,e,i):bo(t,t[J],n,e)}function LB(t,e,n){if(n===de)return Js(e,t);if(n===Wt)return Ay(e,t);if(n===Zt)return BT(e,t)}function XT(t,e,n,i){let r=e[si].queries[i];if(r.matches===null){let o=t.data,s=n.matches,a=[];for(let c=0;c<s.length;c+=2){let l=s[c];if(l<0)a.push(null);else{let u=o[l];a.push(FB(e,u,s[c+1],n.metadata.read))}}r.matches=a}return r.matches}function Ub(t,e,n,i){let r=t.queries.getByIndex(n),o=r.matches;if(o!==null){let s=XT(t,e,r,n);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)i.push(s[a/2]);else{let l=o[a+1],u=e[-c];for(let d=wt;d<u.length;d++){let h=u[d];h[Lc]===h[Qe]&&Ub(h[J],h,l,i)}if(u[$s]!==null){let d=u[$s];for(let h=0;h<d.length;h++){let f=d[h];Ub(f[J],f,l,i)}}}}}return i}function rt(t){let e=me(),n=At(),i=ZD();Kb(i+1);let r=tS(n,i);if(t.dirty&&eL(e)===((r.metadata.flags&2)===2)){if(r.matches===null)t.reset([]);else{let o=r.crossesNgTemplate?Ub(n,e,i,[]):XT(n,e,r,i);t.reset(o,e2),t.notifyOnChanges()}return!0}return!1}function pn(t,e,n){let i=At();i.firstCreatePass&&(eS(i,new hh(t,e,n),-1),(e&2)===2&&(i.staticViewQueries=!0)),JT(i,me(),e)}function Bi(t,e,n,i){let r=At();if(r.firstCreatePass){let o=dn();eS(r,new hh(e,n,i),o.index),jB(r,t),(n&2)===2&&(r.staticContentQueries=!0)}JT(r,me(),n)}function ot(){return VB(me(),ZD())}function VB(t,e){return t[si].queries[e].queryList}function JT(t,e,n){let i=new br((n&4)===4);y2(t,e,i,i.destroy),e[si]===null&&(e[si]=new Vb),e[si].queries.push(new Lb(i))}function eS(t,e,n){t.queries===null&&(t.queries=new jb),t.queries.track(new Bb(e,n))}function jB(t,e){let n=t.contentQueries||(t.contentQueries=[]),i=n.length?n[n.length-1]:-1;e!==i&&n.push(t.queries.length-1,e)}function tS(t,e){return t.queries.getByIndex(e)}var Od=null;function BB(t){Od!==null&&(t.defaultEncapsulation!==Od.defaultEncapsulation||t.preserveWhitespaces!==Od.preserveWhitespaces)||(Od=t)}var hi=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},nS=new hi("17.0.8");var Oh=(()=>{let e=class e{log(i){console.log(i)}warn(i){console.warn(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})(),zb=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Fh=(()=>{let e=class e{compileModuleSync(i){return new dh(i)}compileModuleAsync(i){return Promise.resolve(this.compileModuleSync(i))}compileModuleAndAllComponentsSync(i){let r=this.compileModuleSync(i),o=RD(i),s=TC(o.declarations).reduce((a,c)=>{let l=fr(c);return l&&a.push(new Ws(l)),a},[]);return new zb(r,s)}compileModuleAndAllComponentsAsync(i){return Promise.resolve(this.compileModuleAndAllComponentsSync(i))}clearCache(){}clearCacheFor(i){}getModuleId(i){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),UB=new M("compilerOptions");var Qc=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new et(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let i=this.taskId++;return this.pendingTasks.add(i),i}remove(i){this.pendingTasks.delete(i),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var My=new M(""),Yc=new M(""),Lh=(()=>{let e=class e{constructor(i,r,o){this._ngZone=i,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Ry||(zB(o),o.addToWindow(r)),this._watchAngularEvents(),i.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{U.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&this._pendingCount===0&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let i=this._callbacks.pop();clearTimeout(i.timeoutId),i.doneCb(this._didWork)}this._didWork=!1});else{let i=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(i)?(clearTimeout(r.timeoutId),!1):!0),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(i=>({source:i.source,creationLocation:i.creationLocation,data:i.data})):[]}addCallback(i,r,o){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==s),i(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:i,timeoutId:s,updateCb:o})}whenStable(i,r,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(i,r,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(i){this.registry.registerApplication(i,this)}unregisterApplication(i){this.registry.unregisterApplication(i)}findProviders(i,r,o){return[]}};e.\u0275fac=function(r){return new(r||e)(v(U),v(Vh),v(Yc))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})(),Vh=(()=>{let e=class e{constructor(){this._applications=new Map}registerApplication(i,r){this._applications.set(i,r)}unregisterApplication(i){this._applications.delete(i)}unregisterAllApplications(){this._applications.clear()}getTestability(i){return this._applications.get(i)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(i,r=!0){return Ry?.findTestabilityInTree(this,i,r)??null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();function zB(t){Ry=t}var Ry,jh=new M("Application Initializer"),iS=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r}),this.appInits=I(jh,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let i=[];for(let o of this.appInits){let s=o();if(To(s))i.push(s);else if(GT(s)){let a=new Promise((c,l)=>{s.subscribe({complete:c,error:l})});i.push(a)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(i).then(()=>{r()}).catch(o=>{this.reject(o)}),i.length===0&&r(),this.initialized=!0}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ea=new M("appBootstrapListener");function $B(t,e,n){let i=new dh(n);return Promise.resolve(i)}function HB(){aI(()=>{throw new D(600,!1)})}function qB(t){return t.isBoundToModule}function GB(t,e,n){try{let i=n();return To(i)?i.catch(r=>{throw e.runOutsideAngular(()=>t.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>t.handleError(i)),i}}function rS(t,e){return Array.isArray(e)?e.reduce(rS,t):T(T({},t),e)}var Hn=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=I(eT),this.componentTypes=[],this.components=[],this.isStable=I(Qc).hasPendingTasks.pipe(B(i=>!i)),this._injector=I(cn)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(i,r){let o=i instanceof nh;if(!this._injector.get(iS).done){let m="Cannot bootstrap as there are still asynchronous initializers running."+(!o&&MD(i)?"":" Bootstrap components in the `ngDoBootstrap` method of the root module.");throw new D(405,!1)}let a;o?a=i:a=this._injector.get(wr).resolveComponentFactory(i),this.componentTypes.push(a.componentType);let c=qB(a)?void 0:this._injector.get(gr),l=r||a.selector,u=a.create(Kt.NULL,[],l,c),d=u.location.nativeElement,h=u.injector.get(My,null);return h?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),zd(this.components,u),h?.unregisterApplication(d)}),this._loadComponent(u),u}tick(){if(this._runningTick)throw new D(101,!1);try{this._runningTick=!0;for(let i of this._views)i.detectChanges()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1}}attachView(i){let r=i;this._views.push(r),r.attachToAppRef(this)}detachView(i){let r=i;zd(this._views,r),r.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i);let r=this._injector.get(ea,[]);[...this._bootstrapListeners,...r].forEach(o=>o(i))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(i=>i()),this._views.slice().forEach(i=>i.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(i){return this._destroyListeners.push(i),()=>zd(this._destroyListeners,i)}destroy(){if(this._destroyed)throw new D(406,!1);let i=this._injector;i.destroy&&!i.destroyed&&i.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function zd(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function fD(t){for(let e=t.length-1;e>=0;e--)if(t[e]!==void 0)return t[e]}var Fd;function ky(t){Fd??=new WeakMap;let e=Fd.get(t);if(e)return e;let n=t.isStable.pipe(on(i=>i)).toPromise().then(()=>{});return Fd.set(t,n),t.onDestroy(()=>Fd?.delete(t)),n}var WB=(()=>{let e=class e{constructor(){this.zone=I(U),this.applicationRef=I(Hn)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function KB(t){return[{provide:U,useFactory:t},{provide:yo,multi:!0,useFactory:()=>{let e=I(WB,{optional:!0});return()=>e.initialize()}},{provide:yo,multi:!0,useFactory:()=>{let e=I(ZB);return()=>{e.initialize()}}},{provide:eT,useFactory:QB}]}function QB(){let t=I(U),e=I(li);return n=>t.runOutsideAngular(()=>e.handleError(n))}function YB(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var ZB=(()=>{let e=class e{constructor(){this.subscription=new Ee,this.initialized=!1,this.zone=I(U),this.pendingTasks=I(Qc)}initialize(){if(this.initialized)return;this.initialized=!0;let i=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(i=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{U.assertNotInAngularZone(),queueMicrotask(()=>{i!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(i),i=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{U.assertInAngularZone(),i??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function XB(){return typeof $localize<"u"&&$localize.locale||lh}var Bh=new M("LocaleId",{providedIn:"root",factory:()=>I(Bh,ce.Optional|ce.SkipSelf)||XB()});var oS=new M("PlatformDestroyListeners"),sS=(()=>{let e=class e{constructor(i){this._injector=i,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(i,r){let o=ej(r?.ngZone,YB({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return o.run(()=>{let s=CB(i.moduleType,this.injector,KB(()=>o)),a=s.injector.get(li,null);return o.runOutsideAngular(()=>{let c=o.onError.subscribe({next:l=>{a.handleError(l)}});s.onDestroy(()=>{zd(this._modules,s),c.unsubscribe()})}),GB(a,o,()=>{let c=s.injector.get(iS);return c.runInitializers(),c.donePromise.then(()=>{let l=s.injector.get(Bh,lh);return gB(l||lh),this._moduleDoBootstrap(s),s})})})}bootstrapModule(i,r=[]){let o=rS({},r);return $B(this.injector,o,i).then(s=>this.bootstrapModuleFactory(s,o))}_moduleDoBootstrap(i){let r=i.injector.get(Hn);if(i._bootstrapComponents.length>0)i._bootstrapComponents.forEach(o=>r.bootstrap(o));else if(i.instance.ngDoBootstrap)i.instance.ngDoBootstrap(r);else throw new D(-403,!1);this._modules.push(i)}onDestroy(i){this._destroyListeners.push(i)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new D(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let i=this._injector.get(oS,null);i&&(i.forEach(r=>r()),i.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}};e.\u0275fac=function(r){return new(r||e)(v(Kt))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})(),xc=null,aS=new M("AllowMultipleToken");function JB(t){if(xc&&!xc.get(aS,!1))throw new D(400,!1);HB(),xc=t;let e=t.get(sS);return nU(t),e}function Py(t,e,n=[]){let i=`Platform: ${e}`,r=new M(i);return(o=[])=>{let s=cS();if(!s||s.injector.get(aS,!1)){let a=[...n,...o,{provide:r,useValue:!0}];t?t(a):JB(eU(a,i))}return tU(r)}}function eU(t=[],e){return Kt.create({name:e,providers:[{provide:yh,useValue:"platform"},{provide:oS,useValue:new Set([()=>xc=null])},...t]})}function tU(t){let e=cS();if(!e)throw new D(401,!1);return e}function cS(){return xc?.get(sS)??null}function nU(t){t.get(ry,null)?.forEach(n=>n())}function Ny(){return!1}var lS=Py(null,"core",[]),uS=(()=>{let e=class e{constructor(i){}};e.\u0275fac=function(r){return new(r||e)(v(Hn))},e.\u0275mod=te({type:e}),e.\u0275inj=ee({});let t=e;return t})();var mD=!1;function iU(){mD||(mD=!0,GV(),dB(),wB(),mB(),sB(),iB(),Qj(),b2())}function rU(t,e){return ky(t)}function dS(){return Hc([{provide:kd,useFactory:()=>{let t=!0;return wc()&&(t=!!I(Do,{optional:!0})?.get(QC,null)),t&&Er("NgHydration"),t}},{provide:yo,useValue:()=>{wc()&&I(kd)&&(oU(),iU())},multi:!0},{provide:nT,useFactory:()=>wc()&&I(kd)},{provide:ea,useFactory:()=>{if(wc()&&I(kd)){let t=I(Hn),e=I(Kt);return()=>{rU(t,e).then(()=>{U.assertInAngularZone(),Uj(t)})}}return()=>{}},multi:!0}])}function oU(){let t=_h(),e;for(let n of t.body.childNodes)if(n.nodeType===Node.COMMENT_NODE&&n.textContent?.trim()===HV){e=n;break}if(!e)throw new D(-507,!1)}function qn(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function hS(t){let e=fr(t);if(!e)return null;let n=new Ws(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var Fy=null;function pi(){return Fy}function gS(t){Fy||(Fy=t)}var Uh=class{},he=new M("DocumentToken"),jy=(()=>{let e=class e{historyGo(i){throw new Error("Not implemented")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=R({token:e,factory:()=>(()=>I(aU))(),providedIn:"platform"});let t=e;return t})(),bS=new M("Location Initialized"),aU=(()=>{let e=class e extends jy{constructor(){super(),this._doc=I(he),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return pi().getBaseHref(this._doc)}onPopState(i){let r=pi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",i,!1),()=>r.removeEventListener("popstate",i)}onHashChange(i){let r=pi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",i,!1),()=>r.removeEventListener("hashchange",i)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(i){this._location.pathname=i}pushState(i,r,o){this._history.pushState(i,r,o)}replaceState(i,r,o){this._history.replaceState(i,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(i=0){this._history.go(i)}getState(){return this._history.state}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=R({token:e,factory:()=>(()=>new e)(),providedIn:"platform"});let t=e;return t})();function By(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function fS(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,i=n-(t[n-1]==="/"?1:0);return t.slice(0,i)+t.slice(n)}function Ui(t){return t&&t[0]!=="?"?"?"+t:t}var Ao=(()=>{let e=class e{historyGo(i){throw new Error("Not implemented")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=R({token:e,factory:()=>(()=>I(Uy))(),providedIn:"root"});let t=e;return t})(),yS=new M("appBaseHref"),Uy=(()=>{let e=class e extends Ao{constructor(i,r){super(),this._platformLocation=i,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??I(he).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}prepareExternalUrl(i){return By(this._baseHref,i)}path(i=!1){let r=this._platformLocation.pathname+Ui(this._platformLocation.search),o=this._platformLocation.hash;return o&&i?`${r}${o}`:r}pushState(i,r,o,s){let a=this.prepareExternalUrl(o+Ui(s));this._platformLocation.pushState(i,r,a)}replaceState(i,r,o,s){let a=this.prepareExternalUrl(o+Ui(s));this._platformLocation.replaceState(i,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(i=0){this._platformLocation.historyGo?.(i)}};e.\u0275fac=function(r){return new(r||e)(v(jy),v(yS,8))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),_S=(()=>{let e=class e extends Ao{constructor(i,r){super(),this._platformLocation=i,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}path(i=!1){let r=this._platformLocation.hash;return r==null&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(i){let r=By(this._baseHref,i);return r.length>0?"#"+r:r}pushState(i,r,o,s){let a=this.prepareExternalUrl(o+Ui(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(i,r,a)}replaceState(i,r,o,s){let a=this.prepareExternalUrl(o+Ui(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(i,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(i=0){this._platformLocation.historyGo?.(i)}};e.\u0275fac=function(r){return new(r||e)(v(jy),v(yS,8))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})(),ta=(()=>{let e=class e{constructor(i){this._subject=new se,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=i;let r=this._locationStrategy.getBaseHref();this._basePath=uU(fS(mS(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(i=!1){return this.normalize(this._locationStrategy.path(i))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(i,r=""){return this.path()==this.normalize(i+Ui(r))}normalize(i){return e.stripTrailingSlash(lU(this._basePath,mS(i)))}prepareExternalUrl(i){return i&&i[0]!=="/"&&(i="/"+i),this._locationStrategy.prepareExternalUrl(i)}go(i,r="",o=null){this._locationStrategy.pushState(o,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+Ui(r)),o)}replaceState(i,r="",o=null){this._locationStrategy.replaceState(o,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+Ui(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(i=0){this._locationStrategy.historyGo?.(i)}onUrlChange(i){return this._urlChangeListeners.push(i),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{let r=this._urlChangeListeners.indexOf(i);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(i="",r){this._urlChangeListeners.forEach(o=>o(i,r))}subscribe(i,r,o){return this._subject.subscribe({next:i,error:r,complete:o})}};e.normalizeQueryParams=Ui,e.joinWithSlash=By,e.stripTrailingSlash=fS,e.\u0275fac=function(r){return new(r||e)(v(Ao))},e.\u0275prov=R({token:e,factory:()=>cU(),providedIn:"root"});let t=e;return t})();function cU(){return new ta(v(Ao))}function lU(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function mS(t){return t.replace(/\/index.html$/,"")}function uU(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function vS(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let i=n.indexOf("="),[r,o]=i==-1?[n,""]:[n.slice(0,i),n.slice(i+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}var Oy=/\s+/,pS=[],wS=(()=>{let e=class e{constructor(i,r,o,s){this._iterableDiffers=i,this._keyValueDiffers=r,this._ngEl=o,this._renderer=s,this.initialClasses=pS,this.stateMap=new Map}set klass(i){this.initialClasses=i!=null?i.trim().split(Oy):pS}set ngClass(i){this.rawClass=typeof i=="string"?i.trim().split(Oy):i}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let i=this.rawClass;if(Array.isArray(i)||i instanceof Set)for(let r of i)this._updateState(r,!0);else if(i!=null)for(let r of Object.keys(i))this._updateState(r,!!i[r]);this._applyStateDiff()}_updateState(i,r){let o=this.stateMap.get(i);o!==void 0?(o.enabled!==r&&(o.changed=!0,o.enabled=r),o.touched=!0):this.stateMap.set(i,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let i of this.stateMap){let r=i[0],o=i[1];o.changed?(this._toggleClass(r,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),o.touched=!1}}_toggleClass(i,r){i=i.trim(),i.length>0&&i.split(Oy).forEach(o=>{r?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}};e.\u0275fac=function(r){return new(r||e)(S(Ih),S(py),S(de),S(Co))},e.\u0275dir=_e({type:e,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0});let t=e;return t})();var na=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=te({type:e}),e.\u0275inj=ee({});let t=e;return t})(),zy="browser",dU="server";function ES(t){return t===zy}function Mo(t){return t===dU}var xS=(()=>{let e=class e{};e.\u0275prov=R({token:e,providedIn:"root",factory:()=>new Ly(v(he),window)});let t=e;return t})(),Ly=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;let n=hU(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){let n=e.getBoundingClientRect(),i=n.left+this.window.pageXOffset,r=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(i-o[0],r-o[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}};function hU(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let i=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),r=i.currentNode;for(;r;){let o=r.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}r=i.nextNode()}}return null}var zh=class{};var Hh=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let i=n.indexOf(":");if(i>0){let r=n.slice(0,i),o=r.toLowerCase(),s=n.slice(i+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,i)=>{this.setHeaderEntries(i,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,i])=>{this.setHeaderEntries(n,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(e.name,n);let r=(e.op==="a"?this.headers.get(n):void 0)||[];r.push(...i),this.headers.set(n,r);break;case"d":let o=e.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}setHeaderEntries(e,n){let i=(Array.isArray(n)?n:[n]).map(o=>o.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var MS=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(MS||{}),$y=class{constructor(e,n=200,i="OK"){this.headers=e.headers||new Hh,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}};var qh=class t extends $y{constructor(e={}){super(e),this.type=MS.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}};var pU=new M("");var IS="b",DS="h",CS="s",TS="st",SS="u",AS="rt",$h=new M(""),gU=["GET","HEAD"];function bU(t,e){let u=I($h),{isCacheActive:n}=u,i=qx(u,["isCacheActive"]),{transferCache:r,method:o}=t;if(!n||o==="POST"&&!i.includePostRequests&&!r||o!=="POST"&&!gU.includes(o)||r===!1||i.filter?.(t)===!1)return e(t);let s=I(Do),a=_U(t),c=s.get(a,null),l=i.includeHeaders;if(typeof r=="object"&&r.includeHeaders&&(l=r.includeHeaders),c){let{[IS]:d,[AS]:h,[DS]:f,[CS]:m,[TS]:p,[SS]:g}=c,w=d;switch(h){case"arraybuffer":w=new TextEncoder().encode(d).buffer;break;case"blob":w=new Blob([d]);break}let A=new Hh(f);return V(new qh({body:w,headers:A,status:m,statusText:p,url:g}))}return e(t).pipe(Fe(d=>{d instanceof qh&&s.set(a,{[IS]:d.body,[DS]:yU(d.headers,l),[CS]:d.status,[TS]:d.statusText,[SS]:d.url||"",[AS]:t.responseType})}))}function yU(t,e){if(!e)return{};let n={};for(let i of e){let r=t.getAll(i);r!==null&&(n[i]=r)}return n}function _U(t){let{params:e,method:n,responseType:i,url:r}=t,o=e.keys().sort().map(c=>`${c}=${e.getAll(c)}`).join("&"),s=n+"."+i+"."+r+"?"+o,a=vU(s);return a}function vU(t){let e=0;for(let n of t)e=Math.imul(31,e)+n.charCodeAt(0)<<0;return e+=2147483647+1,e.toString()}function RS(t){return[{provide:$h,useFactory:()=>(Er("NgHttpTransferCache"),T({isCacheActive:!0},t))},{provide:pU,useValue:bU,multi:!0,deps:[Do,$h]},{provide:ea,multi:!0,useFactory:()=>{let e=I(Hn),n=I($h);return()=>{ky(e).then(()=>{n.isCacheActive=!1})}}}]}var Gy=class extends Uh{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Wy=class t extends Gy{static makeCurrent(){gS(new t)}onAndCancel(e,n,i){return e.addEventListener(n,i),()=>{e.removeEventListener(n,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=wU();return n==null?null:EU(n)}resetBaseElement(){Zc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return vS(document.cookie,e)}},Zc=null;function wU(){return Zc=Zc||document.querySelector("base"),Zc?Zc.getAttribute("href"):null}function EU(t){return new URL(t,document.baseURI).pathname}var Ky=class{addToWindow(e){sn.getAngularTestability=(i,r=!0)=>{let o=e.findTestabilityInTree(i,r);if(o==null)throw new D(5103,!1);return o},sn.getAllAngularTestabilities=()=>e.getAllTestabilities(),sn.getAllAngularRootElements=()=>e.getAllRootElements();let n=i=>{let r=sn.getAllAngularTestabilities(),o=r.length,s=!1,a=function(c){s=s||c,o--,o==0&&i(s)};r.forEach(c=>{c.whenStable(a)})};sn.frameworkStabilizers||(sn.frameworkStabilizers=[]),sn.frameworkStabilizers.push(n)}findTestabilityInTree(e,n,i){if(n==null)return null;let r=e.getTestability(n);return r??(i?pi().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},xU=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})(),Qy=new M("EventManagerPlugins"),NS=(()=>{let e=class e{constructor(i,r){this._zone=r,this._eventNameToPlugin=new Map,i.forEach(o=>{o.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,r,o){return this._findPluginFor(r).addEventListener(i,r,o)}getZone(){return this._zone}_findPluginFor(i){let r=this._eventNameToPlugin.get(i);if(r)return r;if(r=this._plugins.find(s=>s.supports(i)),!r)throw new D(5101,!1);return this._eventNameToPlugin.set(i,r),r}};e.\u0275fac=function(r){return new(r||e)(v(Qy),v(U))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})(),Gh=class{constructor(e){this._doc=e}},Hy="ng-app-id",OS=(()=>{let e=class e{constructor(i,r,o,s={}){this.doc=i,this.appId=r,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Mo(s),this.resetHostNodes()}addStyles(i){for(let r of i)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(i){for(let r of i)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let i=this.styleNodesInDOM;i&&(i.forEach(r=>r.remove()),i.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(let r of this.getAllStyles())this.addStyleToHost(i,r)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(let r of this.hostNodes)this.addStyleToHost(r,i)}onStyleRemoved(i){let r=this.styleRef;r.get(i)?.elements?.forEach(o=>o.remove()),r.delete(i)}collectServerRenderedStyles(){let i=this.doc.head?.querySelectorAll(`style[${Hy}="${this.appId}"]`);if(i?.length){let r=new Map;return i.forEach(o=>{o.textContent!=null&&r.set(o.textContent,o)}),r}return null}changeUsageCount(i,r){let o=this.styleRef;if(o.has(i)){let s=o.get(i);return s.usage+=r,s.usage}return o.set(i,{usage:r,elements:[]}),r}getStyleElement(i,r){let o=this.styleNodesInDOM,s=o?.get(r);if(s?.parentNode===i)return o.delete(r),s.removeAttribute(Hy),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=r,this.platformIsServer&&a.setAttribute(Hy,this.appId),i.appendChild(a),a}}addStyleToHost(i,r){let o=this.getStyleElement(i,r),s=this.styleRef,a=s.get(r)?.elements;a?a.push(o):s.set(r,{elements:[o],usage:1})}resetHostNodes(){let i=this.hostNodes;i.clear(),i.add(this.doc.head)}};e.\u0275fac=function(r){return new(r||e)(v(he),v(Xs),v(qc,8),v(Et))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})(),qy={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Zy=/%COMP%/g,FS="%COMP%",IU=`_nghost-${FS}`,DU=`_ngcontent-${FS}`,CU=!0,TU=new M("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>CU});function SU(t){return DU.replace(Zy,t)}function AU(t){return IU.replace(Zy,t)}function LS(t,e){return e.map(n=>n.replace(Zy,t))}var Wh=(()=>{let e=class e{constructor(i,r,o,s,a,c,l,u=null){this.eventManager=i,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=Mo(c),this.defaultRenderer=new Xc(i,a,l,this.platformIsServer)}createRenderer(i,r){if(!i||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===ci.ShadowDom&&(r=we(T({},r),{encapsulation:ci.Emulated}));let o=this.getOrCreateRenderer(i,r);return o instanceof Kh?o.applyToHost(i):o instanceof Jc&&o.applyStyles(),o}getOrCreateRenderer(i,r){let o=this.rendererByCompId,s=o.get(r.id);if(!s){let a=this.doc,c=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(r.encapsulation){case ci.Emulated:s=new Kh(l,u,r,this.appId,d,a,c,h);break;case ci.ShadowDom:return new Yy(l,u,i,r,a,c,this.nonce,h);default:s=new Jc(l,u,r,d,a,c,h);break}o.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(r){return new(r||e)(v(NS),v(OS),v(Xs),v(TU),v(he),v(Et),v(U),v(qc))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})(),Xc=class{constructor(e,n,i,r){this.eventManager=e,this.doc=n,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(qy[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(kS(e)?e.content:e).appendChild(n)}insertBefore(e,n,i){e&&(kS(e)?e.content:e).insertBefore(n,i)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new D(-5104,!1);return n||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,i,r){if(r){n=r+":"+n;let o=qy[r];o?e.setAttributeNS(o,n,i):e.setAttribute(n,i)}else e.setAttribute(n,i)}removeAttribute(e,n,i){if(i){let r=qy[i];r?e.removeAttributeNS(r,n):e.removeAttribute(`${i}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,i,r){r&(Fi.DashCase|Fi.Important)?e.style.setProperty(n,i,r&Fi.Important?"important":""):e.style[n]=i}removeStyle(e,n,i){i&Fi.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,i){e!=null&&(e[n]=i)}setValue(e,n){e.nodeValue=n}listen(e,n,i){if(typeof e=="string"&&(e=pi().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(i))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function kS(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Yy=class extends Xc{constructor(e,n,i,r,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=LS(r.id,r.styles);for(let u of l){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,i){return super.insertBefore(this.nodeOrShadowRoot(e),n,i)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Jc=class extends Xc{constructor(e,n,i,r,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=r,this.styles=c?LS(c,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Kh=class extends Jc{constructor(e,n,i,r,o,s,a,c){let l=r+"-"+i.id;super(e,n,i,o,s,a,c,l),this.contentAttr=SU(l),this.hostAttr=AU(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let i=super.createElement(e,n);return super.setAttribute(i,this.contentAttr,""),i}},MU=(()=>{let e=class e extends Gh{constructor(i){super(i)}supports(i){return!0}addEventListener(i,r,o){return i.addEventListener(r,o,!1),()=>this.removeEventListener(i,r,o)}removeEventListener(i,r,o){return i.removeEventListener(r,o)}};e.\u0275fac=function(r){return new(r||e)(v(he))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})(),PS=["alt","control","meta","shift"],RU={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},kU={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},PU=(()=>{let e=class e extends Gh{constructor(i){super(i)}supports(i){return e.parseEventName(i)!=null}addEventListener(i,r,o){let s=e.parseEventName(r),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>pi().onAndCancel(i,s.domEventName,a))}static parseEventName(i){let r=i.toLowerCase().split("."),o=r.shift();if(r.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(r.pop()),a="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),a="code."),PS.forEach(u=>{let d=r.indexOf(u);d>-1&&(r.splice(d,1),a+=u+".")}),a+=s,r.length!=0||s.length===0)return null;let l={};return l.domEventName=o,l.fullKey=a,l}static matchEventFullKeyCode(i,r){let o=RU[i.key]||i.key,s="";return r.indexOf("code.")>-1&&(o=i.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),PS.forEach(a=>{if(a!==o){let c=kU[a];c(i)&&(s+=a+".")}}),s+=o,s===r)}static eventCallback(i,r,o){return s=>{e.matchEventFullKeyCode(s,i)&&o.runGuarded(()=>r(s))}}static _normalizeKey(i){return i==="esc"?"escape":i}};e.\u0275fac=function(r){return new(r||e)(v(he))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})();function NU(){Wy.makeCurrent()}function OU(){return new li}function FU(){return CC(document),document}var LU=[{provide:Et,useValue:zy},{provide:ry,useValue:NU,multi:!0},{provide:he,useFactory:FU,deps:[]}],VS=Py(lS,"browser",LU),VU=new M(""),jU=[{provide:Yc,useClass:Ky,deps:[]},{provide:My,useClass:Lh,deps:[U,Vh,Yc]},{provide:Lh,useClass:Lh,deps:[U,Vh,Yc]}],BU=[{provide:yh,useValue:"root"},{provide:li,useFactory:OU,deps:[]},{provide:Qy,useClass:MU,multi:!0,deps:[he,U,Et]},{provide:Qy,useClass:PU,multi:!0,deps:[he]},Wh,OS,NS,{provide:vo,useExisting:Wh},{provide:zh,useClass:xU,deps:[]},[]],Qh=(()=>{let e=class e{constructor(i){}static withServerTransition(i){return{ngModule:e,providers:[{provide:Xs,useValue:i.appId}]}}};e.\u0275fac=function(r){return new(r||e)(v(VU,12))},e.\u0275mod=te({type:e}),e.\u0275inj=ee({providers:[...BU,...jU],imports:[na,uS]});let t=e;return t})();function UU(){return new Xy(v(he))}var Xy=(()=>{let e=class e{constructor(i){this._doc=i}getTitle(){return this._doc.title}setTitle(i){this._doc.title=i||""}};e.\u0275fac=function(r){return new(r||e)(v(he))},e.\u0275prov=R({token:e,factory:function(r){let o=null;return r?o=new r:o=UU(),o},providedIn:"root"});let t=e;return t})();function jS(...t){let e=[],n=new Set,i=n.has(1);for(let{\u0275providers:r,\u0275kind:o}of t)n.add(o),r.length&&e.push(r);return Hc([[],dS(),n.has(0)||i?[]:RS({}),e])}var re="primary",ml=Symbol("RouteTitle"),i_=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function aa(t){return new i_(t)}function zU(t,e,n){let i=n.path.split("/");if(i.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||i.length<t.length))return null;let r={};for(let o=0;o<i.length;o++){let s=i[o],a=t[o];if(s.startsWith(":"))r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,i.length),posParams:r}}function $U(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!gi(t[n],e[n]))return!1;return!0}function gi(t,e){let n=t?r_(t):void 0,i=e?r_(e):void 0;if(!n||!i||n.length!=i.length)return!1;let r;for(let o=0;o<n.length;o++)if(r=n[o],!QS(t[r],e[r]))return!1;return!0}function r_(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function QS(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),i=[...e].sort();return n.every((r,o)=>i[o]===r)}else return t===e}function YS(t){return t.length>0?t[t.length-1]:null}function Cr(t){return Id(t)?t:To(t)?fe(Promise.resolve(t)):V(t)}var HU={exact:XS,subset:JS},ZS={exact:qU,subset:GU,ignored:()=>!0};function US(t,e,n){return HU[n.paths](t.root,e.root,n.matrixParams)&&ZS[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function qU(t,e){return gi(t,e)}function XS(t,e,n){if(!ko(t.segments,e.segments)||!Xh(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!t.children[i]||!XS(t.children[i],e.children[i],n))return!1;return!0}function GU(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>QS(t[n],e[n]))}function JS(t,e,n){return eA(t,e,e.segments,n)}function eA(t,e,n,i){if(t.segments.length>n.length){let r=t.segments.slice(0,n.length);return!(!ko(r,n)||e.hasChildren()||!Xh(r,n,i))}else if(t.segments.length===n.length){if(!ko(t.segments,n)||!Xh(t.segments,n,i))return!1;for(let r in e.children)if(!t.children[r]||!JS(t.children[r],e.children[r],i))return!1;return!0}else{let r=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!ko(t.segments,r)||!Xh(t.segments,r,i)||!t.children[re]?!1:eA(t.children[re],e,o,i)}}function Xh(t,e,n){return e.every((i,r)=>ZS[n](t[r].parameters,i.parameters))}var xr=class{constructor(e=new xe([],{}),n={},i=null){this.root=e,this.queryParams=n,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=aa(this.queryParams)),this._queryParamMap}toString(){return QU.serialize(this)}},xe=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Jh(this)}},Ro=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=aa(this.parameters)),this._parameterMap}toString(){return nA(this)}};function WU(t,e){return ko(t,e)&&t.every((n,i)=>gi(n.parameters,e[i].parameters))}function ko(t,e){return t.length!==e.length?!1:t.every((n,i)=>n.path===e[i].path)}function KU(t,e){let n=[];return Object.entries(t.children).forEach(([i,r])=>{i===re&&(n=n.concat(e(r,i)))}),Object.entries(t.children).forEach(([i,r])=>{i!==re&&(n=n.concat(e(r,i)))}),n}var pl=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=R({token:e,factory:()=>(()=>new sl)(),providedIn:"root"});let t=e;return t})(),sl=class{parse(e){let n=new s_(e);return new xr(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${el(e.root,!0)}`,i=XU(e.queryParams),r=typeof e.fragment=="string"?`#${YU(e.fragment)}`:"";return`${n}${i}${r}`}},QU=new sl;function Jh(t){return t.segments.map(e=>nA(e)).join("/")}function el(t,e){if(!t.hasChildren())return Jh(t);if(e){let n=t.children[re]?el(t.children[re],!1):"",i=[];return Object.entries(t.children).forEach(([r,o])=>{r!==re&&i.push(`${r}:${el(o,!1)}`)}),i.length>0?`${n}(${i.join("//")})`:n}else{let n=KU(t,(i,r)=>r===re?[el(t.children[re],!1)]:[`${r}:${el(i,!1)}`]);return Object.keys(t.children).length===1&&t.children[re]!=null?`${Jh(t)}/${n[0]}`:`${Jh(t)}/(${n.join("//")})`}}function tA(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Yh(t){return tA(t).replace(/%3B/gi,";")}function YU(t){return encodeURI(t)}function o_(t){return tA(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ef(t){return decodeURIComponent(t)}function zS(t){return ef(t.replace(/\+/g,"%20"))}function nA(t){return`${o_(t.path)}${ZU(t.parameters)}`}function ZU(t){return Object.keys(t).map(e=>`;${o_(e)}=${o_(t[e])}`).join("")}function XU(t){let e=Object.keys(t).map(n=>{let i=t[n];return Array.isArray(i)?i.map(r=>`${Yh(n)}=${Yh(r)}`).join("&"):`${Yh(n)}=${Yh(i)}`}).filter(n=>!!n);return e.length?`?${e.join("&")}`:""}var JU=/^[^\/()?;#]+/;function Jy(t){let e=t.match(JU);return e?e[0]:""}var ez=/^[^\/()?;=#]+/;function tz(t){let e=t.match(ez);return e?e[0]:""}var nz=/^[^=?&#]+/;function iz(t){let e=t.match(nz);return e?e[0]:""}var rz=/^[^&#]+/;function oz(t){let e=t.match(rz);return e?e[0]:""}var s_=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new xe([],{}):new xe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(i[re]=new xe(e,n)),i}parseSegment(){let e=Jy(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new D(4009,!1);return this.capture(e),new Ro(ef(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=tz(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let r=Jy(this.remaining);r&&(i=r,this.capture(i))}e[ef(n)]=ef(i)}parseQueryParam(e){let n=iz(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let s=oz(this.remaining);s&&(i=s,this.capture(i))}let r=zS(n),o=zS(i);if(e.hasOwnProperty(r)){let s=e[r];Array.isArray(s)||(s=[s],e[r]=s),s.push(o)}else e[r]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=Jy(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new D(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=re);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[re]:new xe([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new D(4011,!1)}};function iA(t){return t.segments.length>0?new xe([],{[re]:t}):t}function rA(t){let e={};for(let i of Object.keys(t.children)){let r=t.children[i],o=rA(r);if(i===re&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[i]=o)}let n=new xe(t.segments,e);return sz(n)}function sz(t){if(t.numberOfChildren===1&&t.children[re]){let e=t.children[re];return new xe(t.segments.concat(e.segments),e.children)}return t}function ca(t){return t instanceof xr}function az(t,e,n=null,i=null){let r=oA(t);return sA(r,e,n,i)}function oA(t){let e;function n(o){let s={};for(let c of o.children){let l=n(c);s[c.outlet]=l}let a=new xe(o.url,s);return o===t&&(e=a),a}let i=n(t.root),r=iA(i);return e??r}function sA(t,e,n,i){let r=t;for(;r.parent;)r=r.parent;if(e.length===0)return e_(r,r,r,n,i);let o=cz(e);if(o.toRoot())return e_(r,r,new xe([],{}),n,i);let s=lz(o,r,t),a=s.processChildren?il(s.segmentGroup,s.index,o.commands):cA(s.segmentGroup,s.index,o.commands);return e_(r,s.segmentGroup,a,n,i)}function tf(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function al(t){return typeof t=="object"&&t!=null&&t.outlets}function e_(t,e,n,i,r){let o={};i&&Object.entries(i).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let s;t===e?s=n:s=aA(t,e,n);let a=iA(rA(s));return new xr(a,o,r)}function aA(t,e,n){let i={};return Object.entries(t.children).forEach(([r,o])=>{o===e?i[r]=n:i[r]=aA(o,e,n)}),new xe(t.segments,i)}var nf=class{constructor(e,n,i){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=i,e&&i.length>0&&tf(i[0]))throw new D(4003,!1);let r=i.find(al);if(r&&r!==YS(i))throw new D(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function cz(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new nf(!0,0,t);let e=0,n=!1,i=t.reduce((r,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&r.push(a))}),r):[...r,o]},[]);return new nf(n,e,i)}var oa=class{constructor(e,n,i){this.segmentGroup=e,this.processChildren=n,this.index=i}};function lz(t,e,n){if(t.isAbsolute)return new oa(e,!0,0);if(!n)return new oa(e,!1,NaN);if(n.parent===null)return new oa(n,!0,0);let i=tf(t.commands[0])?0:1,r=n.segments.length-1+i;return uz(n,r,t.numberOfDoubleDots)}function uz(t,e,n){let i=t,r=e,o=n;for(;o>r;){if(o-=r,i=i.parent,!i)throw new D(4005,!1);r=i.segments.length}return new oa(i,!1,r-o)}function dz(t){return al(t[0])?t[0].outlets:{[re]:t}}function cA(t,e,n){if(t||(t=new xe([],{})),t.segments.length===0&&t.hasChildren())return il(t,e,n);let i=hz(t,e,n),r=n.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){let o=new xe(t.segments.slice(0,i.pathIndex),{});return o.children[re]=new xe(t.segments.slice(i.pathIndex),t.children),il(o,0,r)}else return i.match&&r.length===0?new xe(t.segments,{}):i.match&&!t.hasChildren()?a_(t,e,n):i.match?il(t,0,r):a_(t,e,n)}function il(t,e,n){if(n.length===0)return new xe(t.segments,{});{let i=dz(n),r={};if(Object.keys(i).some(o=>o!==re)&&t.children[re]&&t.numberOfChildren===1&&t.children[re].segments.length===0){let o=il(t.children[re],e,n);return new xe(t.segments,o.children)}return Object.entries(i).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(r[o]=cA(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{i[o]===void 0&&(r[o]=s)}),new xe(t.segments,r)}}function hz(t,e,n){let i=0,r=e,o={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(i>=n.length)return o;let s=t.segments[r],a=n[i];if(al(a))break;let c=`${a}`,l=i<n.length-1?n[i+1]:null;if(r>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!HS(c,l,s))return o;i+=2}else{if(!HS(c,{},s))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function a_(t,e,n){let i=t.segments.slice(0,e),r=0;for(;r<n.length;){let o=n[r];if(al(o)){let c=fz(o.outlets);return new xe(i,c)}if(r===0&&tf(n[0])){let c=t.segments[e];i.push(new Ro(c.path,$S(n[0]))),r++;continue}let s=al(o)?o.outlets[re]:`${o}`,a=r<n.length-1?n[r+1]:null;s&&a&&tf(a)?(i.push(new Ro(s,$S(a))),r+=2):(i.push(new Ro(s,{})),r++)}return new xe(i,{})}function fz(t){let e={};return Object.entries(t).forEach(([n,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[n]=a_(new xe([],{}),0,i))}),e}function $S(t){let e={};return Object.entries(t).forEach(([n,i])=>e[n]=`${i}`),e}function HS(t,e,n){return t==n.path&&gi(e,n.parameters)}var rl="imperative",Sn=class{constructor(e,n){this.id=e,this.url=n}},la=class extends Sn{constructor(e,n,i="imperative",r=null){super(e,n),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},zi=class extends Sn{constructor(e,n,i){super(e,n),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ir=class extends Sn{constructor(e,n,i,r){super(e,n),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Dr=class extends Sn{constructor(e,n,i,r){super(e,n),this.reason=i,this.code=r,this.type=16}},cl=class extends Sn{constructor(e,n,i,r){super(e,n),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},rf=class extends Sn{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},c_=class extends Sn{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},l_=class extends Sn{constructor(e,n,i,r,o){super(e,n),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},u_=class extends Sn{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},d_=class extends Sn{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},h_=class{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},f_=class{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},m_=class{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},p_=class{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},g_=class{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},b_=class{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},of=class{constructor(e,n,i){this.routerEvent=e,this.position=n,this.anchor=i,this.type=15}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},ll=class{},ul=class{constructor(e){this.url=e}};var y_=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new gl,this.attachRef=null}},gl=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(i,r){let o=this.getOrCreateContext(i);o.outlet=r,this.contexts.set(i,o)}onChildOutletDestroyed(i){let r=this.getContext(i);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let r=this.getContext(i);return r||(r=new y_,this.contexts.set(i,r)),r}getContext(i){return this.contexts.get(i)||null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),sf=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=__(e,this._root);return n?n.children.map(i=>i.value):[]}firstChild(e){let n=__(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=v_(e,this._root);return n.length<2?[]:n[n.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return v_(e,this._root).map(n=>n.value)}};function __(t,e){if(t===e.value)return e;for(let n of e.children){let i=__(t,n);if(i)return i}return null}function v_(t,e){if(t===e.value)return[e];for(let n of e.children){let i=v_(t,n);if(i.length)return i.unshift(e),i}return[]}var gn=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function ra(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var af=class extends sf{constructor(e,n){super(e),this.snapshot=n,M_(this,e)}toString(){return this.snapshot.toString()}};function lA(t,e){let n=mz(t,e),i=new et([new Ro("",{})]),r=new et({}),o=new et({}),s=new et({}),a=new et(""),c=new ua(i,r,s,a,o,re,e,n.root);return c.snapshot=n.root,new af(new gn(c,[]),n)}function mz(t,e){let n={},i={},r={},o="",s=new dl([],n,r,o,i,re,e,null,{});return new cf("",new gn(s,[]))}var ua=class{constructor(e,n,i,r,o,s,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(B(l=>l[ml]))??V(void 0),this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(B(e=>aa(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(B(e=>aa(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function A_(t,e,n="emptyOnly"){let i,{routeConfig:r}=t;return e!==null&&(n==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:T(T({},e.params),t.params),data:T(T({},e.data),t.data),resolve:T(T(T(T({},t.data),e.data),r?.data),t._resolvedData)}:i={params:T({},t.params),data:T({},t.data),resolve:T(T({},t.data),t._resolvedData??{})},r&&dA(r)&&(i.resolve[ml]=r.title),i}var dl=class{get title(){return this.data?.[ml]}constructor(e,n,i,r,o,s,a,c,l){this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=aa(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=aa(this.queryParams)),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},cf=class extends sf{constructor(e,n){super(n),this.url=e,M_(this,n)}toString(){return uA(this._root)}};function M_(t,e){e.value._routerState=t,e.children.forEach(n=>M_(t,n))}function uA(t){let e=t.children.length>0?` { ${t.children.map(uA).join(", ")} } `:"";return`${t.value}${e}`}function t_(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,gi(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),gi(e.params,n.params)||t.paramsSubject.next(n.params),$U(e.url,n.url)||t.urlSubject.next(n.url),gi(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function w_(t,e){let n=gi(t.params,e.params)&&WU(t.url,e.url),i=!t.parent!=!e.parent;return n&&!i&&(!t.parent||w_(t.parent,e.parent))}function dA(t){return typeof t.title=="string"||t.title===null}var pz=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=re,this.activateEvents=new se,this.deactivateEvents=new se,this.attachEvents=new se,this.detachEvents=new se,this.parentContexts=I(gl),this.location=I(Zt),this.changeDetector=I(Yt),this.environmentInjector=I(cn),this.inputBinder=I(ff,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(i){if(i.name){let{firstChange:r,previousValue:o}=i.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(i){return this.parentContexts.getContext(i)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let i=this.parentContexts.getContext(this.name);i?.route&&(i.attachRef?this.attach(i.attachRef,i.route):this.activateWith(i.route,i.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new D(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new D(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new D(4012,!1);this.location.detach();let i=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(i.instance),i}attach(i,r){this.activated=i,this._activatedRoute=r,this.location.insert(i.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(i.instance)}deactivate(){if(this.activated){let i=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(i)}}activateWith(i,r){if(this.isActivated)throw new D(4013,!1);this._activatedRoute=i;let o=this.location,a=i.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new E_(i,c,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:l,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=_e({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[fi]});let t=e;return t})(),E_=class{constructor(e,n,i){this.route=e,this.childContexts=n,this.parent=i}get(e,n){return e===ua?this.route:e===gl?this.childContexts:this.parent.get(e,n)}},ff=new M(""),qS=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(i){this.unsubscribeFromRouteData(i),this.subscribeToRouteData(i)}unsubscribeFromRouteData(i){this.outletDataSubscriptions.get(i)?.unsubscribe(),this.outletDataSubscriptions.delete(i)}subscribeToRouteData(i){let{activatedRoute:r}=i,o=ao([r.queryParams,r.params,r.data]).pipe(Re(([s,a,c],l)=>(c=T(T(T({},s),a),c),l===0?V(c):Promise.resolve(c)))).subscribe(s=>{if(!i.isActivated||!i.activatedComponentRef||i.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(i);return}let a=hS(r.component);if(!a){this.unsubscribeFromRouteData(i);return}for(let{templateName:c}of a.inputs)i.activatedComponentRef.setInput(c,s[c])});this.outletDataSubscriptions.set(i,o)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})();function gz(t,e,n){let i=hl(t,e._root,n?n._root:void 0);return new af(i,e)}function hl(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let i=n.value;i._futureSnapshot=e.value;let r=bz(t,e,n);return new gn(i,r)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>hl(t,a)),s}}let i=yz(e.value),r=e.children.map(o=>hl(t,o));return new gn(i,r)}}function bz(t,e,n){return e.children.map(i=>{for(let r of n.children)if(t.shouldReuseRoute(i.value,r.value.snapshot))return hl(t,i,r);return hl(t,i)})}function yz(t){return new ua(new et(t.url),new et(t.params),new et(t.queryParams),new et(t.fragment),new et(t.data),t.outlet,t.component,t)}var hA="ngNavigationCancelingError";function fA(t,e){let{redirectTo:n,navigationBehaviorOptions:i}=ca(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=mA(!1,0,e);return r.url=n,r.navigationBehaviorOptions=i,r}function mA(t,e,n){let i=new Error("NavigationCancelingError: "+(t||""));return i[hA]=!0,i.cancellationCode=e,n&&(i.url=n),i}function _z(t){return pA(t)&&ca(t.url)}function pA(t){return t&&t[hA]}var vz=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=tt({type:e,selectors:[["ng-component"]],standalone:!0,features:[Sy],decls:1,vars:0,template:function(r,o){r&1&&pt(0,"router-outlet")},dependencies:[pz],encapsulation:2});let t=e;return t})();function wz(t,e){return t.providers&&!t._injector&&(t._injector=Nh(t.providers,e,`Route: ${t.path}`)),t._injector??e}function R_(t){let e=t.children&&t.children.map(R_),n=e?we(T({},t),{children:e}):T({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==re&&(n.component=vz),n}function bi(t){return t.outlet||re}function Ez(t,e){let n=t.filter(i=>bi(i)===e);return n.push(...t.filter(i=>bi(i)!==e)),n}function bl(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var xz=(t,e,n,i)=>B(r=>(new x_(e,r.targetRouterState,r.currentRouterState,n,i).activate(t),r)),x_=class{constructor(e,n,i,r,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,i,e),t_(this.futureState.root),this.activateChildRoutes(n,i,e)}deactivateChildRoutes(e,n,i){let r=ra(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,r[s],i),delete r[s]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(e,n,i){let r=e.value,o=n?n.value:null;if(r===o)if(r.component){let s=i.getContext(r.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,i);else o&&this.deactivateRouteAndItsChildren(n,i)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let i=n.getContext(e.value.outlet),r=i&&e.value.component?i.children:n,o=ra(e);for(let s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],r);if(i&&i.outlet){let s=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let i=n.getContext(e.value.outlet),r=i&&e.value.component?i.children:n,o=ra(e);for(let s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,n,i){let r=ra(n);e.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new b_(o.value.snapshot))}),e.children.length&&this.forwardEvent(new p_(e.value.snapshot))}activateRoutes(e,n,i){let r=e.value,o=n?n.value:null;if(t_(r),r===o)if(r.component){let s=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,i);else if(r.component){let s=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),t_(a.route.value),this.activateChildRoutes(e,null,s.children)}else{let a=bl(r.snapshot);s.attachRef=null,s.route=r,s.injector=a,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,i)}},lf=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},sa=class{constructor(e,n){this.component=e,this.route=n}};function Iz(t,e,n){let i=t._root,r=e?e._root:null;return tl(i,r,n,[i.value])}function Dz(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function ha(t,e){let n=Symbol(),i=e.get(t,n);return i===n?typeof t=="function"&&!bD(t)?t:e.get(t):i}function tl(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=ra(e);return t.children.forEach(s=>{Cz(s,o[s.value.outlet],n,i.concat([s.value]),r),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>ol(a,n.getContext(s),r)),r}function Cz(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=Tz(s,o,o.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new lf(i)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?tl(t,e,a?a.children:null,i,r):tl(t,e,n,i,r),c&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new sa(a.outlet.component,s))}else s&&ol(e,a,r),r.canActivateChecks.push(new lf(i)),o.component?tl(t,null,a?a.children:null,i,r):tl(t,null,n,i,r);return r}function Tz(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!ko(t.url,e.url);case"pathParamsOrQueryParamsChange":return!ko(t.url,e.url)||!gi(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!w_(t,e)||!gi(t.queryParams,e.queryParams);case"paramsChange":default:return!w_(t,e)}}function ol(t,e,n){let i=ra(t),r=t.value;Object.entries(i).forEach(([o,s])=>{r.component?e?ol(s,e.children.getContext(o),n):ol(s,null,n):ol(s,e,n)}),r.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new sa(e.outlet.component,r)):n.canDeactivateChecks.push(new sa(null,r)):n.canDeactivateChecks.push(new sa(null,r))}function yl(t){return typeof t=="function"}function Sz(t){return typeof t=="boolean"}function Az(t){return t&&yl(t.canLoad)}function Mz(t){return t&&yl(t.canActivate)}function Rz(t){return t&&yl(t.canActivateChild)}function kz(t){return t&&yl(t.canDeactivate)}function Pz(t){return t&&yl(t.canMatch)}function gA(t){return t instanceof Ni||t?.name==="EmptyError"}var Zh=Symbol("INITIAL_VALUE");function da(){return Re(t=>ao(t.map(e=>e.pipe($t(1),Ht(Zh)))).pipe(B(e=>{for(let n of e)if(n!==!0){if(n===Zh)return Zh;if(n===!1||n instanceof xr)return n}return!0}),Pe(e=>e!==Zh),$t(1)))}function Nz(t,e){return He(n=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?V(we(T({},n),{guardsResult:!0})):Oz(s,i,r,t).pipe(He(a=>a&&Sz(a)?Fz(i,o,t,e):V(a)),B(a=>we(T({},n),{guardsResult:a})))})}function Oz(t,e,n,i){return fe(t).pipe(He(r=>Uz(r.component,r.route,n,e,i)),on(r=>r!==!0,!0))}function Fz(t,e,n,i){return fe(e).pipe(cr(r=>or(Vz(r.route.parent,i),Lz(r.route,i),Bz(t,r.path,n),jz(t,r.route,n))),on(r=>r!==!0,!0))}function Lz(t,e){return t!==null&&e&&e(new g_(t)),V(!0)}function Vz(t,e){return t!==null&&e&&e(new m_(t)),V(!0)}function jz(t,e,n){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return V(!0);let r=i.map(o=>Td(()=>{let s=bl(e)??n,a=ha(o,s),c=Mz(a)?a.canActivate(e,t):Li(s,()=>a(e,t));return Cr(c).pipe(on())}));return V(r).pipe(da())}function Bz(t,e,n){let i=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>Dz(s)).filter(s=>s!==null).map(s=>Td(()=>{let a=s.guards.map(c=>{let l=bl(s.node)??n,u=ha(c,l),d=Rz(u)?u.canActivateChild(i,t):Li(l,()=>u(i,t));return Cr(d).pipe(on())});return V(a).pipe(da())}));return V(o).pipe(da())}function Uz(t,e,n,i,r){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return V(!0);let s=o.map(a=>{let c=bl(e)??r,l=ha(a,c),u=kz(l)?l.canDeactivate(t,e,n,i):Li(c,()=>l(t,e,n,i));return Cr(u).pipe(on())});return V(s).pipe(da())}function zz(t,e,n,i){let r=e.canLoad;if(r===void 0||r.length===0)return V(!0);let o=r.map(s=>{let a=ha(s,t),c=Az(a)?a.canLoad(e,n):Li(t,()=>a(e,n));return Cr(c)});return V(o).pipe(da(),bA(i))}function bA(t){return cg(Fe(e=>{if(ca(e))throw fA(t,e)}),B(e=>e===!0))}function $z(t,e,n,i){let r=e.canMatch;if(!r||r.length===0)return V(!0);let o=r.map(s=>{let a=ha(s,t),c=Pz(a)?a.canMatch(e,n):Li(t,()=>a(e,n));return Cr(c)});return V(o).pipe(da(),bA(i))}var fl=class{constructor(e){this.segmentGroup=e||null}},uf=class extends Error{constructor(e){super(),this.urlTree=e}};function ia(t){return Ms(new fl(t))}function Hz(t){return Ms(new D(4e3,!1))}function qz(t){return Ms(mA(!1,3))}var I_=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let i=[],r=n.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return V(i);if(r.numberOfChildren>1||!r.children[re])return Hz(e.redirectTo);r=r.children[re]}}applyRedirectCommands(e,n,i){let r=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,i);if(n.startsWith("/"))throw new uf(r);return r}applyRedirectCreateUrlTree(e,n,i,r){let o=this.createSegmentGroup(e,n.root,i,r);return new xr(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let i={};return Object.entries(e).forEach(([r,o])=>{if(typeof o=="string"&&o.startsWith(":")){let a=o.substring(1);i[r]=n[a]}else i[r]=o}),i}createSegmentGroup(e,n,i,r){let o=this.createSegments(e,n.segments,i,r),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,i,r)}),new xe(o,s)}createSegments(e,n,i,r){return n.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,r):this.findOrReturn(o,i))}findPosParam(e,n,i){let r=i[n.path.substring(1)];if(!r)throw new D(4001,!1);return r}findOrReturn(e,n){let i=0;for(let r of n){if(r.path===e.path)return n.splice(i),r;i++}return e}},D_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Gz(t,e,n,i,r){let o=k_(t,e,n);return o.matched?(i=wz(e,i),$z(i,e,n,r).pipe(B(s=>s===!0?o:T({},D_)))):V(o)}function k_(t,e,n){if(e.path==="**")return Wz(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?T({},D_):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let r=(e.matcher||zU)(n,t,e);if(!r)return T({},D_);let o={};Object.entries(r.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=r.consumed.length>0?T(T({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:n.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function Wz(t){return{matched:!0,parameters:t.length>0?YS(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function GS(t,e,n,i){return n.length>0&&Yz(t,n,i)?{segmentGroup:new xe(e,Qz(i,new xe(n,t.children))),slicedSegments:[]}:n.length===0&&Zz(t,n,i)?{segmentGroup:new xe(t.segments,Kz(t,e,n,i,t.children)),slicedSegments:n}:{segmentGroup:new xe(t.segments,t.children),slicedSegments:n}}function Kz(t,e,n,i,r){let o={};for(let s of i)if(mf(t,n,s)&&!r[bi(s)]){let a=new xe([],{});o[bi(s)]=a}return T(T({},r),o)}function Qz(t,e){let n={};n[re]=e;for(let i of t)if(i.path===""&&bi(i)!==re){let r=new xe([],{});n[bi(i)]=r}return n}function Yz(t,e,n){return n.some(i=>mf(t,e,i)&&bi(i)!==re)}function Zz(t,e,n){return n.some(i=>mf(t,e,i))}function mf(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function Xz(t,e,n,i){return bi(t)!==i&&(i===re||!mf(e,n,t))?!1:k_(e,t,n).matched}function Jz(t,e,n){return e.length===0&&!t.children[n]}var C_=class{};function e$(t,e,n,i,r,o,s="emptyOnly"){return new T_(t,e,n,i,r,s,o).recognize()}var t$=31,T_=class{constructor(e,n,i,r,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new I_(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new D(4002,`'${e.segmentGroup}'`)}recognize(){let e=GS(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(B(n=>{let i=new dl([],Object.freeze({}),Object.freeze(T({},this.urlTree.queryParams)),this.urlTree.fragment,{},re,this.rootComponentType,null,{}),r=new gn(i,n),o=new cf("",r),s=az(i,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,re).pipe(ar(i=>{if(i instanceof uf)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof fl?this.noMatchError(i):i}))}inheritParamsAndData(e,n){let i=e.value,r=A_(i,n,this.paramsInheritanceStrategy);i.params=Object.freeze(r.params),i.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o,i))}processSegmentGroup(e,n,i,r){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,n,i):this.processSegment(e,n,i,i.segments,r,!0).pipe(B(o=>o instanceof gn?[o]:[]))}processChildren(e,n,i){let r=[];for(let o of Object.keys(i.children))o==="primary"?r.unshift(o):r.push(o);return fe(r).pipe(cr(o=>{let s=i.children[o],a=Ez(n,o);return this.processSegmentGroup(e,a,s,o)}),uo((o,s)=>(o.push(...s),o)),lr(null),yg(),He(o=>{if(o===null)return ia(i);let s=yA(o);return n$(s),V(s)}))}processSegment(e,n,i,r,o,s){return fe(n).pipe(cr(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,i,r,o,s).pipe(ar(c=>{if(c instanceof fl)return V(null);throw c}))),on(a=>!!a),ar(a=>{if(gA(a))return Jz(i,r,o)?V(new C_):ia(i);throw a}))}processSegmentAgainstRoute(e,n,i,r,o,s,a){return Xz(i,r,o,s)?i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,r,n,i,o,s):ia(r):ia(r)}expandSegmentAgainstRouteUsingRedirect(e,n,i,r,o,s){let{matched:a,consumedSegments:c,positionalParamSegments:l,remainingSegments:u}=k_(n,r,o);if(!a)return ia(n);r.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>t$&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(c,r.redirectTo,l);return this.applyRedirects.lineralizeSegments(r,d).pipe(He(h=>this.processSegment(e,i,n,h.concat(u),s,!1)))}matchSegmentAgainstRoute(e,n,i,r,o){let s=Gz(n,i,r,e,this.urlSerializer);return i.path==="**"&&(n.children={}),s.pipe(Re(a=>a.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(Re(({routes:c})=>{let l=i._loadedInjector??e,{consumedSegments:u,remainingSegments:d,parameters:h}=a,f=new dl(u,h,Object.freeze(T({},this.urlTree.queryParams)),this.urlTree.fragment,r$(i),bi(i),i.component??i._loadedComponent??null,i,o$(i)),{segmentGroup:m,slicedSegments:p}=GS(n,u,d,c);if(p.length===0&&m.hasChildren())return this.processChildren(l,c,m).pipe(B(w=>w===null?null:new gn(f,w)));if(c.length===0&&p.length===0)return V(new gn(f,[]));let g=bi(i)===o;return this.processSegment(l,c,m,p,g?re:o,!0).pipe(B(w=>new gn(f,w instanceof gn?[w]:[])))}))):ia(n)))}getChildConfig(e,n,i){return n.children?V({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?V({routes:n._loadedRoutes,injector:n._loadedInjector}):zz(e,n,i,this.urlSerializer).pipe(He(r=>r?this.configLoader.loadChildren(e,n).pipe(Fe(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):qz(n))):V({routes:[],injector:e})}};function n$(t){t.sort((e,n)=>e.value.outlet===re?-1:n.value.outlet===re?1:e.value.outlet.localeCompare(n.value.outlet))}function i$(t){let e=t.value.routeConfig;return e&&e.path===""}function yA(t){let e=[],n=new Set;for(let i of t){if(!i$(i)){e.push(i);continue}let r=e.find(o=>i.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...i.children),n.add(r)):e.push(i)}for(let i of n){let r=yA(i.children);e.push(new gn(i.value,r))}return e.filter(i=>!n.has(i))}function r$(t){return t.data||{}}function o$(t){return t.resolve||{}}function s$(t,e,n,i,r,o){return He(s=>e$(t,e,n,i,s.extractedUrl,r,o).pipe(B(({state:a,tree:c})=>we(T({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function a$(t,e){return He(n=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=n;if(!r.length)return V(n);let o=new Set(r.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of _A(c))s.add(l);let a=0;return fe(s).pipe(cr(c=>o.has(c)?c$(c,i,t,e):(c.data=A_(c,c.parent,t).resolve,V(void 0))),Fe(()=>a++),Ps(1),He(c=>a===s.size?V(n):Tt))})}function _A(t){let e=t.children.map(n=>_A(n)).flat();return[t,...e]}function c$(t,e,n,i){let r=t.routeConfig,o=t._resolve;return r?.title!==void 0&&!dA(r)&&(o[ml]=r.title),l$(o,t,e,i).pipe(B(s=>(t._resolvedData=s,t.data=A_(t,t.parent,n).resolve,null)))}function l$(t,e,n,i){let r=r_(t);if(r.length===0)return V({});let o={};return fe(r).pipe(He(s=>u$(t[s],e,n,i).pipe(on(),Fe(a=>{o[s]=a}))),Ps(1),bg(o),ar(s=>gA(s)?Tt:Ms(s)))}function u$(t,e,n,i){let r=bl(e)??i,o=ha(t,r),s=o.resolve?o.resolve(e,n):Li(r,()=>o(e,n));return Cr(s)}function n_(t){return Re(e=>{let n=t(e);return n?fe(n).pipe(B(()=>e)):V(e)})}var vA=(()=>{let e=class e{buildTitle(i){let r,o=i.root;for(;o!==void 0;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(s=>s.outlet===re);return r}getResolvedTitleForRoute(i){return i.data[ml]}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=R({token:e,factory:()=>(()=>I(d$))(),providedIn:"root"});let t=e;return t})(),d$=(()=>{let e=class e extends vA{constructor(i){super(),this.title=i}updateTitle(i){let r=this.buildTitle(i);r!==void 0&&this.title.setTitle(r)}};e.\u0275fac=function(r){return new(r||e)(v(Xy))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),_l=new M("",{providedIn:"root",factory:()=>({})}),df=new M("ROUTES"),P_=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=I(Fh)}loadComponent(i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return V(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=Cr(i.loadComponent()).pipe(B(wA),Fe(s=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=s}),ks(()=>{this.componentLoaders.delete(i)})),o=new Ds(r,()=>new le).pipe(Is());return this.componentLoaders.set(i,o),o}loadChildren(i,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return V({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=h$(r,this.compiler,i,this.onLoadEndListener).pipe(ks(()=>{this.childrenLoaders.delete(r)})),a=new Ds(s,()=>new le).pipe(Is());return this.childrenLoaders.set(r,a),a}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function h$(t,e,n,i){return Cr(t.loadChildren()).pipe(B(wA),He(r=>r instanceof Oc||Array.isArray(r)?V(r):fe(e.compileModuleAsync(r))),B(r=>{i&&i(t);let o,s,a=!1;return Array.isArray(r)?(s=r,a=!0):(o=r.create(n).injector,s=o.get(df,[],{optional:!0,self:!0}).flat()),{routes:s.map(R_),injector:o}}))}function f$(t){return t&&typeof t=="object"&&"default"in t}function wA(t){return f$(t)?t.default:t}var N_=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=R({token:e,factory:()=>(()=>I(m$))(),providedIn:"root"});let t=e;return t})(),m$=(()=>{let e=class e{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,r){return i}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),EA=new M(""),xA=new M("");function p$(t,e,n){let i=t.get(xA),r=t.get(he);return t.get(U).runOutsideAngular(()=>{if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,Promise.resolve();let o,s=new Promise(l=>{o=l}),a=r.startViewTransition(()=>(o(),g$(t))),{onViewTransitionCreated:c}=i;return c&&Li(t,()=>c({transition:a,from:e,to:n})),s})}function g$(t){return new Promise(e=>{vy(e,{injector:t})})}var O_=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new le,this.transitionAbortSubject=new le,this.configLoader=I(P_),this.environmentInjector=I(cn),this.urlSerializer=I(pl),this.rootContexts=I(gl),this.location=I(ta),this.inputBindingEnabled=I(ff,{optional:!0})!==null,this.titleStrategy=I(vA),this.options=I(_l,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=I(N_),this.createViewTransition=I(EA,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>V(void 0),this.rootComponentType=null;let i=o=>this.events.next(new h_(o)),r=o=>this.events.next(new f_(o));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=i}complete(){this.transitions?.complete()}handleNavigationRequest(i){let r=++this.navigationId;this.transitions?.next(we(T(T({},this.transitions.value),i),{id:r}))}setupNavigations(i,r,o){return this.transitions=new et({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:rl,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Pe(s=>s.id!==0),B(s=>we(T({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Re(s=>{this.currentTransition=s;let a=!1,c=!1;return V(s).pipe(Fe(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?we(T({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Re(l=>{let u=!i.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=l.extras.onSameUrlNavigation??i.onSameUrlNavigation;if(!u&&d!=="reload"){let h="";return this.events.next(new Dr(l.id,this.urlSerializer.serialize(l.rawUrl),h,0)),l.resolve(null),Tt}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return V(l).pipe(Re(h=>{let f=this.transitions?.getValue();return this.events.next(new la(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?Tt:Promise.resolve(h)}),s$(this.environmentInjector,this.configLoader,this.rootComponentType,i.config,this.urlSerializer,this.paramsInheritanceStrategy),Fe(h=>{s.targetSnapshot=h.targetSnapshot,s.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=we(T({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let f=new rf(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:h,extractedUrl:f,source:m,restoredState:p,extras:g}=l,w=new la(h,this.urlSerializer.serialize(f),m,p);this.events.next(w);let A=lA(f,this.rootComponentType).snapshot;return this.currentTransition=s=we(T({},l),{targetSnapshot:A,urlAfterRedirects:f,extras:we(T({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,V(s)}else{let h="";return this.events.next(new Dr(l.id,this.urlSerializer.serialize(l.extractedUrl),h,1)),l.resolve(null),Tt}}),Fe(l=>{let u=new c_(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),B(l=>(this.currentTransition=s=we(T({},l),{guards:Iz(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),s)),Nz(this.environmentInjector,l=>this.events.next(l)),Fe(l=>{if(s.guardsResult=l.guardsResult,ca(l.guardsResult))throw fA(this.urlSerializer,l.guardsResult);let u=new l_(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(u)}),Pe(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",3),!1)),n_(l=>{if(l.guards.canActivateChecks.length)return V(l).pipe(Fe(u=>{let d=new u_(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),Re(u=>{let d=!1;return V(u).pipe(a$(this.paramsInheritanceStrategy,this.environmentInjector),Fe({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(u,"",2)}}))}),Fe(u=>{let d=new d_(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}))}),n_(l=>{let u=d=>{let h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(Fe(f=>{d.component=f}),B(()=>{})));for(let f of d.children)h.push(...u(f));return h};return ao(u(l.targetSnapshot.root)).pipe(lr(null),$t(1))}),n_(()=>this.afterPreactivation()),Re(()=>{let{currentSnapshot:l,targetSnapshot:u}=s,d=this.createViewTransition?.(this.environmentInjector,l.root,u.root);return d?fe(d).pipe(B(()=>s)):V(s)}),B(l=>{let u=gz(i.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s=we(T({},l),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,s}),Fe(()=>{this.events.next(new ll)}),xz(this.rootContexts,i.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),$t(1),Fe({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new zi(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),qt(this.transitionAbortSubject.pipe(Fe(l=>{throw l}))),ks(()=>{if(!a&&!c){let l="";this.cancelNavigationTransition(s,l,1)}this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),ar(l=>{if(c=!0,pA(l))this.events.next(new Ir(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),_z(l)?this.events.next(new ul(l.url)):s.resolve(!1);else{this.events.next(new cl(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0));try{s.resolve(i.errorHandler(l))}catch(u){s.reject(u)}}return Tt}))}))}cancelNavigationTransition(i,r,o){let s=new Ir(i.id,this.urlSerializer.serialize(i.extractedUrl),r,o);this.events.next(s),i.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function b$(t){return t!==rl}var y$=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=R({token:e,factory:()=>(()=>I(_$))(),providedIn:"root"});let t=e;return t})(),S_=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},_$=(()=>{let e=class e extends S_{};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=Zs(e)))(o||e)}})(),e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),IA=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=R({token:e,factory:()=>(()=>I(v$))(),providedIn:"root"});let t=e;return t})(),v$=(()=>{let e=class e extends IA{constructor(){super(...arguments),this.location=I(ta),this.urlSerializer=I(pl),this.options=I(_l,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=I(N_),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new xr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=lA(this.currentUrlTree,null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(i){return this.location.subscribe(r=>{r.type==="popstate"&&i(r.url,r.state)})}handleRouterEvent(i,r){if(i instanceof la)this.stateMemento=this.createStateMemento();else if(i instanceof Dr)this.rawUrlTree=r.initialUrl;else if(i instanceof rf){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(o,r)}}else i instanceof ll?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):i instanceof Ir&&(i.code===3||i.code===2)?this.restoreHistory(r):i instanceof cl?this.restoreHistory(r,!0):i instanceof zi&&(this.lastSuccessfulId=i.id,this.currentPageId=this.browserPageId)}setBrowserUrl(i,r){let o=this.urlSerializer.serialize(i);if(this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl){let s=this.browserPageId,a=T(T({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(o,"",a)}else{let s=T(T({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(i,r=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===i.finalUrl&&s===0&&(this.resetState(i),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(i),this.resetUrlToCurrentUrlTree())}resetState(i){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(i,r){return this.canceledNavigationResolution==="computed"?{navigationId:i,\u0275routerPageId:r}:{navigationId:i}}};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=Zs(e)))(o||e)}})(),e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),nl=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(nl||{});function DA(t,e){t.events.pipe(Pe(n=>n instanceof zi||n instanceof Ir||n instanceof cl||n instanceof Dr),B(n=>n instanceof zi||n instanceof Dr?nl.COMPLETE:(n instanceof Ir?n.code===0||n.code===1:!1)?nl.REDIRECTING:nl.FAILED),Pe(n=>n!==nl.REDIRECTING),$t(1)).subscribe(()=>{e()})}function w$(t){throw t}var E$={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},x$={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Po=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=I(Oh),this.stateManager=I(IA),this.options=I(_l,{optional:!0})||{},this.pendingTasks=I(Qc),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=I(O_),this.urlSerializer=I(pl),this.location=I(ta),this.urlHandlingStrategy=I(N_),this._events=new le,this.errorHandler=this.options.errorHandler||w$,this.navigated=!1,this.routeReuseStrategy=I(y$),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=I(df,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!I(ff,{optional:!0}),this.eventsSubscription=new Ee,this.isNgZoneEnabled=I(U)instanceof U&&U.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:i=>{this.console.warn(i)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let i=this.navigationTransitions.events.subscribe(r=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof Ir&&r.code!==0&&r.code!==1)this.navigated=!0;else if(r instanceof zi)this.navigated=!0;else if(r instanceof ul){let a=this.urlHandlingStrategy.merge(r.url,o.currentRawUrl),c={skipLocationChange:o.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||b$(o.source)};this.scheduleNavigation(a,rl,null,c,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}D$(r)&&this._events.next(r)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(i)}resetRootComponentType(i){this.routerState.root.component=i,this.navigationTransitions.rootComponentType=i}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),rl,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription||(this.nonRouterCurrentEntryChangeSubscription=this.stateManager.registerNonRouterCurrentEntryChangeListener((i,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(i,"popstate",r)},0)}))}navigateToSyncWithBrowser(i,r,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let l=T({},o);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let c=this.parseUrl(i);this.scheduleNavigation(c,r,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(i){this.config=i.map(R_),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(i,r={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:c,preserveFragment:l}=r,u=l?this.currentUrlTree.fragment:a,d=null;switch(c){case"merge":d=T(T({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let f=o?o.snapshot:this.routerState.snapshot.root;h=oA(f)}catch{(typeof i[0]!="string"||!i[0].startsWith("/"))&&(i=[]),h=this.currentUrlTree.root}return sA(h,i,d,u??null)}navigateByUrl(i,r={skipLocationChange:!1}){let o=ca(i)?i:this.parseUrl(i),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,rl,null,r)}navigate(i,r={skipLocationChange:!1}){return I$(i),this.navigateByUrl(this.createUrlTree(i,r),r)}serializeUrl(i){return this.urlSerializer.serialize(i)}parseUrl(i){try{return this.urlSerializer.parse(i)}catch{return this.urlSerializer.parse("/")}}isActive(i,r){let o;if(r===!0?o=T({},E$):r===!1?o=T({},x$):o=r,ca(i))return US(this.currentUrlTree,i,o);let s=this.parseUrl(i);return US(this.currentUrlTree,s,o)}removeEmptyProps(i){return Object.keys(i).reduce((r,o)=>{let s=i[o];return s!=null&&(r[o]=s),r},{})}scheduleNavigation(i,r,o,s,a){if(this.disposed)return Promise.resolve(!1);let c,l,u;a?(c=a.resolve,l=a.reject,u=a.promise):u=new Promise((h,f)=>{c=h,l=f});let d=this.pendingTasks.add();return DA(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:i,extras:s,resolve:c,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(h=>Promise.reject(h))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function I$(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new D(4008,!1)}function D$(t){return!(t instanceof ll)&&!(t instanceof ul)}var hf=class{};var C$=(()=>{let e=class e{constructor(i,r,o,s,a){this.router=i,this.injector=o,this.preloadingStrategy=s,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(Pe(i=>i instanceof zi),cr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(i,r){let o=[];for(let s of r){s.providers&&!s._injector&&(s._injector=Nh(s.providers,i,`Route: ${s.path}`));let a=s._injector??i,c=s._loadedInjector??a;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&o.push(this.preloadConfig(a,s)),(s.children||s._loadedRoutes)&&o.push(this.processRoutes(c,s.children??s._loadedRoutes))}return fe(o).pipe(rr())}preloadConfig(i,r){return this.preloadingStrategy.preload(r,()=>{let o;r.loadChildren&&r.canLoad===void 0?o=this.loader.loadChildren(i,r):o=V(null);let s=o.pipe(He(a=>a===null?V(void 0):(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,this.processRoutes(a.injector??i,a.routes))));if(r.loadComponent&&!r._loadedComponent){let a=this.loader.loadComponent(r);return fe([s,a]).pipe(rr())}else return s})}};e.\u0275fac=function(r){return new(r||e)(v(Po),v(Fh),v(cn),v(hf),v(P_))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),CA=new M(""),T$=(()=>{let e=class e{constructor(i,r,o,s,a={}){this.urlSerializer=i,this.transitions=r,this.viewportScroller=o,this.zone=s,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration=a.scrollPositionRestoration||"disabled",a.anchorScrolling=a.anchorScrolling||"disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(i=>{i instanceof la?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=i.navigationTrigger,this.restoredId=i.restoredState?i.restoredState.navigationId:0):i instanceof zi?(this.lastId=i.id,this.scheduleScrollEvent(i,this.urlSerializer.parse(i.urlAfterRedirects).fragment)):i instanceof Dr&&i.code===0&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(i,this.urlSerializer.parse(i.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(i=>{i instanceof of&&(i.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(i.position):i.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(i.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(i,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new of(i,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(r){Dh()},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})();function S$(t){return t.routerState.root}function vl(t,e){return{\u0275kind:t,\u0275providers:e}}function A$(){let t=I(Kt);return e=>{let n=t.get(Hn);if(e!==n.components[0])return;let i=t.get(Po),r=t.get(TA);t.get(F_)===1&&i.initialNavigation(),t.get(SA,null,ce.Optional)?.setUpPreloading(),t.get(CA,null,ce.Optional)?.init(),i.resetRootComponentType(n.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var TA=new M("",{factory:()=>new le}),F_=new M("",{providedIn:"root",factory:()=>1});function M$(){return vl(2,[{provide:F_,useValue:0},{provide:jh,multi:!0,deps:[Kt],useFactory:e=>{let n=e.get(bS,Promise.resolve());return()=>n.then(()=>new Promise(i=>{let r=e.get(Po),o=e.get(TA);DA(r,()=>{i(!0)}),e.get(O_).afterPreactivation=()=>(i(!0),o.closed?V(void 0):o),r.initialNavigation()}))}}])}function R$(){return vl(3,[{provide:jh,multi:!0,useFactory:()=>{let e=I(Po);return()=>{e.setUpLocationChangeListener()}}},{provide:F_,useValue:2}])}var SA=new M("");function k$(t){return vl(0,[{provide:SA,useExisting:C$},{provide:hf,useExisting:t}])}function P$(){return vl(8,[qS,{provide:ff,useExisting:qS}])}function N$(t){let e=[{provide:EA,useValue:p$},{provide:xA,useValue:T({skipNextTransition:!!t?.skipInitialTransition},t)}];return vl(9,e)}var WS=new M("ROUTER_FORROOT_GUARD"),O$=[ta,{provide:pl,useClass:sl},Po,gl,{provide:ua,useFactory:S$,deps:[Po]},P_,[]],L_=(()=>{let e=class e{constructor(i){}static forRoot(i,r){return{ngModule:e,providers:[O$,[],{provide:df,multi:!0,useValue:i},{provide:WS,useFactory:j$,deps:[[Po,new Io,new bh]]},{provide:_l,useValue:r||{}},r?.useHash?L$():V$(),F$(),r?.preloadingStrategy?k$(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?B$(r):[],r?.bindToComponentInputs?P$().\u0275providers:[],r?.enableViewTransitions?N$().\u0275providers:[],U$()]}}static forChild(i){return{ngModule:e,providers:[{provide:df,multi:!0,useValue:i}]}}};e.\u0275fac=function(r){return new(r||e)(v(WS,8))},e.\u0275mod=te({type:e}),e.\u0275inj=ee({});let t=e;return t})();function F$(){return{provide:CA,useFactory:()=>{let t=I(xS),e=I(U),n=I(_l),i=I(O_),r=I(pl);return n.scrollOffset&&t.setOffset(n.scrollOffset),new T$(r,i,t,e,n)}}}function L$(){return{provide:Ao,useClass:_S}}function V$(){return{provide:Ao,useClass:Uy}}function j$(t){return"guarded"}function B$(t){return[t.initialNavigation==="disabled"?R$().\u0275providers:[],t.initialNavigation==="enabledBlocking"?M$().\u0275providers:[]]}var KS=new M("");function U$(){return[{provide:KS,useFactory:A$},{provide:ea,multi:!0,useExisting:KS}]}var z$=[],AA=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=te({type:e}),e.\u0275inj=ee({imports:[L_.forRoot(z$),L_]});let t=e;return t})();var j_;try{j_=typeof Intl<"u"&&Intl.v8BreakIterator}catch{j_=!1}var dt=(()=>{let e=class e{constructor(i){this._platformId=i,this.isBrowser=this._platformId?ES(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||j_)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};e.\u0275fac=function(r){return new(r||e)(v(Et))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var wl;function $$(){if(wl==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>wl=!0}))}finally{wl=wl||!1}return wl}function Tr(t){return $$()?t:!!t.capture}var V_;function H$(){if(V_==null){let t=typeof document<"u"?document.head:null;V_=!!(t&&(t.createShadowRoot||t.attachShadow))}return V_}function MA(t){if(H$()){let e=t.getRootNode?t.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function Sr(t){return t.composedPath?t.composedPath()[0]:t.target}function RA(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function pf(t,...e){return e.length?e.some(n=>t[n]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}function An(t){return t!=null&&`${t}`!="false"}function Oo(t,e=0){return q$(t)?Number(t):e}function q$(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}function B_(t){return Array.isArray(t)?t:[t]}function $i(t){return t instanceof de?t.nativeElement:t}var kA=(()=>{let e=class e{create(i){return typeof MutationObserver>"u"?null:new MutationObserver(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),G$=(()=>{let e=class e{constructor(i){this._mutationObserverFactory=i,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((i,r)=>this._cleanupObserver(r))}observe(i){let r=$i(i);return new K(o=>{let a=this._observeElement(r).subscribe(o);return()=>{a.unsubscribe(),this._unobserveElement(r)}})}_observeElement(i){if(this._observedElements.has(i))this._observedElements.get(i).count++;else{let r=new le,o=this._mutationObserverFactory.create(s=>r.next(s));o&&o.observe(i,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(i,{observer:o,stream:r,count:1})}return this._observedElements.get(i).stream}_unobserveElement(i){this._observedElements.has(i)&&(this._observedElements.get(i).count--,this._observedElements.get(i).count||this._cleanupObserver(i))}_cleanupObserver(i){if(this._observedElements.has(i)){let{observer:r,stream:o}=this._observedElements.get(i);r&&r.disconnect(),o.complete(),this._observedElements.delete(i)}}};e.\u0275fac=function(r){return new(r||e)(v(kA))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),PA=(()=>{let e=class e{get disabled(){return this._disabled}set disabled(i){this._disabled=i,this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(i){this._debounce=Oo(i),this._subscribe()}constructor(i,r,o){this._contentObserver=i,this._elementRef=r,this._ngZone=o,this.event=new se,this._disabled=!1,this._currentSubscription=null}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();let i=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?i.pipe(lo(this.debounce)):i).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)(S(G$),S(de),S(U))},e.\u0275dir=_e({type:e,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled",qn],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"],features:[ji]});let t=e;return t})(),fa=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=te({type:e}),e.\u0275inj=ee({providers:[kA]});let t=e;return t})();var NA=new Set,Fo,K$=(()=>{let e=class e{constructor(i,r){this._platform=i,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Y$}matchMedia(i){return(this._platform.WEBKIT||this._platform.BLINK)&&Q$(i,this._nonce),this._matchMedia(i)}};e.\u0275fac=function(r){return new(r||e)(v(dt),v(qc,8))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Q$(t,e){if(!NA.has(t))try{Fo||(Fo=document.createElement("style"),e&&(Fo.nonce=e),Fo.setAttribute("type","text/css"),document.head.appendChild(Fo)),Fo.sheet&&(Fo.sheet.insertRule(`@media ${t} {body{ }}`,0),NA.add(t))}catch(n){console.error(n)}}function Y$(t){return{matches:t==="all"||t==="",media:t,addListener:()=>{},removeListener:()=>{}}}var FA=(()=>{let e=class e{constructor(i,r){this._mediaMatcher=i,this._zone=r,this._queries=new Map,this._destroySubject=new le}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(i){return OA(B_(i)).some(o=>this._registerQuery(o).mql.matches)}observe(i){let o=OA(B_(i)).map(a=>this._registerQuery(a).observable),s=ao(o);return s=or(s.pipe($t(1)),s.pipe(ho(1),lo(0))),s.pipe(B(a=>{let c={matches:!1,breakpoints:{}};return a.forEach(({matches:l,query:u})=>{c.matches=c.matches||l,c.breakpoints[u]=l}),c}))}_registerQuery(i){if(this._queries.has(i))return this._queries.get(i);let r=this._mediaMatcher.matchMedia(i),s={observable:new K(a=>{let c=l=>this._zone.run(()=>a.next(l));return r.addListener(c),()=>{r.removeListener(c)}}).pipe(Ht(r),B(({matches:a})=>({query:i,matches:a})),qt(this._destroySubject)),mql:r};return this._queries.set(i,s),s}};e.\u0275fac=function(r){return new(r||e)(v(K$),v(U))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function OA(t){return t.map(e=>e.split(",")).reduce((e,n)=>e.concat(n)).map(e=>e.trim())}var z_=class{constructor(e){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new le,this._typeaheadSubscription=Ee.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=n=>n.disabled,this._pressedLetters=[],this.tabOut=new le,this.change=new le,e instanceof br&&(this._itemChangesSubscription=e.changes.subscribe(n=>{if(this._activeItem){let r=n.toArray().indexOf(this._activeItem);r>-1&&r!==this._activeItemIndex&&(this._activeItemIndex=r)}}))}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(Fe(n=>this._pressedLetters.push(n)),lo(e),Pe(()=>this._pressedLetters.length>0),B(()=>this._pressedLetters.join(""))).subscribe(n=>{let i=this._getItemsArray();for(let r=1;r<i.length+1;r++){let o=(this._activeItemIndex+r)%i.length,s=i[o];if(!this._skipPredicateFn(s)&&s.getLabel().toUpperCase().trim().indexOf(n)===0){this.setActiveItem(o);break}}this._pressedLetters=[]}),this}cancelTypeahead(){return this._pressedLetters=[],this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}withPageUpDown(e=!0,n=10){return this._pageUpAndDown={enabled:e,delta:n},this}setActiveItem(e){let n=this._activeItem;this.updateActiveItem(e),this._activeItem!==n&&this.change.next(this._activeItemIndex)}onKeydown(e){let n=e.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(o=>!e[o]||this._allowedModifierKeys.indexOf(o)>-1);switch(n){case 9:this.tabOut.next();return;case 40:if(this._vertical&&r){this.setNextItemActive();break}else return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}else return;case 39:if(this._horizontal&&r){this._horizontal==="rtl"?this.setPreviousItemActive():this.setNextItemActive();break}else return;case 37:if(this._horizontal&&r){this._horizontal==="rtl"?this.setNextItemActive():this.setPreviousItemActive();break}else return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}else return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}else return;case 33:if(this._pageUpAndDown.enabled&&r){let o=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(o>0?o:0,1);break}else return;case 34:if(this._pageUpAndDown.enabled&&r){let o=this._activeItemIndex+this._pageUpAndDown.delta,s=this._getItemsArray().length;this._setActiveItemByIndex(o<s?o:s-1,-1);break}else return;default:(r||pf(e,"shiftKey"))&&(e.key&&e.key.length===1?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(n>=65&&n<=90||n>=48&&n<=57)&&this._letterKeyStream.next(String.fromCharCode(n)));return}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){let n=this._getItemsArray(),i=typeof e=="number"?e:n.indexOf(e),r=n[i];this._activeItem=r??null,this._activeItemIndex=i}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._letterKeyStream.complete(),this.tabOut.complete(),this.change.complete(),this._pressedLetters=[]}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){let n=this._getItemsArray();for(let i=1;i<=n.length;i++){let r=(this._activeItemIndex+e*i+n.length)%n.length,o=n[r];if(!this._skipPredicateFn(o)){this.setActiveItem(r);return}}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,n){let i=this._getItemsArray();if(i[e]){for(;this._skipPredicateFn(i[e]);)if(e+=n,!i[e])return;this.setActiveItem(e)}}_getItemsArray(){return this._items instanceof br?this._items.toArray():this._items}};var bf=class extends z_{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}};function $_(t){return t.buttons===0||t.detail===0}function H_(t){let e=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var p4=new M("cdk-input-modality-detector-options"),g4={ignoreKeys:[18,17,224,91,16]},jA=650,ma=Tr({passive:!0,capture:!0}),b4=(()=>{let e=class e{get mostRecentModality(){return this._modality.value}constructor(i,r,o,s){this._platform=i,this._mostRecentTarget=null,this._modality=new et(null),this._lastTouchMs=0,this._onKeydown=a=>{this._options?.ignoreKeys?.some(c=>c===a.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Sr(a))},this._onMousedown=a=>{Date.now()-this._lastTouchMs<jA||(this._modality.next($_(a)?"keyboard":"mouse"),this._mostRecentTarget=Sr(a))},this._onTouchstart=a=>{if(H_(a)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Sr(a)},this._options=T(T({},g4),s),this.modalityDetected=this._modality.pipe(ho(1)),this.modalityChanged=this.modalityDetected.pipe(ur()),i.isBrowser&&r.runOutsideAngular(()=>{o.addEventListener("keydown",this._onKeydown,ma),o.addEventListener("mousedown",this._onMousedown,ma),o.addEventListener("touchstart",this._onTouchstart,ma)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,ma),document.removeEventListener("mousedown",this._onMousedown,ma),document.removeEventListener("touchstart",this._onTouchstart,ma))}};e.\u0275fac=function(r){return new(r||e)(v(dt),v(U),v(he),v(p4,8))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var y4=new M("cdk-focus-monitor-default-options"),gf=Tr({passive:!0,capture:!0}),yf=(()=>{let e=class e{constructor(i,r,o,s,a){this._ngZone=i,this._platform=r,this._inputModalityDetector=o,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new le,this._rootNodeFocusAndBlurListener=c=>{let l=Sr(c);for(let u=l;u;u=u.parentElement)c.type==="focus"?this._onFocus(c,u):this._onBlur(c,u)},this._document=s,this._detectionMode=a?.detectionMode||0}monitor(i,r=!1){let o=$i(i);if(!this._platform.isBrowser||o.nodeType!==1)return V();let s=MA(o)||this._getDocument(),a=this._elementInfo.get(o);if(a)return r&&(a.checkChildren=!0),a.subject;let c={checkChildren:r,subject:new le,rootNode:s};return this._elementInfo.set(o,c),this._registerGlobalListeners(c),c.subject}stopMonitoring(i){let r=$i(i),o=this._elementInfo.get(r);o&&(o.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(o))}focusVia(i,r,o){let s=$i(i),a=this._getDocument().activeElement;s===a?this._getClosestElementsInfo(s).forEach(([c,l])=>this._originChanged(c,r,l)):(this._setOrigin(r),typeof s.focus=="function"&&s.focus(o))}ngOnDestroy(){this._elementInfo.forEach((i,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(i){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(i)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:i&&this._isLastInteractionFromInputLabel(i)?"mouse":"program"}_shouldBeAttributedToTouch(i){return this._detectionMode===1||!!i?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(i,r){i.classList.toggle("cdk-focused",!!r),i.classList.toggle("cdk-touch-focused",r==="touch"),i.classList.toggle("cdk-keyboard-focused",r==="keyboard"),i.classList.toggle("cdk-mouse-focused",r==="mouse"),i.classList.toggle("cdk-program-focused",r==="program")}_setOrigin(i,r=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=i,this._originFromTouchInteraction=i==="touch"&&r,this._detectionMode===0){clearTimeout(this._originTimeoutId);let o=this._originFromTouchInteraction?jA:1;this._originTimeoutId=setTimeout(()=>this._origin=null,o)}})}_onFocus(i,r){let o=this._elementInfo.get(r),s=Sr(i);!o||!o.checkChildren&&r!==s||this._originChanged(r,this._getFocusOrigin(s),o)}_onBlur(i,r){let o=this._elementInfo.get(r);!o||o.checkChildren&&i.relatedTarget instanceof Node&&r.contains(i.relatedTarget)||(this._setClasses(r),this._emitOrigin(o,null))}_emitOrigin(i,r){i.subject.observers.length&&this._ngZone.run(()=>i.subject.next(r))}_registerGlobalListeners(i){if(!this._platform.isBrowser)return;let r=i.rootNode,o=this._rootNodeFocusListenerCount.get(r)||0;o||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,gf),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,gf)}),this._rootNodeFocusListenerCount.set(r,o+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(qt(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(i){let r=i.rootNode;if(this._rootNodeFocusListenerCount.has(r)){let o=this._rootNodeFocusListenerCount.get(r);o>1?this._rootNodeFocusListenerCount.set(r,o-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,gf),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,gf),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(i,r,o){this._setClasses(i,r),this._emitOrigin(o,r),this._lastFocusOrigin=r}_getClosestElementsInfo(i){let r=[];return this._elementInfo.forEach((o,s)=>{(s===i||o.checkChildren&&s.contains(i))&&r.push([s,o])}),r}_isLastInteractionFromInputLabel(i){let{_mostRecentTarget:r,mostRecentModality:o}=this._inputModalityDetector;if(o!=="mouse"||!r||r===i||i.nodeName!=="INPUT"&&i.nodeName!=="TEXTAREA"||i.disabled)return!1;let s=i.labels;if(s){for(let a=0;a<s.length;a++)if(s[a].contains(r))return!0}return!1}};e.\u0275fac=function(r){return new(r||e)(v(U),v(dt),v(b4),v(he,8),v(y4,8))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),BA=(()=>{let e=class e{constructor(i,r){this._elementRef=i,this._focusMonitor=r,this._focusOrigin=null,this.cdkFocusChange=new se}get focusOrigin(){return this._focusOrigin}ngAfterViewInit(){let i=this._elementRef.nativeElement;this._monitorSubscription=this._focusMonitor.monitor(i,i.nodeType===1&&i.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(r=>{this._focusOrigin=r,this.cdkFocusChange.emit(r)})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._monitorSubscription&&this._monitorSubscription.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)(S(de),S(yf))},e.\u0275dir=_e({type:e,selectors:[["","cdkMonitorElementFocus",""],["","cdkMonitorSubtreeFocus",""]],outputs:{cdkFocusChange:"cdkFocusChange"},exportAs:["cdkMonitorFocus"]});let t=e;return t})(),LA="cdk-high-contrast-black-on-white",VA="cdk-high-contrast-white-on-black",U_="cdk-high-contrast-active",q_=(()=>{let e=class e{constructor(i,r){this._platform=i,this._document=r,this._breakpointSubscription=I(FA).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;let i=this._document.createElement("div");i.style.backgroundColor="rgb(1,2,3)",i.style.position="absolute",this._document.body.appendChild(i);let r=this._document.defaultView||window,o=r&&r.getComputedStyle?r.getComputedStyle(i):null,s=(o&&o.backgroundColor||"").replace(/ /g,"");switch(i.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let i=this._document.body.classList;i.remove(U_,LA,VA),this._hasCheckedHighContrastMode=!0;let r=this.getHighContrastMode();r===1?i.add(U_,LA):r===2&&i.add(U_,VA)}}};e.\u0275fac=function(r){return new(r||e)(v(dt),v(he))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),UA=(()=>{let e=class e{constructor(i){i._applyBodyHighContrastModeCssClasses()}};e.\u0275fac=function(r){return new(r||e)(v(q_))},e.\u0275mod=te({type:e}),e.\u0275inj=ee({imports:[fa]});let t=e;return t})();var _4=new M("cdk-dir-doc",{providedIn:"root",factory:v4});function v4(){return I(he)}var w4=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function E4(t){let e=t?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?w4.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var _f=(()=>{let e=class e{constructor(i){if(this.value="ltr",this.change=new se,i){let r=i.body?i.body.dir:null,o=i.documentElement?i.documentElement.dir:null;this.value=E4(r||o||"ltr")}}ngOnDestroy(){this.change.complete()}};e.\u0275fac=function(r){return new(r||e)(v(_4,8))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var G_=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=te({type:e}),e.\u0275inj=ee({});let t=e;return t})();var yi="*";function $A(t,e){return{type:7,name:t,definitions:e,options:{}}}function vf(t,e=null){return{type:4,styles:e,timings:t}}function HA(t,e=null){return{type:2,steps:t,options:e}}function Hi(t){return{type:6,styles:t,offset:null}}function wf(t,e,n){return{type:0,name:t,styles:e,options:n}}function Ef(t,e,n=null){return{type:1,expr:t,animation:e,options:n}}var Ar=class{constructor(e=0,n=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+n}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let n=e=="start"?this._onStartFns:this._onDoneFns;n.forEach(i=>i()),n.length=0}},El=class{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let n=0,i=0,r=0,o=this.players.length;o==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++n==o&&this._onFinish()}),s.onDestroy(()=>{++i==o&&this._onDestroy()}),s.onStart(()=>{++r==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let n=e*this.totalTime;this.players.forEach(i=>{let r=i.totalTime?Math.min(1,n/i.totalTime):1;i.setPosition(r)})}getPosition(){let e=this.players.reduce((n,i)=>n===null||i.totalTime>n.totalTime?i:n,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let n=e=="start"?this._onStartFns:this._onDoneFns;n.forEach(i=>i()),n.length=0}},xf="!";function qA(t){return new D(3e3,!1)}function I4(){return new D(3100,!1)}function D4(){return new D(3101,!1)}function C4(t){return new D(3001,!1)}function T4(t){return new D(3003,!1)}function S4(t){return new D(3004,!1)}function A4(t,e){return new D(3005,!1)}function M4(){return new D(3006,!1)}function R4(){return new D(3007,!1)}function k4(t,e){return new D(3008,!1)}function P4(t){return new D(3002,!1)}function N4(t,e,n,i,r){return new D(3010,!1)}function O4(){return new D(3011,!1)}function F4(){return new D(3012,!1)}function L4(){return new D(3200,!1)}function V4(){return new D(3202,!1)}function j4(){return new D(3013,!1)}function B4(t){return new D(3014,!1)}function U4(t){return new D(3015,!1)}function z4(t){return new D(3016,!1)}function $4(t,e){return new D(3404,!1)}function H4(t){return new D(3502,!1)}function q4(t){return new D(3503,!1)}function G4(){return new D(3300,!1)}function W4(t){return new D(3504,!1)}function K4(t){return new D(3301,!1)}function Q4(t,e){return new D(3302,!1)}function Y4(t){return new D(3303,!1)}function Z4(t,e){return new D(3400,!1)}function X4(t){return new D(3401,!1)}function J4(t){return new D(3402,!1)}function eH(t,e){return new D(3505,!1)}function Mr(t){switch(t.length){case 0:return new Ar;case 1:return t[0];default:return new El(t)}}function oM(t,e,n=new Map,i=new Map){let r=[],o=[],s=-1,a=null;if(e.forEach(c=>{let l=c.get("offset"),u=l==s,d=u&&a||new Map;c.forEach((h,f)=>{let m=f,p=h;if(f!=="offset")switch(m=t.normalizePropertyName(m,r),p){case xf:p=n.get(f);break;case yi:p=i.get(f);break;default:p=t.normalizeStyleValue(f,m,p,r);break}d.set(m,p)}),u||o.push(d),a=d,s=l}),r.length)throw H4(r);return o}function mv(t,e,n,i){switch(e){case"start":t.onStart(()=>i(n&&W_(n,"start",t)));break;case"done":t.onDone(()=>i(n&&W_(n,"done",t)));break;case"destroy":t.onDestroy(()=>i(n&&W_(n,"destroy",t)));break}}function W_(t,e,n){let i=n.totalTime,r=!!n.disabled,o=pv(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,i??t.totalTime,r),s=t._data;return s!=null&&(o._data=s),o}function pv(t,e,n,i,r="",o=0,s){return{element:t,triggerName:e,fromState:n,toState:i,phaseName:r,totalTime:o,disabled:!!s}}function yn(t,e,n){let i=t.get(e);return i||t.set(e,i=n),i}function GA(t){let e=t.indexOf(":"),n=t.substring(1,e),i=t.slice(e+1);return[n,i]}var tH=(()=>typeof document>"u"?null:document.documentElement)();function gv(t){let e=t.parentNode||t.host||null;return e===tH?null:e}function nH(t){return t.substring(1,6)=="ebkit"}var Lo=null,WA=!1;function iH(t){Lo||(Lo=rH()||{},WA=Lo.style?"WebkitAppearance"in Lo.style:!1);let e=!0;return Lo.style&&!nH(t)&&(e=t in Lo.style,!e&&WA&&(e="Webkit"+t.charAt(0).toUpperCase()+t.slice(1)in Lo.style)),e}function rH(){return typeof document<"u"?document.body:null}function sM(t,e){for(;e;){if(e===t)return!0;e=gv(e)}return!1}function aM(t,e,n){if(n)return Array.from(t.querySelectorAll(e));let i=t.querySelector(e);return i?[i]:[]}var bv=(()=>{let e=class e{validateStyleProperty(i){return iH(i)}matchesElement(i,r){return!1}containsElement(i,r){return sM(i,r)}getParentElement(i){return gv(i)}query(i,r,o){return aM(i,r,o)}computeStyle(i,r,o){return o||""}animate(i,r,o,s,a,c=[],l){return new Ar(o,s)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})(),Al=(()=>{let e=class e{};e.NOOP=new bv;let t=e;return t})(),Bo=class{};var oH=1e3,cM="{{",sH="}}",lM="ng-enter",J_="ng-leave",If="ng-trigger",Af=".ng-trigger",KA="ng-animating",ev=".ng-animating";function qi(t){if(typeof t=="number")return t;let e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:tv(parseFloat(e[1]),e[2])}function tv(t,e){switch(e){case"s":return t*oH;default:return t}}function Mf(t,e,n){return t.hasOwnProperty("duration")?t:aH(t,e,n)}function aH(t,e,n){let i=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,r,o=0,s="";if(typeof t=="string"){let a=t.match(i);if(a===null)return e.push(qA(t)),{duration:0,delay:0,easing:""};r=tv(parseFloat(a[1]),a[2]);let c=a[3];c!=null&&(o=tv(parseFloat(c),a[4]));let l=a[5];l&&(s=l)}else r=t;if(!n){let a=!1,c=e.length;r<0&&(e.push(I4()),a=!0),o<0&&(e.push(D4()),a=!0),a&&e.splice(c,0,qA(t))}return{duration:r,delay:o,easing:s}}function Ml(t,e={}){return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}function uM(t){let e=new Map;return Object.keys(t).forEach(n=>{let i=t[n];e.set(n,i)}),e}function cH(t){return t.length?t[0]instanceof Map?t:t.map(e=>uM(e)):[]}function ga(t,e=new Map,n){if(n)for(let[i,r]of n)e.set(i,r);for(let[i,r]of t)e.set(i,r);return e}function _i(t,e,n){e.forEach((i,r)=>{let o=yv(r);n&&!n.has(r)&&n.set(r,t.style[o]),t.style[o]=i})}function jo(t,e){e.forEach((n,i)=>{let r=yv(i);t.style[r]=""})}function xl(t){return Array.isArray(t)?t.length==1?t[0]:HA(t):t}function lH(t,e,n){let i=e.params||{},r=dM(t);r.length&&r.forEach(o=>{i.hasOwnProperty(o)||n.push(C4(o))})}var nv=new RegExp(`${cM}\\s*(.+?)\\s*${sH}`,"g");function dM(t){let e=[];if(typeof t=="string"){let n;for(;n=nv.exec(t);)e.push(n[1]);nv.lastIndex=0}return e}function Dl(t,e,n){let i=t.toString(),r=i.replace(nv,(o,s)=>{let a=e[s];return a==null&&(n.push(T4(s)),a=""),a.toString()});return r==i?t:r}function Rf(t){let e=[],n=t.next();for(;!n.done;)e.push(n.value),n=t.next();return e}var uH=/-+([a-z0-9])/g;function yv(t){return t.replace(uH,(...e)=>e[1].toUpperCase())}function dH(t,e){return t===0||e===0}function hH(t,e,n){if(n.size&&e.length){let i=e[0],r=[];if(n.forEach((o,s)=>{i.has(s)||r.push(s),i.set(s,o)}),r.length)for(let o=1;o<e.length;o++){let s=e[o];r.forEach(a=>s.set(a,hM(t,a)))}}return e}function bn(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw S4(e.type)}}function hM(t,e){return window.getComputedStyle(t)[e]}var fH=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),kf=class extends Bo{normalizePropertyName(e,n){return yv(e)}normalizeStyleValue(e,n,i,r){let o="",s=i.toString().trim();if(fH.has(n)&&i!==0&&i!=="0")if(typeof i=="number")o="px";else{let a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&r.push(A4(e,i))}return s+o}};var Pf="*";function mH(t,e){let n=[];return typeof t=="string"?t.split(/\s*,\s*/).forEach(i=>pH(i,n,e)):n.push(t),n}function pH(t,e,n){if(t[0]==":"){let c=gH(t,n);if(typeof c=="function"){e.push(c);return}t=c}let i=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(i==null||i.length<4)return n.push(U4(t)),e;let r=i[1],o=i[2],s=i[3];e.push(QA(r,s));let a=r==Pf&&s==Pf;o[0]=="<"&&!a&&e.push(QA(s,r))}function gH(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(n,i)=>parseFloat(i)>parseFloat(n);case":decrement":return(n,i)=>parseFloat(i)<parseFloat(n);default:return e.push(z4(t)),"* => *"}}var Df=new Set(["true","1"]),Cf=new Set(["false","0"]);function QA(t,e){let n=Df.has(t)||Cf.has(t),i=Df.has(e)||Cf.has(e);return(r,o)=>{let s=t==Pf||t==r,a=e==Pf||e==o;return!s&&n&&typeof r=="boolean"&&(s=r?Df.has(t):Cf.has(t)),!a&&i&&typeof o=="boolean"&&(a=o?Df.has(e):Cf.has(e)),s&&a}}var fM=":self",bH=new RegExp(`s*${fM}s*,?`,"g");function mM(t,e,n,i){return new iv(t).build(e,n,i)}var YA="",iv=class{constructor(e){this._driver=e}build(e,n,i){let r=new rv(n);return this._resetContextStyleTimingState(r),bn(this,xl(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector=YA,e.collectedStyles=new Map,e.collectedStyles.set(YA,new Map),e.currentTime=0}visitTrigger(e,n){let i=n.queryCount=0,r=n.depCount=0,o=[],s=[];return e.name.charAt(0)=="@"&&n.errors.push(M4()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(n),a.type==0){let c=a,l=c.name;l.toString().split(/\s*,\s*/).forEach(u=>{c.name=u,o.push(this.visitState(c,n))}),c.name=l}else if(a.type==1){let c=this.visitTransition(a,n);i+=c.queryCount,r+=c.depCount,s.push(c)}else n.errors.push(R4())}),{type:7,name:e.name,states:o,transitions:s,queryCount:i,depCount:r,options:null}}visitState(e,n){let i=this.visitStyle(e.styles,n),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){let o=new Set,s=r||{};if(i.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{dM(c).forEach(l=>{s.hasOwnProperty(l)||o.add(l)})})}),o.size){let a=Rf(o.values());n.errors.push(k4(e.name,a))}}return{type:0,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,n){n.queryCount=0,n.depCount=0;let i=bn(this,xl(e.animation),n);return{type:1,matchers:mH(e.expr,n.errors),animation:i,queryCount:n.queryCount,depCount:n.depCount,options:Vo(e.options)}}visitSequence(e,n){return{type:2,steps:e.steps.map(i=>bn(this,i,n)),options:Vo(e.options)}}visitGroup(e,n){let i=n.currentTime,r=0,o=e.steps.map(s=>{n.currentTime=i;let a=bn(this,s,n);return r=Math.max(r,n.currentTime),a});return n.currentTime=r,{type:3,steps:o,options:Vo(e.options)}}visitAnimate(e,n){let i=wH(e.timings,n.errors);n.currentAnimateTimings=i;let r,o=e.styles?e.styles:Hi({});if(o.type==5)r=this.visitKeyframes(o,n);else{let s=e.styles,a=!1;if(!s){a=!0;let l={};i.easing&&(l.easing=i.easing),s=Hi(l)}n.currentTime+=i.duration+i.delay;let c=this.visitStyle(s,n);c.isEmptyStep=a,r=c}return n.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(e,n){let i=this._makeStyleAst(e,n);return this._validateStyleAst(i,n),i}_makeStyleAst(e,n){let i=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of r)typeof a=="string"?a===yi?i.push(a):n.errors.push(P4(a)):i.push(uM(a));let o=!1,s=null;return i.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!o)){for(let c of a.values())if(c.toString().indexOf(cM)>=0){o=!0;break}}}),{type:6,styles:i,easing:s,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,n){let i=n.currentAnimateTimings,r=n.currentTime,o=n.currentTime;i&&o>0&&(o-=i.duration+i.delay),e.styles.forEach(s=>{typeof s!="string"&&s.forEach((a,c)=>{let l=n.collectedStyles.get(n.currentQuerySelector),u=l.get(c),d=!0;u&&(o!=r&&o>=u.startTime&&r<=u.endTime&&(n.errors.push(N4(c,u.startTime,u.endTime,o,r)),d=!1),o=u.startTime),d&&l.set(c,{startTime:o,endTime:r}),n.options&&lH(a,n.options,n.errors)})})}visitKeyframes(e,n){let i={type:5,styles:[],options:null};if(!n.currentAnimateTimings)return n.errors.push(O4()),i;let r=1,o=0,s=[],a=!1,c=!1,l=0,u=e.steps.map(w=>{let A=this._makeStyleAst(w,n),C=A.offset!=null?A.offset:vH(A.styles),O=0;return C!=null&&(o++,O=A.offset=C),c=c||O<0||O>1,a=a||O<l,l=O,s.push(O),A});c&&n.errors.push(F4()),a&&n.errors.push(L4());let d=e.steps.length,h=0;o>0&&o<d?n.errors.push(V4()):o==0&&(h=r/(d-1));let f=d-1,m=n.currentTime,p=n.currentAnimateTimings,g=p.duration;return u.forEach((w,A)=>{let C=h>0?A==f?1:h*A:s[A],O=C*g;n.currentTime=m+p.delay+O,p.duration=O,this._validateStyleAst(w,n),w.offset=C,i.styles.push(w)}),i}visitReference(e,n){return{type:8,animation:bn(this,xl(e.animation),n),options:Vo(e.options)}}visitAnimateChild(e,n){return n.depCount++,{type:9,options:Vo(e.options)}}visitAnimateRef(e,n){return{type:10,animation:this.visitReference(e.animation,n),options:Vo(e.options)}}visitQuery(e,n){let i=n.currentQuerySelector,r=e.options||{};n.queryCount++,n.currentQuery=e;let[o,s]=yH(e.selector);n.currentQuerySelector=i.length?i+" "+o:o,yn(n.collectedStyles,n.currentQuerySelector,new Map);let a=bn(this,xl(e.animation),n);return n.currentQuery=null,n.currentQuerySelector=i,{type:11,selector:o,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:a,originalSelector:e.selector,options:Vo(e.options)}}visitStagger(e,n){n.currentQuery||n.errors.push(j4());let i=e.timings==="full"?{duration:0,delay:0,easing:"full"}:Mf(e.timings,n.errors,!0);return{type:12,animation:bn(this,xl(e.animation),n),timings:i,options:null}}};function yH(t){let e=!!t.split(/\s*,\s*/).find(n=>n==fM);return e&&(t=t.replace(bH,"")),t=t.replace(/@\*/g,Af).replace(/@\w+/g,n=>Af+"-"+n.slice(1)).replace(/:animating/g,ev),[t,e]}function _H(t){return t?Ml(t):null}var rv=class{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}};function vH(t){if(typeof t=="string")return null;let e=null;if(Array.isArray(t))t.forEach(n=>{if(n instanceof Map&&n.has("offset")){let i=n;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(t instanceof Map&&t.has("offset")){let n=t;e=parseFloat(n.get("offset")),n.delete("offset")}return e}function wH(t,e){if(t.hasOwnProperty("duration"))return t;if(typeof t=="number"){let o=Mf(t,e).duration;return K_(o,0,"")}let n=t;if(n.split(/\s+/).some(o=>o.charAt(0)=="{"&&o.charAt(1)=="{")){let o=K_(0,0,"");return o.dynamic=!0,o.strValue=n,o}let r=Mf(n,e);return K_(r.duration,r.delay,r.easing)}function Vo(t){return t?(t=Ml(t),t.params&&(t.params=_H(t.params))):t={},t}function K_(t,e,n){return{duration:t,delay:e,easing:n}}function _v(t,e,n,i,r,o,s=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:i,duration:r,delay:o,totalTime:r+o,easing:s,subTimeline:a}}var Cl=class{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,n){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...n)}has(e){return this._map.has(e)}clear(){this._map.clear()}},EH=1,xH=":enter",IH=new RegExp(xH,"g"),DH=":leave",CH=new RegExp(DH,"g");function pM(t,e,n,i,r,o=new Map,s=new Map,a,c,l=[]){return new ov().buildKeyframes(t,e,n,i,r,o,s,a,c,l)}var ov=class{buildKeyframes(e,n,i,r,o,s,a,c,l,u=[]){l=l||new Cl;let d=new sv(e,n,l,r,o,u,[]);d.options=c;let h=c.delay?qi(c.delay):0;d.currentTimeline.delayNextStep(h),d.currentTimeline.setStyles([s],null,d.errors,c),bn(this,i,d);let f=d.timelines.filter(m=>m.containsAnimation());if(f.length&&a.size){let m;for(let p=f.length-1;p>=0;p--){let g=f[p];if(g.element===n){m=g;break}}m&&!m.allowOnlyTimelineStyles()&&m.setStyles([a],null,d.errors,c)}return f.length?f.map(m=>m.buildKeyframes()):[_v(n,[],[],[],0,h,"",!1)]}visitTrigger(e,n){}visitState(e,n){}visitTransition(e,n){}visitAnimateChild(e,n){let i=n.subInstructions.get(n.element);if(i){let r=n.createSubContext(e.options),o=n.currentTimeline.currentTime,s=this._visitSubInstructions(i,r,r.options);o!=s&&n.transformIntoNewTimeline(s)}n.previousNode=e}visitAnimateRef(e,n){let i=n.createSubContext(e.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],n,i),this.visitReference(e.animation,i),n.transformIntoNewTimeline(i.currentTimeline.currentTime),n.previousNode=e}_applyAnimationRefDelays(e,n,i){for(let r of e){let o=r?.delay;if(o){let s=typeof o=="number"?o:qi(Dl(o,r?.params??{},n.errors));i.delayNextStep(s)}}}_visitSubInstructions(e,n,i){let o=n.currentTimeline.currentTime,s=i.duration!=null?qi(i.duration):null,a=i.delay!=null?qi(i.delay):null;return s!==0&&e.forEach(c=>{let l=n.appendInstructionToTimeline(c,s,a);o=Math.max(o,l.duration+l.delay)}),o}visitReference(e,n){n.updateOptions(e.options,!0),bn(this,e.animation,n),n.previousNode=e}visitSequence(e,n){let i=n.subContextCount,r=n,o=e.options;if(o&&(o.params||o.delay)&&(r=n.createSubContext(o),r.transformIntoNewTimeline(),o.delay!=null)){r.previousNode.type==6&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=Nf);let s=qi(o.delay);r.delayNextStep(s)}e.steps.length&&(e.steps.forEach(s=>bn(this,s,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),n.previousNode=e}visitGroup(e,n){let i=[],r=n.currentTimeline.currentTime,o=e.options&&e.options.delay?qi(e.options.delay):0;e.steps.forEach(s=>{let a=n.createSubContext(e.options);o&&a.delayNextStep(o),bn(this,s,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(s=>n.currentTimeline.mergeTimelineCollectedStyles(s)),n.transformIntoNewTimeline(r),n.previousNode=e}_visitTiming(e,n){if(e.dynamic){let i=e.strValue,r=n.params?Dl(i,n.params,n.errors):i;return Mf(r,n.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,n){let i=n.currentAnimateTimings=this._visitTiming(e.timings,n),r=n.currentTimeline;i.delay&&(n.incrementTime(i.delay),r.snapshotCurrentStyles());let o=e.style;o.type==5?this.visitKeyframes(o,n):(n.incrementTime(i.duration),this.visitStyle(o,n),r.applyStylesToKeyframe()),n.currentAnimateTimings=null,n.previousNode=e}visitStyle(e,n){let i=n.currentTimeline,r=n.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();let o=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(o):i.setStyles(e.styles,o,n.errors,n.options),n.previousNode=e}visitKeyframes(e,n){let i=n.currentAnimateTimings,r=n.currentTimeline.duration,o=i.duration,a=n.createSubContext().currentTimeline;a.easing=i.easing,e.styles.forEach(c=>{let l=c.offset||0;a.forwardTime(l*o),a.setStyles(c.styles,c.easing,n.errors,n.options),a.applyStylesToKeyframe()}),n.currentTimeline.mergeTimelineCollectedStyles(a),n.transformIntoNewTimeline(r+o),n.previousNode=e}visitQuery(e,n){let i=n.currentTimeline.currentTime,r=e.options||{},o=r.delay?qi(r.delay):0;o&&(n.previousNode.type===6||i==0&&n.currentTimeline.hasCurrentStyleProperties())&&(n.currentTimeline.snapshotCurrentStyles(),n.previousNode=Nf);let s=i,a=n.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,n.errors);n.currentQueryTotal=a.length;let c=null;a.forEach((l,u)=>{n.currentQueryIndex=u;let d=n.createSubContext(e.options,l);o&&d.delayNextStep(o),l===n.element&&(c=d.currentTimeline),bn(this,e.animation,d),d.currentTimeline.applyStylesToKeyframe();let h=d.currentTimeline.currentTime;s=Math.max(s,h)}),n.currentQueryIndex=0,n.currentQueryTotal=0,n.transformIntoNewTimeline(s),c&&(n.currentTimeline.mergeTimelineCollectedStyles(c),n.currentTimeline.snapshotCurrentStyles()),n.previousNode=e}visitStagger(e,n){let i=n.parentContext,r=n.currentTimeline,o=e.timings,s=Math.abs(o.duration),a=s*(n.currentQueryTotal-1),c=s*n.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":c=a-c;break;case"full":c=i.currentStaggerTime;break}let u=n.currentTimeline;c&&u.delayNextStep(c);let d=u.currentTime;bn(this,e.animation,n),n.previousNode=e,i.currentStaggerTime=r.currentTime-d+(r.startTime-i.currentTimeline.startTime)}},Nf={},sv=class t{constructor(e,n,i,r,o,s,a,c){this._driver=e,this.element=n,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=o,this.errors=s,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Nf,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=c||new Of(this._driver,n,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,n){if(!e)return;let i=e,r=this.options;i.duration!=null&&(r.duration=qi(i.duration)),i.delay!=null&&(r.delay=qi(i.delay));let o=i.params;if(o){let s=r.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!n||!s.hasOwnProperty(a))&&(s[a]=Dl(o[a],s,this.errors))})}}_copyOptions(){let e={};if(this.options){let n=this.options.params;if(n){let i=e.params={};Object.keys(n).forEach(r=>{i[r]=n[r]})}}return e}createSubContext(e=null,n,i){let r=n||this.element,o=new t(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=Nf,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,n,i){let r={duration:n??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},o=new av(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(o),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,n,i,r,o,s){let a=[];if(r&&a.push(this.element),e.length>0){e=e.replace(IH,"."+this._enterClassName),e=e.replace(CH,"."+this._leaveClassName);let c=i!=1,l=this._driver.query(this.element,e,c);i!==0&&(l=i<0?l.slice(l.length+i,l.length):l.slice(0,i)),a.push(...l)}return!o&&a.length==0&&s.push(B4(n)),a}},Of=class t{constructor(e,n,i,r){this._driver=e,this.element=n,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(n),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(n,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let n=this._keyframes.size===1&&this._pendingStyles.size;this.duration||n?(this.forwardTime(this.currentTime+e),n&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,n){return this.applyStylesToKeyframe(),new t(this._driver,e,n||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=EH,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,n){this._localTimelineStyles.set(e,n),this._globalTimelineStyles.set(e,n),this._styleSummary.set(e,{time:this.currentTime,value:n})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[n,i]of this._globalTimelineStyles)this._backFill.set(n,i||yi),this._currentKeyframe.set(n,yi);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,n,i,r){n&&this._previousKeyframe.set("easing",n);let o=r&&r.params||{},s=TH(e,this._globalTimelineStyles);for(let[a,c]of s){let l=Dl(c,o,i);this._pendingStyles.set(a,l),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??yi),this._updateStyle(a,l)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,n)=>{this._currentKeyframe.set(n,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,n)=>{this._currentKeyframe.has(n)||this._currentKeyframe.set(n,e)}))}snapshotCurrentStyles(){for(let[e,n]of this._localTimelineStyles)this._pendingStyles.set(e,n),this._updateStyle(e,n)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let n in this._currentKeyframe)e.push(n);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((n,i)=>{let r=this._styleSummary.get(i);(!r||n.time>r.time)&&this._updateStyle(i,n.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,n=new Set,i=this._keyframes.size===1&&this.duration===0,r=[];this._keyframes.forEach((a,c)=>{let l=ga(a,new Map,this._backFill);l.forEach((u,d)=>{u===xf?e.add(d):u===yi&&n.add(d)}),i||l.set("offset",c/this.duration),r.push(l)});let o=e.size?Rf(e.values()):[],s=n.size?Rf(n.values()):[];if(i){let a=r[0],c=new Map(a);a.set("offset",0),c.set("offset",1),r=[a,c]}return _v(this.element,r,o,s,this.duration,this.startTime,this.easing,!1)}},av=class extends Of{constructor(e,n,i,r,o,s,a=!1){super(e,n,s.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:n,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&n){let o=[],s=i+n,a=n/s,c=ga(e[0]);c.set("offset",0),o.push(c);let l=ga(e[0]);l.set("offset",ZA(a)),o.push(l);let u=e.length-1;for(let d=1;d<=u;d++){let h=ga(e[d]),f=h.get("offset"),m=n+f*i;h.set("offset",ZA(m/s)),o.push(h)}i=s,n=0,r="",e=o}return _v(this.element,e,this.preStyleProps,this.postStyleProps,i,n,r,!0)}};function ZA(t,e=3){let n=Math.pow(10,e-1);return Math.round(t*n)/n}function TH(t,e){let n=new Map,i;return t.forEach(r=>{if(r==="*"){i=i||e.keys();for(let o of i)n.set(o,yi)}else ga(r,n)}),n}function XA(t,e,n,i,r,o,s,a,c,l,u,d,h){return{type:0,element:t,triggerName:e,isRemovalTransition:r,fromState:n,fromStyles:o,toState:i,toStyles:s,timelines:a,queriedElements:c,preStyleProps:l,postStyleProps:u,totalTime:d,errors:h}}var Q_={},Ff=class{constructor(e,n,i){this._triggerName=e,this.ast=n,this._stateStyles=i}match(e,n,i,r){return SH(this.ast.matchers,e,n,i,r)}buildStyles(e,n,i){let r=this._stateStyles.get("*");return e!==void 0&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(n,i):new Map}build(e,n,i,r,o,s,a,c,l,u){let d=[],h=this.ast.options&&this.ast.options.params||Q_,f=a&&a.params||Q_,m=this.buildStyles(i,f,d),p=c&&c.params||Q_,g=this.buildStyles(r,p,d),w=new Set,A=new Map,C=new Map,O=r==="void",z={params:AH(p,h),delay:this.ast.options?.delay},H=u?[]:pM(e,n,this.ast.animation,o,s,m,g,z,l,d),oe=0;if(H.forEach(tn=>{oe=Math.max(tn.duration+tn.delay,oe)}),d.length)return XA(n,this._triggerName,i,r,O,m,g,[],[],A,C,oe,d);H.forEach(tn=>{let En=tn.element,Ux=yn(A,En,new Set);tn.preStyleProps.forEach(to=>Ux.add(to));let mc=yn(C,En,new Set);tn.postStyleProps.forEach(to=>mc.add(to)),En!==n&&w.add(En)});let $e=Rf(w.values());return XA(n,this._triggerName,i,r,O,m,g,H,$e,A,C,oe)}};function SH(t,e,n,i,r){return t.some(o=>o(e,n,i,r))}function AH(t,e){let n=Ml(e);for(let i in t)t.hasOwnProperty(i)&&t[i]!=null&&(n[i]=t[i]);return n}var cv=class{constructor(e,n,i){this.styles=e,this.defaultParams=n,this.normalizer=i}buildStyles(e,n){let i=new Map,r=Ml(this.defaultParams);return Object.keys(e).forEach(o=>{let s=e[o];s!==null&&(r[o]=s)}),this.styles.styles.forEach(o=>{typeof o!="string"&&o.forEach((s,a)=>{s&&(s=Dl(s,r,n));let c=this.normalizer.normalizePropertyName(a,n);s=this.normalizer.normalizeStyleValue(a,c,s,n),i.set(a,s)})}),i}};function MH(t,e,n){return new lv(t,e,n)}var lv=class{constructor(e,n,i){this.name=e,this.ast=n,this._normalizer=i,this.transitionFactories=[],this.states=new Map,n.states.forEach(r=>{let o=r.options&&r.options.params||{};this.states.set(r.name,new cv(r.style,o,i))}),JA(this.states,"true","1"),JA(this.states,"false","0"),n.transitions.forEach(r=>{this.transitionFactories.push(new Ff(e,r,this.states))}),this.fallbackTransition=RH(e,this.states,this._normalizer)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,n,i,r){return this.transitionFactories.find(s=>s.match(e,n,i,r))||null}matchStyles(e,n,i){return this.fallbackTransition.buildStyles(e,n,i)}};function RH(t,e,n){let o={type:1,animation:{type:2,steps:[],options:null},matchers:[(s,a)=>!0],options:null,queryCount:0,depCount:0};return new Ff(t,o,e)}function JA(t,e,n){t.has(e)?t.has(n)||t.set(n,t.get(e)):t.has(n)&&t.set(e,t.get(n))}var kH=new Cl,uv=class{constructor(e,n,i){this.bodyNode=e,this._driver=n,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,n){let i=[],r=[],o=mM(this._driver,n,i,r);if(i.length)throw q4(i);r.length&&void 0,this._animations.set(e,o)}_buildPlayer(e,n,i){let r=e.element,o=oM(this._normalizer,e.keyframes,n,i);return this._driver.animate(r,o,e.duration,e.delay,e.easing,[],!0)}create(e,n,i={}){let r=[],o=this._animations.get(e),s,a=new Map;if(o?(s=pM(this._driver,n,o,lM,J_,new Map,new Map,i,kH,r),s.forEach(u=>{let d=yn(a,u.element,new Map);u.postStyleProps.forEach(h=>d.set(h,null))})):(r.push(G4()),s=[]),r.length)throw W4(r);a.forEach((u,d)=>{u.forEach((h,f)=>{u.set(f,this._driver.computeStyle(d,f,yi))})});let c=s.map(u=>{let d=a.get(u.element);return this._buildPlayer(u,new Map,d)}),l=Mr(c);return this._playersById.set(e,l),l.onDestroy(()=>this.destroy(e)),this.players.push(l),l}destroy(e){let n=this._getPlayer(e);n.destroy(),this._playersById.delete(e);let i=this.players.indexOf(n);i>=0&&this.players.splice(i,1)}_getPlayer(e){let n=this._playersById.get(e);if(!n)throw K4(e);return n}listen(e,n,i,r){let o=pv(n,"","","");return mv(this._getPlayer(e),i,o,r),()=>{}}command(e,n,i,r){if(i=="register"){this.register(e,r[0]);return}if(i=="create"){let s=r[0]||{};this.create(e,n,s);return}let o=this._getPlayer(e);switch(i){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e);break}}},eM="ng-animate-queued",PH=".ng-animate-queued",Y_="ng-animate-disabled",NH=".ng-animate-disabled",OH="ng-star-inserted",FH=".ng-star-inserted",LH=[],gM={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},VH={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Gn="__ng_removed",Tl=class{get params(){return this.options.params}constructor(e,n=""){this.namespaceId=n;let i=e&&e.hasOwnProperty("value"),r=i?e.value:e;if(this.value=BH(r),i){let o=Ml(e);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let n=e.params;if(n){let i=this.options.params;Object.keys(n).forEach(r=>{i[r]==null&&(i[r]=n[r])})}}},Il="void",Z_=new Tl(Il),dv=class{constructor(e,n,i){this.id=e,this.hostElement=n,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Mn(n,this._hostClassName)}listen(e,n,i,r){if(!this._triggers.has(n))throw Q4(i,n);if(i==null||i.length==0)throw Y4(n);if(!UH(i))throw Z4(i,n);let o=yn(this._elementListeners,e,[]),s={name:n,phase:i,callback:r};o.push(s);let a=yn(this._engine.statesByElement,e,new Map);return a.has(n)||(Mn(e,If),Mn(e,If+"-"+n),a.set(n,Z_)),()=>{this._engine.afterFlush(()=>{let c=o.indexOf(s);c>=0&&o.splice(c,1),this._triggers.has(n)||a.delete(n)})}}register(e,n){return this._triggers.has(e)?!1:(this._triggers.set(e,n),!0)}_getTrigger(e){let n=this._triggers.get(e);if(!n)throw X4(e);return n}trigger(e,n,i,r=!0){let o=this._getTrigger(n),s=new Sl(this.id,n,e),a=this._engine.statesByElement.get(e);a||(Mn(e,If),Mn(e,If+"-"+n),this._engine.statesByElement.set(e,a=new Map));let c=a.get(n),l=new Tl(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&c&&l.absorbOptions(c.options),a.set(n,l),c||(c=Z_),!(l.value===Il)&&c.value===l.value){if(!HH(c.params,l.params)){let p=[],g=o.matchStyles(c.value,c.params,p),w=o.matchStyles(l.value,l.params,p);p.length?this._engine.reportError(p):this._engine.afterFlush(()=>{jo(e,g),_i(e,w)})}return}let h=yn(this._engine.playersByElement,e,[]);h.forEach(p=>{p.namespaceId==this.id&&p.triggerName==n&&p.queued&&p.destroy()});let f=o.matchTransition(c.value,l.value,e,l.params),m=!1;if(!f){if(!r)return;f=o.fallbackTransition,m=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:n,transition:f,fromState:c,toState:l,player:s,isFallbackTransition:m}),m||(Mn(e,eM),s.onStart(()=>{pa(e,eM)})),s.onDone(()=>{let p=this.players.indexOf(s);p>=0&&this.players.splice(p,1);let g=this._engine.playersByElement.get(e);if(g){let w=g.indexOf(s);w>=0&&g.splice(w,1)}}),this.players.push(s),h.push(s),s}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(n=>n.delete(e)),this._elementListeners.forEach((n,i)=>{this._elementListeners.set(i,n.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let n=this._engine.playersByElement.get(e);n&&(n.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,n){let i=this._engine.driver.query(e,Af,!0);i.forEach(r=>{if(r[Gn])return;let o=this._engine.fetchNamespacesByElement(r);o.size?o.forEach(s=>s.triggerLeaveAnimation(r,n,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,n,i,r){let o=this._engine.statesByElement.get(e),s=new Map;if(o){let a=[];if(o.forEach((c,l)=>{if(s.set(l,c.value),this._triggers.has(l)){let u=this.trigger(e,l,Il,r);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,n,s),i&&Mr(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let n=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(n&&i){let r=new Set;n.forEach(o=>{let s=o.name;if(r.has(s))return;r.add(s);let c=this._triggers.get(s).fallbackTransition,l=i.get(s)||Z_,u=new Tl(Il),d=new Sl(this.id,s,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:s,transition:c,fromState:l,toState:u,player:d,isFallbackTransition:!0})})}}removeNode(e,n){let i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,n),this.triggerLeaveAnimation(e,n,!0))return;let r=!1;if(i.totalAnimations){let o=i.players.length?i.playersByQueriedElement.get(e):[];if(o&&o.length)r=!0;else{let s=e;for(;s=s.parentNode;)if(i.statesByElement.get(s)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,n);else{let o=e[Gn];(!o||o===gM)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,n))}}insertNode(e,n){Mn(e,this._hostClassName)}drainQueuedTransitions(e){let n=[];return this._queue.forEach(i=>{let r=i.player;if(r.destroyed)return;let o=i.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==i.triggerName){let c=pv(o,i.triggerName,i.fromState.value,i.toState.value);c._data=e,mv(i.player,a.phase,c,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):n.push(i)}),this._queue=[],n.sort((i,r)=>{let o=i.transition.ast.depCount,s=r.transition.ast.depCount;return o==0||s==0?o-s:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(n=>n.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},hv=class{_onRemovalComplete(e,n){this.onRemovalComplete(e,n)}constructor(e,n,i){this.bodyNode=e,this.driver=n,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,o)=>{}}get queuedPlayers(){let e=[];return this._namespaceList.forEach(n=>{n.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,n){let i=new dv(e,n,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,n)?this._balanceNamespaceList(i,n):(this.newHostElements.set(n,i),this.collectEnterElement(n)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,n){let i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let s=!1,a=this.driver.getParentElement(n);for(;a;){let c=r.get(a);if(c){let l=i.indexOf(c);i.splice(l+1,0,e),s=!0;break}a=this.driver.getParentElement(a)}s||i.unshift(e)}else i.push(e);return r.set(n,e),e}register(e,n){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,n)),i}registerTrigger(e,n,i){let r=this._namespaceLookup[e];r&&r.register(n,i)&&this.totalAnimations++}destroy(e,n){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let i=this._fetchNamespace(e);this.namespacesByHostElement.delete(i.hostElement);let r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1),i.destroy(n),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let n=new Set,i=this.statesByElement.get(e);if(i){for(let r of i.values())if(r.namespaceId){let o=this._fetchNamespace(r.namespaceId);o&&n.add(o)}}return n}trigger(e,n,i,r){if(Tf(n)){let o=this._fetchNamespace(e);if(o)return o.trigger(n,i,r),!0}return!1}insertNode(e,n,i,r){if(!Tf(n))return;let o=n[Gn];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;let s=this.collectedLeaveElements.indexOf(n);s>=0&&this.collectedLeaveElements.splice(s,1)}if(e){let s=this._fetchNamespace(e);s&&s.insertNode(n,i)}r&&this.collectEnterElement(n)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,n){n?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Mn(e,Y_)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),pa(e,Y_))}removeNode(e,n,i){if(Tf(n)){let r=e?this._fetchNamespace(e):null;r?r.removeNode(n,i):this.markElementAsRemoved(e,n,!1,i);let o=this.namespacesByHostElement.get(n);o&&o.id!==e&&o.removeNode(n,i)}else this._onRemovalComplete(n,i)}markElementAsRemoved(e,n,i,r,o){this.collectedLeaveElements.push(n),n[Gn]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,n,i,r,o){return Tf(n)?this._fetchNamespace(e).listen(n,i,r,o):()=>{}}_buildInstruction(e,n,i,r,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,n,o)}destroyInnerAnimations(e){let n=this.driver.query(e,Af,!0);n.forEach(i=>this.destroyActiveAnimationsForElement(i)),this.playersByQueriedElement.size!=0&&(n=this.driver.query(e,ev,!0),n.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){let n=this.playersByElement.get(e);n&&n.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){let n=this.playersByQueriedElement.get(e);n&&n.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Mr(this.players).onDone(()=>e());e()})}processLeaveNode(e){let n=e[Gn];if(n&&n.setForRemoval){if(e[Gn]=gM,n.namespaceId){this.destroyInnerAnimations(e);let i=this._fetchNamespace(n.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,n.setForRemoval)}e.classList?.contains(Y_)&&this.markElementAsDisabled(e,!1),this.driver.query(e,NH,!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let n=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++){let r=this.collectedEnterElements[i];Mn(r,OH)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let i=[];try{n=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++){let r=this.collectedLeaveElements[i];this.processLeaveNode(r)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){let i=this._whenQuietFns;this._whenQuietFns=[],n.length?Mr(n).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw J4(e)}_flushAnimations(e,n){let i=new Cl,r=[],o=new Map,s=[],a=new Map,c=new Map,l=new Map,u=new Set;this.disabledNodes.forEach(L=>{u.add(L);let q=this.driver.query(L,PH,!0);for(let W=0;W<q.length;W++)u.add(q[W])});let d=this.bodyNode,h=Array.from(this.statesByElement.keys()),f=iM(h,this.collectedEnterElements),m=new Map,p=0;f.forEach((L,q)=>{let W=lM+p++;m.set(q,W),L.forEach(ye=>Mn(ye,W))});let g=[],w=new Set,A=new Set;for(let L=0;L<this.collectedLeaveElements.length;L++){let q=this.collectedLeaveElements[L],W=q[Gn];W&&W.setForRemoval&&(g.push(q),w.add(q),W.hasAnimation?this.driver.query(q,FH,!0).forEach(ye=>w.add(ye)):A.add(q))}let C=new Map,O=iM(h,Array.from(w));O.forEach((L,q)=>{let W=J_+p++;C.set(q,W),L.forEach(ye=>Mn(ye,W))}),e.push(()=>{f.forEach((L,q)=>{let W=m.get(q);L.forEach(ye=>pa(ye,W))}),O.forEach((L,q)=>{let W=C.get(q);L.forEach(ye=>pa(ye,W))}),g.forEach(L=>{this.processLeaveNode(L)})});let z=[],H=[];for(let L=this._namespaceList.length-1;L>=0;L--)this._namespaceList[L].drainQueuedTransitions(n).forEach(W=>{let ye=W.player,ft=W.element;if(z.push(ye),this.collectedEnterElements.length){let Ct=ft[Gn];if(Ct&&Ct.setForMove){if(Ct.previousTriggersValues&&Ct.previousTriggersValues.has(W.triggerName)){let no=Ct.previousTriggersValues.get(W.triggerName),xn=this.statesByElement.get(W.element);if(xn&&xn.has(W.triggerName)){let Xu=xn.get(W.triggerName);Xu.value=no,xn.set(W.triggerName,Xu)}}ye.destroy();return}}let ei=!d||!this.driver.containsElement(d,ft),nn=C.get(ft),nr=m.get(ft),Be=this._buildInstruction(W,i,nr,nn,ei);if(Be.errors&&Be.errors.length){H.push(Be);return}if(ei){ye.onStart(()=>jo(ft,Be.fromStyles)),ye.onDestroy(()=>_i(ft,Be.toStyles)),r.push(ye);return}if(W.isFallbackTransition){ye.onStart(()=>jo(ft,Be.fromStyles)),ye.onDestroy(()=>_i(ft,Be.toStyles)),r.push(ye);return}let Hx=[];Be.timelines.forEach(Ct=>{Ct.stretchStartingKeyframe=!0,this.disabledNodes.has(Ct.element)||Hx.push(Ct)}),Be.timelines=Hx,i.append(ft,Be.timelines);let MO={instruction:Be,player:ye,element:ft};s.push(MO),Be.queriedElements.forEach(Ct=>yn(a,Ct,[]).push(ye)),Be.preStyleProps.forEach((Ct,no)=>{if(Ct.size){let xn=c.get(no);xn||c.set(no,xn=new Set),Ct.forEach((Xu,Yp)=>xn.add(Yp))}}),Be.postStyleProps.forEach((Ct,no)=>{let xn=l.get(no);xn||l.set(no,xn=new Set),Ct.forEach((Xu,Yp)=>xn.add(Yp))})});if(H.length){let L=[];H.forEach(q=>{L.push(eH(q.triggerName,q.errors))}),z.forEach(q=>q.destroy()),this.reportError(L)}let oe=new Map,$e=new Map;s.forEach(L=>{let q=L.element;i.has(q)&&($e.set(q,q),this._beforeAnimationBuild(L.player.namespaceId,L.instruction,oe))}),r.forEach(L=>{let q=L.element;this._getPreviousPlayers(q,!1,L.namespaceId,L.triggerName,null).forEach(ye=>{yn(oe,q,[]).push(ye),ye.destroy()})});let tn=g.filter(L=>rM(L,c,l)),En=new Map;nM(En,this.driver,A,l,yi).forEach(L=>{rM(L,c,l)&&tn.push(L)});let mc=new Map;f.forEach((L,q)=>{nM(mc,this.driver,new Set(L),c,xf)}),tn.forEach(L=>{let q=En.get(L),W=mc.get(L);En.set(L,new Map([...q?.entries()??[],...W?.entries()??[]]))});let to=[],zx=[],$x={};s.forEach(L=>{let{element:q,player:W,instruction:ye}=L;if(i.has(q)){if(u.has(q)){W.onDestroy(()=>_i(q,ye.toStyles)),W.disabled=!0,W.overrideTotalTime(ye.totalTime),r.push(W);return}let ft=$x;if($e.size>1){let nn=q,nr=[];for(;nn=nn.parentNode;){let Be=$e.get(nn);if(Be){ft=Be;break}nr.push(nn)}nr.forEach(Be=>$e.set(Be,ft))}let ei=this._buildAnimation(W.namespaceId,ye,oe,o,mc,En);if(W.setRealPlayer(ei),ft===$x)to.push(W);else{let nn=this.playersByElement.get(ft);nn&&nn.length&&(W.parentPlayer=Mr(nn)),r.push(W)}}else jo(q,ye.fromStyles),W.onDestroy(()=>_i(q,ye.toStyles)),zx.push(W),u.has(q)&&r.push(W)}),zx.forEach(L=>{let q=o.get(L.element);if(q&&q.length){let W=Mr(q);L.setRealPlayer(W)}}),r.forEach(L=>{L.parentPlayer?L.syncPlayerEvents(L.parentPlayer):L.destroy()});for(let L=0;L<g.length;L++){let q=g[L],W=q[Gn];if(pa(q,J_),W&&W.hasAnimation)continue;let ye=[];if(a.size){let ei=a.get(q);ei&&ei.length&&ye.push(...ei);let nn=this.driver.query(q,ev,!0);for(let nr=0;nr<nn.length;nr++){let Be=a.get(nn[nr]);Be&&Be.length&&ye.push(...Be)}}let ft=ye.filter(ei=>!ei.destroyed);ft.length?zH(this,q,ft):this.processLeaveNode(q)}return g.length=0,to.forEach(L=>{this.players.push(L),L.onDone(()=>{L.destroy();let q=this.players.indexOf(L);this.players.splice(q,1)}),L.play()}),to}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,n,i,r,o){let s=[];if(n){let a=this.playersByQueriedElement.get(e);a&&(s=a)}else{let a=this.playersByElement.get(e);if(a){let c=!o||o==Il;a.forEach(l=>{l.queued||!c&&l.triggerName!=r||s.push(l)})}}return(i||r)&&(s=s.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),s}_beforeAnimationBuild(e,n,i){let r=n.triggerName,o=n.element,s=n.isRemovalTransition?void 0:e,a=n.isRemovalTransition?void 0:r;for(let c of n.timelines){let l=c.element,u=l!==o,d=yn(i,l,[]);this._getPreviousPlayers(l,u,s,a,n.toState).forEach(f=>{let m=f.getRealPlayer();m.beforeDestroy&&m.beforeDestroy(),f.destroy(),d.push(f)})}jo(o,n.fromStyles)}_buildAnimation(e,n,i,r,o,s){let a=n.triggerName,c=n.element,l=[],u=new Set,d=new Set,h=n.timelines.map(m=>{let p=m.element;u.add(p);let g=p[Gn];if(g&&g.removedBeforeQueried)return new Ar(m.duration,m.delay);let w=p!==c,A=$H((i.get(p)||LH).map(oe=>oe.getRealPlayer())).filter(oe=>{let $e=oe;return $e.element?$e.element===p:!1}),C=o.get(p),O=s.get(p),z=oM(this._normalizer,m.keyframes,C,O),H=this._buildPlayer(m,z,A);if(m.subTimeline&&r&&d.add(p),w){let oe=new Sl(e,a,p);oe.setRealPlayer(H),l.push(oe)}return H});l.forEach(m=>{yn(this.playersByQueriedElement,m.element,[]).push(m),m.onDone(()=>jH(this.playersByQueriedElement,m.element,m))}),u.forEach(m=>Mn(m,KA));let f=Mr(h);return f.onDestroy(()=>{u.forEach(m=>pa(m,KA)),_i(c,n.toStyles)}),d.forEach(m=>{yn(r,m,[]).push(f)}),f}_buildPlayer(e,n,i){return n.length>0?this.driver.animate(e.element,n,e.duration,e.delay,e.easing,i):new Ar(e.duration,e.delay)}},Sl=class{constructor(e,n,i){this.namespaceId=e,this.triggerName=n,this.element=i,this._player=new Ar,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((n,i)=>{n.forEach(r=>mv(e,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let n=this._player;n.triggerCallback&&e.onStart(()=>n.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,n){yn(this._queuedCallbacks,e,[]).push(n)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let n=this._player;n.triggerCallback&&n.triggerCallback(e)}};function jH(t,e,n){let i=t.get(e);if(i){if(i.length){let r=i.indexOf(n);i.splice(r,1)}i.length==0&&t.delete(e)}return i}function BH(t){return t??null}function Tf(t){return t&&t.nodeType===1}function UH(t){return t=="start"||t=="done"}function tM(t,e){let n=t.style.display;return t.style.display=e??"none",n}function nM(t,e,n,i,r){let o=[];n.forEach(c=>o.push(tM(c)));let s=[];i.forEach((c,l)=>{let u=new Map;c.forEach(d=>{let h=e.computeStyle(l,d,r);u.set(d,h),(!h||h.length==0)&&(l[Gn]=VH,s.push(l))}),t.set(l,u)});let a=0;return n.forEach(c=>tM(c,o[a++])),s}function iM(t,e){let n=new Map;if(t.forEach(a=>n.set(a,[])),e.length==0)return n;let i=1,r=new Set(e),o=new Map;function s(a){if(!a)return i;let c=o.get(a);if(c)return c;let l=a.parentNode;return n.has(l)?c=l:r.has(l)?c=i:c=s(l),o.set(a,c),c}return e.forEach(a=>{let c=s(a);c!==i&&n.get(c).push(a)}),n}function Mn(t,e){t.classList?.add(e)}function pa(t,e){t.classList?.remove(e)}function zH(t,e,n){Mr(n).onDone(()=>t.processLeaveNode(e))}function $H(t){let e=[];return bM(t,e),e}function bM(t,e){for(let n=0;n<t.length;n++){let i=t[n];i instanceof El?bM(i.players,e):e.push(i)}}function HH(t,e){let n=Object.keys(t),i=Object.keys(e);if(n.length!=i.length)return!1;for(let r=0;r<n.length;r++){let o=n[r];if(!e.hasOwnProperty(o)||t[o]!==e[o])return!1}return!0}function rM(t,e,n){let i=n.get(t);if(!i)return!1;let r=e.get(t);return r?i.forEach(o=>r.add(o)):e.set(t,i),n.delete(t),!0}var ba=class{constructor(e,n,i){this._driver=n,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,o)=>{},this._transitionEngine=new hv(e.body,n,i),this._timelineEngine=new uv(e.body,n,i),this._transitionEngine.onRemovalComplete=(r,o)=>this.onRemovalComplete(r,o)}registerTrigger(e,n,i,r,o){let s=e+"-"+r,a=this._triggerCache[s];if(!a){let c=[],l=[],u=mM(this._driver,o,c,l);if(c.length)throw $4(r,c);l.length&&void 0,a=MH(r,u,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(n,r,a)}register(e,n){this._transitionEngine.register(e,n)}destroy(e,n){this._transitionEngine.destroy(e,n)}onInsert(e,n,i,r){this._transitionEngine.insertNode(e,n,i,r)}onRemove(e,n,i){this._transitionEngine.removeNode(e,n,i)}disableAnimations(e,n){this._transitionEngine.markElementAsDisabled(e,n)}process(e,n,i,r){if(i.charAt(0)=="@"){let[o,s]=GA(i),a=r;this._timelineEngine.command(o,n,s,a)}else this._transitionEngine.trigger(e,n,i,r)}listen(e,n,i,r,o){if(i.charAt(0)=="@"){let[s,a]=GA(i);return this._timelineEngine.listen(s,n,a,o)}return this._transitionEngine.listen(e,n,i,r,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function qH(t,e){let n=null,i=null;return Array.isArray(e)&&e.length?(n=X_(e[0]),e.length>1&&(i=X_(e[e.length-1]))):e instanceof Map&&(n=X_(e)),n||i?new GH(t,n,i):null}var GH=(()=>{let e=class e{constructor(i,r,o){this._element=i,this._startStyles=r,this._endStyles=o,this._state=0;let s=e.initialStylesByElement.get(i);s||e.initialStylesByElement.set(i,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&_i(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(_i(this._element,this._initialStyles),this._endStyles&&(_i(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(e.initialStylesByElement.delete(this._element),this._startStyles&&(jo(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(jo(this._element,this._endStyles),this._endStyles=null),_i(this._element,this._initialStyles),this._state=3)}};e.initialStylesByElement=new WeakMap;let t=e;return t})();function X_(t){let e=null;return t.forEach((n,i)=>{WH(i)&&(e=e||new Map,e.set(i,n))}),e}function WH(t){return t==="display"||t==="position"}var Lf=class{constructor(e,n,i,r){this.element=e,this.keyframes=n,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let n=()=>this._onFinish();this.domPlayer.addEventListener("finish",n),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",n)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let n=[];return e.forEach(i=>{n.push(Object.fromEntries(i))}),n}_triggerWebAnimation(e,n,i){return e.animate(this._convertKeyframesToObject(n),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{r!=="offset"&&e.set(r,this._finished?i:hM(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){let n=e==="start"?this._onStartFns:this._onDoneFns;n.forEach(i=>i()),n.length=0}},Vf=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,n){return!1}containsElement(e,n){return sM(e,n)}getParentElement(e){return gv(e)}query(e,n,i){return aM(e,n,i)}computeStyle(e,n,i){return window.getComputedStyle(e)[n]}animate(e,n,i,r,o,s=[]){let a=r==0?"both":"forwards",c={duration:i,delay:r,fill:a};o&&(c.easing=o);let l=new Map,u=s.filter(f=>f instanceof Lf);dH(i,r)&&u.forEach(f=>{f.currentSnapshot.forEach((m,p)=>l.set(p,m))});let d=cH(n).map(f=>ga(f));d=hH(e,d,l);let h=qH(e,d);return new Lf(e,d,c,h)}};var Sf="@",yM="@.disabled",jf=class{constructor(e,n,i,r){this.namespaceId=e,this.delegate=n,this.engine=i,this._onDestroy=r,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,n){return this.delegate.createElement(e,n)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,n){this.delegate.appendChild(e,n),this.engine.onInsert(this.namespaceId,n,e,!1)}insertBefore(e,n,i,r=!0){this.delegate.insertBefore(e,n,i),this.engine.onInsert(this.namespaceId,n,e,r)}removeChild(e,n,i){this.engine.onRemove(this.namespaceId,n,this.delegate)}selectRootElement(e,n){return this.delegate.selectRootElement(e,n)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,n,i,r){this.delegate.setAttribute(e,n,i,r)}removeAttribute(e,n,i){this.delegate.removeAttribute(e,n,i)}addClass(e,n){this.delegate.addClass(e,n)}removeClass(e,n){this.delegate.removeClass(e,n)}setStyle(e,n,i,r){this.delegate.setStyle(e,n,i,r)}removeStyle(e,n,i){this.delegate.removeStyle(e,n,i)}setProperty(e,n,i){n.charAt(0)==Sf&&n==yM?this.disableAnimations(e,!!i):this.delegate.setProperty(e,n,i)}setValue(e,n){this.delegate.setValue(e,n)}listen(e,n,i){return this.delegate.listen(e,n,i)}disableAnimations(e,n){this.engine.disableAnimations(e,n)}},fv=class extends jf{constructor(e,n,i,r,o){super(n,i,r,o),this.factory=e,this.namespaceId=n}setProperty(e,n,i){n.charAt(0)==Sf?n.charAt(1)=="."&&n==yM?(i=i===void 0?!0:!!i,this.disableAnimations(e,i)):this.engine.process(this.namespaceId,e,n.slice(1),i):this.delegate.setProperty(e,n,i)}listen(e,n,i){if(n.charAt(0)==Sf){let r=KH(e),o=n.slice(1),s="";return o.charAt(0)!=Sf&&([o,s]=QH(o)),this.engine.listen(this.namespaceId,r,o,s,a=>{let c=a._data||-1;this.factory.scheduleListenerCallback(c,i,a)})}return this.delegate.listen(e,n,i)}};function KH(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}function QH(t){let e=t.indexOf("."),n=t.substring(0,e),i=t.slice(e+1);return[n,i]}var Bf=class{constructor(e,n,i){this.delegate=e,this.engine=n,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,n.onRemovalComplete=(r,o)=>{let s=o?.parentNode(r);s&&o.removeChild(s,r)}}createRenderer(e,n){let i="",r=this.delegate.createRenderer(e,n);if(!e||!n?.data?.animation){let l=this._rendererCache,u=l.get(r);if(!u){let d=()=>l.delete(r);u=new jf(i,r,this.engine,d),l.set(r,u)}return u}let o=n.id,s=n.id+"-"+this._currentId;this._currentId++,this.engine.register(s,e);let a=l=>{Array.isArray(l)?l.forEach(a):this.engine.registerTrigger(o,s,e,l.name,l)};return n.data.animation.forEach(a),new fv(this,s,r,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,n,i){if(e>=0&&e<this._microtaskId){this._zone.run(()=>n(i));return}let r=this._animationCallbacksBuffer;r.length==0&&queueMicrotask(()=>{this._zone.run(()=>{r.forEach(o=>{let[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),r.push([n,i])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}};var ZH=(()=>{let e=class e extends ba{constructor(i,r,o,s){super(i,r,o)}ngOnDestroy(){this.flush()}};e.\u0275fac=function(r){return new(r||e)(v(he),v(Al),v(Bo),v(Hn))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})();function XH(){return new kf}function JH(t,e,n){return new Bf(t,e,n)}var vM=[{provide:Bo,useFactory:XH},{provide:ba,useClass:ZH},{provide:vo,useFactory:JH,deps:[Wh,ba,U]}],_M=[{provide:Al,useFactory:()=>new Vf},{provide:Qt,useValue:"BrowserAnimations"},...vM],e5=[{provide:Al,useClass:bv},{provide:Qt,useValue:"NoopAnimations"},...vM],wM=(()=>{let e=class e{static withConfig(i){return{ngModule:e,providers:i.disableAnimations?e5:_M}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=te({type:e}),e.\u0275inj=ee({providers:_M,imports:[Qh]});let t=e;return t})();function n5(){return!0}var i5=new M("mat-sanity-checks",{providedIn:"root",factory:n5}),Xt=(()=>{let e=class e{constructor(i,r,o){this._sanityChecks=r,this._document=o,this._hasDoneGlobalChecks=!1,i._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(i){return RA()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[i]}};e.\u0275fac=function(r){return new(r||e)(v(q_),v(i5,8),v(he))},e.\u0275mod=te({type:e}),e.\u0275inj=ee({imports:[G_,G_]});let t=e;return t})();function Dv(t){return class extends t{get disabled(){return this._disabled}set disabled(e){this._disabled=An(e)}constructor(...e){super(...e),this._disabled=!1}}}function zf(t,e){return class extends t{get color(){return this._color}set color(n){let i=n||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}constructor(...n){super(...n),this.defaultColor=e,this.color=e}}}function MM(t){return class extends t{get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=An(e)}constructor(...e){super(...e),this._disableRipple=!1}}}var Ev=class{constructor(e,n,i,r=!1){this._renderer=e,this.element=n,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}},EM=Tr({passive:!0,capture:!0}),xv=class{constructor(){this._events=new Map,this._delegateEventHandler=e=>{let n=Sr(e);n&&this._events.get(e.type)?.forEach((i,r)=>{(r===n||r.contains(n))&&i.forEach(o=>o.handleEvent(e))})}}addHandler(e,n,i,r){let o=this._events.get(n);if(o){let s=o.get(i);s?s.add(r):o.set(i,new Set([r]))}else this._events.set(n,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(n,this._delegateEventHandler,EM)})}removeHandler(e,n,i){let r=this._events.get(e);if(!r)return;let o=r.get(n);o&&(o.delete(i),o.size===0&&r.delete(n),r.size===0&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,EM)))}},xM={enterDuration:225,exitDuration:150},r5=800,IM=Tr({passive:!0,capture:!0}),DM=["mousedown","touchstart"],CM=["mouseup","mouseleave","touchend","touchcancel"],Rl=class Rl{constructor(e,n,i,r){this._target=e,this._ngZone=n,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=$i(i))}fadeInRipple(e,n,i={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o=T(T({},xM),i.animation);i.centered&&(e=r.left+r.width/2,n=r.top+r.height/2);let s=i.radius||o5(e,n,r),a=e-r.left,c=n-r.top,l=o.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=`${a-s}px`,u.style.top=`${c-s}px`,u.style.height=`${s*2}px`,u.style.width=`${s*2}px`,i.color!=null&&(u.style.backgroundColor=i.color),u.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(u);let d=window.getComputedStyle(u),h=d.transitionProperty,f=d.transitionDuration,m=h==="none"||f==="0s"||f==="0s, 0s"||r.width===0&&r.height===0,p=new Ev(this,u,i,m);u.style.transform="scale3d(1, 1, 1)",p.state=0,i.persistent||(this._mostRecentTransientRipple=p);let g=null;return!m&&(l||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let w=()=>this._finishRippleTransition(p),A=()=>this._destroyRipple(p);u.addEventListener("transitionend",w),u.addEventListener("transitioncancel",A),g={onTransitionEnd:w,onTransitionCancel:A}}),this._activeRipples.set(p,g),(m||!l)&&this._finishRippleTransition(p),p}fadeOutRipple(e){if(e.state===2||e.state===3)return;let n=e.element,i=T(T({},xM),e.config.animation);n.style.transitionDuration=`${i.exitDuration}ms`,n.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){let n=$i(e);!this._platform.isBrowser||!n||n===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=n,DM.forEach(i=>{Rl._eventManager.addHandler(this._ngZone,i,n,this)}))}handleEvent(e){e.type==="mousedown"?this._onMousedown(e):e.type==="touchstart"?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{CM.forEach(n=>{this._triggerElement.addEventListener(n,this,IM)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===0?this._startFadeOutTransition(e):e.state===2&&this._destroyRipple(e)}_startFadeOutTransition(e){let n=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=1,!i&&(!n||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){let n=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,n!==null&&(e.element.removeEventListener("transitionend",n.onTransitionEnd),e.element.removeEventListener("transitioncancel",n.onTransitionCancel)),e.element.remove()}_onMousedown(e){let n=$_(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+r5;!this._target.rippleDisabled&&!n&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!H_(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let n=e.changedTouches;if(n)for(let i=0;i<n.length;i++)this.fadeInRipple(n[i].clientX,n[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{let n=e.state===1||e.config.terminateOnPointerUp&&e.state===0;!e.config.persistent&&n&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let e=this._triggerElement;e&&(DM.forEach(n=>Rl._eventManager.removeHandler(n,e,this)),this._pointerUpEventsRegistered&&CM.forEach(n=>e.removeEventListener(n,this,IM)))}};Rl._eventManager=new xv;var Iv=Rl;function o5(t,e,n){let i=Math.max(Math.abs(t-n.left),Math.abs(t-n.right)),r=Math.max(Math.abs(e-n.top),Math.abs(e-n.bottom));return Math.sqrt(i*i+r*r)}var Cv=new M("mat-ripple-global-options"),$f=(()=>{let e=class e{get disabled(){return this._disabled}set disabled(i){i&&this.fadeOutAllNonPersistent(),this._disabled=i,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(i){this._trigger=i,this._setupTriggerEventsIfEnabled()}constructor(i,r,o,s,a){this._elementRef=i,this._animationMode=a,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new Iv(this,r,i,o)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:T(T(T({},this._globalOptions.animation),this._animationMode==="NoopAnimations"?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(i,r=0,o){return typeof i=="number"?this._rippleRenderer.fadeInRipple(i,r,T(T({},this.rippleConfig),o)):this._rippleRenderer.fadeInRipple(0,0,T(T({},this.rippleConfig),i))}};e.\u0275fac=function(r){return new(r||e)(S(de),S(U),S(dt),S(Cv,8),S(Qt,8))},e.\u0275dir=_e({type:e,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(r,o){r&2&&qe("mat-ripple-unbounded",o.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]});let t=e;return t})(),Hf=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=te({type:e}),e.\u0275inj=ee({imports:[Xt,Xt]});let t=e;return t})();var TM={capture:!0},SM=["focus","click","mouseenter","touchstart"],vv="mat-ripple-loader-uninitialized",wv="mat-ripple-loader-class-name",AM="mat-ripple-loader-centered",Uf="mat-ripple-loader-disabled",RM=(()=>{let e=class e{constructor(){this._document=I(he,{optional:!0}),this._animationMode=I(Qt,{optional:!0}),this._globalRippleOptions=I(Cv,{optional:!0}),this._platform=I(dt),this._ngZone=I(U),this._hosts=new Map,this._onInteraction=i=>{if(!(i.target instanceof HTMLElement))return;let o=i.target.closest(`[${vv}]`);o&&this._createRipple(o)},this._ngZone.runOutsideAngular(()=>{for(let i of SM)this._document?.addEventListener(i,this._onInteraction,TM)})}ngOnDestroy(){let i=this._hosts.keys();for(let r of i)this.destroyRipple(r);for(let r of SM)this._document?.removeEventListener(r,this._onInteraction,TM)}configureRipple(i,r){i.setAttribute(vv,""),(r.className||!i.hasAttribute(wv))&&i.setAttribute(wv,r.className||""),r.centered&&i.setAttribute(AM,""),r.disabled&&i.setAttribute(Uf,"")}getRipple(i){return this._hosts.get(i)||this._createRipple(i)}setDisabled(i,r){let o=this._hosts.get(i);if(o){o.disabled=r;return}r?i.setAttribute(Uf,""):i.removeAttribute(Uf)}_createRipple(i){if(!this._document)return;let r=this._hosts.get(i);if(r)return r;i.querySelector(".mat-ripple")?.remove();let o=this._document.createElement("span");o.classList.add("mat-ripple",i.getAttribute(wv)),i.append(o);let s=new $f(new de(o),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return s._isInitialized=!0,s.trigger=i,s.centered=i.hasAttribute(AM),s.disabled=i.hasAttribute(Uf),this.attachRipple(i,s),s}attachRipple(i,r){i.removeAttribute(vv),this._hosts.set(i,r)}destroyRipple(i){let r=this._hosts.get(i);r&&(r.ngOnDestroy(),this._hosts.delete(i))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var a5=["*",[["mat-toolbar-row"]]],c5=["*","mat-toolbar-row"],l5=zf(class{constructor(t){this._elementRef=t}}),u5=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=_e({type:e,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]});let t=e;return t})(),kM=(()=>{let e=class e extends l5{constructor(i,r,o){super(i),this._platform=r,this._document=o}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){this._toolbarRows.length}};e.\u0275fac=function(r){return new(r||e)(S(de),S(dt),S(he))},e.\u0275cmp=tt({type:e,selectors:[["mat-toolbar"]],contentQueries:function(r,o,s){if(r&1&&Bi(s,u5,5),r&2){let a;rt(a=ot())&&(o._toolbarRows=a)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(r,o){r&2&&qe("mat-toolbar-multiple-rows",o._toolbarRows.length>0)("mat-toolbar-single-row",o._toolbarRows.length===0)},inputs:{color:"color"},exportAs:["matToolbar"],features:[Ye],ngContentSelectors:c5,decls:2,vars:0,template:function(r,o){r&1&&(mi(a5),hn(0),hn(1,1))},styles:[".mat-toolbar{background:var(--mat-toolbar-container-background-color);color:var(--mat-toolbar-container-text-color)}.mat-toolbar,.mat-toolbar h1,.mat-toolbar h2,.mat-toolbar h3,.mat-toolbar h4,.mat-toolbar h5,.mat-toolbar h6{font-family:var(--mat-toolbar-title-text-font);font-size:var(--mat-toolbar-title-text-size);line-height:var(--mat-toolbar-title-text-line-height);font-weight:var(--mat-toolbar-title-text-weight);letter-spacing:var(--mat-toolbar-title-text-tracking);margin:0}.cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar .mat-form-field-underline,.mat-toolbar .mat-form-field-ripple,.mat-toolbar .mat-focused .mat-form-field-ripple{background-color:currentColor}.mat-toolbar .mat-form-field-label,.mat-toolbar .mat-focused .mat-form-field-label,.mat-toolbar .mat-select-value,.mat-toolbar .mat-select-arrow,.mat-toolbar .mat-form-field.mat-focused .mat-select-arrow{color:inherit}.mat-toolbar .mat-input-element{caret-color:currentColor}.mat-toolbar .mat-mdc-button-base.mat-mdc-button-base.mat-unthemed{--mdc-text-button-label-text-color: inherit;--mdc-outlined-button-label-text-color: inherit}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap;height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-row,.mat-toolbar-single-row{height:var(--mat-toolbar-mobile-height)}}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%;min-height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:var(--mat-toolbar-mobile-height)}}"],encapsulation:2,changeDetection:0});let t=e;return t})();var PM=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=te({type:e}),e.\u0275inj=ee({imports:[Xt,Xt]});let t=e;return t})();var UM=(()=>{let e=class e{constructor(i,r){this._renderer=i,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(i,r){this._renderer.setProperty(this._elementRef.nativeElement,i,r)}registerOnTouched(i){this.onTouched=i}registerOnChange(i){this.onChange=i}setDisabledState(i){this.setProperty("disabled",i)}};e.\u0275fac=function(r){return new(r||e)(S(Co),S(de))},e.\u0275dir=_e({type:e});let t=e;return t})(),h5=(()=>{let e=class e extends UM{};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=Zs(e)))(o||e)}})(),e.\u0275dir=_e({type:e,features:[Ye]});let t=e;return t})(),zM=new M("NgValueAccessor");var f5={provide:zM,useExisting:xo(()=>Rr),multi:!0};function m5(){let t=pi()?pi().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var p5=new M("CompositionEventMode"),Rr=(()=>{let e=class e extends UM{constructor(i,r,o){super(i,r),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!m5())}writeValue(i){let r=i??"";this.setProperty("value",r)}_handleInput(i){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(i)}_compositionStart(){this._composing=!0}_compositionEnd(i){this._composing=!1,this._compositionMode&&this.onChange(i)}};e.\u0275fac=function(r){return new(r||e)(S(Co),S(de),S(p5,8))},e.\u0275dir=_e({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,o){r&1&&Ve("input",function(a){return o._handleInput(a.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(a){return o._compositionEnd(a.target.value)})},features:[mn([f5]),Ye]});let t=e;return t})();var g5=new M("NgValidators"),b5=new M("NgAsyncValidators");function $M(t){return t!=null}function HM(t){return To(t)?fe(t):t}function qM(t){let e={};return t.forEach(n=>{e=n!=null?T(T({},e),n):e}),Object.keys(e).length===0?null:e}function GM(t,e){return e.map(n=>n(t))}function y5(t){return!t.validate}function WM(t){return t.map(e=>y5(e)?e:n=>e.validate(n))}function _5(t){if(!t)return null;let e=t.filter($M);return e.length==0?null:function(n){return qM(GM(n,e))}}function KM(t){return t!=null?_5(WM(t)):null}function v5(t){if(!t)return null;let e=t.filter($M);return e.length==0?null:function(n){let i=GM(n,e).map(HM);return pg(i).pipe(B(qM))}}function QM(t){return t!=null?v5(WM(t)):null}function NM(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function w5(t){return t._rawValidators}function E5(t){return t._rawAsyncValidators}function Tv(t){return t?Array.isArray(t)?t:[t]:[]}function Gf(t,e){return Array.isArray(t)?t.includes(e):t===e}function OM(t,e){let n=Tv(e);return Tv(t).forEach(r=>{Gf(n,r)||n.push(r)}),n}function FM(t,e){return Tv(e).filter(n=>!Gf(t,n))}var Wf=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=KM(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=QM(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},Sv=class extends Wf{get formDirective(){return null}get path(){return null}},Nl=class extends Wf{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Av=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},x5={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Ete=we(T({},x5),{"[class.ng-submitted]":"isSubmitted"}),_a=(()=>{let e=class e extends Av{constructor(i){super(i)}};e.\u0275fac=function(r){return new(r||e)(S(Nl,2))},e.\u0275dir=_e({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,o){r&2&&qe("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[Ye]});let t=e;return t})();var kl="VALID",qf="INVALID",ya="PENDING",Pl="DISABLED";function I5(t){return(Kf(t)?t.validators:t)||null}function D5(t){return Array.isArray(t)?KM(t):t||null}function C5(t,e){return(Kf(e)?e.asyncValidators:t)||null}function T5(t){return Array.isArray(t)?QM(t):t||null}function Kf(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}var Mv=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===kl}get invalid(){return this.status===qf}get pending(){return this.status==ya}get disabled(){return this.status===Pl}get enabled(){return this.status!==Pl}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(OM(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(OM(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(FM(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(FM(e,this._rawAsyncValidators))}hasValidator(e){return Gf(this._rawValidators,e)}hasAsyncValidator(e){return Gf(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=ya,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Pl,this.errors=null,this._forEachChild(i=>{i.disable(we(T({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(we(T({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=kl,this._forEachChild(i=>{i.enable(we(T({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(we(T({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===kl||this.status===ya)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Pl:kl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=ya,this._hasOwnPendingAsyncValidator=!0;let n=HM(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((i,r)=>i&&i._find(r),this)}getError(e,n){let i=n?this.get(n):this;return i&&i.errors?i.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new se,this.statusChanges=new se}_calculateStatus(){return this._allControlsDisabled()?Pl:this.errors?qf:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ya)?ya:this._anyControlsHaveStatus(qf)?qf:kl}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Kf(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=D5(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=T5(this._rawAsyncValidators)}};var YM=new M("CallSetDisabledState",{providedIn:"root",factory:()=>Rv}),Rv="always";function S5(t,e){return[...e.path,t]}function A5(t,e,n=Rv){R5(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),k5(t,e),N5(t,e),P5(t,e),M5(t,e)}function LM(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function M5(t,e){if(e.valueAccessor.setDisabledState){let n=i=>{e.valueAccessor.setDisabledState(i)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function R5(t,e){let n=w5(t);e.validator!==null?t.setValidators(NM(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let i=E5(t);e.asyncValidator!==null?t.setAsyncValidators(NM(i,e.asyncValidator)):typeof i=="function"&&t.setAsyncValidators([i]);let r=()=>t.updateValueAndValidity();LM(e._rawValidators,r),LM(e._rawAsyncValidators,r)}function k5(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&ZM(t,e)})}function P5(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&ZM(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function ZM(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function N5(t,e){let n=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function O5(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function F5(t){return Object.getPrototypeOf(t.constructor)===h5}function L5(t,e){if(!e)return null;Array.isArray(e);let n,i,r;return e.forEach(o=>{o.constructor===Rr?n=o:F5(o)?i=o:r=o}),r||i||n||null}function VM(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function jM(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var V5=class extends Mv{constructor(e=null,n,i){super(I5(n),C5(i,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Kf(n)&&(n.nonNullable||n.initialValueIsDefault)&&(jM(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){VM(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){VM(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){jM(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var j5={provide:Nl,useExisting:xo(()=>Uo)},BM=(()=>Promise.resolve())(),Uo=(()=>{let e=class e extends Nl{constructor(i,r,o,s,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this.control=new V5,this._registered=!1,this.name="",this.update=new se,this._parent=i,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=L5(this,s)}ngOnChanges(i){if(this._checkForErrors(),!this._registered||"name"in i){if(this._registered&&(this._checkName(),this.formDirective)){let r=i.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in i&&this._updateDisabled(i),O5(i,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){A5(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(i){BM.then(()=>{this.control.setValue(i,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(i){let r=i.isDisabled.currentValue,o=r!==0&&qn(r);BM.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(i){return this._parent?S5(i,this._parent):[i]}};e.\u0275fac=function(r){return new(r||e)(S(Sv,9),S(g5,10),S(b5,10),S(zM,10),S(Yt,8),S(YM,8))},e.\u0275dir=_e({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[mn([j5]),Ye,fi]});let t=e;return t})();var B5=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=te({type:e}),e.\u0275inj=ee({});let t=e;return t})();var U5=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=te({type:e}),e.\u0275inj=ee({imports:[B5]});let t=e;return t})();var XM=(()=>{let e=class e{static withConfig(i){return{ngModule:e,providers:[{provide:YM,useValue:i.callSetDisabledState??Rv}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=te({type:e}),e.\u0275inj=ee({imports:[U5]});let t=e;return t})();var Ol=class{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;e!=null&&(this._attachedHost=null,e.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},Pv=class extends Ol{constructor(e,n,i,r,o){super(),this.component=e,this.viewContainerRef=n,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=o}},va=class extends Ol{constructor(e,n,i,r){super(),this.templateRef=e,this.viewContainerRef=n,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,n=this.context){return this.context=n,super.attach(e)}detach(){return this.context=void 0,super.detach()}},Nv=class extends Ol{constructor(e){super(),this.element=e instanceof de?e.nativeElement:e}},Ov=class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){if(e instanceof Pv)return this._attachedPortal=e,this.attachComponentPortal(e);if(e instanceof va)return this._attachedPortal=e,this.attachTemplatePortal(e);if(this.attachDomPortal&&e instanceof Nv)return this._attachedPortal=e,this.attachDomPortal(e)}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var JM=(()=>{let e=class e extends va{constructor(i,r){super(i,r)}};e.\u0275fac=function(r){return new(r||e)(S(Wt),S(Zt))},e.\u0275dir=_e({type:e,selectors:[["","cdkPortal",""]],exportAs:["cdkPortal"],features:[Ye]});let t=e;return t})();var Fl=(()=>{let e=class e extends Ov{constructor(i,r,o){super(),this._componentFactoryResolver=i,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new se,this.attachDomPortal=s=>{this._document;let a=s.element;a.parentNode;let c=this._document.createComment("dom-portal");s.setAttachedHost(this),a.parentNode.insertBefore(c,a),this._getRootNode().appendChild(a),this._attachedPortal=s,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=o}get portal(){return this._attachedPortal}set portal(i){this.hasAttached()&&!i&&!this._isInitialized||(this.hasAttached()&&super.detach(),i&&super.attach(i),this._attachedPortal=i||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(i){i.setAttachedHost(this);let r=i.viewContainerRef!=null?i.viewContainerRef:this._viewContainerRef,s=(i.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(i.component),a=r.createComponent(s,r.length,i.injector||r.injector,i.projectableNodes||void 0);return r!==this._viewContainerRef&&this._getRootNode().appendChild(a.hostView.rootNodes[0]),super.setDisposeFn(()=>a.destroy()),this._attachedPortal=i,this._attachedRef=a,this.attached.emit(a),a}attachTemplatePortal(i){i.setAttachedHost(this);let r=this._viewContainerRef.createEmbeddedView(i.templateRef,i.context,{injector:i.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=i,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){let i=this._viewContainerRef.element.nativeElement;return i.nodeType===i.ELEMENT_NODE?i:i.parentNode}};e.\u0275fac=function(r){return new(r||e)(S(wr),S(Zt),S(he))},e.\u0275dir=_e({type:e,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[Ye]});let t=e;return t})();var eR=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=te({type:e}),e.\u0275inj=ee({});let t=e;return t})();var $5=20,Fv=(()=>{let e=class e{constructor(i,r,o){this._platform=i,this._change=new le,this._changeListener=s=>{this._change.next(s)},this._document=o,r.runOutsideAngular(()=>{if(i.isBrowser){let s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let i=this._getWindow();i.removeEventListener("resize",this._changeListener),i.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let i={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),i}getViewportRect(){let i=this.getViewportScrollPosition(),{width:r,height:o}=this.getViewportSize();return{top:i.top,left:i.left,bottom:i.top+o,right:i.left+r,height:o,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let i=this._document,r=this._getWindow(),o=i.documentElement,s=o.getBoundingClientRect(),a=-s.top||i.body.scrollTop||r.scrollY||o.scrollTop||0,c=-s.left||i.body.scrollLeft||r.scrollX||o.scrollLeft||0;return{top:a,left:c}}change(i=$5){return i>0?this._change.pipe(gg(i)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let i=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:i.innerWidth,height:i.innerHeight}:{width:0,height:0}}};e.\u0275fac=function(r){return new(r||e)(v(dt),v(U),v(he,8))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function W5(t,e){}var K5=t=>({animationDuration:t}),Q5=(t,e)=>({value:t,params:e});function Y5(t,e){t&1&&hn(0)}var iR=["*"],Z5=["tabListContainer"],X5=["tabList"],J5=["tabListInner"],e3=["nextPaginator"],t3=["previousPaginator"],n3=["tabBodyWrapper"],i3=["tabHeader"];function r3(t,e){}function o3(t,e){if(t&1&&di(0,r3,0,0,"ng-template",10),t&2){let n=$n().$implicit;it("cdkPortalOutlet",n.templateLabel)}}function s3(t,e){if(t&1&&fn(0),t&2){let n=$n().$implicit;So(n.textLabel)}}function a3(t,e){if(t&1){let n=Cy();pe(0,"div",4,5),Ve("click",function(){let r=jc(n),o=r.$implicit,s=r.$index,a=$n(),c=Ph(1);return Bc(a._handleClick(o,c,s))})("cdkFocusChange",function(r){let s=jc(n).$index,a=$n();return Bc(a._tabFocusChanged(r,s))}),pt(2,"span",6)(3,"div",7),pe(4,"span",8)(5,"span",9),di(6,o3,1,1,null,10)(7,s3,1,1),De()()()}if(t&2){let n=e.$implicit,i=e.$index,r=Ph(1),o=$n();qe("mdc-tab--active",o.selectedIndex===i),it("id",o._getTabLabelId(i))("ngClass",n.labelClass)("disabled",n.disabled)("fitInkBarToContent",o.fitInkBarToContent),Tn("tabIndex",o._getTabIndex(i))("aria-posinset",i+1)("aria-setsize",o._tabs.length)("aria-controls",o._getTabContentId(i))("aria-selected",o.selectedIndex===i)("aria-label",n.ariaLabel||null)("aria-labelledby",!n.ariaLabel&&n.ariaLabelledby?n.ariaLabelledby:null),nt(3),it("matRippleTrigger",r)("matRippleDisabled",n.disabled||o.disableRipple),nt(3),kh(6,n.templateLabel?6:7)}}function c3(t,e){if(t&1){let n=Cy();pe(0,"mat-tab-body",11),Ve("_onCentered",function(){jc(n);let r=$n();return Bc(r._removeTabBodyWrapperHeight())})("_onCentering",function(r){jc(n);let o=$n();return Bc(o._setTabBodyWrapperHeight(r))}),De()}if(t&2){let n=e.$implicit,i=e.$index,r=$n();qe("mat-mdc-tab-body-active",r.selectedIndex===i),it("id",r._getTabContentId(i))("ngClass",n.bodyClass)("content",n.content)("position",n.position)("origin",n.origin)("animationDuration",r.animationDuration)("preserveContent",r.preserveContent),Tn("tabindex",r.contentTabIndex!=null&&r.selectedIndex===i?r.contentTabIndex:null)("aria-labelledby",r._getTabLabelId(i))("aria-hidden",r.selectedIndex!==i)}}var l3={translateTab:$A("translateTab",[wf("center, void, left-origin-center, right-origin-center",Hi({transform:"none"})),wf("left",Hi({transform:"translate3d(-100%, 0, 0)",minHeight:"1px",visibility:"hidden"})),wf("right",Hi({transform:"translate3d(100%, 0, 0)",minHeight:"1px",visibility:"hidden"})),Ef("* => left, * => right, left => center, right => center",vf("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")),Ef("void => left-origin-center",[Hi({transform:"translate3d(-100%, 0, 0)",visibility:"hidden"}),vf("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")]),Ef("void => right-origin-center",[Hi({transform:"translate3d(100%, 0, 0)",visibility:"hidden"}),vf("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")])])},u3=(()=>{let e=class e extends Fl{constructor(i,r,o,s){super(i,r,s),this._host=o,this._centeringSub=Ee.EMPTY,this._leavingSub=Ee.EMPTY}ngOnInit(){super.ngOnInit(),this._centeringSub=this._host._beforeCentering.pipe(Ht(this._host._isCenterPosition(this._host._position))).subscribe(i=>{i&&!this.hasAttached()&&this.attach(this._host._content)}),this._leavingSub=this._host._afterLeavingCenter.subscribe(()=>{this._host.preserveContent||this.detach()})}ngOnDestroy(){super.ngOnDestroy(),this._centeringSub.unsubscribe(),this._leavingSub.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)(S(wr),S(Zt),S(xo(()=>rR)),S(he))},e.\u0275dir=_e({type:e,selectors:[["","matTabBodyHost",""]],features:[Ye]});let t=e;return t})(),rR=(()=>{let e=class e{set position(i){this._positionIndex=i,this._computePositionAnimationState()}constructor(i,r,o){this._elementRef=i,this._dir=r,this._dirChangeSubscription=Ee.EMPTY,this._translateTabComplete=new le,this._onCentering=new se,this._beforeCentering=new se,this._afterLeavingCenter=new se,this._onCentered=new se(!0),this.animationDuration="500ms",this.preserveContent=!1,r&&(this._dirChangeSubscription=r.change.subscribe(s=>{this._computePositionAnimationState(s),o.markForCheck()})),this._translateTabComplete.pipe(ur((s,a)=>s.fromState===a.fromState&&s.toState===a.toState)).subscribe(s=>{this._isCenterPosition(s.toState)&&this._isCenterPosition(this._position)&&this._onCentered.emit(),this._isCenterPosition(s.fromState)&&!this._isCenterPosition(this._position)&&this._afterLeavingCenter.emit()})}ngOnInit(){this._position=="center"&&this.origin!=null&&(this._position=this._computePositionFromOrigin(this.origin))}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._translateTabComplete.complete()}_onTranslateTabStarted(i){let r=this._isCenterPosition(i.toState);this._beforeCentering.emit(r),r&&this._onCentering.emit(this._elementRef.nativeElement.clientHeight)}_getLayoutDirection(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}_isCenterPosition(i){return i=="center"||i=="left-origin-center"||i=="right-origin-center"}_computePositionAnimationState(i=this._getLayoutDirection()){this._positionIndex<0?this._position=i=="ltr"?"left":"right":this._positionIndex>0?this._position=i=="ltr"?"right":"left":this._position="center"}_computePositionFromOrigin(i){let r=this._getLayoutDirection();return r=="ltr"&&i<=0||r=="rtl"&&i>0?"left-origin-center":"right-origin-center"}};e.\u0275fac=function(r){return new(r||e)(S(de),S(_f,8),S(Yt))},e.\u0275cmp=tt({type:e,selectors:[["mat-tab-body"]],viewQuery:function(r,o){if(r&1&&pn(Fl,5),r&2){let s;rt(s=ot())&&(o._portalHost=s.first)}},hostAttrs:[1,"mat-mdc-tab-body"],inputs:{_content:["content","_content"],origin:"origin",animationDuration:"animationDuration",preserveContent:"preserveContent",position:"position"},outputs:{_onCentering:"_onCentering",_beforeCentering:"_beforeCentering",_afterLeavingCenter:"_afterLeavingCenter",_onCentered:"_onCentered"},decls:3,vars:6,consts:[["cdkScrollable","",1,"mat-mdc-tab-body-content"],["content",""],["matTabBodyHost",""]],template:function(r,o){r&1&&(pe(0,"div",0,1),Ve("@translateTab.start",function(a){return o._onTranslateTabStarted(a)})("@translateTab.done",function(a){return o._translateTabComplete.next(a)}),di(2,W5,0,0,"ng-template",2),De()),r&2&&it("@translateTab",YT(3,Q5,o._position,QT(1,K5,o.animationDuration)))},dependencies:[u3],styles:['.mat-mdc-tab-body{top:0;left:0;right:0;bottom:0;position:absolute;display:block;overflow:hidden;outline:0;flex-basis:100%}.mat-mdc-tab-body.mat-mdc-tab-body-active{position:relative;overflow-x:hidden;overflow-y:auto;z-index:1;flex-grow:1}.mat-mdc-tab-group.mat-mdc-tab-group-dynamic-height .mat-mdc-tab-body.mat-mdc-tab-body-active{overflow-y:hidden}.mat-mdc-tab-body-content{height:100%;overflow:auto}.mat-mdc-tab-group-dynamic-height .mat-mdc-tab-body-content{overflow:hidden}.mat-mdc-tab-body-content[style*="visibility: hidden"]{display:none}'],encapsulation:2,data:{animation:[l3.translateTab]}});let t=e;return t})(),d3=new M("MatTabContent"),h3=(()=>{let e=class e{constructor(i){this.template=i}};e.\u0275fac=function(r){return new(r||e)(S(Wt))},e.\u0275dir=_e({type:e,selectors:[["","matTabContent",""]],features:[mn([{provide:d3,useExisting:e}])]});let t=e;return t})(),f3=new M("MatTabLabel"),oR=new M("MAT_TAB"),m3=(()=>{let e=class e extends JM{constructor(i,r,o){super(i,r),this._closestTab=o}};e.\u0275fac=function(r){return new(r||e)(S(Wt),S(Zt),S(oR,8))},e.\u0275dir=_e({type:e,selectors:[["","mat-tab-label",""],["","matTabLabel",""]],features:[mn([{provide:f3,useExisting:e}]),Ye]});let t=e;return t})(),Lv="mdc-tab-indicator--active",tR="mdc-tab-indicator--no-transition",Vv=class{constructor(e){this._items=e}hide(){this._items.forEach(e=>e.deactivateInkBar())}alignToElement(e){let n=this._items.find(r=>r.elementRef.nativeElement===e),i=this._currentItem;if(n!==i&&(i?.deactivateInkBar(),n)){let r=i?.elementRef.nativeElement.getBoundingClientRect?.();n.activateInkBar(r),this._currentItem=n}}};function p3(t){return class extends t{constructor(...e){super(...e),this._fitToContent=!1}get fitInkBarToContent(){return this._fitToContent}set fitInkBarToContent(e){let n=An(e);this._fitToContent!==n&&(this._fitToContent=n,this._inkBarElement&&this._appendInkBarElement())}activateInkBar(e){let n=this.elementRef.nativeElement;if(!e||!n.getBoundingClientRect||!this._inkBarContentElement){n.classList.add(Lv);return}let i=n.getBoundingClientRect(),r=e.width/i.width,o=e.left-i.left;n.classList.add(tR),this._inkBarContentElement.style.setProperty("transform",`translateX(${o}px) scaleX(${r})`),n.getBoundingClientRect(),n.classList.remove(tR),n.classList.add(Lv),this._inkBarContentElement.style.setProperty("transform","")}deactivateInkBar(){this.elementRef.nativeElement.classList.remove(Lv)}ngOnInit(){this._createInkBarElement()}ngOnDestroy(){this._inkBarElement?.remove(),this._inkBarElement=this._inkBarContentElement=null}_createInkBarElement(){let e=this.elementRef.nativeElement.ownerDocument||document;this._inkBarElement=e.createElement("span"),this._inkBarContentElement=e.createElement("span"),this._inkBarElement.className="mdc-tab-indicator",this._inkBarContentElement.className="mdc-tab-indicator__content mdc-tab-indicator__content--underline",this._inkBarElement.appendChild(this._inkBarContentElement),this._appendInkBarElement()}_appendInkBarElement(){this._inkBarElement;let e=this._fitToContent?this.elementRef.nativeElement.querySelector(".mdc-tab__content"):this.elementRef.nativeElement;e.appendChild(this._inkBarElement)}}}var g3=p3(Dv(class{})),sR=(()=>{let e=class e extends g3{constructor(i){super(),this.elementRef=i}focus(){this.elementRef.nativeElement.focus()}getOffsetLeft(){return this.elementRef.nativeElement.offsetLeft}getOffsetWidth(){return this.elementRef.nativeElement.offsetWidth}};e.\u0275fac=function(r){return new(r||e)(S(de))},e.\u0275dir=_e({type:e,selectors:[["","matTabLabelWrapper",""]],hostVars:3,hostBindings:function(r,o){r&2&&(Tn("aria-disabled",!!o.disabled),qe("mat-mdc-tab-disabled",o.disabled))},inputs:{disabled:"disabled",fitInkBarToContent:"fitInkBarToContent"},features:[Ye]});let t=e;return t})(),b3=Dv(class{}),aR=new M("MAT_TAB_GROUP"),Bv=(()=>{let e=class e extends b3{get templateLabel(){return this._templateLabel}set templateLabel(i){this._setTemplateLabelInput(i)}get content(){return this._contentPortal}constructor(i,r){super(),this._viewContainerRef=i,this._closestTabGroup=r,this._explicitContent=void 0,this.textLabel="",this._contentPortal=null,this._stateChanges=new le,this.position=null,this.origin=null,this.isActive=!1}ngOnChanges(i){(i.hasOwnProperty("textLabel")||i.hasOwnProperty("disabled"))&&this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}ngOnInit(){this._contentPortal=new va(this._explicitContent||this._implicitContent,this._viewContainerRef)}_setTemplateLabelInput(i){i&&i._closestTab===this&&(this._templateLabel=i)}};e.\u0275fac=function(r){return new(r||e)(S(Zt),S(aR,8))},e.\u0275cmp=tt({type:e,selectors:[["mat-tab"]],contentQueries:function(r,o,s){if(r&1&&(Bi(s,m3,5),Bi(s,h3,7,Wt)),r&2){let a;rt(a=ot())&&(o.templateLabel=a.first),rt(a=ot())&&(o._explicitContent=a.first)}},viewQuery:function(r,o){if(r&1&&pn(Wt,7),r&2){let s;rt(s=ot())&&(o._implicitContent=s.first)}},inputs:{disabled:"disabled",textLabel:["label","textLabel"],ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],labelClass:"labelClass",bodyClass:"bodyClass"},exportAs:["matTab"],features:[mn([{provide:oR,useExisting:e}]),Ye,fi],ngContentSelectors:iR,decls:1,vars:0,template:function(r,o){r&1&&(mi(),di(0,Y5,1,0,"ng-template"))},encapsulation:2});let t=e;return t})(),nR=Tr({passive:!0}),y3=650,_3=100,v3=(()=>{let e=class e{get disablePagination(){return this._disablePagination}set disablePagination(i){this._disablePagination=An(i)}get selectedIndex(){return this._selectedIndex}set selectedIndex(i){i=Oo(i),this._selectedIndex!=i&&(this._selectedIndexChanged=!0,this._selectedIndex=i,this._keyManager&&this._keyManager.updateActiveItem(i))}constructor(i,r,o,s,a,c,l){this._elementRef=i,this._changeDetectorRef=r,this._viewportRuler=o,this._dir=s,this._ngZone=a,this._platform=c,this._animationMode=l,this._scrollDistance=0,this._selectedIndexChanged=!1,this._destroyed=new le,this._showPaginationControls=!1,this._disableScrollAfter=!0,this._disableScrollBefore=!0,this._stopScrolling=new le,this._disablePagination=!1,this._selectedIndex=0,this.selectFocusedIndex=new se,this.indexFocused=new se,a.runOutsideAngular(()=>{sr(i.nativeElement,"mouseleave").pipe(qt(this._destroyed)).subscribe(()=>{this._stopInterval()})})}ngAfterViewInit(){sr(this._previousPaginator.nativeElement,"touchstart",nR).pipe(qt(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("before")}),sr(this._nextPaginator.nativeElement,"touchstart",nR).pipe(qt(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("after")})}ngAfterContentInit(){let i=this._dir?this._dir.change:V("ltr"),r=this._viewportRuler.change(150),o=()=>{this.updatePagination(),this._alignInkBarToSelectedTab()};this._keyManager=new bf(this._items).withHorizontalOrientation(this._getLayoutDirection()).withHomeAndEnd().withWrap().skipPredicate(()=>!1),this._keyManager.updateActiveItem(this._selectedIndex),this._ngZone.onStable.pipe($t(1)).subscribe(o),co(i,r,this._items.changes,this._itemsResized()).pipe(qt(this._destroyed)).subscribe(()=>{this._ngZone.run(()=>{Promise.resolve().then(()=>{this._scrollDistance=Math.max(0,Math.min(this._getMaxScrollDistance(),this._scrollDistance)),o()})}),this._keyManager.withHorizontalOrientation(this._getLayoutDirection())}),this._keyManager.change.subscribe(s=>{this.indexFocused.emit(s),this._setTabFocus(s)})}_itemsResized(){return typeof ResizeObserver!="function"?Tt:this._items.changes.pipe(Ht(this._items),Re(i=>new K(r=>this._ngZone.runOutsideAngular(()=>{let o=new ResizeObserver(s=>r.next(s));return i.forEach(s=>o.observe(s.elementRef.nativeElement)),()=>{o.disconnect()}}))),ho(1),Pe(i=>i.some(r=>r.contentRect.width>0&&r.contentRect.height>0)))}ngAfterContentChecked(){this._tabLabelCount!=this._items.length&&(this.updatePagination(),this._tabLabelCount=this._items.length,this._changeDetectorRef.markForCheck()),this._selectedIndexChanged&&(this._scrollToLabel(this._selectedIndex),this._checkScrollingControls(),this._alignInkBarToSelectedTab(),this._selectedIndexChanged=!1,this._changeDetectorRef.markForCheck()),this._scrollDistanceChanged&&(this._updateTabScrollPosition(),this._scrollDistanceChanged=!1,this._changeDetectorRef.markForCheck())}ngOnDestroy(){this._keyManager?.destroy(),this._destroyed.next(),this._destroyed.complete(),this._stopScrolling.complete()}_handleKeydown(i){if(!pf(i))switch(i.keyCode){case 13:case 32:if(this.focusIndex!==this.selectedIndex){let r=this._items.get(this.focusIndex);r&&!r.disabled&&(this.selectFocusedIndex.emit(this.focusIndex),this._itemSelected(i))}break;default:this._keyManager.onKeydown(i)}}_onContentChanges(){let i=this._elementRef.nativeElement.textContent;i!==this._currentTextContent&&(this._currentTextContent=i||"",this._ngZone.run(()=>{this.updatePagination(),this._alignInkBarToSelectedTab(),this._changeDetectorRef.markForCheck()}))}updatePagination(){this._checkPaginationEnabled(),this._checkScrollingControls(),this._updateTabScrollPosition()}get focusIndex(){return this._keyManager?this._keyManager.activeItemIndex:0}set focusIndex(i){!this._isValidIndex(i)||this.focusIndex===i||!this._keyManager||this._keyManager.setActiveItem(i)}_isValidIndex(i){return this._items?!!this._items.toArray()[i]:!0}_setTabFocus(i){if(this._showPaginationControls&&this._scrollToLabel(i),this._items&&this._items.length){this._items.toArray()[i].focus();let r=this._tabListContainer.nativeElement;this._getLayoutDirection()=="ltr"?r.scrollLeft=0:r.scrollLeft=r.scrollWidth-r.offsetWidth}}_getLayoutDirection(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}_updateTabScrollPosition(){if(this.disablePagination)return;let i=this.scrollDistance,r=this._getLayoutDirection()==="ltr"?-i:i;this._tabList.nativeElement.style.transform=`translateX(${Math.round(r)}px)`,(this._platform.TRIDENT||this._platform.EDGE)&&(this._tabListContainer.nativeElement.scrollLeft=0)}get scrollDistance(){return this._scrollDistance}set scrollDistance(i){this._scrollTo(i)}_scrollHeader(i){let r=this._tabListContainer.nativeElement.offsetWidth,o=(i=="before"?-1:1)*r/3;return this._scrollTo(this._scrollDistance+o)}_handlePaginatorClick(i){this._stopInterval(),this._scrollHeader(i)}_scrollToLabel(i){if(this.disablePagination)return;let r=this._items?this._items.toArray()[i]:null;if(!r)return;let o=this._tabListContainer.nativeElement.offsetWidth,{offsetLeft:s,offsetWidth:a}=r.elementRef.nativeElement,c,l;this._getLayoutDirection()=="ltr"?(c=s,l=c+a):(l=this._tabListInner.nativeElement.offsetWidth-s,c=l-a);let u=this.scrollDistance,d=this.scrollDistance+o;c<u?this.scrollDistance-=u-c:l>d&&(this.scrollDistance+=Math.min(l-d,c-u))}_checkPaginationEnabled(){if(this.disablePagination)this._showPaginationControls=!1;else{let i=this._tabListInner.nativeElement.scrollWidth>this._elementRef.nativeElement.offsetWidth;i||(this.scrollDistance=0),i!==this._showPaginationControls&&this._changeDetectorRef.markForCheck(),this._showPaginationControls=i}}_checkScrollingControls(){this.disablePagination?this._disableScrollAfter=this._disableScrollBefore=!0:(this._disableScrollBefore=this.scrollDistance==0,this._disableScrollAfter=this.scrollDistance==this._getMaxScrollDistance(),this._changeDetectorRef.markForCheck())}_getMaxScrollDistance(){let i=this._tabListInner.nativeElement.scrollWidth,r=this._tabListContainer.nativeElement.offsetWidth;return i-r||0}_alignInkBarToSelectedTab(){let i=this._items&&this._items.length?this._items.toArray()[this.selectedIndex]:null,r=i?i.elementRef.nativeElement:null;r?this._inkBar.alignToElement(r):this._inkBar.hide()}_stopInterval(){this._stopScrolling.next()}_handlePaginatorPress(i,r){r&&r.button!=null&&r.button!==0||(this._stopInterval(),_c(y3,_3).pipe(qt(co(this._stopScrolling,this._destroyed))).subscribe(()=>{let{maxScrollDistance:o,distance:s}=this._scrollHeader(i);(s===0||s>=o)&&this._stopInterval()}))}_scrollTo(i){if(this.disablePagination)return{maxScrollDistance:0,distance:0};let r=this._getMaxScrollDistance();return this._scrollDistance=Math.max(0,Math.min(r,i)),this._scrollDistanceChanged=!0,this._checkScrollingControls(),{maxScrollDistance:r,distance:this._scrollDistance}}};e.\u0275fac=function(r){return new(r||e)(S(de),S(Yt),S(Fv),S(_f,8),S(U),S(dt),S(Qt,8))},e.\u0275dir=_e({type:e,inputs:{disablePagination:"disablePagination"}});let t=e;return t})(),w3=(()=>{let e=class e extends v3{get disableRipple(){return this._disableRipple}set disableRipple(i){this._disableRipple=An(i)}constructor(i,r,o,s,a,c,l){super(i,r,o,s,a,c,l),this._disableRipple=!1}ngAfterContentInit(){this._inkBar=new Vv(this._items),super.ngAfterContentInit()}_itemSelected(i){i.preventDefault()}};e.\u0275fac=function(r){return new(r||e)(S(de),S(Yt),S(Fv),S(_f,8),S(U),S(dt),S(Qt,8))},e.\u0275cmp=tt({type:e,selectors:[["mat-tab-header"]],contentQueries:function(r,o,s){if(r&1&&Bi(s,sR,4),r&2){let a;rt(a=ot())&&(o._items=a)}},viewQuery:function(r,o){if(r&1&&(pn(Z5,7),pn(X5,7),pn(J5,7),pn(e3,5),pn(t3,5)),r&2){let s;rt(s=ot())&&(o._tabListContainer=s.first),rt(s=ot())&&(o._tabList=s.first),rt(s=ot())&&(o._tabListInner=s.first),rt(s=ot())&&(o._nextPaginator=s.first),rt(s=ot())&&(o._previousPaginator=s.first)}},hostAttrs:[1,"mat-mdc-tab-header"],hostVars:4,hostBindings:function(r,o){r&2&&qe("mat-mdc-tab-header-pagination-controls-enabled",o._showPaginationControls)("mat-mdc-tab-header-rtl",o._getLayoutDirection()=="rtl")},inputs:{selectedIndex:"selectedIndex",disableRipple:"disableRipple"},outputs:{selectFocusedIndex:"selectFocusedIndex",indexFocused:"indexFocused"},features:[Ye],ngContentSelectors:iR,decls:13,vars:10,consts:[["aria-hidden","true","type","button","mat-ripple","","tabindex","-1",1,"mat-mdc-tab-header-pagination","mat-mdc-tab-header-pagination-before",3,"matRippleDisabled","disabled","click","mousedown","touchend"],["previousPaginator",""],[1,"mat-mdc-tab-header-pagination-chevron"],[1,"mat-mdc-tab-label-container",3,"keydown"],["tabListContainer",""],["role","tablist",1,"mat-mdc-tab-list",3,"cdkObserveContent"],["tabList",""],[1,"mat-mdc-tab-labels"],["tabListInner",""],["aria-hidden","true","type","button","mat-ripple","","tabindex","-1",1,"mat-mdc-tab-header-pagination","mat-mdc-tab-header-pagination-after",3,"matRippleDisabled","disabled","mousedown","click","touchend"],["nextPaginator",""]],template:function(r,o){r&1&&(mi(),pe(0,"button",0,1),Ve("click",function(){return o._handlePaginatorClick("before")})("mousedown",function(a){return o._handlePaginatorPress("before",a)})("touchend",function(){return o._stopInterval()}),pt(2,"div",2),De(),pe(3,"div",3,4),Ve("keydown",function(a){return o._handleKeydown(a)}),pe(5,"div",5,6),Ve("cdkObserveContent",function(){return o._onContentChanges()}),pe(7,"div",7,8),hn(9),De()()(),pe(10,"button",9,10),Ve("mousedown",function(a){return o._handlePaginatorPress("after",a)})("click",function(){return o._handlePaginatorClick("after")})("touchend",function(){return o._stopInterval()}),pt(12,"div",2),De()),r&2&&(qe("mat-mdc-tab-header-pagination-disabled",o._disableScrollBefore),it("matRippleDisabled",o._disableScrollBefore||o.disableRipple)("disabled",o._disableScrollBefore||null),nt(3),qe("_mat-animation-noopable",o._animationMode==="NoopAnimations"),nt(7),qe("mat-mdc-tab-header-pagination-disabled",o._disableScrollAfter),it("matRippleDisabled",o._disableScrollAfter||o.disableRipple)("disabled",o._disableScrollAfter||null))},dependencies:[$f,PA],styles:[".mat-mdc-tab-header{display:flex;overflow:hidden;position:relative;flex-shrink:0}.mdc-tab-indicator .mdc-tab-indicator__content{transition-duration:var(--mat-tab-animation-duration, 250ms)}.mat-mdc-tab-header-pagination{-webkit-user-select:none;user-select:none;position:relative;display:none;justify-content:center;align-items:center;min-width:32px;cursor:pointer;z-index:2;-webkit-tap-highlight-color:rgba(0,0,0,0);touch-action:none;box-sizing:content-box;background:none;border:none;outline:0;padding:0}.mat-mdc-tab-header-pagination::-moz-focus-inner{border:0}.mat-mdc-tab-header-pagination .mat-ripple-element{opacity:.12;background-color:var(--mat-tab-header-inactive-ripple-color)}.mat-mdc-tab-header-pagination-controls-enabled .mat-mdc-tab-header-pagination{display:flex}.mat-mdc-tab-header-pagination-before,.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-after{padding-left:4px}.mat-mdc-tab-header-pagination-before .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-after .mat-mdc-tab-header-pagination-chevron{transform:rotate(-135deg)}.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-before,.mat-mdc-tab-header-pagination-after{padding-right:4px}.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-before .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-header-pagination-after .mat-mdc-tab-header-pagination-chevron{transform:rotate(45deg)}.mat-mdc-tab-header-pagination-chevron{border-style:solid;border-width:2px 2px 0 0;height:8px;width:8px;border-color:var(--mat-tab-header-pagination-icon-color)}.mat-mdc-tab-header-pagination-disabled{box-shadow:none;cursor:default;pointer-events:none}.mat-mdc-tab-header-pagination-disabled .mat-mdc-tab-header-pagination-chevron{opacity:.4}.mat-mdc-tab-list{flex-grow:1;position:relative;transition:transform 500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-mdc-tab-list{transition:none}._mat-animation-noopable span.mdc-tab-indicator__content,._mat-animation-noopable span.mdc-tab__text-label{transition:none}.mat-mdc-tab-label-container{display:flex;flex-grow:1;overflow:hidden;z-index:1;border-bottom-style:solid;border-bottom-width:var(--mat-tab-header-divider-height);border-bottom-color:var(--mat-tab-header-divider-color)}.mat-mdc-tab-group-inverted-header .mat-mdc-tab-label-container{border-bottom:none;border-top-style:solid;border-top-width:var(--mat-tab-header-divider-height);border-top-color:var(--mat-tab-header-divider-color)}.mat-mdc-tab-labels{display:flex;flex:1 0 auto}[mat-align-tabs=center]>.mat-mdc-tab-header .mat-mdc-tab-labels{justify-content:center}[mat-align-tabs=end]>.mat-mdc-tab-header .mat-mdc-tab-labels{justify-content:flex-end}.mat-mdc-tab::before{margin:5px}.cdk-high-contrast-active .mat-mdc-tab[aria-disabled=true]{color:GrayText}"],encapsulation:2});let t=e;return t})(),E3=new M("MAT_TABS_CONFIG"),x3=0,I3=zf(MM(class{constructor(t){this._elementRef=t}}),"primary"),D3=!0,cR=(()=>{let e=class e extends I3{get fitInkBarToContent(){return this._fitInkBarToContent}set fitInkBarToContent(i){this._fitInkBarToContent=An(i),this._changeDetectorRef.markForCheck()}get stretchTabs(){return this._stretchTabs}set stretchTabs(i){this._stretchTabs=An(i)}get dynamicHeight(){return this._dynamicHeight}set dynamicHeight(i){this._dynamicHeight=An(i)}get selectedIndex(){return this._selectedIndex}set selectedIndex(i){this._indexToSelect=Oo(i,null)}get animationDuration(){return this._animationDuration}set animationDuration(i){this._animationDuration=/^\d+$/.test(i+"")?i+"ms":i}get contentTabIndex(){return this._contentTabIndex}set contentTabIndex(i){this._contentTabIndex=Oo(i,null)}get disablePagination(){return this._disablePagination}set disablePagination(i){this._disablePagination=An(i)}get preserveContent(){return this._preserveContent}set preserveContent(i){this._preserveContent=An(i)}get backgroundColor(){return this._backgroundColor}set backgroundColor(i){if(!D3)throw new Error("mat-tab-group background color must be set through the Sass theming API");let r=this._elementRef.nativeElement.classList;r.remove("mat-tabs-with-background",`mat-background-${this.backgroundColor}`),i&&r.add("mat-tabs-with-background",`mat-background-${i}`),this._backgroundColor=i}constructor(i,r,o,s){super(i),this._changeDetectorRef=r,this._animationMode=s,this._tabs=new br,this._indexToSelect=0,this._lastFocusedTabIndex=null,this._tabBodyWrapperHeight=0,this._tabsSubscription=Ee.EMPTY,this._tabLabelSubscription=Ee.EMPTY,this._fitInkBarToContent=!1,this._stretchTabs=!0,this._dynamicHeight=!1,this._selectedIndex=null,this.headerPosition="above",this._disablePagination=!1,this._preserveContent=!1,this.selectedIndexChange=new se,this.focusChange=new se,this.animationDone=new se,this.selectedTabChange=new se(!0),this._groupId=x3++,this.animationDuration=o&&o.animationDuration?o.animationDuration:"500ms",this.disablePagination=o&&o.disablePagination!=null?o.disablePagination:!1,this.dynamicHeight=o&&o.dynamicHeight!=null?o.dynamicHeight:!1,this.contentTabIndex=o?.contentTabIndex??null,this.preserveContent=!!o?.preserveContent,this.fitInkBarToContent=o&&o.fitInkBarToContent!=null?o.fitInkBarToContent:!1,this.stretchTabs=o&&o.stretchTabs!=null?o.stretchTabs:!0}ngAfterContentChecked(){let i=this._indexToSelect=this._clampTabIndex(this._indexToSelect);if(this._selectedIndex!=i){let r=this._selectedIndex==null;if(!r){this.selectedTabChange.emit(this._createChangeEvent(i));let o=this._tabBodyWrapper.nativeElement;o.style.minHeight=o.clientHeight+"px"}Promise.resolve().then(()=>{this._tabs.forEach((o,s)=>o.isActive=s===i),r||(this.selectedIndexChange.emit(i),this._tabBodyWrapper.nativeElement.style.minHeight="")})}this._tabs.forEach((r,o)=>{r.position=o-i,this._selectedIndex!=null&&r.position==0&&!r.origin&&(r.origin=i-this._selectedIndex)}),this._selectedIndex!==i&&(this._selectedIndex=i,this._lastFocusedTabIndex=null,this._changeDetectorRef.markForCheck())}ngAfterContentInit(){this._subscribeToAllTabChanges(),this._subscribeToTabLabels(),this._tabsSubscription=this._tabs.changes.subscribe(()=>{let i=this._clampTabIndex(this._indexToSelect);if(i===this._selectedIndex){let r=this._tabs.toArray(),o;for(let s=0;s<r.length;s++)if(r[s].isActive){this._indexToSelect=this._selectedIndex=s,this._lastFocusedTabIndex=null,o=r[s];break}!o&&r[i]&&Promise.resolve().then(()=>{r[i].isActive=!0,this.selectedTabChange.emit(this._createChangeEvent(i))})}this._changeDetectorRef.markForCheck()})}_subscribeToAllTabChanges(){this._allTabs.changes.pipe(Ht(this._allTabs)).subscribe(i=>{this._tabs.reset(i.filter(r=>r._closestTabGroup===this||!r._closestTabGroup)),this._tabs.notifyOnChanges()})}ngOnDestroy(){this._tabs.destroy(),this._tabsSubscription.unsubscribe(),this._tabLabelSubscription.unsubscribe()}realignInkBar(){this._tabHeader&&this._tabHeader._alignInkBarToSelectedTab()}updatePagination(){this._tabHeader&&this._tabHeader.updatePagination()}focusTab(i){let r=this._tabHeader;r&&(r.focusIndex=i)}_focusChanged(i){this._lastFocusedTabIndex=i,this.focusChange.emit(this._createChangeEvent(i))}_createChangeEvent(i){let r=new jv;return r.index=i,this._tabs&&this._tabs.length&&(r.tab=this._tabs.toArray()[i]),r}_subscribeToTabLabels(){this._tabLabelSubscription&&this._tabLabelSubscription.unsubscribe(),this._tabLabelSubscription=co(...this._tabs.map(i=>i._stateChanges)).subscribe(()=>this._changeDetectorRef.markForCheck())}_clampTabIndex(i){return Math.min(this._tabs.length-1,Math.max(i||0,0))}_getTabLabelId(i){return`mat-tab-label-${this._groupId}-${i}`}_getTabContentId(i){return`mat-tab-content-${this._groupId}-${i}`}_setTabBodyWrapperHeight(i){if(!this._dynamicHeight||!this._tabBodyWrapperHeight)return;let r=this._tabBodyWrapper.nativeElement;r.style.height=this._tabBodyWrapperHeight+"px",this._tabBodyWrapper.nativeElement.offsetHeight&&(r.style.height=i+"px")}_removeTabBodyWrapperHeight(){let i=this._tabBodyWrapper.nativeElement;this._tabBodyWrapperHeight=i.clientHeight,i.style.height="",this.animationDone.emit()}_handleClick(i,r,o){r.focusIndex=o,i.disabled||(this.selectedIndex=o)}_getTabIndex(i){let r=this._lastFocusedTabIndex??this.selectedIndex;return i===r?0:-1}_tabFocusChanged(i,r){i&&i!=="mouse"&&i!=="touch"&&(this._tabHeader.focusIndex=r)}};e.\u0275fac=function(r){return new(r||e)(S(de),S(Yt),S(E3,8),S(Qt,8))},e.\u0275cmp=tt({type:e,selectors:[["mat-tab-group"]],contentQueries:function(r,o,s){if(r&1&&Bi(s,Bv,5),r&2){let a;rt(a=ot())&&(o._allTabs=a)}},viewQuery:function(r,o){if(r&1&&(pn(n3,5),pn(i3,5)),r&2){let s;rt(s=ot())&&(o._tabBodyWrapper=s.first),rt(s=ot())&&(o._tabHeader=s.first)}},hostAttrs:["ngSkipHydration","",1,"mat-mdc-tab-group"],hostVars:8,hostBindings:function(r,o){r&2&&(Kc("--mat-tab-animation-duration",o.animationDuration),qe("mat-mdc-tab-group-dynamic-height",o.dynamicHeight)("mat-mdc-tab-group-inverted-header",o.headerPosition==="below")("mat-mdc-tab-group-stretch-tabs",o.stretchTabs))},inputs:{color:"color",disableRipple:"disableRipple",fitInkBarToContent:"fitInkBarToContent",stretchTabs:["mat-stretch-tabs","stretchTabs"],dynamicHeight:"dynamicHeight",selectedIndex:"selectedIndex",headerPosition:"headerPosition",animationDuration:"animationDuration",contentTabIndex:"contentTabIndex",disablePagination:"disablePagination",preserveContent:"preserveContent",backgroundColor:"backgroundColor"},outputs:{selectedIndexChange:"selectedIndexChange",focusChange:"focusChange",animationDone:"animationDone",selectedTabChange:"selectedTabChange"},exportAs:["matTabGroup"],features:[mn([{provide:aR,useExisting:e}]),Ye],decls:8,vars:5,consts:[[3,"selectedIndex","disableRipple","disablePagination","indexFocused","selectFocusedIndex"],["tabHeader",""],[1,"mat-mdc-tab-body-wrapper"],["tabBodyWrapper",""],["role","tab","matTabLabelWrapper","","cdkMonitorElementFocus","",1,"mdc-tab","mat-mdc-tab","mat-mdc-focus-indicator",3,"id","ngClass","disabled","fitInkBarToContent","click","cdkFocusChange"],["tabNode",""],[1,"mdc-tab__ripple"],["mat-ripple","",1,"mat-mdc-tab-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mdc-tab__content"],[1,"mdc-tab__text-label"],[3,"cdkPortalOutlet"],["role","tabpanel",3,"id","ngClass","content","position","origin","animationDuration","preserveContent","_onCentered","_onCentering"],["class","mdc-tab mat-mdc-tab mat-mdc-focus-indicator","role","tab","matTabLabelWrapper","","cdkMonitorElementFocus","",3,"id","mdc-tab--active","ngClass","disabled","fitInkBarToContent"],["role","tabpanel",3,"id","mat-mdc-tab-body-active","ngClass","content","position","origin","animationDuration","preserveContent"]],template:function(r,o){r&1&&(pe(0,"mat-tab-header",0,1),Ve("indexFocused",function(a){return o._focusChanged(a)})("selectFocusedIndex",function(a){return o.selectedIndex=a}),Iy(2,a3,8,16,"div",12,xy),De(),pe(4,"div",2,3),Iy(6,c3,1,12,"mat-tab-body",13,xy),De()),r&2&&(it("selectedIndex",o.selectedIndex||0)("disableRipple",o.disableRipple)("disablePagination",o.disablePagination),nt(2),Dy(o._tabs),nt(2),qe("_mat-animation-noopable",o._animationMode==="NoopAnimations"),nt(2),Dy(o._tabs))},dependencies:[wS,Fl,$f,BA,rR,sR,w3],styles:['.mdc-tab{min-width:90px;padding-right:24px;padding-left:24px;display:flex;flex:1 0 auto;justify-content:center;box-sizing:border-box;margin:0;padding-top:0;padding-bottom:0;border:none;outline:none;text-align:center;white-space:nowrap;cursor:pointer;-webkit-appearance:none;z-index:1}.mdc-tab::-moz-focus-inner{padding:0;border:0}.mdc-tab[hidden]{display:none}.mdc-tab--min-width{flex:0 1 auto}.mdc-tab__content{display:flex;align-items:center;justify-content:center;height:inherit;pointer-events:none}.mdc-tab__text-label{transition:150ms color linear;display:inline-block;line-height:1;z-index:2}.mdc-tab__icon{transition:150ms color linear;z-index:2}.mdc-tab--stacked .mdc-tab__content{flex-direction:column;align-items:center;justify-content:center}.mdc-tab--stacked .mdc-tab__text-label{padding-top:6px;padding-bottom:4px}.mdc-tab--active .mdc-tab__text-label,.mdc-tab--active .mdc-tab__icon{transition-delay:100ms}.mdc-tab:not(.mdc-tab--stacked) .mdc-tab__icon+.mdc-tab__text-label{padding-left:8px;padding-right:0}[dir=rtl] .mdc-tab:not(.mdc-tab--stacked) .mdc-tab__icon+.mdc-tab__text-label,.mdc-tab:not(.mdc-tab--stacked) .mdc-tab__icon+.mdc-tab__text-label[dir=rtl]{padding-left:0;padding-right:8px}.mdc-tab-indicator{display:flex;position:absolute;top:0;left:0;justify-content:center;width:100%;height:100%;pointer-events:none;z-index:1}.mdc-tab-indicator__content{transform-origin:left;opacity:0}.mdc-tab-indicator__content--underline{align-self:flex-end;box-sizing:border-box;width:100%;border-top-style:solid}.mdc-tab-indicator__content--icon{align-self:center;margin:0 auto}.mdc-tab-indicator--active .mdc-tab-indicator__content{opacity:1}.mdc-tab-indicator .mdc-tab-indicator__content{transition:250ms transform cubic-bezier(0.4, 0, 0.2, 1)}.mdc-tab-indicator--no-transition .mdc-tab-indicator__content{transition:none}.mdc-tab-indicator--fade .mdc-tab-indicator__content{transition:150ms opacity linear}.mdc-tab-indicator--active.mdc-tab-indicator--fade .mdc-tab-indicator__content{transition-delay:100ms}.mat-mdc-tab-ripple{position:absolute;top:0;left:0;bottom:0;right:0;pointer-events:none}.mat-mdc-tab{-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-decoration:none;background:none;font-family:var(--mat-tab-header-label-text-font);font-size:var(--mat-tab-header-label-text-size);letter-spacing:var(--mat-tab-header-label-text-tracking);line-height:var(--mat-tab-header-label-text-line-height);font-weight:var(--mat-tab-header-label-text-weight)}.mat-mdc-tab .mdc-tab-indicator__content--underline{border-color:var(--mdc-tab-indicator-active-indicator-color)}.mat-mdc-tab .mdc-tab-indicator__content--underline{border-top-width:var(--mdc-tab-indicator-active-indicator-height)}.mat-mdc-tab .mdc-tab-indicator__content--underline{border-radius:var(--mdc-tab-indicator-active-indicator-shape)}.mat-mdc-tab:not(.mdc-tab--stacked){height:var(--mdc-secondary-navigation-tab-container-height)}.mat-mdc-tab:not(:disabled).mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):hover.mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):focus.mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):active.mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:disabled.mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):hover:not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):focus:not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):active:not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:disabled:not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab.mdc-tab{flex-grow:0}.mat-mdc-tab:hover .mdc-tab__text-label{color:var(--mat-tab-header-inactive-hover-label-text-color)}.mat-mdc-tab:focus .mdc-tab__text-label{color:var(--mat-tab-header-inactive-focus-label-text-color)}.mat-mdc-tab.mdc-tab--active .mdc-tab__text-label{color:var(--mat-tab-header-active-label-text-color)}.mat-mdc-tab.mdc-tab--active .mdc-tab__ripple::before,.mat-mdc-tab.mdc-tab--active .mat-ripple-element{background-color:var(--mat-tab-header-active-ripple-color)}.mat-mdc-tab.mdc-tab--active:hover .mdc-tab__text-label{color:var(--mat-tab-header-active-hover-label-text-color)}.mat-mdc-tab.mdc-tab--active:hover .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-active-hover-indicator-color)}.mat-mdc-tab.mdc-tab--active:focus .mdc-tab__text-label{color:var(--mat-tab-header-active-focus-label-text-color)}.mat-mdc-tab.mdc-tab--active:focus .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-active-focus-indicator-color)}.mat-mdc-tab.mat-mdc-tab-disabled{opacity:.4;pointer-events:none}.mat-mdc-tab.mat-mdc-tab-disabled .mdc-tab__content{pointer-events:none}.mat-mdc-tab.mat-mdc-tab-disabled .mdc-tab__ripple::before,.mat-mdc-tab.mat-mdc-tab-disabled .mat-ripple-element{background-color:var(--mat-tab-header-disabled-ripple-color)}.mat-mdc-tab .mdc-tab__ripple::before{content:"";display:block;position:absolute;top:0;left:0;right:0;bottom:0;opacity:0;pointer-events:none;background-color:var(--mat-tab-header-inactive-ripple-color)}.mat-mdc-tab .mdc-tab__text-label{color:var(--mat-tab-header-inactive-label-text-color);display:inline-flex;align-items:center}.mat-mdc-tab .mdc-tab__content{position:relative;pointer-events:auto}.mat-mdc-tab:hover .mdc-tab__ripple::before{opacity:.04}.mat-mdc-tab.cdk-program-focused .mdc-tab__ripple::before,.mat-mdc-tab.cdk-keyboard-focused .mdc-tab__ripple::before{opacity:.12}.mat-mdc-tab .mat-ripple-element{opacity:.12;background-color:var(--mat-tab-header-inactive-ripple-color)}.mat-mdc-tab-group.mat-mdc-tab-group-stretch-tabs>.mat-mdc-tab-header .mat-mdc-tab{flex-grow:1}.mat-mdc-tab-group{display:flex;flex-direction:column;max-width:100%}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination{background-color:var(--mat-tab-header-with-background-background-color)}.mat-mdc-tab-group.mat-tabs-with-background.mat-primary>.mat-mdc-tab-header .mat-mdc-tab .mdc-tab__text-label{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background.mat-primary>.mat-mdc-tab-header .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background:not(.mat-primary)>.mat-mdc-tab-header .mat-mdc-tab:not(.mdc-tab--active) .mdc-tab__text-label{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background:not(.mat-primary)>.mat-mdc-tab-header .mat-mdc-tab:not(.mdc-tab--active) .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-focus-indicator::before,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-focus-indicator::before{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-ripple-element,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mdc-tab__ripple::before,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-ripple-element,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mdc-tab__ripple::before{background-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-tab-header-pagination-chevron{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-mdc-tab-group-inverted-header{flex-direction:column-reverse}.mat-mdc-tab-group.mat-mdc-tab-group-inverted-header .mdc-tab-indicator__content--underline{align-self:flex-start}.mat-mdc-tab-body-wrapper{position:relative;overflow:hidden;display:flex;transition:height 500ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-mdc-tab-body-wrapper._mat-animation-noopable{transition:none !important;animation:none !important}'],encapsulation:2});let t=e;return t})(),jv=class{};var lR=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=te({type:e}),e.\u0275inj=ee({imports:[na,Xt,eR,Hf,fa,UA,Xt]});let t=e;return t})();var T3=["mat-button",""],S3=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],A3=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"];var M3=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],R3=(()=>{let e=class e{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(i){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,i)}get disableRipple(){return this._disableRipple}set disableRipple(i){this._disableRipple=i,this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(i){this._disabled=i,this._updateRippleDisabled()}constructor(i,r,o,s){this._elementRef=i,this._platform=r,this._ngZone=o,this._animationMode=s,this._focusMonitor=I(yf),this._rippleLoader=I(RM),this._isFab=!1,this._disableRipple=!1,this._disabled=!1,this._rippleLoader?.configureRipple(this._elementRef.nativeElement,{className:"mat-mdc-button-ripple"});let a=this._elementRef.nativeElement,c=a.classList;for(let{attribute:l,mdcClasses:u}of M3)a.hasAttribute(l)&&c.add(...u)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(i="program",r){i?this._focusMonitor.focusVia(this._elementRef.nativeElement,i,r):this._elementRef.nativeElement.focus(r)}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}};e.\u0275fac=function(r){Dh()},e.\u0275dir=_e({type:e,inputs:{color:"color",disableRipple:["disableRipple","disableRipple",qn],disabled:["disabled","disabled",qn]},features:[ji]});let t=e;return t})();var Qf=(()=>{let e=class e extends R3{constructor(i,r,o,s){super(i,r,o,s)}};e.\u0275fac=function(r){return new(r||e)(S(de),S(dt),S(U),S(Qt,8))},e.\u0275cmp=tt({type:e,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:9,hostBindings:function(r,o){r&2&&(Tn("disabled",o.disabled||null),ST(o.color?"mat-"+o.color:""),qe("_mat-animation-noopable",o._animationMode==="NoopAnimations")("mat-unthemed",!o.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],features:[Ye],attrs:T3,ngContentSelectors:A3,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(r,o){r&1&&(mi(S3),pt(0,"span",0),hn(1),pe(2,"span",1),hn(3,1),De(),hn(4,2),pt(5,"span",2)(6,"span",3)),r&2&&qe("mdc-button__ripple",!o._isFab)("mdc-fab__ripple",o._isFab)},styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px);display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{font-family:var(--mdc-text-button-label-text-font);font-size:var(--mdc-text-button-label-text-size);letter-spacing:var(--mdc-text-button-label-text-tracking);font-weight:var(--mdc-text-button-label-text-weight);text-transform:var(--mdc-text-button-label-text-transform);height:var(--mdc-text-button-container-height);border-radius:var(--mdc-text-button-container-shape);--mdc-text-button-container-shape:4px;--mdc-text-button-container-height:36px;--mdc-text-button-keep-touch-target:false}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-text-button-ripple-color)}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-state-layer-color)}.mat-mdc-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-hover-state-layer-opacity)}.mat-mdc-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-focus-state-layer-opacity)}.mat-mdc-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-pressed-state-layer-opacity)}.mat-mdc-button[disabled]{cursor:default;pointer-events:none;color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-unelevated-button{font-family:var(--mdc-filled-button-label-text-font);font-size:var(--mdc-filled-button-label-text-size);letter-spacing:var(--mdc-filled-button-label-text-tracking);font-weight:var(--mdc-filled-button-label-text-weight);text-transform:var(--mdc-filled-button-label-text-transform);height:var(--mdc-filled-button-container-height);border-radius:var(--mdc-filled-button-container-shape);--mdc-filled-button-container-shape:4px;--mdc-filled-button-container-elevation:0;--mdc-filled-button-disabled-container-elevation:0;--mdc-filled-button-focus-container-elevation:0;--mdc-filled-button-hover-container-elevation:0;--mdc-filled-button-keep-touch-target:false;--mdc-filled-button-pressed-container-elevation:0}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color)}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-filled-button-ripple-color)}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-state-layer-color)}.mat-mdc-unelevated-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-hover-state-layer-opacity)}.mat-mdc-unelevated-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-focus-state-layer-opacity)}.mat-mdc-unelevated-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-pressed-state-layer-opacity)}.mat-mdc-unelevated-button[disabled]{cursor:default;pointer-events:none;color:var(--mdc-filled-button-disabled-label-text-color);background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-raised-button{font-family:var(--mdc-protected-button-label-text-font);font-size:var(--mdc-protected-button-label-text-size);letter-spacing:var(--mdc-protected-button-label-text-tracking);font-weight:var(--mdc-protected-button-label-text-weight);text-transform:var(--mdc-protected-button-label-text-transform);height:var(--mdc-protected-button-container-height);border-radius:var(--mdc-protected-button-container-shape);--mdc-protected-button-container-shape:4px;--mdc-protected-button-keep-touch-target:false}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color)}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-protected-button-ripple-color)}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-state-layer-color)}.mat-mdc-raised-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-hover-state-layer-opacity)}.mat-mdc-raised-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-focus-state-layer-opacity)}.mat-mdc-raised-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-pressed-state-layer-opacity)}.mat-mdc-raised-button[disabled]{cursor:default;pointer-events:none;color:var(--mdc-protected-button-disabled-label-text-color);background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button[disabled][disabled]{box-shadow:none}.mat-mdc-outlined-button{font-family:var(--mdc-outlined-button-label-text-font);font-size:var(--mdc-outlined-button-label-text-size);letter-spacing:var(--mdc-outlined-button-label-text-tracking);font-weight:var(--mdc-outlined-button-label-text-weight);text-transform:var(--mdc-outlined-button-label-text-transform);height:var(--mdc-outlined-button-container-height);border-radius:var(--mdc-outlined-button-container-shape);padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width);--mdc-outlined-button-keep-touch-target:false;--mdc-outlined-button-outline-width:1px;--mdc-outlined-button-container-shape:4px}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color)}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape)}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color)}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width))}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-outlined-button-ripple-color)}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-state-layer-color)}.mat-mdc-outlined-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-hover-state-layer-opacity)}.mat-mdc-outlined-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-focus-state-layer-opacity)}.mat-mdc-outlined-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-pressed-state-layer-opacity)}.mat-mdc-outlined-button[disabled]{cursor:default;pointer-events:none;color:var(--mdc-outlined-button-disabled-label-text-color);border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-button-base{text-decoration:none}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button .mat-mdc-button-touch-target,.mat-mdc-unelevated-button .mat-mdc-button-touch-target,.mat-mdc-raised-button .mat-mdc-button-touch-target,.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}[dir=rtl] .mat-mdc-button>.mat-icon,.mat-mdc-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}.mat-mdc-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon,.mat-mdc-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem;margin-left:-4px;margin-right:8px}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:-4px}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon,.mat-mdc-raised-button .mdc-button__label+.mat-icon,.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:-4px}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon,.mat-mdc-unelevated-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-raised-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-outlined-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:-4px;margin-right:8px}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px)*-1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0});let t=e;return t})();var uR=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=te({type:e}),e.\u0275inj=ee({imports:[Xt,Hf,Xt]});let t=e;return t})();var hR=(()=>{let e=class e{constructor(){this.result1="Nessun risultato.",this.result2="",this.value="d20+5"}roll(){let i="",r=0;this.value.startsWith("+")&&(this.value=this.value.substring(1));let o=this.value.split(/([+-])/);for(let s=0;s<o.length;s+=2){let a=s==0||o[s-1]==="+"?"+":"-",c=this.rollDice(o[s]);r=a==="+"?r+c:r-c,i+=`${a}${c}`}this.result1=i.substring(1),this.result2="= "+r}rollDice(i){let r=0,o=i.split(/(d)/),s=o[0]?parseInt(o[0]):1,a=o[2]?parseInt(o[2]):1;for(let c=0;c<s;c++)r+=Math.floor(Math.random()*a)+1;return r}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=tt({type:e,selectors:[["app-roll"]],decls:8,vars:3,consts:[[1,"roll"],["matInput","","placeholder","cosa vuoi tirare?","type","text","name","value",3,"ngModel","ngModelChange"],["mat-raised-button","",3,"click"]],template:function(r,o){r&1&&(pe(0,"div",0)(1,"p"),fn(2),pe(3,"b"),fn(4),De()(),pe(5,"input",1),Ve("ngModelChange",function(a){return o.value=a}),De(),pe(6,"button",2),Ve("click",function(){return o.roll()}),fn(7,"ROLL"),De()()),r&2&&(nt(2),So(o.result1),nt(2),So(o.result2),nt(1),it("ngModel",o.value))},dependencies:[Qf,Rr,_a,Uo],styles:["p[_ngcontent-%COMP%]{margin-top:1%;margin-left:1%}button[_ngcontent-%COMP%]{margin-left:1%;font-size:small}input[_ngcontent-%COMP%]{color:#fff;background:none}"]});let t=e;return t})();var P3="firebase",N3="10.7.1";ir(P3,N3,"app");var Ll=new hi("ANGULARFIRE2_VERSION");var O3=(t,e)=>{let n=e?[e]:tI(),i=[];return n.forEach(r=>{r.container.getProvider(t).instances.forEach(s=>{i.includes(s)||i.push(s)})}),i},zo=class{constructor(){return O3(F3)}},F3="app-check";function Uv(){}var Yf=class{zone;delegate;constructor(e,n=fg){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,i){let r=this.zone,o=function(s){r.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,n,i)}},zv=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Uv,{},Uv,Uv)),n.pipe(Fe({next:i,complete:i,error:i})).subscribe(e).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Zf=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Yf(Zone.current)),this.insideAngular=n.run(()=>new Yf(Zone.current,ni)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||t)(v(U))};static \u0275prov=R({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function L3(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function Jt(t){return V3(L3())(t)}function V3(t){return function(n){return n=n.lift(new zv(t.ngZone)),n.pipe(Ln(t.outsideAngular),In(t.insideAngular))}}var U3=new Map,z3={activated:!1,tokenObservers:[]},$3={initialized:!1,enabled:!1};function Wn(t){return U3.get(t)||Object.assign({},z3)}function yR(){return $3}var H3="https://content-firebaseappcheck.googleapis.com/v1";var q3="exchangeDebugToken",mR={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},Une=24*60*60*1e3;var Hv=class{constructor(e,n,i,r,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=r,r>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return _(this,null,function*(){this.stop();try{this.pending=new Xp,this.pending.promise.catch(n=>{}),yield G3(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Xp,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function G3(t){return new Promise(e=>{setTimeout(e,t)})}var W3={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},kr=new Jx("appCheck","AppCheck",W3);function _R(t){if(!Wn(t).activated)throw kr.create("use-before-activation",{appName:t.name})}function vR(i,r){return _(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let f=yield s.getHeartbeatsHeader();f&&(o["X-Firebase-Client"]=f)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(t,a)}catch(f){throw kr.create("fetch-network-error",{originalErrorMessage:f?.message})}if(c.status!==200)throw kr.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(f){throw kr.create("fetch-parse-error",{originalErrorMessage:f?.message})}let u=l.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw kr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let d=Number(u[1])*1e3,h=Date.now();return{token:l.token,expireTimeMillis:h+d,issuedAtTimeMillis:h}})}function wR(t,e){let{projectId:n,appId:i,apiKey:r}=t.options;return{url:`${H3}/projects/${n}/apps/${i}:${q3}?key=${r}`,body:{debug_token:e}}}var K3="firebase-app-check-database",Q3=1,qv="firebase-app-check-store";var Xf=null;function Y3(){return Xf||(Xf=new Promise((t,e)=>{try{let n=indexedDB.open(K3,Q3);n.onsuccess=i=>{t(i.target.result)},n.onerror=i=>{var r;e(kr.create("storage-open",{originalErrorMessage:(r=i.target.error)===null||r===void 0?void 0:r.message}))},n.onupgradeneeded=i=>{let r=i.target.result;switch(i.oldVersion){case 0:r.createObjectStore(qv,{keyPath:"compositeKey"})}}}catch(n){e(kr.create("storage-open",{originalErrorMessage:n?.message}))}}),Xf)}function Z3(t,e){return X3(J3(t),e)}function X3(t,e){return _(this,null,function*(){let i=(yield Y3()).transaction(qv,"readwrite"),o=i.objectStore(qv).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},i.onerror=c=>{var l;a(kr.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function J3(t){return`${t.options.appId}-${t.name}`}var Gv=new nd("@firebase/app-check");function $v(t,e){return td()?Z3(t,e).catch(n=>{Gv.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function ER(){return yR().enabled}function xR(){return _(this,null,function*(){let t=yR();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var eq={error:"UNKNOWN_ERROR"};function tq(t){return Qx.encodeString(JSON.stringify(t),!1)}function Wv(t,e=!1){return _(this,null,function*(){let n=t.app;_R(n);let i=Wn(n),r=i.token,o;if(r&&!Vl(r)&&(i.token=void 0,r=void 0),!r){let c=yield i.cachedTokenPromise;c&&(Vl(c)?r=c:yield $v(n,void 0))}if(!e&&r&&Vl(r))return{token:r.token};let s=!1;if(ER()){i.exchangeTokenPromise||(i.exchangeTokenPromise=vR(wR(n,yield xR()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),s=!0);let c=yield i.exchangeTokenPromise;return yield $v(n,c),i.token=c,{token:c.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),s=!0),r=yield Wn(n).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?Gv.warn(c.message):Gv.error(c),o=c}let a;return r?o?Vl(r)?a={token:r.token,internalError:o}:a=gR(o):(a={token:r.token},i.token=r,yield $v(n,r)):a=gR(o),s&&oq(n,a),a})}function nq(t){return _(this,null,function*(){let e=t.app;_R(e);let{provider:n}=Wn(e);if(ER()){let i=yield xR(),{token:r}=yield vR(wR(e,i),t.heartbeatServiceProvider);return{token:r}}else{let{token:i}=yield n.getToken();return{token:i}}})}function iq(t,e,n,i){let{app:r}=t,o=Wn(r),s={next:n,error:i,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Vl(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),pR(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>pR(t))}function IR(t,e){let n=Wn(t),i=n.tokenObservers.filter(r=>r.next!==e);i.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=i}function pR(t){let{app:e}=t,n=Wn(e),i=n.tokenRefresher;i||(i=rq(t),n.tokenRefresher=i),!i.isRunning()&&n.isTokenAutoRefreshEnabled&&i.start()}function rq(t){let{app:e}=t;return new Hv(()=>_(this,null,function*(){let n=Wn(e),i;if(n.token?i=yield Wv(t,!0):i=yield Wv(t),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{let n=Wn(e);if(n.token){let i=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,r=n.token.expireTimeMillis-5*60*1e3;return i=Math.min(i,r),Math.max(0,i-Date.now())}else return 0},mR.RETRIAL_MIN_WAIT,mR.RETRIAL_MAX_WAIT)}function oq(t,e){let n=Wn(t).tokenObservers;for(let i of n)try{i.type==="EXTERNAL"&&e.error!=null?i.error(e.error):i.next(e)}catch{}}function Vl(t){return t.expireTimeMillis-Date.now()>0}function gR(t){return{token:tq(eq),error:t}}var Kv=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=Wn(this.app);for(let n of e)IR(this.app,n.next);return Promise.resolve()}};function sq(t,e){return new Kv(t,e)}function aq(t){return{getToken:e=>Wv(t,e),getLimitedUseToken:()=>nq(t),addTokenListener:e=>iq(t,"INTERNAL",e),removeTokenListener:e=>IR(t.app,e)}}var cq="@firebase/app-check",lq="0.8.1";var uq="app-check",bR="app-check-internal";function dq(){pc(new io(uq,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return sq(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(bR).initialize()})),pc(new io(bR,t=>{let e=t.getProvider("app-check").getImmediate();return aq(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),ir(cq,lq)}dq();var hq=["localhost","0.0.0.0","127.0.0.1"],Jne=typeof window<"u"&&hq.includes(window.location.hostname);var fq="firebase",mq="10.7.1";rn.registerVersion(fq,mq,"app-compat");var pq=["ngOnDestroy"],TR=(t,e,n,i={})=>new Proxy(t,{get:(r,o)=>n.runOutsideAngular(()=>{if(t[o])return i?.spy?.get&&i.spy.get(o,t[o]),t[o];if(pq.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let c=a?.[o];return typeof c=="function"?c.bind(a):c?.then?c.then(l=>n.run(()=>l)):n.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>s[c],apply:(a,c,l)=>s.then(u=>{let d=u?.(...l);return i?.spy?.apply&&i.spy.apply(o,l,d),d})})})});var Jf=class{constructor(e){return e}},wa=new M("angularfire2.app.options"),Ea=new M("angularfire2.app.name");function jl(t,e,n){let i=typeof n=="string"&&n||"[DEFAULT]",r=typeof n=="object"&&n||{};r.name=r.name||i;let s=rn.apps.filter(a=>a&&a.name===r.name)[0]||e.runOutsideAngular(()=>rn.initializeApp(t,r));try{if(JSON.stringify(t)!==JSON.stringify(s.options)){let a=!!module.hot;gq("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Jf(s)}var gq=(t,...e)=>{Ny()&&typeof console<"u"&&console[t](...e)},bq={provide:Jf,useFactory:jl,deps:[wa,U,[new Io,Ea]]},SR=(()=>{class t{static initializeApp(n,i){return{ngModule:t,providers:[{provide:wa,useValue:n},{provide:Ea,useValue:i}]}}constructor(n){rn.registerVersion("angularfire",Ll.full,"core"),rn.registerVersion("angularfire",Ll.full,"app-compat"),rn.registerVersion("angular",nS.full,n.toString())}static \u0275fac=function(i){return new(i||t)(v(Et))};static \u0275mod=te({type:t});static \u0275inj=ee({providers:[bq]})}return t})();function em(t,e,n,i,r){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(o)return yq(r,s)||(CR("error",`${e} was already initialized on the ${n} Firebase App with different settings.${_q?" You may need to reload as Firebase is not HMR aware.":""}`),CR("warn",{is:r,was:s})),o;{let a=i();return globalThis.\u0275AngularfireInstanceCache.push([t,a,r]),a}}function yq(t,e){try{return t.toString()===e.toString()}catch{return t===e}}var _q=typeof module<"u"&&!!module.hot,CR=(t,...e)=>{Ny()&&typeof console<"u"&&console[t](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var Qv=new M("angularfire2.auth.use-emulator"),Yv=new M("angularfire2.auth.settings"),Zv=new M("angularfire2.auth.tenant-id"),Xv=new M("angularfire2.auth.langugage-code"),Jv=new M("angularfire2.auth.use-device-language"),e0=new M("angularfire.auth.persistence"),t0=(t,e,n,i,r,o,s,a)=>em(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{let c=e.runOutsideAngular(()=>t.auth());if(n&&c.useEmulator(...n),i&&(c.tenantId=i),c.languageCode=r,o&&c.useDeviceLanguage(),s)for(let[l,u]of Object.entries(s))c.settings[l]=u;return a&&c.setPersistence(a),c},[n,i,r,o,s,a]),AR=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,i,r,o,s,a,c,l,u,d,h,f){let m=new le,p=V(void 0).pipe(In(s.outsideAngular),Re(()=>o.runOutsideAngular(()=>import("./chunk-KTRENSU5.js"))),B(()=>jl(n,o,i)),B(g=>t0(g,o,a,l,u,d,c,h)),vc({bufferSize:1,refCount:!1}));if(Mo(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=V(null);else{p.pipe(on()).subscribe();let g=p.pipe(Re(C=>C.getRedirectResult().then(O=>O,()=>null)),Jt,vc({bufferSize:1,refCount:!1})),w=p.pipe(Re(C=>new K(O=>({unsubscribe:o.runOutsideAngular(()=>C.onAuthStateChanged(z=>O.next(z),z=>O.error(z),()=>O.complete()))})))),A=p.pipe(Re(C=>new K(O=>({unsubscribe:o.runOutsideAngular(()=>C.onIdTokenChanged(z=>O.next(z),z=>O.error(z),()=>O.complete()))}))));this.authState=g.pipe(Ad(w),Ln(s.outsideAngular),In(s.insideAngular)),this.user=g.pipe(Ad(A),Ln(s.outsideAngular),In(s.insideAngular)),this.idToken=this.user.pipe(Re(C=>C?fe(C.getIdToken()):V(null))),this.idTokenResult=this.user.pipe(Re(C=>C?fe(C.getIdTokenResult()):V(null))),this.credential=co(g,m,this.authState.pipe(Pe(C=>!C))).pipe(B(C=>C?.user?C:null),Ln(s.outsideAngular),In(s.insideAngular))}return TR(this,p,o,{spy:{apply:(g,w,A)=>{(g.startsWith("signIn")||g.startsWith("createUser"))&&A.then(C=>m.next(C))}}})}static \u0275fac=function(i){return new(i||t)(v(wa),v(Ea,8),v(Et),v(U),v(Zf),v(Qv,8),v(Yv,8),v(Zv,8),v(Xv,8),v(Jv,8),v(e0,8),v(zo,8))};static \u0275prov=R({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var wq=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Qn={},P,x0=x0||{},Z=wq||self;function mm(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Jl(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function Eq(t){return Object.prototype.hasOwnProperty.call(t,n0)&&t[n0]||(t[n0]=++xq)}var n0="closure_uid_"+(1e9*Math.random()>>>0),xq=0;function Iq(t,e,n){return t.call.apply(t.bind,arguments)}function Dq(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),t.apply(e,r)}}return function(){return t.apply(e,arguments)}}function Mt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Mt=Iq:Mt=Dq,Mt.apply(null,arguments)}function tm(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var i=n.slice();return i.push.apply(i,arguments),t.apply(this,i)}}function bt(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(i,r,o){for(var s=Array(arguments.length-2),a=2;a<arguments.length;a++)s[a-2]=arguments[a];return e.prototype[r].apply(i,s)}}function Pr(){this.s=this.s,this.o=this.o}var Cq=0;Pr.prototype.s=!1;Pr.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),Cq!=0)&&Eq(this)};Pr.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var zR=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function I0(t){let e=t.length;if(0<e){let n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function MR(t,e){for(let n=1;n<arguments.length;n++){let i=arguments[n];if(mm(i)){let r=t.length||0,o=i.length||0;t.length=r+o;for(let s=0;s<o;s++)t[r+s]=i[s]}else t.push(i)}}function Rt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Rt.prototype.h=function(){this.defaultPrevented=!0};var Tq=function(){if(!Z.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{let n=()=>{};Z.addEventListener("test",n,e),Z.removeEventListener("test",n,e)}catch{}return t}();function ql(t){return/^[\s\xa0]*$/.test(t)}function pm(){var t=Z.navigator;return t&&(t=t.userAgent)?t:""}function vi(t){return pm().indexOf(t)!=-1}function D0(t){return D0[" "](t),t}D0[" "]=function(){};function Sq(t,e){var n=g9;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var Aq=vi("Opera"),Ca=vi("Trident")||vi("MSIE"),$R=vi("Edge"),a0=$R||Ca,HR=vi("Gecko")&&!(pm().toLowerCase().indexOf("webkit")!=-1&&!vi("Edge"))&&!(vi("Trident")||vi("MSIE"))&&!vi("Edge"),Mq=pm().toLowerCase().indexOf("webkit")!=-1&&!vi("Edge");function qR(){var t=Z.document;return t?t.documentMode:void 0}var c0;e:{if(nm="",im=function(){var t=pm();if(HR)return/rv:([^\);]+)(\)|;)/.exec(t);if($R)return/Edge\/([\d\.]+)/.exec(t);if(Ca)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(Mq)return/WebKit\/(\S+)/.exec(t);if(Aq)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),im&&(nm=im?im[1]:""),Ca&&(rm=qR(),rm!=null&&rm>parseFloat(nm))){c0=String(rm);break e}c0=nm}var nm,im,rm,l0;Z.document&&Ca?(i0=qR(),l0=i0||parseInt(c0,10)||void 0):l0=void 0;var i0,Rq=l0;function Gl(t,e){if(Rt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(HR){e:{try{D0(e.nodeName);var r=!0;break e}catch{}r=!1}r||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=i.clientX!==void 0?i.clientX:i.pageX,this.clientY=i.clientY!==void 0?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:kq[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Gl.$.h.call(this)}}bt(Gl,Rt);var kq={2:"touch",3:"pen",4:"mouse"};Gl.prototype.h=function(){Gl.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var eu="closure_listenable_"+(1e6*Math.random()|0),Pq=0;function Nq(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.la=r,this.key=++Pq,this.fa=this.ia=!1}function gm(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function C0(t,e,n){for(let i in t)e.call(n,t[i],i,t)}function Oq(t,e){for(let n in t)e.call(void 0,t[n],n,t)}function GR(t){let e={};for(let n in t)e[n]=t[n];return e}var RR="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function WR(t,e){let n,i;for(let r=1;r<arguments.length;r++){i=arguments[r];for(n in i)t[n]=i[n];for(let o=0;o<RR.length;o++)n=RR[o],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function bm(t){this.src=t,this.g={},this.h=0}bm.prototype.add=function(t,e,n,i,r){var o=t.toString();t=this.g[o],t||(t=this.g[o]=[],this.h++);var s=d0(t,e,i,r);return-1<s?(e=t[s],n||(e.ia=!1)):(e=new Nq(e,this.src,o,!!i,r),e.ia=n,t.push(e)),e};function u0(t,e){var n=e.type;if(n in t.g){var i=t.g[n],r=zR(i,e),o;(o=0<=r)&&Array.prototype.splice.call(i,r,1),o&&(gm(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function d0(t,e,n,i){for(var r=0;r<t.length;++r){var o=t[r];if(!o.fa&&o.listener==e&&o.capture==!!n&&o.la==i)return r}return-1}var T0="closure_lm_"+(1e6*Math.random()|0),r0={};function KR(t,e,n,i,r){if(i&&i.once)return YR(t,e,n,i,r);if(Array.isArray(e)){for(var o=0;o<e.length;o++)KR(t,e[o],n,i,r);return null}return n=M0(n),t&&t[eu]?t.O(e,n,Jl(i)?!!i.capture:!!i,r):QR(t,e,n,!1,i,r)}function QR(t,e,n,i,r,o){if(!e)throw Error("Invalid event type");var s=Jl(r)?!!r.capture:!!r,a=A0(t);if(a||(t[T0]=a=new bm(t)),n=a.add(e,n,i,s,o),n.proxy)return n;if(i=Fq(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)Tq||(r=s),r===void 0&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(XR(e.toString()),i);else if(t.addListener&&t.removeListener)t.addListener(i);else throw Error("addEventListener and attachEvent are unavailable.");return n}function Fq(){function t(n){return e.call(t.src,t.listener,n)}let e=Lq;return t}function YR(t,e,n,i,r){if(Array.isArray(e)){for(var o=0;o<e.length;o++)YR(t,e[o],n,i,r);return null}return n=M0(n),t&&t[eu]?t.P(e,n,Jl(i)?!!i.capture:!!i,r):QR(t,e,n,!0,i,r)}function ZR(t,e,n,i,r){if(Array.isArray(e))for(var o=0;o<e.length;o++)ZR(t,e[o],n,i,r);else i=Jl(i)?!!i.capture:!!i,n=M0(n),t&&t[eu]?(t=t.i,e=String(e).toString(),e in t.g&&(o=t.g[e],n=d0(o,n,i,r),-1<n&&(gm(o[n]),Array.prototype.splice.call(o,n,1),o.length==0&&(delete t.g[e],t.h--)))):t&&(t=A0(t))&&(e=t.g[e.toString()],t=-1,e&&(t=d0(e,n,i,r)),(n=-1<t?e[t]:null)&&S0(n))}function S0(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[eu])u0(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(XR(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=A0(e))?(u0(n,t),n.h==0&&(n.src=null,e[T0]=null)):gm(t)}}}function XR(t){return t in r0?r0[t]:r0[t]="on"+t}function Lq(t,e){if(t.fa)t=!0;else{e=new Gl(e,this);var n=t.listener,i=t.la||t.src;t.ia&&S0(t),t=n.call(i,e)}return t}function A0(t){return t=t[T0],t instanceof bm?t:null}var o0="__closure_events_fn_"+(1e9*Math.random()>>>0);function M0(t){return typeof t=="function"?t:(t[o0]||(t[o0]=function(e){return t.handleEvent(e)}),t[o0])}function gt(){Pr.call(this),this.i=new bm(this),this.S=this,this.J=null}bt(gt,Pr);gt.prototype[eu]=!0;gt.prototype.removeEventListener=function(t,e,n,i){ZR(this,t,e,n,i)};function It(t,e){var n,i=t.J;if(i)for(n=[];i;i=i.J)n.push(i);if(t=t.S,i=e.type||e,typeof e=="string")e=new Rt(e,t);else if(e instanceof Rt)e.target=e.target||t;else{var r=e;e=new Rt(i,t),WR(e,r)}if(r=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];r=om(s,i,!0,e)&&r}if(s=e.g=t,r=om(s,i,!0,e)&&r,r=om(s,i,!1,e)&&r,n)for(o=0;o<n.length;o++)s=e.g=n[o],r=om(s,i,!1,e)&&r}gt.prototype.N=function(){if(gt.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],i=0;i<n.length;i++)gm(n[i]);delete t.g[e],t.h--}}this.J=null};gt.prototype.O=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)};gt.prototype.P=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};function om(t,e,n,i){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var r=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.fa&&s.capture==n){var a=s.listener,c=s.la||s.src;s.ia&&u0(t.i,s),r=a.call(c,i)!==!1&&r}}return r&&!i.defaultPrevented}var R0=Z.JSON.stringify,h0=class{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}};function Vq(){var t=k0;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var f0=class{constructor(){this.h=this.g=null}add(e,n){let i=JR.get();i.set(e,n),this.h?this.h.next=i:this.g=i,this.h=i}},JR=new h0(()=>new m0,t=>t.reset()),m0=class{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}};function jq(t){var e=1;t=t.split(":");let n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function Bq(t){Z.setTimeout(()=>{throw t},0)}var Wl,Kl=!1,k0=new f0,e1=()=>{let t=Z.Promise.resolve(void 0);Wl=()=>{t.then(Uq)}},Uq=()=>{for(var t;t=Vq();){try{t.h.call(t.g)}catch(n){Bq(n)}var e=JR;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Kl=!1};function ym(t,e){gt.call(this),this.h=t||1,this.g=e||Z,this.j=Mt(this.qb,this),this.l=Date.now()}bt(ym,gt);P=ym.prototype;P.ga=!1;P.T=null;P.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),It(this,"tick"),this.ga&&(P0(this),this.start()))}};P.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function P0(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}P.N=function(){ym.$.N.call(this),P0(this),delete this.g};function N0(t,e,n){if(typeof t=="function")n&&(t=Mt(t,n));else if(t&&typeof t.handleEvent=="function")t=Mt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:Z.setTimeout(t,e||0)}function t1(t){t.g=N0(()=>{t.g=null,t.i&&(t.i=!1,t1(t))},t.j);let e=t.h;t.h=null,t.m.apply(null,e)}var p0=class extends Pr{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:t1(this)}N(){super.N(),this.g&&(Z.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function Ql(t){Pr.call(this),this.h=t,this.g={}}bt(Ql,Pr);var kR=[];function n1(t,e,n,i){Array.isArray(n)||(n&&(kR[0]=n.toString()),n=kR);for(var r=0;r<n.length;r++){var o=KR(e,n[r],i||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function i1(t){C0(t.g,function(e,n){this.g.hasOwnProperty(n)&&S0(e)},t),t.g={}}Ql.prototype.N=function(){Ql.$.N.call(this),i1(this)};Ql.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function _m(){this.g=!0}_m.prototype.Ea=function(){this.g=!1};function zq(t,e,n,i,r,o){t.info(function(){if(t.g)if(o)for(var s="",a=o.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var d=u.split("_");s=2<=d.length&&d[1]=="type"?s+(u+"="+l+"&"):s+(u+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+`
`+n+`
`+s})}function $q(t,e,n,i,r,o,s){t.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+`
`+n+`
`+o+" "+s})}function Ia(t,e,n,i){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+qq(t,n)+(i?" "+i:"")})}function Hq(t,e){t.info(function(){return"TIMEOUT: "+e})}_m.prototype.info=function(){};function qq(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var o=r[0];if(o!="noop"&&o!="stop"&&o!="close")for(var s=1;s<r.length;s++)r[s]=""}}}}return R0(n)}catch{return e}}var Go={},PR=null;function vm(){return PR=PR||new gt}Go.Ta="serverreachability";function r1(t){Rt.call(this,Go.Ta,t)}bt(r1,Rt);function Yl(t){let e=vm();It(e,new r1(e))}Go.STAT_EVENT="statevent";function o1(t,e){Rt.call(this,Go.STAT_EVENT,t),this.stat=e}bt(o1,Rt);function Vt(t){let e=vm();It(e,new o1(e,t))}Go.Ua="timingevent";function s1(t,e){Rt.call(this,Go.Ua,t),this.size=e}bt(s1,Rt);function tu(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return Z.setTimeout(function(){t()},e)}var wm={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},a1={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function O0(){}O0.prototype.h=null;function NR(t){return t.h||(t.h=t.i())}function c1(){}var nu={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function F0(){Rt.call(this,"d")}bt(F0,Rt);function L0(){Rt.call(this,"c")}bt(L0,Rt);var g0;function Em(){}bt(Em,O0);Em.prototype.g=function(){return new XMLHttpRequest};Em.prototype.i=function(){return{}};g0=new Em;function iu(t,e,n,i){this.l=t,this.j=e,this.m=n,this.W=i||1,this.U=new Ql(this),this.P=Gq,t=a0?125:void 0,this.V=new ym(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new l1}function l1(){this.i=null,this.g="",this.h=!1}var Gq=45e3,u1={},b0={};P=iu.prototype;P.setTimeout=function(t){this.P=t};function y0(t,e,n){t.L=1,t.A=Im(Wi(e)),t.u=n,t.S=!0,d1(t,null)}function d1(t,e){t.G=Date.now(),ru(t),t.B=Wi(t.A);var n=t.B,i=t.W;Array.isArray(i)||(i=[String(i)]),_1(n.i,"t",i),t.o=0,n=t.l.J,t.h=new l1,t.g=B1(t.l,n?e:null,!t.u),0<t.O&&(t.M=new p0(Mt(t.Pa,t,t.g),t.O)),n1(t.U,t.g,"readystatechange",t.nb),e=t.I?GR(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),Yl(),zq(t.j,t.v,t.B,t.m,t.W,t.u)}P.nb=function(t){t=t.target;let e=this.M;e&&wi(t)==3?e.l():this.Pa(t)};P.Pa=function(t){try{if(t==this.g)e:{let u=wi(this.g);var e=this.g.Ia();let d=this.g.da();if(!(3>u)&&(u!=3||a0||this.g&&(this.h.h||this.g.ja()||VR(this.g)))){this.J||u!=4||e==7||(e==8||0>=d?Yl(3):Yl(2)),xm(this);var n=this.g.da();this.ca=n;t:if(h1(this)){var i=VR(this.g);t="";var r=i.length,o=wi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){$o(this),Hl(this);var s="";break t}this.h.i=new Z.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:o&&e==r-1});i.length=0,this.h.g+=t,this.o=0,s=this.h.g}else s=this.g.ja();if(this.i=n==200,$q(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ql(a)){var l=a;break t}}l=null}if(n=l)Ia(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_0(this,n);else{this.i=!1,this.s=3,Vt(12),$o(this),Hl(this);break e}}this.S?(f1(this,u,s),a0&&this.i&&u==3&&(n1(this.U,this.V,"tick",this.mb),this.V.start())):(Ia(this.j,this.m,s,null),_0(this,s)),u==4&&$o(this),this.i&&!this.J&&(u==4?F1(this.l,this):(this.i=!1,ru(this)))}else f9(this.g),n==400&&0<s.indexOf("Unknown SID")?(this.s=3,Vt(12)):(this.s=0,Vt(13)),$o(this),Hl(this)}}}catch{}finally{}};function h1(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function f1(t,e,n){let i=!0,r;for(;!t.J&&t.o<n.length;)if(r=Wq(t,n),r==b0){e==4&&(t.s=4,Vt(14),i=!1),Ia(t.j,t.m,null,"[Incomplete Response]");break}else if(r==u1){t.s=4,Vt(15),Ia(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}else Ia(t.j,t.m,r,null),_0(t,r);h1(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,Vt(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),$0(e),e.M=!0,Vt(11))):(Ia(t.j,t.m,n,"[Invalid Chunked Response]"),$o(t),Hl(t))}P.mb=function(){if(this.g){var t=wi(this.g),e=this.g.ja();this.o<e.length&&(xm(this),f1(this,t,e),this.i&&t!=4&&ru(this))}};function Wq(t,e){var n=t.o,i=e.indexOf(`
`,n);return i==-1?b0:(n=Number(e.substring(n,i)),isNaN(n)?u1:(i+=1,i+n>e.length?b0:(e=e.slice(i,i+n),t.o=i+n,e)))}P.cancel=function(){this.J=!0,$o(this)};function ru(t){t.Y=Date.now()+t.P,m1(t,t.P)}function m1(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=tu(Mt(t.lb,t),e)}function xm(t){t.C&&(Z.clearTimeout(t.C),t.C=null)}P.lb=function(){this.C=null;let t=Date.now();0<=t-this.Y?(Hq(this.j,this.B),this.L!=2&&(Yl(),Vt(17)),$o(this),this.s=2,Hl(this)):m1(this,this.Y-t)};function Hl(t){t.l.H==0||t.J||F1(t.l,t)}function $o(t){xm(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,P0(t.V),i1(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function _0(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||v0(n.i,t))){if(!t.K&&v0(n.i,t)&&n.H==3){try{var i=n.Ja.g.parse(e)}catch{i=null}if(Array.isArray(i)&&i.length==3){var r=i;if(r[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)um(n),Tm(n);else break e;z0(n),Vt(18)}}else n.Fa=r[1],0<n.Fa-n.V&&37500>r[2]&&n.G&&n.A==0&&!n.v&&(n.v=tu(Mt(n.ib,n),6e3));if(1>=E1(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Ho(n,11)}else if((t.K||n.g==t)&&um(n),!ql(e))for(r=n.Ja.g.parse(e),e=0;e<r.length;e++){let l=r[e];if(n.V=l[0],l=l[1],n.H==2)if(l[0]=="c"){n.K=l[1],n.pa=l[2];let u=l[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));let d=l[4];d!=null&&(n.Ga=d,n.l.info("SVER="+n.Ga));let h=l[5];h!=null&&typeof h=="number"&&0<h&&(i=1.5*h,n.L=i,n.l.info("backChannelRequestTimeoutMs_="+i)),i=n;let f=t.g;if(f){let m=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(m){var o=i.i;o.g||m.indexOf("spdy")==-1&&m.indexOf("quic")==-1&&m.indexOf("h2")==-1||(o.j=o.l,o.g=new Set,o.h&&(V0(o,o.h),o.h=null))}if(i.F){let p=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;p&&(i.Da=p,Ne(i.I,i.F,p))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),i=n;var s=t;if(i.wa=j1(i,i.J?i.pa:null,i.Y),s.K){x1(i.i,s);var a=s,c=i.L;c&&a.setTimeout(c),a.C&&(xm(a),ru(a)),i.g=s}else N1(i);0<n.j.length&&Sm(n)}else l[0]!="stop"&&l[0]!="close"||Ho(n,7);else n.H==3&&(l[0]=="stop"||l[0]=="close"?l[0]=="stop"?Ho(n,7):U0(n):l[0]!="noop"&&n.h&&n.h.Aa(l),n.A=0)}}Yl(4)}catch{}}function Kq(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(mm(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}e=[],n=0;for(i in t)e[n++]=t[i];return e}function Qq(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(mm(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(let i in t)e[n++]=i;return e}}}function p1(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(mm(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=Qq(t),i=Kq(t),r=i.length,o=0;o<r;o++)e.call(void 0,i[o],n&&n[o],t)}var g1=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Yq(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var o=t[n].substring(0,i);r=t[n].substring(i+1)}else o=t[n];e(o,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}function qo(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof qo){this.h=t.h,cm(this,t.j),this.s=t.s,this.g=t.g,lm(this,t.m),this.l=t.l;var e=t.i,n=new Zl;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),OR(this,n),this.o=t.o}else t&&(e=String(t).match(g1))?(this.h=!1,cm(this,e[1]||"",!0),this.s=zl(e[2]||""),this.g=zl(e[3]||"",!0),lm(this,e[4]),this.l=zl(e[5]||"",!0),OR(this,e[6]||"",!0),this.o=zl(e[7]||"")):(this.h=!1,this.i=new Zl(null,this.h))}qo.prototype.toString=function(){var t=[],e=this.j;e&&t.push($l(e,FR,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push($l(e,FR,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push($l(n,n.charAt(0)=="/"?Jq:Xq,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",$l(n,t9)),t.join("")};function Wi(t){return new qo(t)}function cm(t,e,n){t.j=n?zl(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function lm(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function OR(t,e,n){e instanceof Zl?(t.i=e,n9(t.i,t.h)):(n||(e=$l(e,e9)),t.i=new Zl(e,t.h))}function Ne(t,e,n){t.i.set(e,n)}function Im(t){return Ne(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function zl(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function $l(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,Zq),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Zq(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var FR=/[#\/\?@]/g,Xq=/[#\?:]/g,Jq=/[#\?]/g,e9=/[#\?@]/g,t9=/#/g;function Zl(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Nr(t){t.g||(t.g=new Map,t.h=0,t.i&&Yq(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}P=Zl.prototype;P.add=function(t,e){Nr(this),this.i=null,t=Ta(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function b1(t,e){Nr(t),e=Ta(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function y1(t,e){return Nr(t),e=Ta(t,e),t.g.has(e)}P.forEach=function(t,e){Nr(this),this.g.forEach(function(n,i){n.forEach(function(r){t.call(e,r,i,this)},this)},this)};P.ta=function(){Nr(this);let t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let i=0;i<e.length;i++){let r=t[i];for(let o=0;o<r.length;o++)n.push(e[i])}return n};P.Z=function(t){Nr(this);let e=[];if(typeof t=="string")y1(this,t)&&(e=e.concat(this.g.get(Ta(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};P.set=function(t,e){return Nr(this),this.i=null,t=Ta(this,t),y1(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};P.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function _1(t,e,n){b1(t,e),0<n.length&&(t.i=null,t.g.set(Ta(t,e),I0(n)),t.h+=n.length)}P.toString=function(){if(this.i)return this.i;if(!this.g)return"";let t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var i=e[n];let o=encodeURIComponent(String(i)),s=this.Z(i);for(i=0;i<s.length;i++){var r=o;s[i]!==""&&(r+="="+encodeURIComponent(String(s[i]))),t.push(r)}}return this.i=t.join("&")};function Ta(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function n9(t,e){e&&!t.j&&(Nr(t),t.i=null,t.g.forEach(function(n,i){var r=i.toLowerCase();i!=r&&(b1(this,i),_1(this,r,n))},t)),t.j=e}var i9=class{constructor(t,e){this.g=t,this.map=e}};function v1(t){this.l=t||r9,Z.PerformanceNavigationTiming?(t=Z.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(Z.g&&Z.g.Ka&&Z.g.Ka()&&Z.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var r9=10;function w1(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function E1(t){return t.h?1:t.g?t.g.size:0}function v0(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function V0(t,e){t.g?t.g.add(e):t.h=e}function x1(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}v1.prototype.cancel=function(){if(this.i=I1(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let t of this.g.values())t.cancel();this.g.clear()}};function I1(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(let n of t.g.values())e=e.concat(n.F);return e}return I0(t.i)}var o9=class{stringify(t){return Z.JSON.stringify(t,void 0)}parse(t){return Z.JSON.parse(t,void 0)}};function s9(){this.g=new o9}function a9(t,e,n){let i=n||"";try{p1(t,function(r,o){let s=r;Jl(r)&&(s=R0(r)),e.push(i+o+"="+encodeURIComponent(s))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function c9(t,e){let n=new _m;if(Z.Image){let i=new Image;i.onload=tm(sm,n,i,"TestLoadImage: loaded",!0,e),i.onerror=tm(sm,n,i,"TestLoadImage: error",!1,e),i.onabort=tm(sm,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=tm(sm,n,i,"TestLoadImage: timeout",!1,e),Z.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=t}else e(!1)}function sm(t,e,n,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch{}}function ou(t){this.l=t.ec||null,this.j=t.ob||!1}bt(ou,O0);ou.prototype.g=function(){return new Dm(this.l,this.j)};ou.prototype.i=function(t){return function(){return t}}({});function Dm(t,e){gt.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=j0,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}bt(Dm,gt);var j0=0;P=Dm.prototype;P.open=function(t,e){if(this.readyState!=j0)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Xl(this)};P.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||Z).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};P.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,su(this)),this.readyState=j0};P.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Xl(this)),this.g&&(this.readyState=3,Xl(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Z.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;D1(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function D1(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}P.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?su(this):Xl(this),this.readyState==3&&D1(this)}};P.Za=function(t){this.g&&(this.response=this.responseText=t,su(this))};P.Ya=function(t){this.g&&(this.response=t,su(this))};P.ka=function(){this.g&&su(this)};function su(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Xl(t)}P.setRequestHeader=function(t,e){this.v.append(t,e)};P.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};P.getAllResponseHeaders=function(){if(!this.h)return"";let t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Xl(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Dm.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var l9=Z.JSON.parse;function Ge(t){gt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=C1,this.L=this.M=!1}bt(Ge,gt);var C1="",u9=/^https?$/i,d9=["POST","PUT"];P=Ge.prototype;P.Oa=function(t){this.M=t};P.ha=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():g0.g(),this.C=this.u?NR(this.u):NR(g0),this.g.onreadystatechange=Mt(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(o){LR(this,o);return}if(t=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)n.set(r,i[r]);else if(typeof i.keys=="function"&&typeof i.get=="function")for(let o of i.keys())n.set(o,i.get(o));else throw Error("Unknown input type for opt_headers: "+String(i));i=Array.from(n.keys()).find(o=>o.toLowerCase()=="content-type"),r=Z.FormData&&t instanceof Z.FormData,!(0<=zR(d9,e))||i||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[o,s]of n)this.g.setRequestHeader(o,s);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{A1(this),0<this.B&&((this.L=h9(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Mt(this.ua,this)):this.A=N0(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){LR(this,o)}};function h9(t){return Ca&&typeof t.timeout=="number"&&t.ontimeout!==void 0}P.ua=function(){typeof x0<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,It(this,"timeout"),this.abort(8))};function LR(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,T1(t),Cm(t)}function T1(t){t.F||(t.F=!0,It(t,"complete"),It(t,"error"))}P.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,It(this,"complete"),It(this,"abort"),Cm(this))};P.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Cm(this,!0)),Ge.$.N.call(this)};P.La=function(){this.s||(this.G||this.v||this.l?S1(this):this.kb())};P.kb=function(){S1(this)};function S1(t){if(t.h&&typeof x0<"u"&&(!t.C[1]||wi(t)!=4||t.da()!=2)){if(t.v&&wi(t)==4)N0(t.La,0,t);else if(It(t,"readystatechange"),wi(t)==4){t.h=!1;try{let s=t.da();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var i;if(i=s===0){var r=String(t.I).match(g1)[1]||null;!r&&Z.self&&Z.self.location&&(r=Z.self.location.protocol.slice(0,-1)),i=!u9.test(r?r.toLowerCase():"")}n=i}if(n)It(t,"complete"),It(t,"success");else{t.m=6;try{var o=2<wi(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.da()+"]",T1(t)}}finally{Cm(t)}}}}function Cm(t,e){if(t.g){A1(t);let n=t.g,i=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||It(t,"ready");try{n.onreadystatechange=i}catch{}}}function A1(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(Z.clearTimeout(t.A),t.A=null)}P.isActive=function(){return!!this.g};function wi(t){return t.g?t.g.readyState:0}P.da=function(){try{return 2<wi(this)?this.g.status:-1}catch{return-1}};P.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};P.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),l9(e)}};function VR(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case C1:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function f9(t){let e={};t=(t.g&&2<=wi(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let i=0;i<t.length;i++){if(ql(t[i]))continue;var n=jq(t[i]);let r=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();let o=e[r]||[];e[r]=o,o.push(n)}Oq(e,function(i){return i.join(", ")})}P.Ia=function(){return this.m};P.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function M1(t){let e="";return C0(t,function(n,i){e+=i,e+=":",e+=n,e+=`\r
`}),e}function B0(t,e,n){e:{for(i in n){var i=!1;break e}i=!0}i||(n=M1(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Ne(t,e,n))}function Bl(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function R1(t){this.Ga=0,this.j=[],this.l=new _m,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Bl("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Bl("baseRetryDelayMs",5e3,t),this.hb=Bl("retryDelaySeedMs",1e4,t),this.eb=Bl("forwardChannelMaxRetries",2,t),this.xa=Bl("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new v1(t&&t.concurrentRequestLimit),this.Ja=new s9,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}P=R1.prototype;P.ra=8;P.H=1;function U0(t){if(k1(t),t.H==3){var e=t.W++,n=Wi(t.I);if(Ne(n,"SID",t.K),Ne(n,"RID",e),Ne(n,"TYPE","terminate"),au(t,n),e=new iu(t,t.l,e),e.L=2,e.A=Im(Wi(n)),n=!1,Z.navigator&&Z.navigator.sendBeacon)try{n=Z.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&Z.Image&&(new Image().src=e.A,n=!0),n||(e.g=B1(e.l,null),e.g.ha(e.A)),e.G=Date.now(),ru(e)}V1(t)}function Tm(t){t.g&&($0(t),t.g.cancel(),t.g=null)}function k1(t){Tm(t),t.u&&(Z.clearTimeout(t.u),t.u=null),um(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&Z.clearTimeout(t.m),t.m=null)}function Sm(t){if(!w1(t.i)&&!t.m){t.m=!0;var e=t.Na;Wl||e1(),Kl||(Wl(),Kl=!0),k0.add(e,t),t.C=0}}function m9(t,e){return E1(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=tu(Mt(t.Na,t,e),L1(t,t.C)),t.C++,!0)}P.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;let r=new iu(this,this.l,t),o=this.s;if(this.U&&(o?(o=GR(o),WR(o,this.U)):o=this.U),this.o!==null||this.O||(r.I=o,o=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var i=this.j[n];if("__data__"in i.map&&(i=i.map.__data__,typeof i=="string")){i=i.length;break t}i=void 0}if(i===void 0)break;if(e+=i,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=P1(this,r,e),n=Wi(this.I),Ne(n,"RID",t),Ne(n,"CVER",22),this.F&&Ne(n,"X-HTTP-Session-Id",this.F),au(this,n),o&&(this.O?e="headers="+encodeURIComponent(String(M1(o)))+"&"+e:this.o&&B0(n,this.o,o)),V0(this.i,r),this.bb&&Ne(n,"TYPE","init"),this.P?(Ne(n,"$req",e),Ne(n,"SID","null"),r.aa=!0,y0(r,n,null)):y0(r,n,e),this.H=2}}else this.H==3&&(t?jR(this,t):this.j.length==0||w1(this.i)||jR(this))};function jR(t,e){var n;e?n=e.m:n=t.W++;let i=Wi(t.I);Ne(i,"SID",t.K),Ne(i,"RID",n),Ne(i,"AID",t.V),au(t,i),t.o&&t.s&&B0(i,t.o,t.s),n=new iu(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=P1(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),V0(t.i,n),y0(n,i,e)}function au(t,e){t.na&&C0(t.na,function(n,i){Ne(e,i,n)}),t.h&&p1({},function(n,i){Ne(e,i,n)})}function P1(t,e,n){n=Math.min(t.j.length,n);var i=t.h?Mt(t.h.Va,t.h,t):null;e:{var r=t.j;let o=-1;for(;;){let s=["count="+n];o==-1?0<n?(o=r[0].g,s.push("ofs="+o)):o=0:s.push("ofs="+o);let a=!0;for(let c=0;c<n;c++){let l=r[c].g,u=r[c].map;if(l-=o,0>l)o=Math.max(0,r[c].g-100),a=!1;else try{a9(u,s,"req"+l+"_")}catch{i&&i(u)}}if(a){i=s.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,i}function N1(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Wl||e1(),Kl||(Wl(),Kl=!0),k0.add(e,t),t.A=0}}function z0(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=tu(Mt(t.Ma,t),L1(t,t.A)),t.A++,!0)}P.Ma=function(){if(this.u=null,O1(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=tu(Mt(this.jb,this),t)}};P.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Vt(10),Tm(this),O1(this))};function $0(t){t.B!=null&&(Z.clearTimeout(t.B),t.B=null)}function O1(t){t.g=new iu(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Wi(t.wa);Ne(e,"RID","rpc"),Ne(e,"SID",t.K),Ne(e,"AID",t.V),Ne(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Ne(e,"TO",t.qa),Ne(e,"TYPE","xmlhttp"),au(t,e),t.o&&t.s&&B0(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=Im(Wi(e)),n.u=null,n.S=!0,d1(n,t)}P.ib=function(){this.v!=null&&(this.v=null,Tm(this),z0(this),Vt(19))};function um(t){t.v!=null&&(Z.clearTimeout(t.v),t.v=null)}function F1(t,e){var n=null;if(t.g==e){um(t),$0(t),t.g=null;var i=2}else if(v0(t.i,e))n=e.F,x1(t.i,e),i=1;else return;if(t.H!=0){if(e.i)if(i==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var r=t.C;i=vm(),It(i,new s1(i,n)),Sm(t)}else N1(t);else if(r=e.s,r==3||r==0&&0<e.ca||!(i==1&&m9(t,e)||i==2&&z0(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),r){case 1:Ho(t,5);break;case 4:Ho(t,10);break;case 3:Ho(t,6);break;default:Ho(t,2)}}}function L1(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Ho(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var i=Mt(t.pb,t);n||(n=new qo("//www.google.com/images/cleardot.gif"),Z.location&&Z.location.protocol=="http"||cm(n,"https"),Im(n)),c9(n.toString(),i)}else Vt(2);t.H=0,t.h&&t.h.za(e),V1(t),k1(t)}P.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Vt(2)):(this.l.info("Failed to ping google.com"),Vt(1))};function V1(t){if(t.H=0,t.ma=[],t.h){let e=I1(t.i);(e.length!=0||t.j.length!=0)&&(MR(t.ma,e),MR(t.ma,t.j),t.i.i.length=0,I0(t.j),t.j.length=0),t.h.ya()}}function j1(t,e,n){var i=n instanceof qo?Wi(n):new qo(n);if(i.g!="")e&&(i.g=e+"."+i.g),lm(i,i.m);else{var r=Z.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var o=new qo(null);i&&cm(o,i),e&&(o.g=e),r&&lm(o,r),n&&(o.l=n),i=o}return n=t.F,e=t.Da,n&&e&&Ne(i,n,e),Ne(i,"VER",t.ra),au(t,i),i}function B1(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new Ge(new ou({ob:n})):new Ge(t.va),e.Oa(t.J),e}P.isActive=function(){return!!this.h&&this.h.isActive(this)};function U1(){}P=U1.prototype;P.Ba=function(){};P.Aa=function(){};P.za=function(){};P.ya=function(){};P.isActive=function(){return!0};P.Va=function(){};function dm(){if(Ca&&!(10<=Number(Rq)))throw Error("Environmental error: no available transport.")}dm.prototype.g=function(t,e){return new _n(t,e)};function _n(t,e){gt.call(this),this.g=new R1(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!ql(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ql(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Sa(this)}bt(_n,gt);_n.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Vt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=j1(t,null,t.Y),Sm(t)};_n.prototype.close=function(){U0(this.g)};_n.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=R0(t),t=n);e.j.push(new i9(e.fb++,t)),e.H==3&&Sm(e)};_n.prototype.N=function(){this.g.h=null,delete this.j,U0(this.g),delete this.g,_n.$.N.call(this)};function z1(t){F0.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(let n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}bt(z1,F0);function $1(){L0.call(this),this.status=1}bt($1,L0);function Sa(t){this.g=t}bt(Sa,U1);Sa.prototype.Ba=function(){It(this.g,"a")};Sa.prototype.Aa=function(t){It(this.g,new z1(t))};Sa.prototype.za=function(t){It(this.g,new $1)};Sa.prototype.ya=function(){It(this.g,"b")};function p9(){this.blockSize=-1}function Kn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}bt(Kn,p9);Kn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function s0(t,e,n){n||(n=0);var i=Array(16);if(typeof e=="string")for(var r=0;16>r;++r)i[r]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(r=0;16>r;++r)i[r]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],r=t.g[2];var o=t.g[3],s=e+(o^n&(r^o))+i[0]+3614090360&4294967295;e=n+(s<<7&4294967295|s>>>25),s=o+(r^e&(n^r))+i[1]+3905402710&4294967295,o=e+(s<<12&4294967295|s>>>20),s=r+(n^o&(e^n))+i[2]+606105819&4294967295,r=o+(s<<17&4294967295|s>>>15),s=n+(e^r&(o^e))+i[3]+3250441966&4294967295,n=r+(s<<22&4294967295|s>>>10),s=e+(o^n&(r^o))+i[4]+4118548399&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(r^e&(n^r))+i[5]+1200080426&4294967295,o=e+(s<<12&4294967295|s>>>20),s=r+(n^o&(e^n))+i[6]+2821735955&4294967295,r=o+(s<<17&4294967295|s>>>15),s=n+(e^r&(o^e))+i[7]+4249261313&4294967295,n=r+(s<<22&4294967295|s>>>10),s=e+(o^n&(r^o))+i[8]+1770035416&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(r^e&(n^r))+i[9]+2336552879&4294967295,o=e+(s<<12&4294967295|s>>>20),s=r+(n^o&(e^n))+i[10]+4294925233&4294967295,r=o+(s<<17&4294967295|s>>>15),s=n+(e^r&(o^e))+i[11]+2304563134&4294967295,n=r+(s<<22&4294967295|s>>>10),s=e+(o^n&(r^o))+i[12]+1804603682&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(r^e&(n^r))+i[13]+4254626195&4294967295,o=e+(s<<12&4294967295|s>>>20),s=r+(n^o&(e^n))+i[14]+2792965006&4294967295,r=o+(s<<17&4294967295|s>>>15),s=n+(e^r&(o^e))+i[15]+1236535329&4294967295,n=r+(s<<22&4294967295|s>>>10),s=e+(r^o&(n^r))+i[1]+4129170786&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^r&(e^n))+i[6]+3225465664&4294967295,o=e+(s<<9&4294967295|s>>>23),s=r+(e^n&(o^e))+i[11]+643717713&4294967295,r=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(r^o))+i[0]+3921069994&4294967295,n=r+(s<<20&4294967295|s>>>12),s=e+(r^o&(n^r))+i[5]+3593408605&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^r&(e^n))+i[10]+38016083&4294967295,o=e+(s<<9&4294967295|s>>>23),s=r+(e^n&(o^e))+i[15]+3634488961&4294967295,r=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(r^o))+i[4]+3889429448&4294967295,n=r+(s<<20&4294967295|s>>>12),s=e+(r^o&(n^r))+i[9]+568446438&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^r&(e^n))+i[14]+3275163606&4294967295,o=e+(s<<9&4294967295|s>>>23),s=r+(e^n&(o^e))+i[3]+4107603335&4294967295,r=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(r^o))+i[8]+1163531501&4294967295,n=r+(s<<20&4294967295|s>>>12),s=e+(r^o&(n^r))+i[13]+2850285829&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^r&(e^n))+i[2]+4243563512&4294967295,o=e+(s<<9&4294967295|s>>>23),s=r+(e^n&(o^e))+i[7]+1735328473&4294967295,r=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(r^o))+i[12]+2368359562&4294967295,n=r+(s<<20&4294967295|s>>>12),s=e+(n^r^o)+i[5]+4294588738&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^r)+i[8]+2272392833&4294967295,o=e+(s<<11&4294967295|s>>>21),s=r+(o^e^n)+i[11]+1839030562&4294967295,r=o+(s<<16&4294967295|s>>>16),s=n+(r^o^e)+i[14]+4259657740&4294967295,n=r+(s<<23&4294967295|s>>>9),s=e+(n^r^o)+i[1]+2763975236&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^r)+i[4]+1272893353&4294967295,o=e+(s<<11&4294967295|s>>>21),s=r+(o^e^n)+i[7]+4139469664&4294967295,r=o+(s<<16&4294967295|s>>>16),s=n+(r^o^e)+i[10]+3200236656&4294967295,n=r+(s<<23&4294967295|s>>>9),s=e+(n^r^o)+i[13]+681279174&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^r)+i[0]+3936430074&4294967295,o=e+(s<<11&4294967295|s>>>21),s=r+(o^e^n)+i[3]+3572445317&4294967295,r=o+(s<<16&4294967295|s>>>16),s=n+(r^o^e)+i[6]+76029189&4294967295,n=r+(s<<23&4294967295|s>>>9),s=e+(n^r^o)+i[9]+3654602809&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^r)+i[12]+3873151461&4294967295,o=e+(s<<11&4294967295|s>>>21),s=r+(o^e^n)+i[15]+530742520&4294967295,r=o+(s<<16&4294967295|s>>>16),s=n+(r^o^e)+i[2]+3299628645&4294967295,n=r+(s<<23&4294967295|s>>>9),s=e+(r^(n|~o))+i[0]+4096336452&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~r))+i[7]+1126891415&4294967295,o=e+(s<<10&4294967295|s>>>22),s=r+(e^(o|~n))+i[14]+2878612391&4294967295,r=o+(s<<15&4294967295|s>>>17),s=n+(o^(r|~e))+i[5]+4237533241&4294967295,n=r+(s<<21&4294967295|s>>>11),s=e+(r^(n|~o))+i[12]+1700485571&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~r))+i[3]+2399980690&4294967295,o=e+(s<<10&4294967295|s>>>22),s=r+(e^(o|~n))+i[10]+4293915773&4294967295,r=o+(s<<15&4294967295|s>>>17),s=n+(o^(r|~e))+i[1]+2240044497&4294967295,n=r+(s<<21&4294967295|s>>>11),s=e+(r^(n|~o))+i[8]+1873313359&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~r))+i[15]+4264355552&4294967295,o=e+(s<<10&4294967295|s>>>22),s=r+(e^(o|~n))+i[6]+2734768916&4294967295,r=o+(s<<15&4294967295|s>>>17),s=n+(o^(r|~e))+i[13]+1309151649&4294967295,n=r+(s<<21&4294967295|s>>>11),s=e+(r^(n|~o))+i[4]+4149444226&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~r))+i[11]+3174756917&4294967295,o=e+(s<<10&4294967295|s>>>22),s=r+(e^(o|~n))+i[2]+718787259&4294967295,r=o+(s<<15&4294967295|s>>>17),s=n+(o^(r|~e))+i[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(r+(s<<21&4294967295|s>>>11))&4294967295,t.g[2]=t.g[2]+r&4294967295,t.g[3]=t.g[3]+o&4294967295}Kn.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,i=this.m,r=this.h,o=0;o<e;){if(r==0)for(;o<=n;)s0(this,t,o),o+=this.blockSize;if(typeof t=="string"){for(;o<e;)if(i[r++]=t.charCodeAt(o++),r==this.blockSize){s0(this,i),r=0;break}}else for(;o<e;)if(i[r++]=t[o++],r==this.blockSize){s0(this,i),r=0;break}}this.h=r,this.i+=e};Kn.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var i=0;32>i;i+=8)t[n++]=this.g[e]>>>i&255;return t};function Ce(t,e){this.h=e;for(var n=[],i=!0,r=t.length-1;0<=r;r--){var o=t[r]|0;i&&o==e||(n[r]=o,i=!1)}this.g=n}var g9={};function H0(t){return-128<=t&&128>t?Sq(t,function(e){return new Ce([e|0],0>e?-1:0)}):new Ce([t|0],0>t?-1:0)}function Ei(t){if(isNaN(t)||!isFinite(t))return Da;if(0>t)return xt(Ei(-t));for(var e=[],n=1,i=0;t>=n;i++)e[i]=t/n|0,n*=w0;return new Ce(e,0)}function H1(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return xt(H1(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Ei(Math.pow(e,8)),i=Da,r=0;r<t.length;r+=8){var o=Math.min(8,t.length-r),s=parseInt(t.substring(r,r+o),e);8>o?(o=Ei(Math.pow(e,o)),i=i.R(o).add(Ei(s))):(i=i.R(n),i=i.add(Ei(s)))}return i}var w0=4294967296,Da=H0(0),E0=H0(1),BR=H0(16777216);P=Ce.prototype;P.ea=function(){if(Rn(this))return-xt(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var i=this.D(n);t+=(0<=i?i:w0+i)*e,e*=w0}return t};P.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Gi(this))return"0";if(Rn(this))return"-"+xt(this).toString(t);for(var e=Ei(Math.pow(t,6)),n=this,i="";;){var r=fm(n,e).g;n=hm(n,r.R(e));var o=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=r,Gi(n))return o+i;for(;6>o.length;)o="0"+o;i=o+i}};P.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Gi(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Rn(t){return t.h==-1}P.X=function(t){return t=hm(this,t),Rn(t)?-1:Gi(t)?0:1};function xt(t){for(var e=t.g.length,n=[],i=0;i<e;i++)n[i]=~t.g[i];return new Ce(n,~t.h).add(E0)}P.abs=function(){return Rn(this)?xt(this):this};P.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0,r=0;r<=e;r++){var o=i+(this.D(r)&65535)+(t.D(r)&65535),s=(o>>>16)+(this.D(r)>>>16)+(t.D(r)>>>16);i=s>>>16,o&=65535,s&=65535,n[r]=s<<16|o}return new Ce(n,n[n.length-1]&-2147483648?-1:0)};function hm(t,e){return t.add(xt(e))}P.R=function(t){if(Gi(this)||Gi(t))return Da;if(Rn(this))return Rn(t)?xt(this).R(xt(t)):xt(xt(this).R(t));if(Rn(t))return xt(this.R(xt(t)));if(0>this.X(BR)&&0>t.X(BR))return Ei(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],i=0;i<2*e;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<t.g.length;r++){var o=this.D(i)>>>16,s=this.D(i)&65535,a=t.D(r)>>>16,c=t.D(r)&65535;n[2*i+2*r]+=s*c,am(n,2*i+2*r),n[2*i+2*r+1]+=o*c,am(n,2*i+2*r+1),n[2*i+2*r+1]+=s*a,am(n,2*i+2*r+1),n[2*i+2*r+2]+=o*a,am(n,2*i+2*r+2)}for(i=0;i<e;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=e;i<2*e;i++)n[i]=0;return new Ce(n,0)};function am(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Ul(t,e){this.g=t,this.h=e}function fm(t,e){if(Gi(e))throw Error("division by zero");if(Gi(t))return new Ul(Da,Da);if(Rn(t))return e=fm(xt(t),e),new Ul(xt(e.g),xt(e.h));if(Rn(e))return e=fm(t,xt(e)),new Ul(xt(e.g),e.h);if(30<t.g.length){if(Rn(t)||Rn(e))throw Error("slowDivide_ only works with positive integers.");for(var n=E0,i=e;0>=i.X(t);)n=UR(n),i=UR(i);var r=xa(n,1),o=xa(i,1);for(i=xa(i,2),n=xa(n,2);!Gi(i);){var s=o.add(i);0>=s.X(t)&&(r=r.add(n),o=s),i=xa(i,1),n=xa(n,1)}return e=hm(t,r.R(e)),new Ul(r,e)}for(r=Da;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),i=Math.ceil(Math.log(n)/Math.LN2),i=48>=i?1:Math.pow(2,i-48),o=Ei(n),s=o.R(e);Rn(s)||0<s.X(t);)n-=i,o=Ei(n),s=o.R(e);Gi(o)&&(o=E0),r=r.add(o),t=hm(t,s)}return new Ul(r,t)}P.gb=function(t){return fm(this,t).h};P.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)&t.D(i);return new Ce(n,this.h&t.h)};P.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)|t.D(i);return new Ce(n,this.h|t.h)};P.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)^t.D(i);return new Ce(n,this.h^t.h)};function UR(t){for(var e=t.g.length+1,n=[],i=0;i<e;i++)n[i]=t.D(i)<<1|t.D(i-1)>>>31;return new Ce(n,t.h)}function xa(t,e){var n=e>>5;e%=32;for(var i=t.g.length-n,r=[],o=0;o<i;o++)r[o]=0<e?t.D(o+n)>>>e|t.D(o+n+1)<<32-e:t.D(o+n);return new Ce(r,t.h)}dm.prototype.createWebChannel=dm.prototype.g;_n.prototype.send=_n.prototype.u;_n.prototype.open=_n.prototype.m;_n.prototype.close=_n.prototype.close;wm.NO_ERROR=0;wm.TIMEOUT=8;wm.HTTP_ERROR=6;a1.COMPLETE="complete";c1.EventType=nu;nu.OPEN="a";nu.CLOSE="b";nu.ERROR="c";nu.MESSAGE="d";gt.prototype.listen=gt.prototype.O;Ge.prototype.listenOnce=Ge.prototype.P;Ge.prototype.getLastError=Ge.prototype.Sa;Ge.prototype.getLastErrorCode=Ge.prototype.Ia;Ge.prototype.getStatus=Ge.prototype.da;Ge.prototype.getResponseJson=Ge.prototype.Wa;Ge.prototype.getResponseText=Ge.prototype.ja;Ge.prototype.send=Ge.prototype.ha;Ge.prototype.setWithCredentials=Ge.prototype.Oa;Kn.prototype.digest=Kn.prototype.l;Kn.prototype.reset=Kn.prototype.reset;Kn.prototype.update=Kn.prototype.j;Ce.prototype.add=Ce.prototype.add;Ce.prototype.multiply=Ce.prototype.R;Ce.prototype.modulo=Ce.prototype.gb;Ce.prototype.compare=Ce.prototype.X;Ce.prototype.toNumber=Ce.prototype.ea;Ce.prototype.toString=Ce.prototype.toString;Ce.prototype.getBits=Ce.prototype.D;Ce.fromNumber=Ei;Ce.fromString=H1;var q1=Qn.createWebChannelTransport=function(){return new dm},G1=Qn.getStatEventTarget=function(){return vm()},Am=Qn.ErrorCode=wm,W1=Qn.EventType=a1,K1=Qn.Event=Go,q0=Qn.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Iie=Qn.FetchXmlHttpFactory=ou,cu=Qn.WebChannel=c1,Q1=Qn.XhrIo=Ge,Y1=Qn.Md5=Kn,Wo=Qn.Integer=Ce;var Z1="@firebase/firestore";var ct=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ct.UNAUTHENTICATED=new ct(null),ct.GOOGLE_CREDENTIALS=new ct("google-credentials-uid"),ct.FIRST_PARTY=new ct("first-party-uid"),ct.MOCK_USER=new ct("mock-user");var rc="10.7.0";var Ur=new nd("@firebase/firestore");function Pa(){return Ur.logLevel}function Yk(t){Ur.setLogLevel(t)}function x(t,...e){if(Ur.logLevel<=ti.DEBUG){let n=e.map(GE);Ur.debug(`Firestore (${rc}): ${t}`,...n)}}function Ze(t,...e){if(Ur.logLevel<=ti.ERROR){let n=e.map(GE);Ur.error(`Firestore (${rc}): ${t}`,...n)}}function Pn(t,...e){if(Ur.logLevel<=ti.WARN){let n=e.map(GE);Ur.warn(`Firestore (${rc}): ${t}`,...n)}}function GE(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function F(t="Unexpected state"){let e=`FIRESTORE (${rc}) INTERNAL ASSERTION FAILED: `+t;throw Ze(e),new Error(e)}function j(t,e){t||F()}function Zk(t,e){t||F()}function N(t,e){return t}var y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},E=class extends Xx{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var lt=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Bm=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Y0=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ct.UNAUTHENTICATED))}shutdown(){}},Z0=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},X0=class{constructor(e){this.t=e,this.currentUser=ct.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let i=this.i,r=c=>this.i!==i?(i=this.i,n(c)):Promise.resolve(),o=new lt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new lt,e.enqueueRetryable(()=>r(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>_(this,null,function*(){yield c.promise,yield r(this.currentUser)}))},a=c=>{x("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(x("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new lt)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(x("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(j(typeof i.accessToken=="string"),new Bm(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return j(e===null||typeof e=="string"),new ct(e)}},J0=class{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=ct.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},ew=class{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new J0(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ct.FIRST_PARTY))}shutdown(){}invalidateToken(){}},tw=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},nw=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let i=o=>{o.error!=null&&x("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,x("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};let r=o=>{x("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?r(o):x("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(j(typeof n.token=="string"),this.R=n.token,new tw(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function b9(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}var Um=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,i="";for(;i.length<20;){let r=b9(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%e.length))}return i}};function ne(t,e){return t<e?-1:t>e?1:0}function za(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}function Xk(t){return t+"\0"}var ze=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new E(y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new E(y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new E(y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new E(y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new t(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ne(this.nanoseconds,e.nanoseconds):ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var $=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new ze(0,0))}static max(){return new t(new ze(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var zm=class t{constructor(e,n,i){n===void 0?n=0:n>e.length&&F(),i===void 0?i=e.length-n:i>e.length-n&&F(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let i=Math.min(e.length,n.length);for(let r=0;r<i;r++){let o=e.get(r),s=n.get(r);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},ve=class t extends zm{construct(e,n,i){return new t(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){let n=[];for(let i of e){if(i.indexOf("//")>=0)throw new E(y.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new t(n)}static emptyPath(){return new t([])}},y9=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Xe=class t extends zm{construct(e,n,i){return new t(e,n,i)}static isValidIdentifier(e){return y9.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],i="",r=0,o=()=>{if(i.length===0)throw new E(y.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""},s=!1;for(;r<e.length;){let a=e[r];if(a==="\\"){if(r+1===e.length)throw new E(y.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new E(y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=c,r+=2}else a==="`"?(s=!s,r++):a!=="."||s?(i+=a,r++):(o(),r++)}if(o(),s)throw new E(y.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var k=class t{constructor(e){this.path=e}static fromPath(e){return new t(ve.fromString(e))}static fromName(e){return new t(ve.fromString(e).popFirst(5))}static empty(){return new t(ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ve.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new ve(e.slice()))}};var $a=class{constructor(e,n,i,r){this.indexId=e,this.collectionGroup=n,this.fields=i,this.indexState=r}};function iw(t){return t.fields.find(e=>e.kind===2)}function Qo(t){return t.fields.filter(e=>e.kind!==2)}$a.UNKNOWN_ID=-1;var ja=class{constructor(e,n){this.fieldPath=e,this.kind=n}};var vu=class t{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new t(0,Nn.min())}};function Jk(t,e){let n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=$.fromTimestamp(i===1e9?new ze(n+1,0):new ze(n,i));return new Nn(r,k.empty(),e)}function eP(t){return new Nn(t.readTime,t.key,-1)}var Nn=class t{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new t($.min(),k.empty(),-1)}static max(){return new t($.max(),k.empty(),-1)}};function WE(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=k.comparator(t.documentKey,e.documentKey),n!==0?n:ne(t.largestBatchId,e.largestBatchId))}var tP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",$m=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Xr(t){return _(this,null,function*(){if(t.code!==y.FAILED_PRECONDITION||t.message!==tP)throw t;x("LocalStore","Unexpectedly lost primary lease")})}var b=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&F(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,i)=>{n(e)})}static reject(e){return new t((n,i)=>{i(e)})}static waitFor(e){return new t((n,i)=>{let r=0,o=0,s=!1;e.forEach(a=>{++r,a.next(()=>{++o,s&&o===r&&n()},c=>i(c))}),s=!0,o===r&&n()})}static or(e){let n=t.resolve(!1);for(let i of e)n=n.next(r=>r?t.resolve(r):i());return n}static forEach(e,n){let i=[];return e.forEach((r,o)=>{i.push(n.call(this,r,o))}),this.waitFor(i)}static mapArray(e,n){return new t((i,r)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let l=c;n(e[l]).next(u=>{s[l]=u,++a,a===o&&i(s)},u=>r(u))}})}static doWhile(e,n){return new t((i,r)=>{let o=()=>{e()===!0?n().next(()=>{o()},r):i()};o()})}};var Hm=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new lt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new ts(e,n.error)):this.V.resolve()},this.transaction.onerror=i=>{let r=KE(i.target.error);this.V.reject(new ts(e,r))}}static open(e,n,i,r){try{return new t(n,e.transaction(r,i))}catch(o){throw new ts(n,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(x("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new ow(n)}},zr=class t{constructor(e,n,i){this.name=e,this.version=n,this.p=i,t.S(ed())===12.2&&Ze("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return x("SimpleDb","Removing database:",e),Yo(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!td())return!1;if(t.C())return!0;let e=ed(),n=t.S(e),i=0<n&&n<10,r=t.v(e),o=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||o)}static C(){var e;return typeof process<"u"&&((e=process.env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static v(e){let n=e.match(/Android ([\d.]+)/i),i=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(i)}O(e){return _(this,null,function*(){return this.db||(x("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,i)=>{let r=indexedDB.open(this.name,this.version);r.onsuccess=o=>{let s=o.target.result;n(s)},r.onblocked=()=>{i(new ts(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=o=>{let s=o.target.error;s.name==="VersionError"?i(new E(y.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?i(new E(y.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):i(new ts(e,s))},r.onupgradeneeded=o=>{x("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.N(s,r.transaction,o.oldVersion,this.version).next(()=>{x("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=n=>this.B(n)),this.db})}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,i,r){return _(this,null,function*(){let o=n==="readonly",s=0;for(;;){++s;try{this.db=yield this.O(e);let a=Hm.open(this.db,e,o?"readonly":"readwrite",i),c=r(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),b.reject(l))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&s<3;if(x("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}},rw=class{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Yo(this.k.delete())}},ts=class extends E{constructor(e,n){super(y.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function Jr(t){return t.name==="IndexedDbTransactionError"}var ow=class{constructor(e){this.store=e}put(e,n){let i;return n!==void 0?(x("SimpleDb","PUT",this.store.name,e,n),i=this.store.put(n,e)):(x("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),Yo(i)}add(e){return x("SimpleDb","ADD",this.store.name,e,e),Yo(this.store.add(e))}get(e){return Yo(this.store.get(e)).next(n=>(n===void 0&&(n=null),x("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return x("SimpleDb","DELETE",this.store.name,e),Yo(this.store.delete(e))}count(){return x("SimpleDb","COUNT",this.store.name),Yo(this.store.count())}W(e,n){let i=this.options(e,n);if(i.index||typeof this.store.getAll!="function"){let r=this.cursor(i),o=[];return this.G(r,(s,a)=>{o.push(a)}).next(()=>o)}{let r=this.store.getAll(i.range);return new b((o,s)=>{r.onerror=a=>{s(a.target.error)},r.onsuccess=a=>{o(a.target.result)}})}}j(e,n){let i=this.store.getAll(e,n===null?void 0:n);return new b((r,o)=>{i.onerror=s=>{o(s.target.error)},i.onsuccess=s=>{r(s.target.result)}})}H(e,n){x("SimpleDb","DELETE ALL",this.store.name);let i=this.options(e,n);i.J=!1;let r=this.cursor(i);return this.G(r,(o,s,a)=>a.delete())}Y(e,n){let i;n?i=e:(i={},n=e);let r=this.cursor(i);return this.G(r,n)}Z(e){let n=this.cursor({});return new b((i,r)=>{n.onerror=o=>{let s=KE(o.target.error);r(s)},n.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():i()}):i()}})}G(e,n){let i=[];return new b((r,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void r();let c=new rw(a),l=n(a.primaryKey,a.value,c);if(l instanceof b){let u=l.catch(d=>(c.done(),b.reject(d)));i.push(u)}c.isDone?r():c.$===null?a.continue():a.continue(c.$)}}).next(()=>b.waitFor(i))}options(e,n){let i;return e!==void 0&&(typeof e=="string"?i=e:n=e),{index:i,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let i=this.store.index(e.index);return e.J?i.openKeyCursor(e.range,n):i.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function Yo(t){return new b((e,n)=>{t.onsuccess=i=>{let r=i.target.result;e(r)},t.onerror=i=>{let r=KE(i.target.error);n(r)}})}var X1=!1;function KE(t){let e=zr.S(ed());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let i=new E("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return X1||(X1=!0,setTimeout(()=>{throw i},0)),i}}return t}var sw=class{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ee(e){x("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>_(this,null,function*(){this.task=null;try{x("IndexBackiller",`Documents written: ${yield this.X.te()}`)}catch(n){Jr(n)?x("IndexBackiller","Ignoring IndexedDB error during index backfill: ",n):yield Xr(n)}yield this.ee(6e4)}))}},aw=class{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){return _(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.ne(n,e))})}ne(e,n){let i=new Set,r=n,o=!0;return b.doWhile(()=>o===!0&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!i.has(s))return x("IndexBackiller",`Processing collection: ${s}`),this.re(e,s,r).next(a=>{r-=a,i.add(s)});o=!1})).next(()=>n-r)}re(e,n,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(r=>this.localStore.localDocuments.getNextDocuments(e,n,r,i).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.ie(r,o)).next(a=>(x("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>s.size)}))}ie(e,n){let i=e;return n.changes.forEach((r,o)=>{let s=eP(o);WE(s,i)>0&&(i=s)}),new Nn(i.readTime,i.documentKey,Math.max(n.batchId,e.largestBatchId))}};var vn=(()=>{class t{constructor(n,i){this.previousValue=n,i&&(i.sequenceNumberHandler=r=>this.se(r),this.oe=r=>i.writeSequenceNumber(r))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.oe&&this.oe(n),n}}return t._e=-1,t})();function Hu(t){return t==null}function wu(t){return t===0&&1/t==-1/0}function nP(t){return typeof t=="number"&&Number.isInteger(t)&&!wu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function jt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=J1(e)),e=_9(t.get(n),e);return J1(e)}function _9(t,e){let n=e,i=t.length;for(let r=0;r<i;r++){let o=t.charAt(r);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function J1(t){return t+""}function xi(t){let e=t.length;if(j(e>=2),e===2)return j(t.charAt(0)===""&&t.charAt(1)===""),ve.emptyPath();let n=e-2,i=[],r="";for(let o=0;o<e;){let s=t.indexOf("",o);switch((s<0||s>n)&&F(),t.charAt(s+1)){case"":let a=t.substring(o,s),c;r.length===0?c=a:(r+=a,c=r,r=""),i.push(c);break;case"":r+=t.substring(o,s),r+="\0";break;case"":r+=t.substring(o,s+1);break;default:F()}o=s+2}return new ve(i)}var ek=["userId","batchId"];function Nm(t,e){return[t,jt(e)]}function iP(t,e,n){return[t,jt(e),n]}var v9={},w9=["prefixPath","collectionGroup","readTime","documentId"],E9=["prefixPath","collectionGroup","documentId"],x9=["collectionGroup","readTime","prefixPath","documentId"],I9=["canonicalId","targetId"],D9=["targetId","path"],C9=["path","targetId"],T9=["collectionId","parent"],S9=["indexId","uid"],A9=["uid","sequenceNumber"],M9=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],R9=["indexId","uid","orderedDocumentKey"],k9=["userId","collectionPath","documentId"],P9=["userId","collectionPath","largestBatchId"],N9=["userId","collectionGroup","largestBatchId"],rP=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],O9=[...rP,"documentOverlays"],oP=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],sP=oP,F9=[...sP,"indexConfiguration","indexState","indexEntries"];var Eu=class extends $m{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}};function _t(t,e){let n=N(t);return zr.M(n.ae,e)}function tk(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function fs(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function aP(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Oe=class t{constructor(e,n){this.comparator=e,this.root=n||Di.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Di.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Di.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){let e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Va(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Va(this.root,e,this.comparator,!1)}getReverseIterator(){return new Va(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Va(this.root,e,this.comparator,!0)}},Va=class{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Di=class t{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??t.RED,this.left=r??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,o){return new t(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this,o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return t.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw F();let e=this.left.check();if(e!==this.right.check())throw F();return e+(this.isRed()?0:1)}};Di.EMPTY=null,Di.RED=!0,Di.BLACK=!1;Di.EMPTY=new class{constructor(){this.size=0}get key(){throw F()}get value(){throw F()}get color(){throw F()}get left(){throw F()}get right(){throw F()}copy(e,n,i,r,o){return this}insert(e,n,i){return new Di(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Me=class t{constructor(e){this.comparator=e,this.data=new Oe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new qm(this.data.getIterator())}getIteratorFrom(e){return new qm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){let r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},qm=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Aa(t){return t.hasNext()?t.getNext():void 0}var wn=class t{constructor(e){this.fields=e,e.sort(Xe.comparator)}static empty(){return new t([])}unionWith(e){let n=new Me(Xe.comparator);for(let i of this.fields)n=n.add(i);for(let i of e)n=n.add(i);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return za(this.fields,e.fields,(n,i)=>n.isEqual(i))}};var Gm=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function cP(){return typeof atob<"u"}var yt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Gm("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(r){let o="";for(let s=0;s<r.length;++s)o+=String.fromCharCode(r[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};yt.EMPTY_BYTE_STRING=new yt("");var L9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $r(t){if(j(!!t),typeof t=="string"){let e=0,n=L9.exec(t);if(j(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}let i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:We(t.seconds),nanos:We(t.nanos)}}function We(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Hr(t){return typeof t=="string"?yt.fromBase64String(t):yt.fromUint8Array(t)}function Fp(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function QE(t){let e=t.mapValue.fields.__previous_value__;return Fp(e)?QE(e):e}function xu(t){let e=$r(t.mapValue.fields.__local_write_time__.timestampValue);return new ze(e.seconds,e.nanos)}var cw=class{constructor(e,n,i,r,o,s,a,c,l){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},qr=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var jr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Om={nullValue:"NULL_VALUE"};function ns(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Fp(t)?4:lP(t)?9007199254740991:10:F()}function Si(t,e){if(t===e)return!0;let n=ns(t);if(n!==ns(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return xu(t).isEqual(xu(e));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;let s=$r(r.timestampValue),a=$r(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,o){return Hr(r.bytesValue).isEqual(Hr(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,o){return We(r.geoPointValue.latitude)===We(o.geoPointValue.latitude)&&We(r.geoPointValue.longitude)===We(o.geoPointValue.longitude)}(t,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return We(r.integerValue)===We(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){let s=We(r.doubleValue),a=We(o.doubleValue);return s===a?wu(s)===wu(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return za(t.arrayValue.values||[],e.arrayValue.values||[],Si);case 10:return function(r,o){let s=r.mapValue.fields||{},a=o.mapValue.fields||{};if(tk(s)!==tk(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!Si(s[c],a[c])))return!1;return!0}(t,e);default:return F()}}function Iu(t,e){return(t.values||[]).find(n=>Si(n,e))!==void 0}function Gr(t,e){if(t===e)return 0;let n=ns(t),i=ns(e);if(n!==i)return ne(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return ne(t.booleanValue,e.booleanValue);case 2:return function(o,s){let a=We(o.integerValue||o.doubleValue),c=We(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return nk(t.timestampValue,e.timestampValue);case 4:return nk(xu(t),xu(e));case 5:return ne(t.stringValue,e.stringValue);case 6:return function(o,s){let a=Hr(o),c=Hr(s);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let l=0;l<a.length&&l<c.length;l++){let u=ne(a[l],c[l]);if(u!==0)return u}return ne(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let a=ne(We(o.latitude),We(s.latitude));return a!==0?a:ne(We(o.longitude),We(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(o,s){let a=o.values||[],c=s.values||[];for(let l=0;l<a.length&&l<c.length;++l){let u=Gr(a[l],c[l]);if(u)return u}return ne(a.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(o,s){if(o===jr.mapValue&&s===jr.mapValue)return 0;if(o===jr.mapValue)return 1;if(s===jr.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),l=s.fields||{},u=Object.keys(l);c.sort(),u.sort();for(let d=0;d<c.length&&d<u.length;++d){let h=ne(c[d],u[d]);if(h!==0)return h;let f=Gr(a[c[d]],l[u[d]]);if(f!==0)return f}return ne(c.length,u.length)}(t.mapValue,e.mapValue);default:throw F()}}function nk(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ne(t,e);let n=$r(t),i=$r(e),r=ne(n.seconds,i.seconds);return r!==0?r:ne(n.nanos,i.nanos)}function Ha(t){return lw(t)}function lw(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let i=$r(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Hr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return k.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(let o of n.values||[])r?r=!1:i+=",",i+=lw(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){let i=Object.keys(n.fields||{}).sort(),r="{",o=!0;for(let s of i)o?o=!1:r+=",",r+=`${s}:${lw(n.fields[s])}`;return r+"}"}(t.mapValue):F()}function is(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function uw(t){return!!t&&"integerValue"in t}function Du(t){return!!t&&"arrayValue"in t}function ik(t){return!!t&&"nullValue"in t}function rk(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Fm(t){return!!t&&"mapValue"in t}function pu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return fs(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=pu(i)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=pu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function lP(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function V9(t){return"nullValue"in t?Om:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?is(qr.empty(),k.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:F()}function j9(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?is(qr.empty(),k.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?jr:F()}function ok(t,e){let n=Gr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function sk(t,e){let n=Gr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}var Pt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Fm(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=pu(n)}setAll(e){let n=Xe.emptyPath(),i={},r=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,i,r),i={},r=[],n=a.popLast()}s?i[a.lastSegment()]=pu(s):r.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(e){let n=this.field(e.popLast());Fm(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Si(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Fm(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){fs(n,(r,o)=>e[r]=o);for(let r of i)delete e[r]}clone(){return new t(pu(this.value))}};function uP(t){let e=[];return fs(t.fields,(n,i)=>{let r=new Xe([n]);if(Fm(i)){let o=uP(i.mapValue).fields;if(o.length===0)e.push(r);else for(let s of o)e.push(r.child(s))}else e.push(r)}),new wn(e)}var ut=class t{constructor(e,n,i,r,o,s,a){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,$.min(),$.min(),$.min(),Pt.empty(),0)}static newFoundDocument(e,n,i,r){return new t(e,1,n,$.min(),i,r,0)}static newNoDocument(e,n){return new t(e,2,n,$.min(),$.min(),Pt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,$.min(),$.min(),Pt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual($.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=$.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ai=class{constructor(e,n){this.position=e,this.inclusive=n}};function ak(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){let o=e[r],s=t.position[r];if(o.field.isKeyField()?i=k.comparator(k.fromName(s.referenceValue),n.key):i=Gr(s,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function ck(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Si(t.position[n],e.position[n]))return!1;return!0}var rs=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function B9(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Wm=class{},ue=class t extends Wm{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new fw(e,n,i):n==="array-contains"?new gw(e,i):n==="in"?new Km(e,i):n==="not-in"?new bw(e,i):n==="array-contains-any"?new yw(e,i):new t(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new mw(e,i):new pw(e,i)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Gr(n,this.value)):n!==null&&ns(this.value)===ns(n)&&this.matchesComparison(Gr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return F()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Te=class t extends Wm{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new t(e,n)}matches(e){return qa(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}};function qa(t){return t.op==="and"}function dw(t){return t.op==="or"}function YE(t){return dP(t)&&qa(t)}function dP(t){for(let e of t.filters)if(e instanceof Te)return!1;return!0}function hw(t){if(t instanceof ue)return t.field.canonicalString()+t.op.toString()+Ha(t.value);if(YE(t))return t.filters.map(e=>hw(e)).join(",");{let e=t.filters.map(n=>hw(n)).join(",");return`${t.op}(${e})`}}function hP(t,e){return t instanceof ue?function(i,r){return r instanceof ue&&i.op===r.op&&i.field.isEqual(r.field)&&Si(i.value,r.value)}(t,e):t instanceof Te?function(i,r){return r instanceof Te&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,s,a)=>o&&hP(s,r.filters[a]),!0):!1}(t,e):void F()}function fP(t,e){let n=t.filters.concat(e);return Te.create(n,t.op)}function mP(t){return t instanceof ue?function(n){return`${n.field.canonicalString()} ${n.op} ${Ha(n.value)}`}(t):t instanceof Te?function(n){return n.op.toString()+" {"+n.getFilters().map(mP).join(" ,")+"}"}(t):"Filter"}var fw=class extends ue{constructor(e,n,i){super(e,n,i),this.key=k.fromName(i.referenceValue)}matches(e){let n=k.comparator(e.key,this.key);return this.matchesComparison(n)}},mw=class extends ue{constructor(e,n){super(e,"in",n),this.keys=pP("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},pw=class extends ue{constructor(e,n){super(e,"not-in",n),this.keys=pP("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function pP(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>k.fromName(i.referenceValue))}var gw=class extends ue{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Du(n)&&Iu(n.arrayValue,this.value)}},Km=class extends ue{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Iu(this.value.arrayValue,n)}},bw=class extends ue{constructor(e,n){super(e,"not-in",n)}matches(e){if(Iu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!Iu(this.value.arrayValue,n)}},yw=class extends ue{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Du(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Iu(this.value.arrayValue,i))}};var _w=class{constructor(e,n=null,i=[],r=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=s,this.endAt=a,this.ce=null}};function vw(t,e=null,n=[],i=[],r=null,o=null,s=null){return new _w(t,e,n,i,r,o,s)}function os(t){let e=N(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>hw(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),Hu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Ha(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Ha(i)).join(",")),e.ce=n}return e.ce}function qu(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!B9(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!hP(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ck(t.startAt,e.startAt)&&ck(t.endAt,e.endAt)}function Qm(t){return k.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Ym(t,e){return t.filters.filter(n=>n instanceof ue&&n.field.isEqual(e))}function lk(t,e,n){let i=Om,r=!0;for(let o of Ym(t,e)){let s=Om,a=!0;switch(o.op){case"<":case"<=":s=V9(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=Om}ok({value:i,inclusive:r},{value:s,inclusive:a})<0&&(i=s,r=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];ok({value:i,inclusive:r},{value:s,inclusive:n.inclusive})<0&&(i=s,r=n.inclusive);break}}return{value:i,inclusive:r}}function uk(t,e,n){let i=jr,r=!0;for(let o of Ym(t,e)){let s=jr,a=!0;switch(o.op){case">=":case">":s=j9(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=jr}sk({value:i,inclusive:r},{value:s,inclusive:a})>0&&(i=s,r=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];sk({value:i,inclusive:r},{value:s,inclusive:n.inclusive})>0&&(i=s,r=n.inclusive);break}}return{value:i,inclusive:r}}var Yn=class{constructor(e,n=null,i=[],r=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}};function gP(t,e,n,i,r,o,s,a){return new Yn(t,e,n,i,r,o,s,a)}function oc(t){return new Yn(t)}function dk(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function ZE(t){return t.collectionGroup!==null}function Ba(t){let e=N(t);if(e.le===null){e.le=[];let n=new Set;for(let o of e.explicitOrderBy)e.le.push(o),n.add(o.field.canonicalString());let i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Me(Xe.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.le.push(new rs(o,i))}),n.has(Xe.keyField().canonicalString())||e.le.push(new rs(Xe.keyField(),i))}return e.le}function Bt(t){let e=N(t);return e.he||(e.he=U9(e,Ba(t))),e.he}function U9(t,e){if(t.limitType==="F")return vw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{let o=r.dir==="desc"?"asc":"desc";return new rs(r.field,o)});let n=t.endAt?new Ai(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Ai(t.startAt.position,t.startAt.inclusive):null;return vw(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function ww(t,e){let n=t.filters.concat([e]);return new Yn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Zm(t,e,n){return new Yn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Gu(t,e){return qu(Bt(t),Bt(e))&&t.limitType===e.limitType}function bP(t){return`${os(Bt(t))}|lt:${t.limitType}`}function Na(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>mP(r)).join(", ")}]`),Hu(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Ha(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Ha(r)).join(",")),`Target(${i})`}(Bt(t))}; limitType=${t.limitType})`}function Wu(t,e){return e.isFoundDocument()&&function(i,r){let o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):k.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,r){for(let o of Ba(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,r){for(let o of i.filters)if(!o.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(s,a,c){let l=ak(s,a,c);return s.inclusive?l<=0:l<0}(i.startAt,Ba(i),r)||i.endAt&&!function(s,a,c){let l=ak(s,a,c);return s.inclusive?l>=0:l>0}(i.endAt,Ba(i),r))}(t,e)}function yP(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function _P(t){return(e,n)=>{let i=!1;for(let r of Ba(t)){let o=z9(r,e,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function z9(t,e,n){let i=t.field.isKeyField()?k.comparator(e.key,n.key):function(o,s,a){let c=s.data.field(o),l=a.data.field(o);return c!==null&&l!==null?Gr(c,l):F()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return F()}}var Mi=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(let[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){fs(this.inner,(n,i)=>{for(let[r,o]of i)e(r,o)})}isEmpty(){return aP(this.inner)}size(){return this.innerSize}};var $9=new Oe(k.comparator);function en(){return $9}var vP=new Oe(k.comparator);function fu(...t){let e=vP;for(let n of t)e=e.insert(n.key,n);return e}function wP(t){let e=vP;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Ii(){return gu()}function EP(){return gu()}function gu(){return new Mi(t=>t.toString(),(t,e)=>t.isEqual(e))}var H9=new Oe(k.comparator),q9=new Me(k.comparator);function ie(...t){let e=q9;for(let n of t)e=e.add(n);return e}var G9=new Me(ne);function XE(){return G9}function xP(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wu(e)?"-0":e}}function IP(t){return{integerValue:""+t}}function DP(t,e){return nP(e)?IP(e):xP(t,e)}var Ga=class{constructor(){this._=void 0}};function W9(t,e,n){return t instanceof Wr?function(r,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&Fp(o)&&(o=QE(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof Yi?TP(t,e):t instanceof Zi?SP(t,e):function(r,o){let s=CP(r,o),a=hk(s)+hk(r.Ie);return uw(s)&&uw(r.Ie)?IP(a):xP(r.serializer,a)}(t,e)}function K9(t,e,n){return t instanceof Yi?TP(t,e):t instanceof Zi?SP(t,e):n}function CP(t,e){return t instanceof Kr?function(i){return uw(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}var Wr=class extends Ga{},Yi=class extends Ga{constructor(e){super(),this.elements=e}};function TP(t,e){let n=AP(e);for(let i of t.elements)n.some(r=>Si(r,i))||n.push(i);return{arrayValue:{values:n}}}var Zi=class extends Ga{constructor(e){super(),this.elements=e}};function SP(t,e){let n=AP(e);for(let i of t.elements)n=n.filter(r=>!Si(r,i));return{arrayValue:{values:n}}}var Kr=class extends Ga{constructor(e,n){super(),this.serializer=e,this.Ie=n}};function hk(t){return We(t.integerValue||t.doubleValue)}function AP(t){return Du(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var ss=class{constructor(e,n){this.field=e,this.transform=n}};function Q9(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof Yi&&r instanceof Yi||i instanceof Zi&&r instanceof Zi?za(i.elements,r.elements,Si):i instanceof Kr&&r instanceof Kr?Si(i.Ie,r.Ie):i instanceof Wr&&r instanceof Wr}(t.transform,e.transform)}var Ew=class{constructor(e,n){this.version=e,this.transformResults=n}},Ke=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Lm(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Wa=class{};function MP(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Yr(t.key,Ke.none()):new Qr(t.key,t.data,Ke.none());{let n=t.data,i=Pt.empty(),r=new Me(Xe.comparator);for(let o of e.fields)if(!r.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?i.delete(o):i.set(o,s),r=r.add(o)}return new Zn(t.key,i,new wn(r.toArray()),Ke.none())}}function Y9(t,e,n){t instanceof Qr?function(r,o,s){let a=r.value.clone(),c=mk(r.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Zn?function(r,o,s){if(!Lm(r.precondition,o))return void o.convertToUnknownDocument(s.version);let a=mk(r.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(RP(r)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(t,e,n):function(r,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function bu(t,e,n,i){return t instanceof Qr?function(o,s,a,c){if(!Lm(o.precondition,s))return a;let l=o.value.clone(),u=pk(o.fieldTransforms,c,s);return l.setAll(u),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(t,e,n,i):t instanceof Zn?function(o,s,a,c){if(!Lm(o.precondition,s))return a;let l=pk(o.fieldTransforms,c,s),u=s.data;return u.setAll(RP(o)),u.setAll(l),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(d=>d.field))}(t,e,n,i):function(o,s,a){return Lm(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function Z9(t,e){let n=null;for(let i of t.fieldTransforms){let r=e.data.field(i.field),o=CP(i.transform,r||null);o!=null&&(n===null&&(n=Pt.empty()),n.set(i.field,o))}return n||null}function fk(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&za(i,r,(o,s)=>Q9(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Qr=class extends Wa{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},Zn=class extends Wa{constructor(e,n,i,r,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function RP(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let i=t.data.field(n);e.set(n,i)}}),e}function mk(t,e,n){let i=new Map;j(t.length===n.length);for(let r=0;r<n.length;r++){let o=t[r],s=o.transform,a=e.data.field(o.field);i.set(o.field,K9(s,a,n[r]))}return i}function pk(t,e,n){let i=new Map;for(let r of t){let o=r.transform,s=n.data.field(r.field);i.set(r.field,W9(o,s,e))}return i}var Yr=class extends Wa{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Cu=class extends Wa{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Tu=class{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){let i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){let o=this.mutations[r];o.key.isEqual(e.key)&&Y9(o,e,i[r])}}applyToLocalView(e,n){for(let i of this.baseMutations)i.key.isEqual(e.key)&&(n=bu(i,e,n,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(e.key)&&(n=bu(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let i=EP();return this.mutations.forEach(r=>{let o=e.get(r.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(r.key)?null:a;let c=MP(s,a);c!==null&&i.set(r.key,c),s.isValidDocument()||s.convertToNoDocument($.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ie())}isEqual(e){return this.batchId===e.batchId&&za(this.mutations,e.mutations,(n,i)=>fk(n,i))&&za(this.baseMutations,e.baseMutations,(n,i)=>fk(n,i))}},xw=class t{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){j(e.mutations.length===i.length);let r=function(){return H9}(),o=e.mutations;for(let s=0;s<o.length;s++)r=r.insert(o[s].key,i[s].version);return new t(e,n,i,r)}};var Su=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Iw=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var st,ge;function kP(t){switch(t){default:return F();case y.CANCELLED:case y.UNKNOWN:case y.DEADLINE_EXCEEDED:case y.RESOURCE_EXHAUSTED:case y.INTERNAL:case y.UNAVAILABLE:case y.UNAUTHENTICATED:return!1;case y.INVALID_ARGUMENT:case y.NOT_FOUND:case y.ALREADY_EXISTS:case y.PERMISSION_DENIED:case y.FAILED_PRECONDITION:case y.ABORTED:case y.OUT_OF_RANGE:case y.UNIMPLEMENTED:case y.DATA_LOSS:return!0}}function PP(t){if(t===void 0)return Ze("GRPC error has no .code"),y.UNKNOWN;switch(t){case st.OK:return y.OK;case st.CANCELLED:return y.CANCELLED;case st.UNKNOWN:return y.UNKNOWN;case st.DEADLINE_EXCEEDED:return y.DEADLINE_EXCEEDED;case st.RESOURCE_EXHAUSTED:return y.RESOURCE_EXHAUSTED;case st.INTERNAL:return y.INTERNAL;case st.UNAVAILABLE:return y.UNAVAILABLE;case st.UNAUTHENTICATED:return y.UNAUTHENTICATED;case st.INVALID_ARGUMENT:return y.INVALID_ARGUMENT;case st.NOT_FOUND:return y.NOT_FOUND;case st.ALREADY_EXISTS:return y.ALREADY_EXISTS;case st.PERMISSION_DENIED:return y.PERMISSION_DENIED;case st.FAILED_PRECONDITION:return y.FAILED_PRECONDITION;case st.ABORTED:return y.ABORTED;case st.OUT_OF_RANGE:return y.OUT_OF_RANGE;case st.UNIMPLEMENTED:return y.UNIMPLEMENTED;case st.DATA_LOSS:return y.DATA_LOSS;default:return F()}}(ge=st||(st={}))[ge.OK=0]="OK",ge[ge.CANCELLED=1]="CANCELLED",ge[ge.UNKNOWN=2]="UNKNOWN",ge[ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ge[ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ge[ge.NOT_FOUND=5]="NOT_FOUND",ge[ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",ge[ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",ge[ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",ge[ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ge[ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ge[ge.ABORTED=10]="ABORTED",ge[ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",ge[ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",ge[ge.INTERNAL=13]="INTERNAL",ge[ge.UNAVAILABLE=14]="UNAVAILABLE",ge[ge.DATA_LOSS=15]="DATA_LOSS";var gk=null;function NP(){return new TextEncoder}var X9=new Wo([4294967295,4294967295],0);function bk(t){let e=NP().encode(t),n=new Y1;return n.update(e),new Uint8Array(n.digest())}function yk(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Wo([n,i],0),new Wo([r,o],0)]}var Dw=class t{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new es(`Invalid padding: ${n}`);if(i<0)throw new es(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new es(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new es(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=Wo.fromNumber(this.Te)}de(e,n,i){let r=e.add(n.multiply(Wo.fromNumber(i)));return r.compare(X9)===1&&(r=new Wo([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;let n=bk(e),[i,r]=yk(n);for(let o=0;o<this.hashCount;o++){let s=this.de(i,r,o);if(!this.Ae(s))return!1}return!0}static create(e,n,i){let r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,r,n);return i.forEach(a=>s.insert(a)),s}insert(e){if(this.Te===0)return;let n=bk(e),[i,r]=yk(n);for(let o=0;o<this.hashCount;o++){let s=this.de(i,r,o);this.Re(s)}}Re(e){let n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}},es=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Au=class t{constructor(e,n,i,r,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){let r=new Map;return r.set(e,Mu.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new t($.min(),r,new Oe(ne),en(),ie())}},Mu=class t{constructor(e,n,i,r,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new t(i,n,ie(),ie(),ie())}};var Ua=class{constructor(e,n,i,r){this.Ve=e,this.removedTargetIds=n,this.key=i,this.me=r}},Xm=class{constructor(e,n){this.targetId=e,this.fe=n}},Jm=class{constructor(e,n,i=yt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}},ep=class{constructor(){this.ge=0,this.pe=vk(),this.ye=yt.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=ie(),n=ie(),i=ie();return this.pe.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:F()}}),new Mu(this.ye,this.we,e,n,i)}Fe(){this.Se=!1,this.pe=vk()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,j(this.ge>=0)}Be(){this.Se=!0,this.we=!0}},Cw=class{constructor(e){this.Le=e,this.ke=new Map,this.qe=en(),this.Qe=_k(),this.Ke=new Oe(ne)}$e(e){for(let n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(let n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{let i=this.ze(n);switch(e.state){case 0:this.je(n)&&i.Ce(e.resumeToken);break;case 1:i.Ne(),i.be||i.Fe(),i.Ce(e.resumeToken);break;case 2:i.Ne(),i.be||this.removeTarget(n);break;case 3:this.je(n)&&(i.Be(),i.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),i.Ce(e.resumeToken));break;default:F()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((i,r)=>{this.je(r)&&n(r)})}Je(e){let n=e.targetId,i=e.fe.count,r=this.Ye(n);if(r){let o=r.target;if(Qm(o))if(i===0){let s=new k(o.path);this.We(n,s,ut.newNoDocument(s,$.min()))}else j(i===1);else{let s=this.Ze(n);if(s!==i){let a=this.Xe(e),c=a?this.et(a,e,s):1;if(c!==0){this.He(n);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,l)}gk?.tt(function(u,d,h,f,m){var p,g,w,A,C,O;let z={localCacheCount:u,existenceFilterCount:d.count,databaseId:h.database,projectId:h.projectId},H=d.unchangedNames;return H&&(z.bloomFilter={applied:m===0,hashCount:(p=H?.hashCount)!==null&&p!==void 0?p:0,bitmapLength:(A=(w=(g=H?.bits)===null||g===void 0?void 0:g.bitmap)===null||w===void 0?void 0:w.length)!==null&&A!==void 0?A:0,padding:(O=(C=H?.bits)===null||C===void 0?void 0:C.padding)!==null&&O!==void 0?O:0,mightContain:oe=>{var $e;return($e=f?.mightContain(oe))!==null&&$e!==void 0&&$e}}),z}(s,e.fe,this.Le.nt(),a,c))}}}}Xe(e){let n=e.fe.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=n,s,a;try{s=Hr(i).toUint8Array()}catch(c){if(c instanceof Gm)return Pn("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Dw(s,r,o)}catch(c){return Pn(c instanceof es?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Te===0?null:a}et(e,n,i){return n.fe.count===i-this.rt(e,n.targetId)?0:2}rt(e,n){let i=this.Le.getRemoteKeysForTarget(n),r=0;return i.forEach(o=>{let s=this.Le.nt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.We(n,o,null),r++)}),r}it(e){let n=new Map;this.ke.forEach((o,s)=>{let a=this.Ye(s);if(a){if(o.current&&Qm(a.target)){let c=new k(a.target.path);this.qe.get(c)!==null||this.st(s,c)||this.We(s,c,ut.newNoDocument(c,e))}o.De&&(n.set(s,o.ve()),o.Fe())}});let i=ie();this.Qe.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let l=this.Ye(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(o))}),this.qe.forEach((o,s)=>s.setReadTime(e));let r=new Au(e,n,this.Ke,this.qe,i);return this.qe=en(),this.Qe=_k(),this.Ke=new Oe(ne),r}Ue(e,n){if(!this.je(e))return;let i=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,i),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,i){if(!this.je(e))return;let r=this.ze(e);this.st(e,n)?r.Me(n,1):r.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),i&&(this.qe=this.qe.insert(n,i))}removeTarget(e){this.ke.delete(e)}Ze(e){let n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new ep,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new Me(ne),this.Qe=this.Qe.insert(e,n)),n}je(e){let n=this.Ye(e)!==null;return n||x("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){let n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new ep),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function _k(){return new Oe(k.comparator)}function vk(){return new Oe(k.comparator)}var J9=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),e8=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),t8=(()=>({and:"AND",or:"OR"}))(),Tw=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Sw(t,e){return t.useProto3Json||Hu(e)?e:{value:e}}function Ka(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function OP(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function n8(t,e){return Ka(t,e.toTimestamp())}function Je(t){return j(!!t),$.fromTimestamp(function(n){let i=$r(n);return new ze(i.seconds,i.nanos)}(t))}function JE(t,e){return function(i){return new ve(["projects",i.projectId,"databases",i.database])}(t).child("documents").child(e).canonicalString()}function FP(t){let e=ve.fromString(t);return j(qP(e)),e}function Ru(t,e){return JE(t.databaseId,e.path)}function Ci(t,e){let n=FP(e);if(n.get(1)!==t.databaseId.projectId)throw new E(y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new E(y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new k(VP(n))}function Aw(t,e){return JE(t.databaseId,e)}function LP(t){let e=FP(t);return e.length===4?ve.emptyPath():VP(e)}function ku(t){return new ve(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function VP(t){return j(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function wk(t,e,n){return{name:Ru(t,e),fields:n.value.mapValue.fields}}function jP(t,e,n){let i=Ci(t,e.name),r=Je(e.updateTime),o=e.createTime?Je(e.createTime):$.min(),s=new Pt({mapValue:{fields:e.fields}}),a=ut.newFoundDocument(i,r,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function i8(t,e){return"found"in e?function(i,r){j(!!r.found),r.found.name,r.found.updateTime;let o=Ci(i,r.found.name),s=Je(r.found.updateTime),a=r.found.createTime?Je(r.found.createTime):$.min(),c=new Pt({mapValue:{fields:r.found.fields}});return ut.newFoundDocument(o,s,a,c)}(t,e):"missing"in e?function(i,r){j(!!r.missing),j(!!r.readTime);let o=Ci(i,r.missing),s=Je(r.readTime);return ut.newNoDocument(o,s)}(t,e):F()}function r8(t,e){let n;if("targetChange"in e){e.targetChange;let i=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:F()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(l,u){return l.useProto3Json?(j(u===void 0||typeof u=="string"),yt.fromBase64String(u||"")):(j(u===void 0||u instanceof Uint8Array),yt.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let u=l.code===void 0?y.UNKNOWN:PP(l.code);return new E(u,l.message||"")}(s);n=new Jm(i,r,o,a||null)}else if("documentChange"in e){e.documentChange;let i=e.documentChange;i.document,i.document.name,i.document.updateTime;let r=Ci(t,i.document.name),o=Je(i.document.updateTime),s=i.document.createTime?Je(i.document.createTime):$.min(),a=new Pt({mapValue:{fields:i.document.fields}}),c=ut.newFoundDocument(r,o,s,a),l=i.targetIds||[],u=i.removedTargetIds||[];n=new Ua(l,u,c.key,c)}else if("documentDelete"in e){e.documentDelete;let i=e.documentDelete;i.document;let r=Ci(t,i.document),o=i.readTime?Je(i.readTime):$.min(),s=ut.newNoDocument(r,o),a=i.removedTargetIds||[];n=new Ua([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let i=e.documentRemove;i.document;let r=Ci(t,i.document),o=i.removedTargetIds||[];n=new Ua([],o,r,null)}else{if(!("filter"in e))return F();{e.filter;let i=e.filter;i.targetId;let{count:r=0,unchangedNames:o}=i,s=new Iw(r,o),a=i.targetId;n=new Xm(a,s)}}return n}function Pu(t,e){let n;if(e instanceof Qr)n={update:wk(t,e.key,e.value)};else if(e instanceof Yr)n={delete:Ru(t,e.key)};else if(e instanceof Zn)n={update:wk(t,e.key,e.data),updateMask:u8(e.fieldMask)};else{if(!(e instanceof Cu))return F();n={verify:Ru(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,s){let a=s.transform;if(a instanceof Wr)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Yi)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Zi)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Kr)return{fieldPath:s.field.canonicalString(),increment:a.Ie};throw F()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:n8(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:F()}(t,e.precondition)),n}function Mw(t,e){let n=e.currentDocument?function(o){return o.updateTime!==void 0?Ke.updateTime(Je(o.updateTime)):o.exists!==void 0?Ke.exists(o.exists):Ke.none()}(e.currentDocument):Ke.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(s,a){let c=null;if("setToServerValue"in a)j(a.setToServerValue==="REQUEST_TIME"),c=new Wr;else if("appendMissingElements"in a){let u=a.appendMissingElements.values||[];c=new Yi(u)}else if("removeAllFromArray"in a){let u=a.removeAllFromArray.values||[];c=new Zi(u)}else"increment"in a?c=new Kr(s,a.increment):F();let l=Xe.fromServerFormat(a.fieldPath);return new ss(l,c)}(t,r)):[];if(e.update){e.update.name;let r=Ci(t,e.update.name),o=new Pt({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(c){let l=c.fieldPaths||[];return new wn(l.map(u=>Xe.fromServerFormat(u)))}(e.updateMask);return new Zn(r,o,s,n,i)}return new Qr(r,o,n,i)}if(e.delete){let r=Ci(t,e.delete);return new Yr(r,n)}if(e.verify){let r=Ci(t,e.verify);return new Cu(r,n)}return F()}function o8(t,e){return t&&t.length>0?(j(e!==void 0),t.map(n=>function(r,o){let s=r.updateTime?Je(r.updateTime):Je(o);return s.isEqual($.min())&&(s=Je(o)),new Ew(s,r.transformResults||[])}(n,e))):[]}function BP(t,e){return{documents:[Aw(t,e.path)]}}function UP(t,e){let n={structuredQuery:{}},i=e.path;e.collectionGroup!==null?(n.parent=Aw(t,i),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Aw(t,i.popLast()),n.structuredQuery.from=[{collectionId:i.lastSegment()}]);let r=function(c){if(c.length!==0)return HP(Te.create(c,"and"))}(e.filters);r&&(n.structuredQuery.where=r);let o=function(c){if(c.length!==0)return c.map(l=>function(d){return{field:Oa(d.field),direction:a8(d.dir)}}(l))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let s=Sw(t,e.limit);return s!==null&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),n}function zP(t){let e=LP(t.parent),n=t.structuredQuery,i=n.from?n.from.length:0,r=null;if(i>0){j(i===1);let u=n.from[0];u.allDescendants?r=u.collectionId:e=e.child(u.collectionId)}let o=[];n.where&&(o=function(d){let h=$P(d);return h instanceof Te&&YE(h)?h.getFilters():[h]}(n.where));let s=[];n.orderBy&&(s=function(d){return d.map(h=>function(m){return new rs(Fa(m.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(h))}(n.orderBy));let a=null;n.limit&&(a=function(d){let h;return h=typeof d=="object"?d.value:d,Hu(h)?null:h}(n.limit));let c=null;n.startAt&&(c=function(d){let h=!!d.before,f=d.values||[];return new Ai(f,h)}(n.startAt));let l=null;return n.endAt&&(l=function(d){let h=!d.before,f=d.values||[];return new Ai(f,h)}(n.endAt)),gP(e,r,s,o,a,"F",c,l)}function s8(t,e){let n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return F()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function $P(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let i=Fa(n.unaryFilter.field);return ue.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=Fa(n.unaryFilter.field);return ue.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Fa(n.unaryFilter.field);return ue.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Fa(n.unaryFilter.field);return ue.create(s,"!=",{nullValue:"NULL_VALUE"});default:return F()}}(t):t.fieldFilter!==void 0?function(n){return ue.create(Fa(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return F()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Te.create(n.compositeFilter.filters.map(i=>$P(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return F()}}(n.compositeFilter.op))}(t):F()}function a8(t){return J9[t]}function c8(t){return e8[t]}function l8(t){return t8[t]}function Oa(t){return{fieldPath:t.canonicalString()}}function Fa(t){return Xe.fromServerFormat(t.fieldPath)}function HP(t){return t instanceof ue?function(n){if(n.op==="=="){if(rk(n.value))return{unaryFilter:{field:Oa(n.field),op:"IS_NAN"}};if(ik(n.value))return{unaryFilter:{field:Oa(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(rk(n.value))return{unaryFilter:{field:Oa(n.field),op:"IS_NOT_NAN"}};if(ik(n.value))return{unaryFilter:{field:Oa(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Oa(n.field),op:c8(n.op),value:n.value}}}(t):t instanceof Te?function(n){let i=n.getFilters().map(r=>HP(r));return i.length===1?i[0]:{compositeFilter:{op:l8(n.op),filters:i}}}(t):F()}function u8(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function qP(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Qa=class t{constructor(e,n,i,r,o=$.min(),s=$.min(),a=yt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var tp=class{constructor(e){this.ut=e}};function d8(t,e){let n;if(e.document)n=jP(t.ut,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let i=k.fromSegments(e.noDocument.path),r=cs(e.noDocument.readTime);n=ut.newNoDocument(i,r),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return F();{let i=k.fromSegments(e.unknownDocument.path),r=cs(e.unknownDocument.version);n=ut.newUnknownDocument(i,r)}}return e.readTime&&n.setReadTime(function(r){let o=new ze(r[0],r[1]);return $.fromTimestamp(o)}(e.readTime)),n}function Ek(t,e){let n=e.key,i={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:np(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=function(o,s){return{name:Ru(o,s.key),fields:s.data.value.mapValue.fields,updateTime:Ka(o,s.version.toTimestamp()),createTime:Ka(o,s.createTime.toTimestamp())}}(t.ut,e);else if(e.isNoDocument())i.noDocument={path:n.path.toArray(),readTime:as(e.version)};else{if(!e.isUnknownDocument())return F();i.unknownDocument={path:n.path.toArray(),version:as(e.version)}}return i}function np(t){let e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function as(t){let e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function cs(t){let e=new ze(t.seconds,t.nanoseconds);return $.fromTimestamp(e)}function Zo(t,e){let n=(e.baseMutations||[]).map(o=>Mw(t.ut,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let i=e.mutations.map(o=>Mw(t.ut,o)),r=ze.fromMillis(e.localWriteTimeMs);return new Tu(e.batchId,r,n,i)}function mu(t){let e=cs(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?cs(t.lastLimboFreeSnapshotVersion):$.min(),i;return i=function(o){return o.documents!==void 0}(t.query)?function(o){return j(o.documents.length===1),Bt(oc(LP(o.documents[0])))}(t.query):function(o){return Bt(zP(o))}(t.query),new Qa(i,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,yt.fromBase64String(t.resumeToken))}function GP(t,e){let n=as(e.snapshotVersion),i=as(e.lastLimboFreeSnapshotVersion),r;r=Qm(e.target)?BP(t.ut,e.target):UP(t.ut,e.target);let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:os(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function ex(t){let e=zP({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Zm(e,e.limit,"L"):e}function G0(t,e){return new Su(e.largestBatchId,Mw(t.ut,e.overlayMutation))}function xk(t,e){let n=e.path.lastSegment();return[t,jt(e.path.popLast()),n]}function Ik(t,e,n,i){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:as(i.readTime),documentKey:jt(i.documentKey.path),largestBatchId:i.largestBatchId}}var Rw=class{getBundleMetadata(e,n){return Dk(e).get(n).next(i=>{if(i)return function(o){return{id:o.bundleId,createTime:cs(o.createTime),version:o.version}}(i)})}saveBundleMetadata(e,n){return Dk(e).put(function(r){return{bundleId:r.id,createTime:as(Je(r.createTime)),version:r.version}}(n))}getNamedQuery(e,n){return Ck(e).get(n).next(i=>{if(i)return function(o){return{name:o.name,query:ex(o.bundledQuery),readTime:cs(o.readTime)}}(i)})}saveNamedQuery(e,n){return Ck(e).put(function(r){return{name:r.name,readTime:as(Je(r.readTime)),bundledQuery:r.bundledQuery}}(n))}};function Dk(t){return _t(t,"bundles")}function Ck(t){return _t(t,"namedQueries")}var ip=class t{constructor(e,n){this.serializer=e,this.userId=n}static ct(e,n){let i=n.uid||"";return new t(e,i)}getOverlay(e,n){return lu(e).get(xk(this.userId,n)).next(i=>i?G0(this.serializer,i):null)}getOverlays(e,n){let i=Ii();return b.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){let r=[];return i.forEach((o,s)=>{let a=new Su(n,s);r.push(this.lt(e,a))}),b.waitFor(r)}removeOverlaysForBatchId(e,n,i){let r=new Set;n.forEach(s=>r.add(jt(s.getCollectionPath())));let o=[];return r.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,i+1],!1,!0);o.push(lu(e).H("collectionPathOverlayIndex",a))}),b.waitFor(o)}getOverlaysForCollection(e,n,i){let r=Ii(),o=jt(n),s=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,Number.POSITIVE_INFINITY],!0);return lu(e).W("collectionPathOverlayIndex",s).next(a=>{for(let c of a){let l=G0(this.serializer,c);r.set(l.getKey(),l)}return r})}getOverlaysForCollectionGroup(e,n,i,r){let o=Ii(),s,a=IDBKeyRange.bound([this.userId,n,i],[this.userId,n,Number.POSITIVE_INFINITY],!0);return lu(e).Y({index:"collectionGroupOverlayIndex",range:a},(c,l,u)=>{let d=G0(this.serializer,l);o.size()<r||d.largestBatchId===s?(o.set(d.getKey(),d),s=d.largestBatchId):u.done()}).next(()=>o)}lt(e,n){return lu(e).put(function(r,o,s){let[a,c,l]=xk(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Pu(r.ut,s.mutation)}}(this.serializer,this.userId,n))}};function lu(t){return _t(t,"documentOverlays")}var Ki=class{constructor(){}ht(e,n){this.Pt(e,n),n.It()}Pt(e,n){if("nullValue"in e)this.Tt(n,5);else if("booleanValue"in e)this.Tt(n,10),n.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(n,15),n.Et(We(e.integerValue));else if("doubleValue"in e){let i=We(e.doubleValue);isNaN(i)?this.Tt(n,13):(this.Tt(n,15),wu(i)?n.Et(0):n.Et(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Tt(n,20),typeof i=="string"?n.dt(i):(n.dt(`${i.seconds||""}`),n.Et(i.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,n),this.Rt(n);else if("bytesValue"in e)this.Tt(n,30),n.Vt(Hr(e.bytesValue)),this.Rt(n);else if("referenceValue"in e)this.ft(e.referenceValue,n);else if("geoPointValue"in e){let i=e.geoPointValue;this.Tt(n,45),n.Et(i.latitude||0),n.Et(i.longitude||0)}else"mapValue"in e?lP(e)?this.Tt(n,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,n),this.Rt(n)):"arrayValue"in e?(this.yt(e.arrayValue,n),this.Rt(n)):F()}At(e,n){this.Tt(n,25),this.wt(e,n)}wt(e,n){n.dt(e)}gt(e,n){let i=e.fields||{};this.Tt(n,55);for(let r of Object.keys(i))this.At(r,n),this.Pt(i[r],n)}yt(e,n){let i=e.values||[];this.Tt(n,50);for(let r of i)this.Pt(r,n)}ft(e,n){this.Tt(n,37),k.fromName(e).path.forEach(i=>{this.Tt(n,60),this.wt(i,n)})}Tt(e,n){e.Et(n)}Rt(e){e.Et(2)}};Ki.St=new Ki;function h8(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function Tk(t){let e=64-function(i){let r=0;for(let o=0;o<8;++o){let s=h8(255&i[o]);if(r+=s,s!==8)break}return r}(t);return Math.ceil(e/8)}var kw=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){let n=e[Symbol.iterator](),i=n.next();for(;!i.done;)this.Dt(i.value),i=n.next();this.Ct()}vt(e){let n=e[Symbol.iterator](),i=n.next();for(;!i.done;)this.Ft(i.value),i=n.next();this.Mt()}xt(e){for(let n of e){let i=n.charCodeAt(0);if(i<128)this.Dt(i);else if(i<2048)this.Dt(960|i>>>6),this.Dt(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Dt(480|i>>>12),this.Dt(128|63&i>>>6),this.Dt(128|63&i);else{let r=n.codePointAt(0);this.Dt(240|r>>>18),this.Dt(128|63&r>>>12),this.Dt(128|63&r>>>6),this.Dt(128|63&r)}}this.Ct()}Ot(e){for(let n of e){let i=n.charCodeAt(0);if(i<128)this.Ft(i);else if(i<2048)this.Ft(960|i>>>6),this.Ft(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i);else{let r=n.codePointAt(0);this.Ft(240|r>>>18),this.Ft(128|63&r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r)}}this.Mt()}Nt(e){let n=this.Bt(e),i=Tk(n);this.Lt(1+i),this.buffer[this.position++]=255&i;for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=255&n[r]}kt(e){let n=this.Bt(e),i=Tk(n);this.Lt(1+i),this.buffer[this.position++]=~(255&i);for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=~(255&n[r])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Bt(e){let n=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),i=(128&n[0])!=0;n[0]^=i?255:128;for(let r=1;r<n.length;++r)n[r]^=i?255:0;return n}Dt(e){let n=255&e;n===0?(this.Qt(0),this.Qt(255)):n===255?(this.Qt(255),this.Qt(0)):this.Qt(n)}Ft(e){let n=255&e;n===0?(this.$t(0),this.$t(255)):n===255?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Lt(1),this.buffer[this.position++]=e}$t(e){this.Lt(1),this.buffer[this.position++]=~e}Lt(e){let n=e+this.position;if(n<=this.buffer.length)return;let i=2*this.buffer.length;i<n&&(i=n);let r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}},Pw=class{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}},Nw=class{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}},Xo=class{constructor(){this.Wt=new kw,this.Gt=new Pw(this.Wt),this.zt=new Nw(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return e===0?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}};var Jo=class t{constructor(e,n,i,r){this.indexId=e,this.documentKey=n,this.arrayValue=i,this.directionalValue=r}Ht(){let e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,i=new Uint8Array(n);return i.set(this.directionalValue,0),n!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new t(this.indexId,this.documentKey,this.arrayValue,i)}};function Or(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=Sk(t.arrayValue,e.arrayValue),n!==0?n:(n=Sk(t.directionalValue,e.directionalValue),n!==0?n:k.comparator(t.documentKey,e.documentKey)))}function Sk(t,e){for(let n=0;n<t.length&&n<e.length;++n){let i=t[n]-e[n];if(i!==0)return i}return t.length-e.length}var rp=class{constructor(e){this.Jt=new Me((n,i)=>Xe.comparator(n.field,i.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(let n of e.filters){let i=n;i.isInequality()?this.Jt=this.Jt.add(i):this.Zt.push(i)}}get Xt(){return this.Jt.size>1}en(e){if(j(e.collectionGroup===this.collectionId),this.Xt)return!1;let n=iw(e);if(n!==void 0&&!this.tn(n))return!1;let i=Qo(e),r=new Set,o=0,s=0;for(;o<i.length&&this.tn(i[o]);++o)r=r.add(i[o].fieldPath.canonicalString());if(o===i.length)return!0;if(this.Jt.size>0){let a=this.Jt.getIterator().getNext();if(!r.has(a.field.canonicalString())){let c=i[o];if(!this.nn(a,c)||!this.rn(this.Yt[s++],c))return!1}++o}for(;o<i.length;++o){let a=i[o];if(s>=this.Yt.length||!this.rn(this.Yt[s++],a))return!1}return!0}sn(){if(this.Xt)return null;let e=new Me(Xe.comparator),n=[];for(let i of this.Zt)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")n.push(new ja(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),n.push(new ja(i.field,0))}for(let i of this.Yt)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),n.push(new ja(i.field,i.dir==="asc"?0:1)));return new $a($a.UNKNOWN_ID,this.collectionId,n,vu.empty())}tn(e){for(let n of this.Zt)if(this.nn(n,e))return!0;return!1}nn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;let i=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===i}rn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}};function WP(t){var e,n;if(j(t instanceof ue||t instanceof Te),t instanceof ue){if(t instanceof Km){let r=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(o=>ue.create(t.field,"==",o)))||[];return Te.create(r,"or")}return t}let i=t.filters.map(r=>WP(r));return Te.create(i,t.op)}function f8(t){if(t.getFilters().length===0)return[];let e=Lw(WP(t));return j(KP(e)),Ow(e)||Fw(e)?[e]:e.getFilters()}function Ow(t){return t instanceof ue}function Fw(t){return t instanceof Te&&YE(t)}function KP(t){return Ow(t)||Fw(t)||function(n){if(n instanceof Te&&dw(n)){for(let i of n.getFilters())if(!Ow(i)&&!Fw(i))return!1;return!0}return!1}(t)}function Lw(t){if(j(t instanceof ue||t instanceof Te),t instanceof ue)return t;if(t.filters.length===1)return Lw(t.filters[0]);let e=t.filters.map(i=>Lw(i)),n=Te.create(e,t.op);return n=op(n),KP(n)?n:(j(n instanceof Te),j(qa(n)),j(n.filters.length>1),n.filters.reduce((i,r)=>tx(i,r)))}function tx(t,e){let n;return j(t instanceof ue||t instanceof Te),j(e instanceof ue||e instanceof Te),n=t instanceof ue?e instanceof ue?function(r,o){return Te.create([r,o],"and")}(t,e):Ak(t,e):e instanceof ue?Ak(e,t):function(r,o){if(j(r.filters.length>0&&o.filters.length>0),qa(r)&&qa(o))return fP(r,o.getFilters());let s=dw(r)?r:o,a=dw(r)?o:r,c=s.filters.map(l=>tx(l,a));return Te.create(c,"or")}(t,e),op(n)}function Ak(t,e){if(qa(e))return fP(e,t.getFilters());{let n=e.filters.map(i=>tx(t,i));return Te.create(n,"or")}}function op(t){if(j(t instanceof ue||t instanceof Te),t instanceof ue)return t;let e=t.getFilters();if(e.length===1)return op(e[0]);if(dP(t))return t;let n=e.map(r=>op(r)),i=[];return n.forEach(r=>{r instanceof ue?i.push(r):r instanceof Te&&(r.op===t.op?i.push(...r.filters):i.push(r))}),i.length===1?i[0]:Te.create(i,t.op)}var Vw=class{constructor(){this.on=new Nu}addToCollectionParentIndex(e,n){return this.on.add(n),b.resolve()}getCollectionParents(e,n){return b.resolve(this.on.getEntries(n))}addFieldIndex(e,n){return b.resolve()}deleteFieldIndex(e,n){return b.resolve()}deleteAllFieldIndexes(e){return b.resolve()}createTargetIndexes(e,n){return b.resolve()}getDocumentsMatchingTarget(e,n){return b.resolve(null)}getIndexType(e,n){return b.resolve(0)}getFieldIndexes(e,n){return b.resolve([])}getNextCollectionGroupToUpdate(e){return b.resolve(null)}getMinOffset(e,n){return b.resolve(Nn.min())}getMinOffsetFromCollectionGroup(e,n){return b.resolve(Nn.min())}updateCollectionGroup(e,n,i){return b.resolve()}updateIndexEntries(e,n){return b.resolve()}},Nu=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new Me(ve.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(e){let n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Me(ve.comparator)).toArray()}};var Mm=new Uint8Array(0),jw=class{constructor(e,n){this.user=e,this.databaseId=n,this._n=new Nu,this.an=new Mi(i=>os(i),(i,r)=>qu(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this._n.has(n)){let i=n.lastSegment(),r=n.popLast();e.addOnCommittedListener(()=>{this._n.add(n)});let o={collectionId:i,parent:jt(r)};return Mk(e).put(o)}return b.resolve()}getCollectionParents(e,n){let i=[],r=IDBKeyRange.bound([n,""],[Xk(n),""],!1,!0);return Mk(e).W(r).next(o=>{for(let s of o){if(s.collectionId!==n)break;i.push(xi(s.parent))}return i})}addFieldIndex(e,n){let i=uu(e),r=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(n);delete r.indexId;let o=i.add(r);if(n.indexState){let s=Ra(e);return o.next(a=>{s.put(Ik(a,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return o.next()}deleteFieldIndex(e,n){let i=uu(e),r=Ra(e),o=Ma(e);return i.delete(n.indexId).next(()=>r.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let n=uu(e),i=Ma(e),r=Ra(e);return n.H().next(()=>i.H()).next(()=>r.H())}createTargetIndexes(e,n){return b.forEach(this.un(n),i=>this.getIndexType(e,i).next(r=>{if(r===0||r===1){let o=new rp(i).sn();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,n){let i=Ma(e),r=!0,o=new Map;return b.forEach(this.un(n),s=>this.cn(e,s).next(a=>{r&&(r=!!a),o.set(s,a)})).next(()=>{if(r){let s=ie(),a=[];return b.forEach(o,(c,l)=>{x("IndexedDbIndexManager",`Using index ${function(C){return`id=${C.indexId}|cg=${C.collectionGroup}|f=${C.fields.map(O=>`${O.fieldPath}:${O.kind}`).join(",")}`}(c)} to execute ${os(n)}`);let u=function(C,O){let z=iw(O);if(z===void 0)return null;for(let H of Ym(C,z.fieldPath))switch(H.op){case"array-contains-any":return H.value.arrayValue.values||[];case"array-contains":return[H.value]}return null}(l,c),d=function(C,O){let z=new Map;for(let H of Qo(O))for(let oe of Ym(C,H.fieldPath))switch(oe.op){case"==":case"in":z.set(H.fieldPath.canonicalString(),oe.value);break;case"not-in":case"!=":return z.set(H.fieldPath.canonicalString(),oe.value),Array.from(z.values())}return null}(l,c),h=function(C,O){let z=[],H=!0;for(let oe of Qo(O)){let $e=oe.kind===0?lk(C,oe.fieldPath,C.startAt):uk(C,oe.fieldPath,C.startAt);z.push($e.value),H&&(H=$e.inclusive)}return new Ai(z,H)}(l,c),f=function(C,O){let z=[],H=!0;for(let oe of Qo(O)){let $e=oe.kind===0?uk(C,oe.fieldPath,C.endAt):lk(C,oe.fieldPath,C.endAt);z.push($e.value),H&&(H=$e.inclusive)}return new Ai(z,H)}(l,c),m=this.ln(c,l,h),p=this.ln(c,l,f),g=this.hn(c,l,d),w=this.Pn(c.indexId,u,m,h.inclusive,p,f.inclusive,g);return b.forEach(w,A=>i.j(A,n.limit).next(C=>{C.forEach(O=>{let z=k.fromSegments(O.documentKey);s.has(z)||(s=s.add(z),a.push(z))})}))}).next(()=>a)}return b.resolve(null)})}un(e){let n=this.an.get(e);return n||(e.filters.length===0?n=[e]:n=f8(Te.create(e.filters,"and")).map(i=>vw(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.an.set(e,n),n)}Pn(e,n,i,r,o,s,a){let c=(n!=null?n.length:1)*Math.max(i.length,o.length),l=c/(n!=null?n.length:1),u=[];for(let d=0;d<c;++d){let h=n?this.In(n[d/l]):Mm,f=this.Tn(e,h,i[d%l],r),m=this.En(e,h,o[d%l],s),p=a.map(g=>this.Tn(e,h,g,!0));u.push(...this.createRange(f,m,p))}return u}Tn(e,n,i,r){let o=new Jo(e,k.empty(),n,i);return r?o:o.Ht()}En(e,n,i,r){let o=new Jo(e,k.empty(),n,i);return r?o.Ht():o}cn(e,n){let i=new rp(n),r=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,r).next(o=>{let s=null;for(let a of o)i.en(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,n){let i=2,r=this.un(n);return b.forEach(r,o=>this.cn(e,o).next(s=>{s?i!==0&&s.fields.length<function(c){let l=new Me(Xe.comparator),u=!1;for(let d of c.filters)for(let h of d.getFlattenedFilters())h.field.isKeyField()||(h.op==="array-contains"||h.op==="array-contains-any"?u=!0:l=l.add(h.field));for(let d of c.orderBy)d.field.isKeyField()||(l=l.add(d.field));return l.size+(u?1:0)}(o)&&(i=1):i=0})).next(()=>function(s){return s.limit!==null}(n)&&r.length>1&&i===2?1:i)}dn(e,n){let i=new Xo;for(let r of Qo(e)){let o=n.data.field(r.fieldPath);if(o==null)return null;let s=i.jt(r.kind);Ki.St.ht(o,s)}return i.Ut()}In(e){let n=new Xo;return Ki.St.ht(e,n.jt(0)),n.Ut()}An(e,n){let i=new Xo;return Ki.St.ht(is(this.databaseId,n),i.jt(function(o){let s=Qo(o);return s.length===0?0:s[s.length-1].kind}(e))),i.Ut()}hn(e,n,i){if(i===null)return[];let r=[];r.push(new Xo);let o=0;for(let s of Qo(e)){let a=i[o++];for(let c of r)if(this.Rn(n,s.fieldPath)&&Du(a))r=this.Vn(r,s,a);else{let l=c.jt(s.kind);Ki.St.ht(a,l)}}return this.mn(r)}ln(e,n,i){return this.hn(e,n,i.position)}mn(e){let n=[];for(let i=0;i<e.length;++i)n[i]=e[i].Ut();return n}Vn(e,n,i){let r=[...e],o=[];for(let s of i.arrayValue.values||[])for(let a of r){let c=new Xo;c.seed(a.Ut()),Ki.St.ht(s,c.jt(n.kind)),o.push(c)}return o}Rn(e,n){return!!e.filters.find(i=>i instanceof ue&&i.field.isEqual(n)&&(i.op==="in"||i.op==="not-in"))}getFieldIndexes(e,n){let i=uu(e),r=Ra(e);return(n?i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):i.W()).next(o=>{let s=[];return b.forEach(o,a=>r.get([a.indexId,this.uid]).next(c=>{s.push(function(u,d){let h=d?new vu(d.sequenceNumber,new Nn(cs(d.readTime),new k(xi(d.documentKey)),d.largestBatchId)):vu.empty(),f=u.fields.map(([m,p])=>new ja(Xe.fromServerFormat(m),p));return new $a(u.indexId,u.collectionGroup,f,h)}(a,c))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((i,r)=>{let o=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return o!==0?o:ne(i.collectionGroup,r.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,i){let r=uu(e),o=Ra(e);return this.fn(e).next(s=>r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>b.forEach(a,c=>o.put(Ik(c.indexId,this.user,s,i)))))}updateIndexEntries(e,n){let i=new Map;return b.forEach(n,(r,o)=>{let s=i.get(r.collectionGroup);return(s?b.resolve(s):this.getFieldIndexes(e,r.collectionGroup)).next(a=>(i.set(r.collectionGroup,a),b.forEach(a,c=>this.gn(e,r,c).next(l=>{let u=this.pn(o,c);return l.isEqual(u)?b.resolve():this.yn(e,o,c,l,u)}))))})}wn(e,n,i,r){return Ma(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.An(i,n.key),documentKey:n.key.path.toArray()})}Sn(e,n,i,r){return Ma(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.An(i,n.key),n.key.path.toArray()])}gn(e,n,i){let r=Ma(e),o=new Me(Or);return r.Y({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.An(i,n)])},(s,a)=>{o=o.add(new Jo(i.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>o)}pn(e,n){let i=new Me(Or),r=this.dn(n,e);if(r==null)return i;let o=iw(n);if(o!=null){let s=e.data.field(o.fieldPath);if(Du(s))for(let a of s.arrayValue.values||[])i=i.add(new Jo(n.indexId,e.key,this.In(a),r))}else i=i.add(new Jo(n.indexId,e.key,Mm,r));return i}yn(e,n,i,r,o){x("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);let s=[];return function(c,l,u,d,h){let f=c.getIterator(),m=l.getIterator(),p=Aa(f),g=Aa(m);for(;p||g;){let w=!1,A=!1;if(p&&g){let C=u(p,g);C<0?A=!0:C>0&&(w=!0)}else p!=null?A=!0:w=!0;w?(d(g),g=Aa(m)):A?(h(p),p=Aa(f)):(p=Aa(f),g=Aa(m))}}(r,o,Or,a=>{s.push(this.wn(e,n,i,a))},a=>{s.push(this.Sn(e,n,i,a))}),b.waitFor(s)}fn(e){let n=1;return Ra(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,o)=>{o.done(),n=r.sequenceNumber+1}).next(()=>n)}createRange(e,n,i){i=i.sort((s,a)=>Or(s,a)).filter((s,a,c)=>!a||Or(s,c[a-1])!==0);let r=[];r.push(e);for(let s of i){let a=Or(s,e),c=Or(s,n);if(a===0)r[0]=e.Ht();else if(a>0&&c<0)r.push(s),r.push(s.Ht());else if(c>0)break}r.push(n);let o=[];for(let s=0;s<r.length;s+=2){if(this.bn(r[s],r[s+1]))return[];let a=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,Mm,[]],c=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,Mm,[]];o.push(IDBKeyRange.bound(a,c))}return o}bn(e,n){return Or(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(Rk)}getMinOffset(e,n){return b.mapArray(this.un(n),i=>this.cn(e,i).next(r=>r||F())).next(Rk)}};function Mk(t){return _t(t,"collectionParents")}function Ma(t){return _t(t,"indexEntries")}function uu(t){return _t(t,"indexConfiguration")}function Ra(t){return _t(t,"indexState")}function Rk(t){j(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let i=1;i<t.length;i++){let r=t[i].indexState.offset;WE(r,e)<0&&(e=r),n<r.largestBatchId&&(n=r.largestBatchId)}return new Nn(e.readTime,e.documentKey,n)}var kk={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},kn=class t{constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function QP(t,e,n){let i=t.store("mutations"),r=t.store("documentMutations"),o=[],s=IDBKeyRange.only(n.batchId),a=0,c=i.Y({range:s},(u,d,h)=>(a++,h.delete()));o.push(c.next(()=>{j(a===1)}));let l=[];for(let u of n.mutations){let d=iP(e,u.key.path,n.batchId);o.push(r.delete(d)),l.push(u.key)}return b.waitFor(o).next(()=>l)}function sp(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw F();e=t.noDocument}return JSON.stringify(e).length}kn.DEFAULT_COLLECTION_PERCENTILE=10,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,kn.DEFAULT=new kn(41943040,kn.DEFAULT_COLLECTION_PERCENTILE,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),kn.DISABLED=new kn(-1,0,0);var ap=class t{constructor(e,n,i,r){this.userId=e,this.serializer=n,this.indexManager=i,this.referenceDelegate=r,this.Dn={}}static ct(e,n,i,r){j(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new t(o,n,i,r)}checkEmpty(e){let n=!0,i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Fr(e).Y({index:"userMutationsIndex",range:i},(r,o,s)=>{n=!1,s.done()}).next(()=>n)}addMutationBatch(e,n,i,r){let o=La(e),s=Fr(e);return s.add({}).next(a=>{j(typeof a=="number");let c=new Tu(a,n,i,r),l=function(f,m,p){let g=p.baseMutations.map(A=>Pu(f.ut,A)),w=p.mutations.map(A=>Pu(f.ut,A));return{userId:m,batchId:p.batchId,localWriteTimeMs:p.localWriteTime.toMillis(),baseMutations:g,mutations:w}}(this.serializer,this.userId,c),u=[],d=new Me((h,f)=>ne(h.canonicalString(),f.canonicalString()));for(let h of r){let f=iP(this.userId,h.key.path,a);d=d.add(h.key.path.popLast()),u.push(s.put(l)),u.push(o.put(f,v9))}return d.forEach(h=>{u.push(this.indexManager.addToCollectionParentIndex(e,h))}),e.addOnCommittedListener(()=>{this.Dn[a]=c.keys()}),b.waitFor(u).next(()=>c)})}lookupMutationBatch(e,n){return Fr(e).get(n).next(i=>i?(j(i.userId===this.userId),Zo(this.serializer,i)):null)}Cn(e,n){return this.Dn[n]?b.resolve(this.Dn[n]):this.lookupMutationBatch(e,n).next(i=>{if(i){let r=i.keys();return this.Dn[n]=r,r}return null})}getNextMutationBatchAfterBatchId(e,n){let i=n+1,r=IDBKeyRange.lowerBound([this.userId,i]),o=null;return Fr(e).Y({index:"userMutationsIndex",range:r},(s,a,c)=>{a.userId===this.userId&&(j(a.batchId>=i),o=Zo(this.serializer,a)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),i=-1;return Fr(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(r,o,s)=>{i=o.batchId,s.done()}).next(()=>i)}getAllMutationBatches(e){let n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Fr(e).W("userMutationsIndex",n).next(i=>i.map(r=>Zo(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(e,n){let i=Nm(this.userId,n.path),r=IDBKeyRange.lowerBound(i),o=[];return La(e).Y({range:r},(s,a,c)=>{let[l,u,d]=s,h=xi(u);if(l===this.userId&&n.path.isEqual(h))return Fr(e).get(d).next(f=>{if(!f)throw F();j(f.userId===this.userId),o.push(Zo(this.serializer,f))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Me(ne),r=[];return n.forEach(o=>{let s=Nm(this.userId,o.path),a=IDBKeyRange.lowerBound(s),c=La(e).Y({range:a},(l,u,d)=>{let[h,f,m]=l,p=xi(f);h===this.userId&&o.path.isEqual(p)?i=i.add(m):d.done()});r.push(c)}),b.waitFor(r).next(()=>this.vn(e,i))}getAllMutationBatchesAffectingQuery(e,n){let i=n.path,r=i.length+1,o=Nm(this.userId,i),s=IDBKeyRange.lowerBound(o),a=new Me(ne);return La(e).Y({range:s},(c,l,u)=>{let[d,h,f]=c,m=xi(h);d===this.userId&&i.isPrefixOf(m)?m.length===r&&(a=a.add(f)):u.done()}).next(()=>this.vn(e,a))}vn(e,n){let i=[],r=[];return n.forEach(o=>{r.push(Fr(e).get(o).next(s=>{if(s===null)throw F();j(s.userId===this.userId),i.push(Zo(this.serializer,s))}))}),b.waitFor(r).next(()=>i)}removeMutationBatch(e,n){return QP(e.ae,this.userId,n).next(i=>(e.addOnCommittedListener(()=>{this.Fn(n.batchId)}),b.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return b.resolve();let i=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),r=[];return La(e).Y({range:i},(o,s,a)=>{if(o[0]===this.userId){let c=xi(o[1]);r.push(c)}else a.done()}).next(()=>{j(r.length===0)})})}containsKey(e,n){return YP(e,this.userId,n)}Mn(e){return ZP(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function YP(t,e,n){let i=Nm(e,n.path),r=i[1],o=IDBKeyRange.lowerBound(i),s=!1;return La(t).Y({range:o,J:!0},(a,c,l)=>{let[u,d,h]=a;u===e&&d===r&&(s=!0),l.done()}).next(()=>s)}function Fr(t){return _t(t,"mutations")}function La(t){return _t(t,"documentMutations")}function ZP(t){return _t(t,"mutationQueues")}var Ya=class t{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new t(0)}static Nn(){return new t(-1)}};var Bw=class{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{let i=new Ya(n.highestTargetId);return n.highestTargetId=i.next(),this.Ln(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>$.fromTimestamp(new ze(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,i){return this.Bn(e).next(r=>(r.highestListenSequenceNumber=n,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),n>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=n),this.Ln(e,r)))}addTargetData(e,n){return this.kn(e,n).next(()=>this.Bn(e).next(i=>(i.targetCount+=1,this.qn(n,i),this.Ln(e,i))))}updateTargetData(e,n){return this.kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>ka(e).delete(n.targetId)).next(()=>this.Bn(e)).next(i=>(j(i.targetCount>0),i.targetCount-=1,this.Ln(e,i)))}removeTargets(e,n,i){let r=0,o=[];return ka(e).Y((s,a)=>{let c=mu(a);c.sequenceNumber<=n&&i.get(c.targetId)===null&&(r++,o.push(this.removeTargetData(e,c)))}).next(()=>b.waitFor(o)).next(()=>r)}forEachTarget(e,n){return ka(e).Y((i,r)=>{let o=mu(r);n(o)})}Bn(e){return Pk(e).get("targetGlobalKey").next(n=>(j(n!==null),n))}Ln(e,n){return Pk(e).put("targetGlobalKey",n)}kn(e,n){return ka(e).put(GP(this.serializer,n))}qn(e,n){let i=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,i=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){let i=os(n),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]),o=null;return ka(e).Y({range:r,index:"queryTargetsIndex"},(s,a,c)=>{let l=mu(a);qu(n,l.target)&&(o=l,c.done())}).next(()=>o)}addMatchingKeys(e,n,i){let r=[],o=Lr(e);return n.forEach(s=>{let a=jt(s.path);r.push(o.put({targetId:i,path:a})),r.push(this.referenceDelegate.addReference(e,i,s))}),b.waitFor(r)}removeMatchingKeys(e,n,i){let r=Lr(e);return b.forEach(n,o=>{let s=jt(o.path);return b.waitFor([r.delete([i,s]),this.referenceDelegate.removeReference(e,i,o)])})}removeMatchingKeysForTargetId(e,n){let i=Lr(e),r=IDBKeyRange.bound([n],[n+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,n){let i=IDBKeyRange.bound([n],[n+1],!1,!0),r=Lr(e),o=ie();return r.Y({range:i,J:!0},(s,a,c)=>{let l=xi(s[1]),u=new k(l);o=o.add(u)}).next(()=>o)}containsKey(e,n){let i=jt(n.path),r=IDBKeyRange.bound([i],[Xk(i)],!1,!0),o=0;return Lr(e).Y({index:"documentTargetsIndex",J:!0,range:r},([s,a],c,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}_t(e,n){return ka(e).get(n).next(i=>i?mu(i):null)}};function ka(t){return _t(t,"targets")}function Pk(t){return _t(t,"targetGlobal")}function Lr(t){return _t(t,"targetDocuments")}function Nk([t,e],[n,i]){let r=ne(t,n);return r===0?ne(e,i):r}var Uw=class{constructor(e){this.Qn=e,this.buffer=new Me(Nk),this.Kn=0}$n(){return++this.Kn}Un(e){let n=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(n);else{let i=this.buffer.last();Nk(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}},zw=class{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Wn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return this.Wn!==null}Gn(e){x("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>_(this,null,function*(){this.Wn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){Jr(n)?x("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):yield Xr(n)}yield this.Gn(3e5)}))}},$w=class{constructor(e,n){this.zn=e,this.params=n}calculateTargetCount(e,n){return this.zn.jn(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return b.resolve(vn._e);let i=new Uw(n);return this.zn.forEachTarget(e,r=>i.Un(r.sequenceNumber)).next(()=>this.zn.Hn(e,r=>i.Un(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.zn.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.zn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(x("LruGarbageCollector","Garbage collection skipped; disabled"),b.resolve(kk)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(x("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),kk):this.Jn(e,n))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,n){let i,r,o,s,a,c,l,u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(x("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),r=this.params.maximumSequenceNumbersToCollect):r=d,s=Date.now(),this.nthSequenceNumber(e,r))).next(d=>(i=d,a=Date.now(),this.removeTargets(e,i,n))).next(d=>(o=d,c=Date.now(),this.removeOrphanedDocuments(e,i))).next(d=>(l=Date.now(),Pa()<=ti.DEBUG&&x("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-u}ms
	Determined least recently used ${r} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${d} documents in `+(l-c)+`ms
Total Duration: ${l-u}ms`),b.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:d})))}};function m8(t,e){return new $w(t,e)}var Hw=class{constructor(e,n){this.db=e,this.garbageCollector=m8(this,n)}jn(e){let n=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}Yn(e){let n=0;return this.Hn(e,i=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Hn(e,n){return this.Zn(e,(i,r)=>n(r))}addReference(e,n,i){return Rm(e,i)}removeReference(e,n,i){return Rm(e,i)}removeTargets(e,n,i){return this.db.getTargetCache().removeTargets(e,n,i)}markPotentiallyOrphaned(e,n){return Rm(e,n)}Xn(e,n){return function(r,o){let s=!1;return ZP(r).Z(a=>YP(r,a,o).next(c=>(c&&(s=!0),b.resolve(!c)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){let i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[],o=0;return this.Zn(e,(s,a)=>{if(a<=n){let c=this.Xn(e,s).next(l=>{if(!l)return o++,i.getEntry(e,s).next(()=>(i.removeEntry(s,$.min()),Lr(e).delete(function(d){return[0,jt(d.path)]}(s))))});r.push(c)}}).next(()=>b.waitFor(r)).next(()=>i.apply(e)).next(()=>o)}removeTarget(e,n){let i=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,n){return Rm(e,n)}Zn(e,n){let i=Lr(e),r,o=vn._e;return i.Y({index:"documentTargetsIndex"},([s,a],{path:c,sequenceNumber:l})=>{s===0?(o!==vn._e&&n(new k(xi(r)),o),o=l,r=c):o=vn._e}).next(()=>{o!==vn._e&&n(new k(xi(r)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Rm(t,e){return Lr(t).put(function(i,r){return{targetId:0,path:jt(i.path),sequenceNumber:r}}(e,t.currentSequenceNumber))}var cp=class{constructor(){this.changes=new Mi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ut.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let i=this.changes.get(n);return i!==void 0?b.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var qw=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,i){return Ko(e).put(i)}removeEntry(e,n,i){return Ko(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],np(s),a[a.length-1]]}(n,i))}updateMetadata(e,n){return this.getMetadata(e).next(i=>(i.byteSize+=n,this.er(e,i)))}getEntry(e,n){let i=ut.newInvalidDocument(n);return Ko(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(du(n))},(r,o)=>{i=this.tr(n,o)}).next(()=>i)}nr(e,n){let i={size:0,document:ut.newInvalidDocument(n)};return Ko(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(du(n))},(r,o)=>{i={document:this.tr(n,o),size:sp(o)}}).next(()=>i)}getEntries(e,n){let i=en();return this.rr(e,n,(r,o)=>{let s=this.tr(r,o);i=i.insert(r,s)}).next(()=>i)}ir(e,n){let i=en(),r=new Oe(k.comparator);return this.rr(e,n,(o,s)=>{let a=this.tr(o,s);i=i.insert(o,a),r=r.insert(o,sp(s))}).next(()=>({documents:i,sr:r}))}rr(e,n,i){if(n.isEmpty())return b.resolve();let r=new Me(Lk);n.forEach(c=>r=r.add(c));let o=IDBKeyRange.bound(du(r.first()),du(r.last())),s=r.getIterator(),a=s.getNext();return Ko(e).Y({index:"documentKeyIndex",range:o},(c,l,u)=>{let d=k.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&Lk(a,d)<0;)i(a,null),a=s.getNext();a&&a.isEqual(d)&&(i(a,l),a=s.hasNext()?s.getNext():null),a?u.U(du(a)):u.done()}).next(()=>{for(;a;)i(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,n,i,r,o){let s=n.path,a=[s.popLast().toArray(),s.lastSegment(),np(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ko(e).W(IDBKeyRange.bound(a,c,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let u=en();for(let d of l){let h=this.tr(k.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);h.isFoundDocument()&&(Wu(n,h)||r.has(h.key))&&(u=u.insert(h.key,h))}return u})}getAllFromCollectionGroup(e,n,i,r){let o=en(),s=Fk(n,i),a=Fk(n,Nn.max());return Ko(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(c,l,u)=>{let d=this.tr(k.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(d.key,d),o.size===r&&u.done()}).next(()=>o)}newChangeBuffer(e){return new Gw(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return Ok(e).get("remoteDocumentGlobalKey").next(n=>(j(!!n),n))}er(e,n){return Ok(e).put("remoteDocumentGlobalKey",n)}tr(e,n){if(n){let i=d8(this.serializer,n);if(!(i.isNoDocument()&&i.version.isEqual($.min())))return i}return ut.newInvalidDocument(e)}};function XP(t){return new qw(t)}var Gw=class extends cp{constructor(e,n){super(),this._r=e,this.trackRemovals=n,this.ar=new Mi(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){let n=[],i=0,r=new Me((o,s)=>ne(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.ar.get(o);if(n.push(this._r.removeEntry(e,o,a.readTime)),s.isValidDocument()){let c=Ek(this._r.serializer,s);r=r.add(o.path.popLast());let l=sp(c);i+=l-a.size,n.push(this._r.addEntry(e,o,c))}else if(i-=a.size,this.trackRemovals){let c=Ek(this._r.serializer,s.convertToNoDocument($.min()));n.push(this._r.addEntry(e,o,c))}}),r.forEach(o=>{n.push(this._r.indexManager.addToCollectionParentIndex(e,o))}),n.push(this._r.updateMetadata(e,i)),b.waitFor(n)}getFromCache(e,n){return this._r.nr(e,n).next(i=>(this.ar.set(n,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,n){return this._r.ir(e,n).next(({documents:i,sr:r})=>(r.forEach((o,s)=>{this.ar.set(o,{size:s,readTime:i.get(o).readTime})}),i))}};function Ok(t){return _t(t,"remoteDocumentGlobal")}function Ko(t){return _t(t,"remoteDocumentsV14")}function du(t){let e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Fk(t,e){let n=e.documentKey.path.toArray();return[t,np(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Lk(t,e){let n=t.path.toArray(),i=e.path.toArray(),r=0;for(let o=0;o<n.length-2&&o<i.length-2;++o)if(r=ne(n[o],i[o]),r)return r;return r=ne(n.length,i.length),r||(r=ne(n[n.length-2],i[i.length-2]),r||ne(n[n.length-1],i[i.length-1]))}var Ww=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var lp=class{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&bu(i.mutation,r,wn.empty(),ze.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,ie()).next(()=>i))}getLocalViewOfDocuments(e,n,i=ie()){let r=Ii();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(o=>{let s=fu();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let i=Ii();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,ie()))}populateOverlays(e,n,i){let r=[];return i.forEach(o=>{n.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,i,r){let o=en(),s=gu(),a=function(){return gu()}();return n.forEach((c,l)=>{let u=i.get(l.key);r.has(l.key)&&(u===void 0||u.mutation instanceof Zn)?o=o.insert(l.key,l):u!==void 0?(s.set(l.key,u.mutation.getFieldMask()),bu(u.mutation,l,u.mutation.getFieldMask(),ze.now())):s.set(l.key,wn.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((l,u)=>s.set(l,u)),n.forEach((l,u)=>{var d;return a.set(l,new Ww(u,(d=s.get(l))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){let i=gu(),r=new Oe((s,a)=>s-a),o=ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(c=>{let l=n.get(c);if(l===null)return;let u=i.get(c)||wn.empty();u=a.applyToLocalView(l,u),i.set(c,u);let d=(r.get(a.batchId)||ie()).add(c);r=r.insert(a.batchId,d)})}).next(()=>{let s=[],a=r.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,u=c.value,d=EP();u.forEach(h=>{if(!o.has(h)){let f=MP(n.get(h),i.get(h));f!==null&&d.set(h,f),o=o.add(h)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,d))}return b.waitFor(s)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(s){return k.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):ZE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(o=>{let s=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-o.size):b.resolve(Ii()),a=-1,c=o;return s.next(l=>b.forEach(l,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),o.get(u)?b.resolve():this.remoteDocumentCache.getEntry(e,u).next(h=>{c=c.insert(u,h)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,c,l,ie())).next(u=>({batchId:a,changes:wP(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new k(n)).next(i=>{let r=fu();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){let o=n.collectionGroup,s=fu();return this.indexManager.getCollectionParents(e,o).next(a=>b.forEach(a,c=>{let l=function(d,h){return new Yn(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,i,r).next(u=>{u.forEach((d,h)=>{s=s.insert(d,h)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,r))).next(s=>{o.forEach((c,l)=>{let u=l.getKey();s.get(u)===null&&(s=s.insert(u,ut.newInvalidDocument(u)))});let a=fu();return s.forEach((c,l)=>{let u=o.get(c);u!==void 0&&bu(u.mutation,l,wn.empty(),ze.now()),Wu(n,l)&&(a=a.insert(c,l))}),a})}};var Kw=class{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,n){return b.resolve(this.ur.get(n))}saveBundleMetadata(e,n){return this.ur.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Je(r.createTime)}}(n)),b.resolve()}getNamedQuery(e,n){return b.resolve(this.cr.get(n))}saveNamedQuery(e,n){return this.cr.set(n.name,function(r){return{name:r.name,query:ex(r.bundledQuery),readTime:Je(r.readTime)}}(n)),b.resolve()}};var Qw=class{constructor(){this.overlays=new Oe(k.comparator),this.lr=new Map}getOverlay(e,n){return b.resolve(this.overlays.get(n))}getOverlays(e,n){let i=Ii();return b.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,o)=>{this.lt(e,n,o)}),b.resolve()}removeOverlaysForBatchId(e,n,i){let r=this.lr.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.lr.delete(i)),b.resolve()}getOverlaysForCollection(e,n,i){let r=Ii(),o=n.length+1,s=new k(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&c.largestBatchId>i&&r.set(c.getKey(),c)}return b.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let o=new Oe((l,u)=>l-u),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>i){let u=o.get(l.largestBatchId);u===null&&(u=Ii(),o=o.insert(l.largestBatchId,u)),u.set(l.getKey(),l)}}let a=Ii(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,u)=>a.set(l,u)),!(a.size()>=r)););return b.resolve(a)}lt(e,n,i){let r=this.overlays.get(i.key);if(r!==null){let s=this.lr.get(r.largestBatchId).delete(i.key);this.lr.set(r.largestBatchId,s)}this.overlays=this.overlays.insert(i.key,new Su(n,i));let o=this.lr.get(n);o===void 0&&(o=ie(),this.lr.set(n,o)),this.lr.set(n,o.add(i.key))}};var Ou=class{constructor(){this.hr=new Me(at.Pr),this.Ir=new Me(at.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,n){let i=new at(e,n);this.hr=this.hr.add(i),this.Ir=this.Ir.add(i)}Er(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.dr(new at(e,n))}Ar(e,n){e.forEach(i=>this.removeReference(i,n))}Rr(e){let n=new k(new ve([])),i=new at(n,e),r=new at(n,e+1),o=[];return this.Ir.forEachInRange([i,r],s=>{this.dr(s),o.push(s.key)}),o}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){let n=new k(new ve([])),i=new at(n,e),r=new at(n,e+1),o=ie();return this.Ir.forEachInRange([i,r],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new at(e,0),i=this.hr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}},at=class{constructor(e,n){this.key=e,this.gr=n}static Pr(e,n){return k.comparator(e.key,n.key)||ne(e.gr,n.gr)}static Tr(e,n){return ne(e.gr,n.gr)||k.comparator(e.key,n.key)}};var Yw=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new Me(at.Pr)}checkEmpty(e){return b.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){let o=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Tu(o,n,i,r);this.mutationQueue.push(s);for(let a of r)this.yr=this.yr.add(new at(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return b.resolve(s)}lookupMutationBatch(e,n){return b.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(e,n){let i=n+1,r=this.Sr(i),o=r<0?0:r;return b.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return b.resolve(this.mutationQueue.length===0?-1:this.pr-1)}getAllMutationBatches(e){return b.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let i=new at(n,0),r=new at(n,Number.POSITIVE_INFINITY),o=[];return this.yr.forEachInRange([i,r],s=>{let a=this.wr(s.gr);o.push(a)}),b.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Me(ne);return n.forEach(r=>{let o=new at(r,0),s=new at(r,Number.POSITIVE_INFINITY);this.yr.forEachInRange([o,s],a=>{i=i.add(a.gr)})}),b.resolve(this.br(i))}getAllMutationBatchesAffectingQuery(e,n){let i=n.path,r=i.length+1,o=i;k.isDocumentKey(o)||(o=o.child(""));let s=new at(new k(o),0),a=new Me(ne);return this.yr.forEachWhile(c=>{let l=c.key.path;return!!i.isPrefixOf(l)&&(l.length===r&&(a=a.add(c.gr)),!0)},s),b.resolve(this.br(a))}br(e){let n=[];return e.forEach(i=>{let r=this.wr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){j(this.Dr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.yr;return b.forEach(n.mutations,r=>{let o=new at(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.yr=i})}Fn(e){}containsKey(e,n){let i=new at(n,0),r=this.yr.firstAfterOrEqual(i);return b.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,b.resolve()}Dr(e,n){return this.Sr(e)}Sr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}wr(e){let n=this.Sr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var Zw=class{constructor(e){this.Cr=e,this.docs=function(){return new Oe(k.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let i=n.key,r=this.docs.get(i),o=r?r.size:0,s=this.Cr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let i=this.docs.get(n);return b.resolve(i?i.document.mutableCopy():ut.newInvalidDocument(n))}getEntries(e,n){let i=en();return n.forEach(r=>{let o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():ut.newInvalidDocument(r))}),b.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let o=en(),s=n.path,a=new k(s.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:u}}=c.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||WE(eP(u),i)<=0||(r.has(u.key)||Wu(n,u))&&(o=o.insert(u.key,u.mutableCopy()))}return b.resolve(o)}getAllFromCollectionGroup(e,n,i,r){F()}vr(e,n){return b.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new Xw(this)}getSize(e){return b.resolve(this.size)}},Xw=class extends cp{constructor(e){super(),this._r=e}applyChanges(e){let n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this._r.addEntry(e,r)):this._r.removeEntry(i)}),b.waitFor(n)}getFromCache(e,n){return this._r.getEntry(e,n)}getAllFromCache(e,n){return this._r.getEntries(e,n)}};var Jw=class{constructor(e){this.persistence=e,this.Fr=new Mi(n=>os(n),qu),this.lastRemoteSnapshotVersion=$.min(),this.highestTargetId=0,this.Mr=0,this.Or=new Ou,this.targetCount=0,this.Nr=Ya.On()}forEachTarget(e,n){return this.Fr.forEach((i,r)=>n(r)),b.resolve()}getLastRemoteSnapshotVersion(e){return b.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return b.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),b.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Mr&&(this.Mr=n),b.resolve()}kn(e){this.Fr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Nr=new Ya(n),this.highestTargetId=n),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,n){return this.kn(n),this.targetCount+=1,b.resolve()}updateTargetData(e,n){return this.kn(n),b.resolve()}removeTargetData(e,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,b.resolve()}removeTargets(e,n,i){let r=0,o=[];return this.Fr.forEach((s,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.Fr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),b.waitFor(o).next(()=>r)}getTargetCount(e){return b.resolve(this.targetCount)}getTargetData(e,n){let i=this.Fr.get(n)||null;return b.resolve(i)}addMatchingKeys(e,n,i){return this.Or.Er(n,i),b.resolve()}removeMatchingKeys(e,n,i){this.Or.Ar(n,i);let r=this.persistence.referenceDelegate,o=[];return r&&n.forEach(s=>{o.push(r.markPotentiallyOrphaned(e,s))}),b.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Or.Rr(n),b.resolve()}getMatchingKeysForTargetId(e,n){let i=this.Or.mr(n);return b.resolve(i)}containsKey(e,n){return b.resolve(this.Or.containsKey(n))}};var up=class{constructor(e,n){this.Br={},this.overlays={},this.Lr=new vn(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new Jw(this),this.indexManager=new Vw,this.remoteDocumentCache=function(r){return new Zw(r)}(i=>this.referenceDelegate.Qr(i)),this.serializer=new tp(n),this.Kr=new Kw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Qw,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.Br[e.toKey()];return i||(i=new Yw(n,this.referenceDelegate),this.Br[e.toKey()]=i),i}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,n,i){x("MemoryPersistence","Starting transaction:",e);let r=new eE(this.Lr.next());return this.referenceDelegate.$r(),i(r).next(o=>this.referenceDelegate.Ur(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Wr(e,n){return b.or(Object.values(this.Br).map(i=>()=>i.containsKey(e,n)))}},eE=class extends $m{constructor(e){super(),this.currentSequenceNumber=e}},dp=class t{constructor(e){this.persistence=e,this.Gr=new Ou,this.zr=null}static jr(e){return new t(e)}get Hr(){if(this.zr)return this.zr;throw F()}addReference(e,n,i){return this.Gr.addReference(i,n),this.Hr.delete(i.toString()),b.resolve()}removeReference(e,n,i){return this.Gr.removeReference(i,n),this.Hr.add(i.toString()),b.resolve()}markPotentiallyOrphaned(e,n){return this.Hr.add(n.toString()),b.resolve()}removeTarget(e,n){this.Gr.Rr(n.targetId).forEach(r=>this.Hr.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(o=>this.Hr.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}$r(){this.zr=new Set}Ur(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return b.forEach(this.Hr,i=>{let r=k.fromPath(i);return this.Jr(e,r).next(o=>{o||n.removeEntry(r,$.min())})}).next(()=>(this.zr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Jr(e,n).next(i=>{i?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(e){return 0}Jr(e,n){return b.or([()=>b.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Wr(e,n)])}};var tE=class{constructor(e){this.serializer=e}N(e,n,i,r){let o=new Hm("createOrUpgrade",n);i<1&&r>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ek,{unique:!0}),c.createObjectStore("documentMutations")}(e),Vk(e),function(c){c.createObjectStore("remoteDocuments")}(e));let s=b.resolve();return i<3&&r>=3&&(i!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),Vk(e)),s=s.next(()=>function(c){let l=c.store("targetGlobal"),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:$.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",u)}(o))),i<4&&r>=4&&(i!==0&&(s=s.next(()=>function(c,l){return l.store("mutations").W().next(u=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ek,{unique:!0});let d=l.store("mutations"),h=u.map(f=>d.put(f));return b.waitFor(h)})}(e,o))),s=s.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),i<5&&r>=5&&(s=s.next(()=>this.Zr(o))),i<6&&r>=6&&(s=s.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(o)))),i<7&&r>=7&&(s=s.next(()=>this.ei(o))),i<8&&r>=8&&(s=s.next(()=>this.ti(e,o))),i<9&&r>=9&&(s=s.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),i<10&&r>=10&&(s=s.next(()=>this.ni(o))),i<11&&r>=11&&(s=s.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&r>=12&&(s=s.next(()=>{(function(c){let l=c.createObjectStore("documentOverlays",{keyPath:k9});l.createIndex("collectionPathOverlayIndex",P9,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",N9,{unique:!1})})(e)})),i<13&&r>=13&&(s=s.next(()=>function(c){let l=c.createObjectStore("remoteDocumentsV14",{keyPath:w9});l.createIndex("documentKeyIndex",E9),l.createIndex("collectionGroupIndex",x9)}(e)).next(()=>this.ri(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(s=s.next(()=>this.ii(e,o))),i<15&&r>=15&&(s=s.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:S9}).createIndex("sequenceNumberIndex",A9,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:M9}).createIndex("documentKeyIndex",R9,{unique:!1})}(e))),s}Xr(e){let n=0;return e.store("remoteDocuments").Y((i,r)=>{n+=sp(r)}).next(()=>{let i={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Zr(e){let n=e.store("mutationQueues"),i=e.store("mutations");return n.W().next(r=>b.forEach(r,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return i.W("userMutationsIndex",s).next(a=>b.forEach(a,c=>{j(c.userId===o.userId);let l=Zo(this.serializer,c);return QP(e,o.userId,l).next(()=>{})}))}))}ei(e){let n=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(r=>{let o=[];return i.Y((s,a)=>{let c=new ve(s),l=function(d){return[0,jt(d)]}(c);o.push(n.get(l).next(u=>u?b.resolve():(d=>n.put({targetId:0,path:jt(d),sequenceNumber:r.highestListenSequenceNumber}))(c)))}).next(()=>b.waitFor(o))})}ti(e,n){e.createObjectStore("collectionParents",{keyPath:T9});let i=n.store("collectionParents"),r=new Nu,o=s=>{if(r.add(s)){let a=s.lastSegment(),c=s.popLast();return i.put({collectionId:a,parent:jt(c)})}};return n.store("remoteDocuments").Y({J:!0},(s,a)=>{let c=new ve(s);return o(c.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([s,a,c],l)=>{let u=xi(a);return o(u.popLast())}))}ni(e){let n=e.store("targets");return n.Y((i,r)=>{let o=mu(r),s=GP(this.serializer,o);return n.put(s)})}ri(e,n){let i=n.store("remoteDocuments"),r=[];return i.Y((o,s)=>{let a=n.store("remoteDocumentsV14"),c=function(d){return d.document?new k(ve.fromString(d.document.name).popFirst(5)):d.noDocument?k.fromSegments(d.noDocument.path):d.unknownDocument?k.fromSegments(d.unknownDocument.path):F()}(s).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};r.push(a.put(l))}).next(()=>b.waitFor(r))}ii(e,n){let i=n.store("mutations"),r=XP(this.serializer),o=new up(dp.jr,this.serializer.ut);return i.W().next(s=>{let a=new Map;return s.forEach(c=>{var l;let u=(l=a.get(c.userId))!==null&&l!==void 0?l:ie();Zo(this.serializer,c).keys().forEach(d=>u=u.add(d)),a.set(c.userId,u)}),b.forEach(a,(c,l)=>{let u=new ct(l),d=ip.ct(this.serializer,u),h=o.getIndexManager(u),f=ap.ct(u,this.serializer,h,o.referenceDelegate);return new lp(r,f,d,h).recalculateAndSaveOverlaysForDocumentKeys(new Eu(n,vn._e),c).next()})})}};function Vk(t){t.createObjectStore("targetDocuments",{keyPath:D9}).createIndex("documentTargetsIndex",C9,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",I9,{unique:!0}),t.createObjectStore("targetGlobal")}var W0="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",nE=class t{constructor(e,n,i,r,o,s,a,c,l,u,d=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=i,this.si=o,this.window=s,this.document=a,this.oi=l,this._i=u,this.ai=d,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=h=>Promise.resolve(),!t.D())throw new E(y.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Hw(this,r),this.Ii=n+"main",this.serializer=new tp(c),this.Ti=new zr(this.Ii,this.ai,new tE(this.serializer)),this.qr=new Bw(this.referenceDelegate,this.serializer),this.remoteDocumentCache=XP(this.serializer),this.Kr=new Rw,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,u===!1&&Ze("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new E(y.FAILED_PRECONDITION,W0);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.qr.getHighestSequenceNumber(e))}).then(e=>{this.Lr=new vn(e,this.oi)}).then(()=>{this.kr=!0}).catch(e=>(this.Ti&&this.Ti.close(),Promise.reject(e)))}mi(e){return this.Pi=n=>_(this,null,function*(){if(this.started)return e(n)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L(n=>_(this,null,function*(){n.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget(()=>_(this,null,function*(){this.started&&(yield this.di())})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>km(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(n=>{n||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)))})}).next(()=>this.gi(e)).next(n=>this.isPrimary&&!n?this.pi(e).next(()=>!1):!!n&&this.yi(e).next(()=>!0))).catch(e=>{if(Jr(e))return x("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return x("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.Pi(e)),this.isPrimary=e})}fi(e){return hu(e).get("owner").next(n=>b.resolve(this.wi(n)))}Si(e){return km(e).delete(this.clientId)}bi(){return _(this,null,function*(){if(this.isPrimary&&!this.Di(this.hi,18e5)){this.hi=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{let i=_t(n,"clientMetadata");return i.W().next(r=>{let o=this.Ci(r,18e5),s=r.filter(a=>o.indexOf(a)===-1);return b.forEach(s,a=>i.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Ei)for(let n of e)this.Ei.removeItem(this.vi(n.clientId))}})}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.di().then(()=>this.bi()).then(()=>this.Vi()))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?b.resolve(!0):hu(e).get("owner").next(n=>{if(n!==null&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)){if(this.wi(n)&&this.networkEnabled)return!0;if(!this.wi(n)){if(!n.allowTabSynchronization)throw new E(y.FAILED_PRECONDITION,W0);return!1}}return!(!this.networkEnabled||!this.inForeground)||km(e).W().next(i=>this.Ci(i,5e3).find(r=>{if(this.clientId!==r.clientId){let o=!this.networkEnabled&&r.networkEnabled,s=!this.inForeground&&r.inForeground,a=this.networkEnabled===r.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&x("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){return _(this,null,function*(){this.kr=!1,this.Mi(),this.li&&(this.li.cancel(),this.li=null),this.xi(),this.Oi(),yield this.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let n=new Eu(e,vn._e);return this.pi(n).next(()=>this.Si(n))}),this.Ti.close(),this.Ni()})}Ci(e,n){return e.filter(i=>this.Di(i.updateTimeMs,n)&&!this.Fi(i.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>km(e).W().next(n=>this.Ci(n,18e5).map(i=>i.clientId)))}get started(){return this.kr}getMutationQueue(e,n){return ap.ct(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new jw(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return ip.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,n,i){x("IndexedDbPersistence","Starting transaction:",e);let r=n==="readonly"?"readonly":"readwrite",o=function(c){return c===15?F9:c===14?sP:c===13?oP:c===12?O9:c===11?rP:void F()}(this.ai),s;return this.Ti.runTransaction(e,r,o,a=>(s=new Eu(a,this.Lr?this.Lr.next():vn._e),n==="readwrite-primary"?this.fi(s).next(c=>!!c||this.gi(s)).next(c=>{if(!c)throw Ze(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)),new E(y.FAILED_PRECONDITION,tP);return i(s)}).next(c=>this.yi(s).next(()=>c)):this.Li(s).next(()=>i(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Li(e){return hu(e).get("owner").next(n=>{if(n!==null&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)&&!this.wi(n)&&!(this._i||this.allowTabSynchronization&&n.allowTabSynchronization))throw new E(y.FAILED_PRECONDITION,W0)})}yi(e){let n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return hu(e).put("owner",n)}static D(){return zr.D()}pi(e){let n=hu(e);return n.get("owner").next(i=>this.wi(i)?(x("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):b.resolve())}Di(e,n){let i=Date.now();return!(e<i-n)&&(!(e>i)||(Ze(`Detected an update time that is in the future: ${e} > ${i}`),!1))}Ai(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.di()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground=this.document.visibilityState==="visible")}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ui=()=>{this.Mi();let n=/(?:Version|Mobile)\/1[456]/;Zx()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var n;try{let i=((n=this.Ei)===null||n===void 0?void 0:n.getItem(this.vi(e)))!==null;return x("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Ze("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){Ze("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch{}}vi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function hu(t){return _t(t,"owner")}function km(t){return _t(t,"clientMetadata")}function nx(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var iE=class t{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.ki=i,this.qi=r}static Qi(e,n){let i=ie(),r=ie();for(let o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new t(e,n.fromCache,i,r)}};var rE=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var hp=class{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,n){this.Gi=e,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(e,n,i,r){let o={result:null};return this.zi(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ji(e,n,r,i).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new rE;return this.Hi(e,n,s).next(a=>{if(o.result=a,this.$i)return this.Ji(e,n,s,a.size)})}).next(()=>o.result)}Ji(e,n,i,r){return i.documentReadCount<this.Ui?(Pa()<=ti.DEBUG&&x("QueryEngine","SDK will not create cache indexes for query:",Na(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),b.resolve()):(Pa()<=ti.DEBUG&&x("QueryEngine","Query:",Na(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Wi*r?(Pa()<=ti.DEBUG&&x("QueryEngine","The SDK decides to create cache indexes for query:",Na(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Bt(n))):b.resolve())}zi(e,n){if(dk(n))return b.resolve(null);let i=Bt(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Zm(n,null,"F"),i=Bt(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{let s=ie(...o);return this.Gi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,i).next(c=>{let l=this.Yi(n,a);return this.Zi(n,l,s,c.readTime)?this.zi(e,Zm(n,null,"F")):this.Xi(e,l,n,c)}))})))}ji(e,n,i,r){return dk(n)||r.isEqual($.min())?b.resolve(null):this.Gi.getDocuments(e,i).next(o=>{let s=this.Yi(n,o);return this.Zi(n,s,i,r)?b.resolve(null):(Pa()<=ti.DEBUG&&x("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Na(n)),this.Xi(e,s,n,Jk(r,-1)).next(a=>a))})}Yi(e,n){let i=new Me(_P(e));return n.forEach((r,o)=>{Wu(e,o)&&(i=i.add(o))}),i}Zi(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Hi(e,n,i){return Pa()<=ti.DEBUG&&x("QueryEngine","Using full collection scan to execute query:",Na(n)),this.Gi.getDocumentsMatchingQuery(e,n,Nn.min(),i)}Xi(e,n,i,r){return this.Gi.getDocumentsMatchingQuery(e,i,r).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var oE=class{constructor(e,n,i,r){this.persistence=e,this.es=n,this.serializer=r,this.ts=new Oe(ne),this.ns=new Mi(o=>os(o),qu),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(i)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new lp(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ts))}};function JP(t,e,n,i){return new oE(t,e,n,i)}function eN(t,e){return _(this,null,function*(){let n=N(t);return yield n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,n.os(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{let s=[],a=[],c=ie();for(let l of r){s.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}for(let l of o){a.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}return n.localDocuments.getDocuments(i,c).next(l=>({_s:l,removedBatchIds:s,addedBatchIds:a}))})})})}function p8(t,e){let n=N(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=e.batch.keys(),o=n.ss.newChangeBuffer({trackRemovals:!0});return function(a,c,l,u){let d=l.batch,h=d.keys(),f=b.resolve();return h.forEach(m=>{f=f.next(()=>u.getEntry(c,m)).next(p=>{let g=l.docVersions.get(m);j(g!==null),p.version.compareTo(g)<0&&(d.applyToRemoteDocument(p,l),p.isValidDocument()&&(p.setReadTime(l.commitVersion),u.addEntry(p)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(c,d))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let c=ie();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function tN(t){let e=N(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.qr.getLastRemoteSnapshotVersion(n))}function g8(t,e){let n=N(t),i=e.snapshotVersion,r=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.ss.newChangeBuffer({trackRemovals:!0});r=n.ts;let a=[];e.targetChanges.forEach((u,d)=>{let h=r.get(d);if(!h)return;a.push(n.qr.removeMatchingKeys(o,u.removedDocuments,d).next(()=>n.qr.addMatchingKeys(o,u.addedDocuments,d)));let f=h.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(d)!==null?f=f.withResumeToken(yt.EMPTY_BYTE_STRING,$.min()).withLastLimboFreeSnapshotVersion($.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,i)),r=r.insert(d,f),function(p,g,w){return p.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(h,f,u)&&a.push(n.qr.updateTargetData(o,f))});let c=en(),l=ie();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,u))}),a.push(nN(o,s,e.documentUpdates).next(u=>{c=u.us,l=u.cs})),!i.isEqual($.min())){let u=n.qr.getLastRemoteSnapshotVersion(o).next(d=>n.qr.setTargetsMetadata(o,o.currentSequenceNumber,i));a.push(u)}return b.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,c,l)).next(()=>c)}).then(o=>(n.ts=r,o))}function nN(t,e,n){let i=ie(),r=ie();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let s=en();return n.forEach((a,c)=>{let l=o.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(r=r.add(a)),c.isNoDocument()&&c.version.isEqual($.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):x("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{us:s,cs:r}})}function b8(t,e){let n=N(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Za(t,e){let n=N(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.qr.getTargetData(i,e).next(o=>o?(r=o,b.resolve(r)):n.qr.allocateTargetId(i).next(s=>(r=new Qa(e,s,"TargetPurposeListen",i.currentSequenceNumber),n.qr.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=n.ts.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ts=n.ts.insert(i.targetId,i),n.ns.set(e,i.targetId)),i})}function Xa(t,e,n){return _(this,null,function*(){let i=N(t),r=i.ts.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield i.persistence.runTransaction("Release target",o,s=>i.persistence.referenceDelegate.removeTarget(s,r)))}catch(s){if(!Jr(s))throw s;x("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}i.ts=i.ts.remove(e),i.ns.delete(r.target)})}function fp(t,e,n){let i=N(t),r=$.min(),o=ie();return i.persistence.runTransaction("Execute query","readwrite",s=>function(c,l,u){let d=N(c),h=d.ns.get(u);return h!==void 0?b.resolve(d.ts.get(h)):d.qr.getTargetData(l,u)}(i,s,Bt(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.qr.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>i.es.getDocumentsMatchingQuery(s,e,n?r:$.min(),n?o:ie())).next(a=>(oN(i,yP(e),a),{documents:a,ls:o})))}function iN(t,e){let n=N(t),i=N(n.qr),r=n.ts.get(e);return r?Promise.resolve(r.target):n.persistence.runTransaction("Get target data","readonly",o=>i._t(o,e).next(s=>s?s.target:null))}function rN(t,e){let n=N(t),i=n.rs.get(e)||$.min();return n.persistence.runTransaction("Get new document changes","readonly",r=>n.ss.getAllFromCollectionGroup(r,e,Jk(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(oN(n,e,r),r))}function oN(t,e,n){let i=t.rs.get(e)||$.min();n.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.rs.set(e,i)}function y8(t,e,n,i){return _(this,null,function*(){let r=N(t),o=ie(),s=en();for(let l of n){let u=e.hs(l.metadata.name);l.document&&(o=o.add(u));let d=e.Ps(l);d.setReadTime(e.Is(l.metadata.readTime)),s=s.insert(u,d)}let a=r.ss.newChangeBuffer({trackRemovals:!0}),c=yield Za(r,function(u){return Bt(oc(ve.fromString(`__bundle__/docs/${u}`)))}(i));return r.persistence.runTransaction("Apply bundle documents","readwrite",l=>nN(l,a,s).next(u=>(a.apply(l),u)).next(u=>r.qr.removeMatchingKeysForTargetId(l,c.targetId).next(()=>r.qr.addMatchingKeys(l,o,c.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(l,u.us,u.cs)).next(()=>u.us)))})}function _8(i,r){return _(this,arguments,function*(t,e,n=ie()){let o=yield Za(t,Bt(ex(e.bundledQuery))),s=N(t);return s.persistence.runTransaction("Save named query","readwrite",a=>{let c=Je(e.readTime);if(o.snapshotVersion.compareTo(c)>=0)return s.Kr.saveNamedQuery(a,e);let l=o.withResumeToken(yt.EMPTY_BYTE_STRING,c);return s.ts=s.ts.insert(l.targetId,l),s.qr.updateTargetData(a,l).next(()=>s.qr.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.qr.addMatchingKeys(a,n,o.targetId)).next(()=>s.Kr.saveNamedQuery(a,e))})})}function jk(t,e){return`firestore_clients_${t}_${e}`}function Bk(t,e,n){let i=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function K0(t,e){return`firestore_targets_${t}_${e}`}var mp=class t{constructor(e,n,i,r){this.user=e,this.batchId=n,this.state=i,this.error=r}static Ts(e,n,i){let r=JSON.parse(i),o,s=typeof r=="object"&&["pending","acknowledged","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(o=new E(r.error.code,r.error.message))),s?new t(e,n,r.state,o):(Ze("SharedClientState",`Failed to parse mutation state for ID '${n}': ${i}`),null)}Es(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},yu=class t{constructor(e,n,i){this.targetId=e,this.state=n,this.error=i}static Ts(e,n){let i=JSON.parse(n),r,o=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(r=new E(i.error.code,i.error.message))),o?new t(e,i.state,r):(Ze("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Es(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},pp=class t{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ts(e,n){let i=JSON.parse(n),r=typeof i=="object"&&i.activeTargetIds instanceof Array,o=XE();for(let s=0;r&&s<i.activeTargetIds.length;++s)r=nP(i.activeTargetIds[s]),o=o.add(i.activeTargetIds[s]);return r?new t(e,o):(Ze("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}},sE=class t{constructor(e,n){this.clientId=e,this.onlineState=n}static Ts(e){let n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new t(n.clientId,n.onlineState):(Ze("SharedClientState",`Failed to parse online state: ${e}`),null)}},Fu=class{constructor(){this.activeTargetIds=XE()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},_u=class{constructor(e,n,i,r,o){this.window=e,this.si=n,this.persistenceKey=i,this.Rs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new Oe(ne),this.started=!1,this.ps=[];let s=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ys=jk(this.persistenceKey,this.Rs),this.ws=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.gs=this.gs.insert(this.Rs,new Fu),this.Ss=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.bs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ds=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.Cs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.vs=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}start(){return _(this,null,function*(){let e=yield this.syncEngine.Bi();for(let i of e){if(i===this.Rs)continue;let r=this.getItem(jk(this.persistenceKey,i));if(r){let o=pp.Ts(i,r);o&&(this.gs=this.gs.insert(o.clientId,o))}}this.Fs();let n=this.storage.getItem(this.Cs);if(n){let i=this.Ms(n);i&&this.xs(i)}for(let i of this.ps)this.fs(i);this.ps=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let n=!1;return this.gs.forEach((i,r)=>{r.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,n,i){this.Ns(e,n,i),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(K0(this.persistenceKey,e));if(i){let r=yu.Ts(e,i);r&&(n=r.state)}}return this.Ls.ds(e),this.Fs(),n}removeLocalQueryTarget(e){this.Ls.As(e),this.Fs()}isLocalQueryTarget(e){return this.Ls.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(K0(this.persistenceKey,e))}updateQueryState(e,n,i){this.ks(e,n,i)}handleUserChange(e,n,i){n.forEach(r=>{this.Bs(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){let n=this.storage.getItem(e);return x("SharedClientState","READ",e,n),n}setItem(e,n){x("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){x("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){let n=e;if(n.storageArea===this.storage){if(x("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ys)return void Ze("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable(()=>_(this,null,function*(){if(this.started){if(n.key!==null){if(this.Ss.test(n.key)){if(n.newValue==null){let i=this.Ks(n.key);return this.$s(i,null)}{let i=this.Us(n.key,n.newValue);if(i)return this.$s(i.clientId,i)}}else if(this.bs.test(n.key)){if(n.newValue!==null){let i=this.Ws(n.key,n.newValue);if(i)return this.Gs(i)}}else if(this.Ds.test(n.key)){if(n.newValue!==null){let i=this.zs(n.key,n.newValue);if(i)return this.js(i)}}else if(n.key===this.Cs){if(n.newValue!==null){let i=this.Ms(n.newValue);if(i)return this.xs(i)}}else if(n.key===this.ws){let i=function(o){let s=vn._e;if(o!=null)try{let a=JSON.parse(o);j(typeof a=="number"),s=a}catch(a){Ze("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(n.newValue);i!==vn._e&&this.sequenceNumberHandler(i)}else if(n.key===this.vs){let i=this.Hs(n.newValue);yield Promise.all(i.map(r=>this.syncEngine.Js(r)))}}}else this.ps.push(n)}))}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(e,n,i){let r=new mp(this.currentUser,e,n,i),o=Bk(this.persistenceKey,this.currentUser,e);this.setItem(o,r.Es())}Bs(e){let n=Bk(this.persistenceKey,this.currentUser,e);this.removeItem(n)}qs(e){let n={clientId:this.Rs,onlineState:e};this.storage.setItem(this.Cs,JSON.stringify(n))}ks(e,n,i){let r=K0(this.persistenceKey,e),o=new yu(e,n,i);this.setItem(r,o.Es())}Qs(e){let n=JSON.stringify(Array.from(e));this.setItem(this.vs,n)}Ks(e){let n=this.Ss.exec(e);return n?n[1]:null}Us(e,n){let i=this.Ks(e);return pp.Ts(i,n)}Ws(e,n){let i=this.bs.exec(e),r=Number(i[1]),o=i[2]!==void 0?i[2]:null;return mp.Ts(new ct(o),r,n)}zs(e,n){let i=this.Ds.exec(e),r=Number(i[1]);return yu.Ts(r,n)}Ms(e){return sE.Ts(e)}Hs(e){return JSON.parse(e)}Gs(e){return _(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Ys(e.batchId,e.state,e.error);x("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,n){let i=n?this.gs.insert(e,n):this.gs.remove(e),r=this.Os(this.gs),o=this.Os(i),s=[],a=[];return o.forEach(c=>{r.has(c)||s.push(c)}),r.forEach(c=>{o.has(c)||a.push(c)}),this.syncEngine.Xs(s,a).then(()=>{this.gs=i})}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let n=XE();return e.forEach((i,r)=>{n=n.unionWith(r.activeTargetIds)}),n}},gp=class{constructor(){this.eo=new Fu,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,n,i){this.no[e]=n}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new Fu,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var aE=class{ro(e){}shutdown(){}};var bp=class{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){x("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ao)e(0)}_o(){x("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ao)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Pm=null;function Q0(){return Pm===null?Pm=function(){return 268435456+Math.round(2147483648*Math.random())}():Pm++,"0x"+Pm.toString(16)}var v8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var cE=class{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}};var kt="WebChannelConnection",lE=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.mo=i+"://"+n.host,this.fo=`projects/${r}/databases/${o}`,this.po=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${o}`}get yo(){return!1}wo(n,i,r,o,s){let a=Q0(),c=this.So(n,i);x("RestConnection",`Sending RPC '${n}' ${a}:`,c,r);let l={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(l,o,s),this.Do(n,c,l,r).then(u=>(x("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw Pn("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",c,"request:",r),u})}Co(n,i,r,o,s,a){return this.wo(n,i,r,o,s)}bo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+rc}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,s)=>n[s]=o),r&&r.headers.forEach((o,s)=>n[s]=o)}So(n,i){let r=v8[n];return`${this.mo}/v1/${i}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,n,i,r){let o=Q0();return new Promise((s,a)=>{let c=new Q1;c.setWithCredentials(!0),c.listenOnce(W1.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Am.NO_ERROR:let u=c.getResponseJson();x(kt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(u)),s(u);break;case Am.TIMEOUT:x(kt,`RPC '${e}' ${o} timed out`),a(new E(y.DEADLINE_EXCEEDED,"Request time out"));break;case Am.HTTP_ERROR:let d=c.getStatus();if(x(kt,`RPC '${e}' ${o} failed with status:`,d,"response text:",c.getResponseText()),d>0){let h=c.getResponseJson();Array.isArray(h)&&(h=h[0]);let f=h?.error;if(f&&f.status&&f.message){let m=function(g){let w=g.toLowerCase().replace(/_/g,"-");return Object.values(y).indexOf(w)>=0?w:y.UNKNOWN}(f.status);a(new E(m,f.message))}else a(new E(y.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new E(y.UNAVAILABLE,"Connection failed."));break;default:F()}}finally{x(kt,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(r);x(kt,`RPC '${e}' ${o} sending request:`,r),c.send(n,"POST",l,i,15)})}vo(e,n,i){let r=Q0(),o=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=q1(),a=G1(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.bo(c.initMessageHeaders,n,i),c.encodeInitMessageHeaders=!0;let u=o.join("");x(kt,`Creating RPC '${e}' stream ${r}: ${u}`,c);let d=s.createWebChannel(u,c),h=!1,f=!1,m=new cE({co:g=>{f?x(kt,`Not sending because RPC '${e}' stream ${r} is closed:`,g):(h||(x(kt,`Opening RPC '${e}' stream ${r} transport.`),d.open(),h=!0),x(kt,`RPC '${e}' stream ${r} sending:`,g),d.send(g))},lo:()=>d.close()}),p=(g,w,A)=>{g.listen(w,C=>{try{A(C)}catch(O){setTimeout(()=>{throw O},0)}})};return p(d,cu.EventType.OPEN,()=>{f||x(kt,`RPC '${e}' stream ${r} transport opened.`)}),p(d,cu.EventType.CLOSE,()=>{f||(f=!0,x(kt,`RPC '${e}' stream ${r} transport closed`),m.Ro())}),p(d,cu.EventType.ERROR,g=>{f||(f=!0,Pn(kt,`RPC '${e}' stream ${r} transport errored:`,g),m.Ro(new E(y.UNAVAILABLE,"The operation could not be completed")))}),p(d,cu.EventType.MESSAGE,g=>{var w;if(!f){let A=g.data[0];j(!!A);let C=A,O=C.error||((w=C[0])===null||w===void 0?void 0:w.error);if(O){x(kt,`RPC '${e}' stream ${r} received error:`,O);let z=O.status,H=function(tn){let En=st[tn];if(En!==void 0)return PP(En)}(z),oe=O.message;H===void 0&&(H=y.INTERNAL,oe="Unknown error status: "+z+" with message "+O.message),f=!0,m.Ro(new E(H,oe)),d.close()}else x(kt,`RPC '${e}' stream ${r} received:`,A),m.Vo(A)}}),p(a,K1.STAT_EVENT,g=>{g.stat===q0.PROXY?x(kt,`RPC '${e}' stream ${r} detected buffering proxy`):g.stat===q0.NOPROXY&&x(kt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{m.Ao()},0),m}};function sN(){return typeof window<"u"?window:null}function Vm(){return typeof document<"u"?document:null}function Ku(t){return new Tw(t,!0)}var Lu=class{constructor(e,n,i=1e3,r=1.5,o=6e4){this.si=e,this.timerId=n,this.Fo=i,this.Mo=r,this.xo=o,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();let n=Math.floor(this.Oo+this.qo()),i=Math.max(0,Date.now()-this.Bo),r=Math.max(0,n-i);r>0&&x("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Oo} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,r,()=>(this.Bo=Date.now(),e())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){this.No!==null&&(this.No.skipDelay(),this.No=null)}cancel(){this.No!==null&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}};var yp=class{constructor(e,n,i,r,o,s,a,c){this.si=e,this.Ko=i,this.$o=r,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new Lu(e,n)}jo(){return this.state===1||this.state===5||this.Ho()}Ho(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Jo()}stop(){return _(this,null,function*(){this.jo()&&(yield this.close(0))})}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&this.Wo===null&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(e){this.t_(),this.stream.send(e)}Xo(){return _(this,null,function*(){if(this.Ho())return this.close(0)})}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}close(e,n){return _(this,null,function*(){this.t_(),this.n_(),this.zo.cancel(),this.Uo++,e!==4?this.zo.reset():n&&n.code===y.RESOURCE_EXHAUSTED?(Ze(n.toString()),Ze("Using maximum backoff delay to prevent overloading the backend."),this.zo.Lo()):n&&n.code===y.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.r_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Io(n)})}r_(){}auth(){this.state=1;let e=this.i_(this.Uo),n=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Uo===n&&this.s_(i,r)},i=>{e(()=>{let r=new E(y.UNKNOWN,"Fetching auth token failed: "+i.message);return this.o_(r)})})}s_(e,n){let i=this.i_(this.Uo);this.stream=this.__(e,n),this.stream.ho(()=>{i(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(r=>{i(()=>this.o_(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Jo(){this.state=5,this.zo.ko(()=>_(this,null,function*(){this.state=0,this.start()}))}o_(e){return x("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}i_(e){return n=>{this.si.enqueueAndForget(()=>this.Uo===e?n():(x("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},uE=class extends yp{constructor(e,n,i,r,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,s),this.serializer=o}__(e,n){return this.connection.vo("Listen",e,n)}onMessage(e){this.zo.reset();let n=r8(this.serializer,e),i=function(o){if(!("targetChange"in o))return $.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?$.min():s.readTime?Je(s.readTime):$.min()}(e);return this.listener.a_(n,i)}u_(e){let n={};n.database=ku(this.serializer),n.addTarget=function(o,s){let a,c=s.target;if(a=Qm(c)?{documents:BP(o,c)}:{query:UP(o,c)},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=OP(o,s.resumeToken);let l=Sw(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo($.min())>0){a.readTime=Ka(o,s.snapshotVersion.toTimestamp());let l=Sw(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let i=s8(this.serializer,e);i&&(n.labels=i),this.e_(n)}c_(e){let n={};n.database=ku(this.serializer),n.removeTarget=e,this.e_(n)}},dE=class extends yp{constructor(e,n,i,r,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,s),this.serializer=o,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,n){return this.connection.vo("Write",e,n)}onMessage(e){if(j(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();let n=o8(e.writeResults,e.commitTime),i=Je(e.commitTime);return this.listener.I_(i,n)}return j(!e.writeResults||e.writeResults.length===0),this.l_=!0,this.listener.T_()}E_(){let e={};e.database=ku(this.serializer),this.e_(e)}P_(e){let n={streamToken:this.lastStreamToken,writes:e.map(i=>Pu(this.serializer,i))};this.e_(n)}};var hE=class extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.d_=!1}A_(){if(this.d_)throw new E(y.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,n,i){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,o])=>this.connection.wo(e,n,i,r,o)).catch(r=>{throw r.name==="FirebaseError"?(r.code===y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new E(y.UNKNOWN,r.toString())})}Co(e,n,i,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Co(e,n,i,o,s,r)).catch(o=>{throw o.name==="FirebaseError"?(o.code===y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new E(y.UNKNOWN,o.toString())})}terminate(){this.d_=!0}};var fE=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){this.V_===0&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(e){this.state==="Online"?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.p_("Offline")))}set(e){this.S_(),this.V_=0,e==="Online"&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(Ze(n),this.f_=!1):x("OnlineStateTracker",n)}S_(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}};var mE=class{constructor(e,n,i,r,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=o,this.F_.ro(s=>{i.enqueueAndForget(()=>_(this,null,function*(){eo(this)&&(x("RemoteStore","Restarting streams for network reachability change."),yield function(c){return _(this,null,function*(){let l=N(c);l.C_.add(4),yield sc(l),l.M_.set("Unknown"),l.C_.delete(4),yield Qu(l)})}(this))}))}),this.M_=new fE(i,r)}};function Qu(t){return _(this,null,function*(){if(eo(t))for(let e of t.v_)yield e(!0)})}function sc(t){return _(this,null,function*(){for(let e of t.v_)yield e(!1)})}function Lp(t,e){let n=N(t);n.D_.has(e.targetId)||(n.D_.set(e.targetId,e),ox(n)?rx(n):cc(n).Ho()&&ix(n,e))}function Vu(t,e){let n=N(t),i=cc(n);n.D_.delete(e),i.Ho()&&aN(n,e),n.D_.size===0&&(i.Ho()?i.Zo():eo(n)&&n.M_.set("Unknown"))}function ix(t,e){if(t.x_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo($.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}cc(t).u_(e)}function aN(t,e){t.x_.Oe(e),cc(t).c_(e)}function rx(t){t.x_=new Cw({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.D_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),cc(t).start(),t.M_.g_()}function ox(t){return eo(t)&&!cc(t).jo()&&t.D_.size>0}function eo(t){return N(t).C_.size===0}function cN(t){t.x_=void 0}function w8(t){return _(this,null,function*(){t.D_.forEach((e,n)=>{ix(t,e)})})}function E8(t,e){return _(this,null,function*(){cN(t),ox(t)?(t.M_.w_(e),rx(t)):t.M_.set("Unknown")})}function x8(t,e,n){return _(this,null,function*(){if(t.M_.set("Online"),e instanceof Jm&&e.state===2&&e.cause)try{yield function(r,o){return _(this,null,function*(){let s=o.cause;for(let a of o.targetIds)r.D_.has(a)&&(yield r.remoteSyncer.rejectListen(a,s),r.D_.delete(a),r.x_.removeTarget(a))})}(t,e)}catch(i){x("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield _p(t,i)}else if(e instanceof Ua?t.x_.$e(e):e instanceof Xm?t.x_.Je(e):t.x_.Ge(e),!n.isEqual($.min()))try{let i=yield tN(t.localStore);n.compareTo(i)>=0&&(yield function(o,s){let a=o.x_.it(s);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let u=o.D_.get(l);u&&o.D_.set(l,u.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,l)=>{let u=o.D_.get(c);if(!u)return;o.D_.set(c,u.withResumeToken(yt.EMPTY_BYTE_STRING,u.snapshotVersion)),aN(o,c);let d=new Qa(u.target,c,l,u.sequenceNumber);ix(o,d)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(i){x("RemoteStore","Failed to raise snapshot:",i),yield _p(t,i)}})}function _p(t,e,n){return _(this,null,function*(){if(!Jr(e))throw e;t.C_.add(1),yield sc(t),t.M_.set("Offline"),n||(n=()=>tN(t.localStore)),t.asyncQueue.enqueueRetryable(()=>_(this,null,function*(){x("RemoteStore","Retrying IndexedDB access"),yield n(),t.C_.delete(1),yield Qu(t)}))})}function lN(t,e){return e().catch(n=>_p(t,n,e))}function ac(t){return _(this,null,function*(){let e=N(t),n=Zr(e),i=e.b_.length>0?e.b_[e.b_.length-1].batchId:-1;for(;I8(e);)try{let r=yield b8(e.localStore,i);if(r===null){e.b_.length===0&&n.Zo();break}i=r.batchId,D8(e,r)}catch(r){yield _p(e,r)}uN(e)&&dN(e)})}function I8(t){return eo(t)&&t.b_.length<10}function D8(t,e){t.b_.push(e);let n=Zr(t);n.Ho()&&n.h_&&n.P_(e.mutations)}function uN(t){return eo(t)&&!Zr(t).jo()&&t.b_.length>0}function dN(t){Zr(t).start()}function C8(t){return _(this,null,function*(){Zr(t).E_()})}function T8(t){return _(this,null,function*(){let e=Zr(t);for(let n of t.b_)e.P_(n.mutations)})}function S8(t,e,n){return _(this,null,function*(){let i=t.b_.shift(),r=xw.from(i,e,n);yield lN(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),yield ac(t)})}function A8(t,e){return _(this,null,function*(){e&&Zr(t).h_&&(yield function(i,r){return _(this,null,function*(){if(function(s){return kP(s)&&s!==y.ABORTED}(r.code)){let o=i.b_.shift();Zr(i).Yo(),yield lN(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),yield ac(i)}})}(t,e)),uN(t)&&dN(t)})}function Uk(t,e){return _(this,null,function*(){let n=N(t);n.asyncQueue.verifyOperationInProgress(),x("RemoteStore","RemoteStore received new credentials");let i=eo(n);n.C_.add(3),yield sc(n),i&&n.M_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.C_.delete(3),yield Qu(n)})}function pE(t,e){return _(this,null,function*(){let n=N(t);e?(n.C_.delete(2),yield Qu(n)):e||(n.C_.add(2),yield sc(n),n.M_.set("Unknown"))})}function cc(t){return t.O_||(t.O_=function(n,i,r){let o=N(n);return o.A_(),new uE(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{ho:w8.bind(null,t),Io:E8.bind(null,t),a_:x8.bind(null,t)}),t.v_.push(e=>_(this,null,function*(){e?(t.O_.Yo(),ox(t)?rx(t):t.M_.set("Unknown")):(yield t.O_.stop(),cN(t))}))),t.O_}function Zr(t){return t.N_||(t.N_=function(n,i,r){let o=N(n);return o.A_(),new dE(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{ho:C8.bind(null,t),Io:A8.bind(null,t),T_:T8.bind(null,t),I_:S8.bind(null,t)}),t.v_.push(e=>_(this,null,function*(){e?(t.N_.Yo(),yield ac(t)):(yield t.N_.stop(),t.b_.length>0&&(x("RemoteStore",`Stopping write stream with ${t.b_.length} pending writes`),t.b_=[]))}))),t.N_}var gE=class t{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new lt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,o){let s=Date.now()+i,a=new t(e,n,s,r,o);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new E(y.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function lc(t,e){if(Ze("AsyncQueue",`${e}: ${t}`),Jr(t))return new E(y.UNAVAILABLE,`${e}: ${t}`);throw t}var vp=class t{constructor(e){this.comparator=e?(n,i)=>e(n,i)||k.comparator(n.key,i.key):(n,i)=>k.comparator(n.key,i.key),this.keyedMap=fu(),this.sortedSet=new Oe(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){let r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let i=new t;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}};var wp=class{constructor(){this.B_=new Oe(k.comparator)}track(e){let n=e.doc.key,i=this.B_.get(n);i?e.type!==0&&i.type===3?this.B_=this.B_.insert(n,e):e.type===3&&i.type!==1?this.B_=this.B_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.B_=this.B_.remove(n):e.type===1&&i.type===2?this.B_=this.B_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):F():this.B_=this.B_.insert(n,e)}L_(){let e=[];return this.B_.inorderTraversal((n,i)=>{e.push(i)}),e}},Ja=class t{constructor(e,n,i,r,o,s,a,c,l){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,n,i,r,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,vp.emptySet(n),s,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}};var bE=class{constructor(){this.k_=void 0,this.listeners=[]}},yE=class{constructor(){this.queries=new Mi(e=>bP(e),Gu),this.onlineState="Unknown",this.q_=new Set}};function sx(t,e){return _(this,null,function*(){let n=N(t),i=e.query,r=!1,o=n.queries.get(i);if(o||(r=!0,o=new bE),r)try{o.k_=yield n.onListen(i)}catch(s){let a=lc(s,`Initialization of query '${Na(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.listeners.push(e),e.Q_(n.onlineState),o.k_&&e.K_(o.k_)&&cx(n)})}function ax(t,e){return _(this,null,function*(){let n=N(t),i=e.query,r=!1,o=n.queries.get(i);if(o){let s=o.listeners.indexOf(e);s>=0&&(o.listeners.splice(s,1),r=o.listeners.length===0)}if(r)return n.queries.delete(i),n.onUnlisten(i)})}function M8(t,e){let n=N(t),i=!1;for(let r of e){let o=r.query,s=n.queries.get(o);if(s){for(let a of s.listeners)a.K_(r)&&(i=!0);s.k_=r}}i&&cx(n)}function R8(t,e,n){let i=N(t),r=i.queries.get(e);if(r)for(let o of r.listeners)o.onError(n);i.queries.delete(e)}function cx(t){t.q_.forEach(e=>{e.next()})}var ju=class{constructor(e,n,i){this.query=e,this.U_=n,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=i||{}}K_(e){if(!this.options.includeMetadataChanges){let i=[];for(let r of e.docChanges)r.type!==3&&i.push(r);e=new Ja(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.W_?this.z_(e)&&(this.U_.next(e),n=!0):this.j_(e,this.onlineState)&&(this.H_(e),n=!0),this.G_=e,n}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let n=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),n=!0),n}j_(e,n){if(!e.fromCache)return!0;let i=n!=="Offline";return(!this.options.J_||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}z_(e){if(e.docChanges.length>0)return!0;let n=this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}H_(e){e=Ja.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}};var _E=class{constructor(e,n){this.Y_=e,this.byteLength=n}Z_(){return"metadata"in this.Y_}};var Ep=class{constructor(e){this.serializer=e}hs(e){return Ci(this.serializer,e)}Ps(e){return e.metadata.exists?jP(this.serializer,e.document,!1):ut.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return Je(e)}},vE=class{constructor(e,n,i){this.X_=e,this.localStore=n,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=hN(e)}ea(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++n;let i=ve.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ta(e){let n=new Map,i=new Ep(this.serializer);for(let r of e)if(r.metadata.queries){let o=i.hs(r.metadata.name);for(let s of r.metadata.queries){let a=(n.get(s)||ie()).add(o);n.set(s,a)}}return n}complete(){return _(this,null,function*(){let e=yield y8(this.localStore,new Ep(this.serializer),this.documents,this.X_.id),n=this.ta(this.documents);for(let i of this.queries)yield _8(this.localStore,i,n.get(i.name));return this.progress.taskState="Success",{progress:this.progress,na:this.collectionGroups,ra:e}})}};function hN(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var xp=class{constructor(e){this.key=e}},Ip=class{constructor(e){this.key=e}},Dp=class{constructor(e,n){this.query=e,this.ia=n,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=ie(),this.mutatedKeys=ie(),this._a=_P(e),this.aa=new vp(this._a)}get ua(){return this.ia}ca(e,n){let i=n?n.la:new wp,r=n?n.aa:this.aa,o=n?n.mutatedKeys:this.mutatedKeys,s=r,a=!1,c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,l=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((u,d)=>{let h=r.get(u),f=Wu(this.query,d)?d:null,m=!!h&&this.mutatedKeys.has(h.key),p=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations),g=!1;h&&f?h.data.isEqual(f.data)?m!==p&&(i.track({type:3,doc:f}),g=!0):this.ha(h,f)||(i.track({type:2,doc:f}),g=!0,(c&&this._a(f,c)>0||l&&this._a(f,l)<0)&&(a=!0)):!h&&f?(i.track({type:0,doc:f}),g=!0):h&&!f&&(i.track({type:1,doc:h}),g=!0,(c||l)&&(a=!0)),g&&(f?(s=s.add(f),o=p?o.add(u):o.delete(u)):(s=s.delete(u),o=o.delete(u)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let u=this.query.limitType==="F"?s.last():s.first();s=s.delete(u.key),o=o.delete(u.key),i.track({type:1,doc:u})}return{aa:s,la:i,Zi:a,mutatedKeys:o}}ha(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){let o=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;let s=e.la.L_();s.sort((u,d)=>function(f,m){let p=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return F()}};return p(f)-p(m)}(u.type,d.type)||this._a(u.doc,d.doc)),this.Pa(i),r=r!=null&&r;let a=n&&!r?this.Ia():[],c=this.oa.size===0&&this.current&&!r?1:0,l=c!==this.sa;return this.sa=c,s.length!==0||l?{snapshot:new Ja(this.query,e.aa,o,s,e.mutatedKeys,c===0,l,!1,!!i&&i.resumeToken.approximateByteSize()>0),Ta:a}:{Ta:a}}Q_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({aa:this.aa,la:new wp,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach(n=>this.ia=this.ia.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ia=this.ia.delete(n)),this.current=e.current)}Ia(){if(!this.current)return[];let e=this.oa;this.oa=ie(),this.aa.forEach(i=>{this.Ea(i.key)&&(this.oa=this.oa.add(i.key))});let n=[];return e.forEach(i=>{this.oa.has(i)||n.push(new Ip(i))}),this.oa.forEach(i=>{e.has(i)||n.push(new xp(i))}),n}da(e){this.ia=e.ls,this.oa=ie();let n=this.ca(e.documents);return this.applyChanges(n,!0)}Aa(){return Ja.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,this.sa===0,this.hasCachedResults)}},wE=class{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}},EE=class{constructor(e){this.key=e,this.Ra=!1}},xE=class{constructor(e,n,i,r,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Va={},this.ma=new Mi(a=>bP(a),Gu),this.fa=new Map,this.ga=new Set,this.pa=new Oe(k.comparator),this.ya=new Map,this.wa=new Ou,this.Sa={},this.ba=new Map,this.Da=Ya.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return this.Ca===!0}};function k8(t,e){return _(this,null,function*(){let n=fx(t),i,r,o=n.ma.get(e);if(o)i=o.targetId,n.sharedClientState.addLocalQueryTarget(i),r=o.view.Aa();else{let s=yield Za(n.localStore,Bt(e)),a=n.sharedClientState.addLocalQueryTarget(s.targetId);i=s.targetId,r=yield lx(n,e,i,a==="current",s.resumeToken),n.isPrimaryClient&&Lp(n.remoteStore,s)}return r})}function lx(t,e,n,i,r){return _(this,null,function*(){t.va=(d,h,f)=>function(p,g,w,A){return _(this,null,function*(){let C=g.view.ca(w);C.Zi&&(C=yield fp(p.localStore,g.query,!1).then(({documents:oe})=>g.view.ca(oe,C)));let O=A&&A.targetChanges.get(g.targetId),z=A&&A.targetMismatches.get(g.targetId)!=null,H=g.view.applyChanges(C,p.isPrimaryClient,O,z);return IE(p,g.targetId,H.Ta),H.snapshot})}(t,d,h,f);let o=yield fp(t.localStore,e,!0),s=new Dp(e,o.ls),a=s.ca(o.documents),c=Mu.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),l=s.applyChanges(a,t.isPrimaryClient,c);IE(t,n,l.Ta);let u=new wE(e,n,s);return t.ma.set(e,u),t.fa.has(n)?t.fa.get(n).push(e):t.fa.set(n,[e]),l.snapshot})}function P8(t,e){return _(this,null,function*(){let n=N(t),i=n.ma.get(e),r=n.fa.get(i.targetId);if(r.length>1)return n.fa.set(i.targetId,r.filter(o=>!Gu(o,e))),void n.ma.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Xa(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),Vu(n.remoteStore,i.targetId),ec(n,i.targetId)}).catch(Xr))):(ec(n,i.targetId),yield Xa(n.localStore,i.targetId,!0))})}function N8(t,e,n){return _(this,null,function*(){let i=mx(t);try{let r=yield function(s,a){let c=N(s),l=ze.now(),u=a.reduce((f,m)=>f.add(m.key),ie()),d,h;return c.persistence.runTransaction("Locally write mutations","readwrite",f=>{let m=en(),p=ie();return c.ss.getEntries(f,u).next(g=>{m=g,m.forEach((w,A)=>{A.isValidDocument()||(p=p.add(w))})}).next(()=>c.localDocuments.getOverlayedDocuments(f,m)).next(g=>{d=g;let w=[];for(let A of a){let C=Z9(A,d.get(A.key).overlayedDocument);C!=null&&w.push(new Zn(A.key,C,uP(C.value.mapValue),Ke.exists(!0)))}return c.mutationQueue.addMutationBatch(f,l,w,a)}).next(g=>{h=g;let w=g.applyToLocalDocumentSet(d,p);return c.documentOverlayCache.saveOverlays(f,g.batchId,w)})}).then(()=>({batchId:h.batchId,changes:wP(d)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(s,a,c){let l=s.Sa[s.currentUser.toKey()];l||(l=new Oe(ne)),l=l.insert(a,c),s.Sa[s.currentUser.toKey()]=l}(i,r.batchId,n),yield er(i,r.changes),yield ac(i.remoteStore)}catch(r){let o=lc(r,"Failed to persist write");n.reject(o)}})}function fN(t,e){return _(this,null,function*(){let n=N(t);try{let i=yield g8(n.localStore,e);e.targetChanges.forEach((r,o)=>{let s=n.ya.get(o);s&&(j(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?s.Ra=!0:r.modifiedDocuments.size>0?j(s.Ra):r.removedDocuments.size>0&&(j(s.Ra),s.Ra=!1))}),yield er(n,i,e)}catch(i){yield Xr(i)}})}function zk(t,e,n){let i=N(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){let r=[];i.ma.forEach((o,s)=>{let a=s.view.Q_(e);a.snapshot&&r.push(a.snapshot)}),function(s,a){let c=N(s);c.onlineState=a;let l=!1;c.queries.forEach((u,d)=>{for(let h of d.listeners)h.Q_(a)&&(l=!0)}),l&&cx(c)}(i.eventManager,e),r.length&&i.Va.a_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function O8(t,e,n){return _(this,null,function*(){let i=N(t);i.sharedClientState.updateQueryState(e,"rejected",n);let r=i.ya.get(e),o=r&&r.key;if(o){let s=new Oe(k.comparator);s=s.insert(o,ut.newNoDocument(o,$.min()));let a=ie().add(o),c=new Au($.min(),new Map,new Oe(ne),s,a);yield fN(i,c),i.pa=i.pa.remove(o),i.ya.delete(e),hx(i)}else yield Xa(i.localStore,e,!1).then(()=>ec(i,e,n)).catch(Xr)})}function F8(t,e){return _(this,null,function*(){let n=N(t),i=e.batch.batchId;try{let r=yield p8(n.localStore,e);dx(n,i,null),ux(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),yield er(n,r)}catch(r){yield Xr(r)}})}function L8(t,e,n){return _(this,null,function*(){let i=N(t);try{let r=yield function(s,a){let c=N(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return c.mutationQueue.lookupMutationBatch(l,a).next(d=>(j(d!==null),u=d.keys(),c.mutationQueue.removeMutationBatch(l,d))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,u,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>c.localDocuments.getDocuments(l,u))})}(i.localStore,e);dx(i,e,n),ux(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),yield er(i,r)}catch(r){yield Xr(r)}})}function V8(t,e){return _(this,null,function*(){let n=N(t);eo(n.remoteStore)||x("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let i=yield function(s){let a=N(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(n.localStore);if(i===-1)return void e.resolve();let r=n.ba.get(i)||[];r.push(e),n.ba.set(i,r)}catch(i){let r=lc(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}})}function ux(t,e){(t.ba.get(e)||[]).forEach(n=>{n.resolve()}),t.ba.delete(e)}function dx(t,e,n){let i=N(t),r=i.Sa[i.currentUser.toKey()];if(r){let o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.Sa[i.currentUser.toKey()]=r}}function ec(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let i of t.fa.get(e))t.ma.delete(i),n&&t.Va.Fa(i,n);t.fa.delete(e),t.isPrimaryClient&&t.wa.Rr(e).forEach(i=>{t.wa.containsKey(i)||mN(t,i)})}function mN(t,e){t.ga.delete(e.path.canonicalString());let n=t.pa.get(e);n!==null&&(Vu(t.remoteStore,n),t.pa=t.pa.remove(e),t.ya.delete(n),hx(t))}function IE(t,e,n){for(let i of n)i instanceof xp?(t.wa.addReference(i.key,e),j8(t,i)):i instanceof Ip?(x("SyncEngine","Document no longer in limbo: "+i.key),t.wa.removeReference(i.key,e),t.wa.containsKey(i.key)||mN(t,i.key)):F()}function j8(t,e){let n=e.key,i=n.path.canonicalString();t.pa.get(n)||t.ga.has(i)||(x("SyncEngine","New document in limbo: "+n),t.ga.add(i),hx(t))}function hx(t){for(;t.ga.size>0&&t.pa.size<t.maxConcurrentLimboResolutions;){let e=t.ga.values().next().value;t.ga.delete(e);let n=new k(ve.fromString(e)),i=t.Da.next();t.ya.set(i,new EE(n)),t.pa=t.pa.insert(n,i),Lp(t.remoteStore,new Qa(Bt(oc(n.path)),i,"TargetPurposeLimboResolution",vn._e))}}function er(t,e,n){return _(this,null,function*(){let i=N(t),r=[],o=[],s=[];i.ma.isEmpty()||(i.ma.forEach((a,c)=>{s.push(i.va(c,e,n).then(l=>{if((l||n)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(c.targetId,l?.fromCache?"not-current":"current"),l){r.push(l);let u=iE.Qi(c.targetId,l);o.push(u)}}))}),yield Promise.all(s),i.Va.a_(r),yield function(c,l){return _(this,null,function*(){let u=N(c);try{yield u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>b.forEach(l,h=>b.forEach(h.ki,f=>u.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>b.forEach(h.qi,f=>u.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!Jr(d))throw d;x("LocalStore","Failed to update sequence numbers: "+d)}for(let d of l){let h=d.targetId;if(!d.fromCache){let f=u.ts.get(h),m=f.snapshotVersion,p=f.withLastLimboFreeSnapshotVersion(m);u.ts=u.ts.insert(h,p)}}})}(i.localStore,o))})}function B8(t,e){return _(this,null,function*(){let n=N(t);if(!n.currentUser.isEqual(e)){x("SyncEngine","User change. New user:",e.toKey());let i=yield eN(n.localStore,e);n.currentUser=e,function(o,s){o.ba.forEach(a=>{a.forEach(c=>{c.reject(new E(y.CANCELLED,s))})}),o.ba.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield er(n,i._s)}})}function U8(t,e){let n=N(t),i=n.ya.get(e);if(i&&i.Ra)return ie().add(i.key);{let r=ie(),o=n.fa.get(e);if(!o)return r;for(let s of o){let a=n.ma.get(s);r=r.unionWith(a.view.ua)}return r}}function z8(t,e){return _(this,null,function*(){let n=N(t),i=yield fp(n.localStore,e.query,!0),r=e.view.da(i);return n.isPrimaryClient&&IE(n,e.targetId,r.Ta),r})}function $8(t,e){return _(this,null,function*(){let n=N(t);return rN(n.localStore,e).then(i=>er(n,i))})}function H8(t,e,n,i){return _(this,null,function*(){let r=N(t),o=yield function(a,c){let l=N(a),u=N(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",d=>u.Cn(d,c).next(h=>h?l.localDocuments.getDocuments(d,h):b.resolve(null)))}(r.localStore,e);o!==null?(n==="pending"?yield ac(r.remoteStore):n==="acknowledged"||n==="rejected"?(dx(r,e,i||null),ux(r,e),function(a,c){N(N(a).mutationQueue).Fn(c)}(r.localStore,e)):F(),yield er(r,o)):x("SyncEngine","Cannot apply mutation batch with id: "+e)})}function q8(t,e){return _(this,null,function*(){let n=N(t);if(fx(n),mx(n),e===!0&&n.Ca!==!0){let i=n.sharedClientState.getAllActiveQueryTargets(),r=yield $k(n,i.toArray());n.Ca=!0,yield pE(n.remoteStore,!0);for(let o of r)Lp(n.remoteStore,o)}else if(e===!1&&n.Ca!==!1){let i=[],r=Promise.resolve();n.fa.forEach((o,s)=>{n.sharedClientState.isLocalQueryTarget(s)?i.push(s):r=r.then(()=>(ec(n,s),Xa(n.localStore,s,!0))),Vu(n.remoteStore,s)}),yield r,yield $k(n,i),function(s){let a=N(s);a.ya.forEach((c,l)=>{Vu(a.remoteStore,l)}),a.wa.Vr(),a.ya=new Map,a.pa=new Oe(k.comparator)}(n),n.Ca=!1,yield pE(n.remoteStore,!1)}})}function $k(t,e,n){return _(this,null,function*(){let i=N(t),r=[],o=[];for(let s of e){let a,c=i.fa.get(s);if(c&&c.length!==0){a=yield Za(i.localStore,Bt(c[0]));for(let l of c){let u=i.ma.get(l),d=yield z8(i,u);d.snapshot&&o.push(d.snapshot)}}else{let l=yield iN(i.localStore,s);a=yield Za(i.localStore,l),yield lx(i,pN(l),s,!1,a.resumeToken)}r.push(a)}return i.Va.a_(o),r})}function pN(t){return gP(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function G8(t){return function(n){return N(N(n).persistence).Bi()}(N(t).localStore)}function W8(t,e,n,i){return _(this,null,function*(){let r=N(t);if(r.Ca)return void x("SyncEngine","Ignoring unexpected query state notification.");let o=r.fa.get(e);if(o&&o.length>0)switch(n){case"current":case"not-current":{let s=yield rN(r.localStore,yP(o[0])),a=Au.createSynthesizedRemoteEventForCurrentChange(e,n==="current",yt.EMPTY_BYTE_STRING);yield er(r,s,a);break}case"rejected":yield Xa(r.localStore,e,!0),ec(r,e,i);break;default:F()}})}function K8(t,e,n){return _(this,null,function*(){let i=fx(t);if(i.Ca){for(let r of e){if(i.fa.has(r)){x("SyncEngine","Adding an already active target "+r);continue}let o=yield iN(i.localStore,r),s=yield Za(i.localStore,o);yield lx(i,pN(o),s.targetId,!1,s.resumeToken),Lp(i.remoteStore,s)}for(let r of n)i.fa.has(r)&&(yield Xa(i.localStore,r,!1).then(()=>{Vu(i.remoteStore,r),ec(i,r)}).catch(Xr))}})}function fx(t){let e=N(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=fN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=U8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=O8.bind(null,e),e.Va.a_=M8.bind(null,e.eventManager),e.Va.Fa=R8.bind(null,e.eventManager),e}function mx(t){let e=N(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=F8.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=L8.bind(null,e),e}function Q8(t,e,n){let i=N(t);(function(o,s,a){return _(this,null,function*(){try{let c=yield s.getMetadata();if(yield function(f,m){let p=N(f),g=Je(m.createTime);return p.persistence.runTransaction("hasNewerBundle","readonly",w=>p.Kr.getBundleMetadata(w,m.id)).then(w=>!!w&&w.createTime.compareTo(g)>=0)}(o.localStore,c))return yield s.close(),a._completeWith(function(f){return{taskState:"Success",documentsLoaded:f.totalDocuments,bytesLoaded:f.totalBytes,totalDocuments:f.totalDocuments,totalBytes:f.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(hN(c));let l=new vE(c,o.localStore,s.serializer),u=yield s.Ma();for(;u;){let h=yield l.ea(u);h&&a._updateProgress(h),u=yield s.Ma()}let d=yield l.complete();return yield er(o,d.ra,void 0),yield function(f,m){let p=N(f);return p.persistence.runTransaction("Save bundle","readwrite",g=>p.Kr.saveBundleMetadata(g,m))}(o.localStore,c),a._completeWith(d.progress),Promise.resolve(d.na)}catch(c){return Pn("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(i,e,n).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}var Bu=class{constructor(){this.synchronizeTabs=!1}initialize(e){return _(this,null,function*(){this.serializer=Ku(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return JP(this.persistence,new hp,e.initialUser,this.serializer)}createPersistence(e){return new up(dp.jr,this.serializer)}createSharedClientState(e){return new gp}terminate(){return _(this,null,function*(){this.gcScheduler&&this.gcScheduler.stop(),yield this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Cp=class t extends Bu{constructor(e,n,i){super(),this.xa=e,this.cacheSizeBytes=n,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(e){return _(this,null,function*(){yield Zp(t.prototype,this,"initialize").call(this,e),yield this.xa.initialize(this,e),yield mx(this.xa.syncEngine),yield ac(this.xa.remoteStore),yield this.persistence.mi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return JP(this.persistence,new hp,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){let i=this.persistence.referenceDelegate.garbageCollector;return new zw(i,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){let i=new aw(n,this.persistence);return new sw(e.asyncQueue,i)}createPersistence(e){let n=nx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?kn.withCacheSize(this.cacheSizeBytes):kn.DEFAULT;return new nE(this.synchronizeTabs,n,e.clientId,i,e.asyncQueue,sN(),Vm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new gp}},DE=class t extends Cp{constructor(e,n){super(e,n,!1),this.xa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){return _(this,null,function*(){yield Zp(t.prototype,this,"initialize").call(this,e);let n=this.xa.syncEngine;this.sharedClientState instanceof _u&&(this.sharedClientState.syncEngine={Ys:H8.bind(null,n),Zs:W8.bind(null,n),Xs:K8.bind(null,n),Bi:G8.bind(null,n),Js:$8.bind(null,n)},yield this.sharedClientState.start()),yield this.persistence.mi(i=>_(this,null,function*(){yield q8(this.xa.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let n=sN();if(!_u.D(n))throw new E(y.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let i=nx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new _u(n,e.asyncQueue,i,e.clientId,e.initialUser)}},Uu=class{initialize(e,n){return _(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>zk(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=B8.bind(null,this.syncEngine),yield pE(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new yE}()}createDatastore(e){let n=Ku(e.databaseInfo.databaseId),i=function(o){return new lE(o)}(e.databaseInfo);return function(o,s,a,c){return new hE(o,s,a,c)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,o,s,a){return new mE(i,r,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,n=>zk(this.syncEngine,n,0),function(){return bp.D()?new bp:new aE}())}createSyncEngine(e,n){return function(r,o,s,a,c,l,u){let d=new xE(r,o,s,a,c,l);return u&&(d.Ca=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return function(n){return _(this,null,function*(){let i=N(n);x("RemoteStore","RemoteStore shutting down."),i.C_.add(5),yield sc(i),i.F_.shutdown(),i.M_.set("Unknown")})}(this.remoteStore)}};function Hk(t,e=10240){let n=0;return{read(){return _(this,null,function*(){if(n<t.byteLength){let r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}})},cancel(){return _(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var tc=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):Ze("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var CE=class{constructor(e,n){this.Ba=e,this.serializer=n,this.metadata=new lt,this.buffer=new Uint8Array,this.La=function(){return new TextDecoder("utf-8")}(),this.ka().then(i=>{i&&i.Z_()?this.metadata.resolve(i.Y_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(i?.Y_)}`))},i=>this.metadata.reject(i))}close(){return this.Ba.cancel()}getMetadata(){return _(this,null,function*(){return this.metadata.promise})}Ma(){return _(this,null,function*(){return yield this.getMetadata(),this.ka()})}ka(){return _(this,null,function*(){let e=yield this.qa();if(e===null)return null;let n=this.La.decode(e),i=Number(n);isNaN(i)&&this.Qa(`length string (${n}) is not valid number`);let r=yield this.Ka(i);return new _E(JSON.parse(r),e.length+i)})}$a(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}qa(){return _(this,null,function*(){for(;this.$a()<0&&!(yield this.Ua()););if(this.buffer.length===0)return null;let e=this.$a();e<0&&this.Qa("Reached the end of bundle when a length string is expected.");let n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n})}Ka(e){return _(this,null,function*(){for(;this.buffer.length<e;)(yield this.Ua())&&this.Qa("Reached the end of bundle when more is expected.");let n=this.La.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n})}Qa(e){throw this.Ba.cancel(),new Error(`Invalid bundle format: ${e}`)}Ua(){return _(this,null,function*(){let e=yield this.Ba.read();if(!e.done){let n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done})}};var TE=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){return _(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new E(y.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");let n=yield function(r,o){return _(this,null,function*(){let s=N(r),a=ku(s.serializer)+"/documents",c={documents:o.map(h=>Ru(s.serializer,h))},l=yield s.Co("BatchGetDocuments",a,c,o.length),u=new Map;l.forEach(h=>{let f=i8(s.serializer,h);u.set(f.key.toString(),f)});let d=[];return o.forEach(h=>{let f=u.get(h.toString());j(!!f),d.push(f)}),d})}(this.datastore,e);return n.forEach(i=>this.recordVersion(i)),n})}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new Yr(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return _(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;let e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,i)=>{let r=k.fromPath(i);this.mutations.push(new Cu(r,this.precondition(r)))}),yield function(i,r){return _(this,null,function*(){let o=N(i),s=ku(o.serializer)+"/documents",a={writes:r.map(c=>Pu(o.serializer,c))};yield o.wo("Commit",s,a)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw F();n=$.min()}let i=this.readVersions.get(e.key.toString());if(i){if(!n.isEqual(i))throw new E(y.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){let n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual($.min())?Ke.exists(!1):Ke.updateTime(n):Ke.none()}preconditionForUpdate(e){let n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual($.min()))throw new E(y.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ke.updateTime(n)}return Ke.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var SE=class{constructor(e,n,i,r,o){this.asyncQueue=e,this.datastore=n,this.options=i,this.updateFunction=r,this.deferred=o,this.Wa=i.maxAttempts,this.zo=new Lu(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){this.zo.ko(()=>_(this,null,function*(){let e=new TE(this.datastore),n=this.za(e);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.ja(r)}))}).catch(i=>{this.ja(i)})}))}za(e){try{let n=this.updateFunction(e);return!Hu(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}ja(e){this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ga(),Promise.resolve()))):this.deferred.reject(e)}Ha(e){if(e.name==="FirebaseError"){let n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!kP(n)}return!1}};var AE=class{constructor(e,n,i,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=ct.UNAUTHENTICATED,this.clientId=Um.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,o=>_(this,null,function*(){x("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(i,o=>(x("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){return _(this,null,function*(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}})}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new E(y.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new lt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>_(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let i=lc(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}};function jm(t,e){return _(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),x("FirestoreClient","Initializing OfflineComponentProvider");let n=yield t.getConfiguration();yield e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(r=>_(this,null,function*(){i.isEqual(r)||(yield eN(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function ME(t,e){return _(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield px(t);x("FirestoreClient","Initializing OnlineComponentProvider");let i=yield t.getConfiguration();yield e.initialize(n,i),t.setCredentialChangeListener(r=>Uk(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,o)=>Uk(e.remoteStore,o)),t._onlineComponents=e})}function gN(t){return t.name==="FirebaseError"?t.code===y.FAILED_PRECONDITION||t.code===y.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function px(t){return _(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){x("FirestoreClient","Using user provided OfflineComponentProvider");try{yield jm(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!gN(n))throw n;Pn("Error using user provided cache. Falling back to memory cache: "+n),yield jm(t,new Bu)}}else x("FirestoreClient","Using default OfflineComponentProvider"),yield jm(t,new Bu);return t._offlineComponents})}function Vp(t){return _(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(x("FirestoreClient","Using user provided OnlineComponentProvider"),yield ME(t,t._uninitializedComponentsProvider._online)):(x("FirestoreClient","Using default OnlineComponentProvider"),yield ME(t,new Uu))),t._onlineComponents})}function bN(t){return px(t).then(e=>e.persistence)}function gx(t){return px(t).then(e=>e.localStore)}function yN(t){return Vp(t).then(e=>e.remoteStore)}function bx(t){return Vp(t).then(e=>e.syncEngine)}function Y8(t){return Vp(t).then(e=>e.datastore)}function nc(t){return _(this,null,function*(){let e=yield Vp(t),n=e.eventManager;return n.onListen=k8.bind(null,e.syncEngine),n.onUnlisten=P8.bind(null,e.syncEngine),n})}function Z8(t){return t.asyncQueue.enqueue(()=>_(this,null,function*(){let e=yield bN(t),n=yield yN(t);return e.setNetworkEnabled(!0),function(r){let o=N(r);return o.C_.delete(0),Qu(o)}(n)}))}function X8(t){return t.asyncQueue.enqueue(()=>_(this,null,function*(){let e=yield bN(t),n=yield yN(t);return e.setNetworkEnabled(!1),function(r){return _(this,null,function*(){let o=N(r);o.C_.add(0),yield sc(o),o.M_.set("Offline")})}(n)}))}function J8(t,e){let n=new lt;return t.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return function(r,o,s){return _(this,null,function*(){try{let a=yield function(l,u){let d=N(l);return d.persistence.runTransaction("read document","readonly",h=>d.localDocuments.getDocument(h,u))}(r,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new E(y.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=lc(a,`Failed to get document '${o} from cache`);s.reject(c)}})}(yield gx(t),e,n)})),n.promise}function _N(t,e,n={}){let i=new lt;return t.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return function(o,s,a,c,l){let u=new tc({next:h=>{s.enqueueAndForget(()=>ax(o,d));let f=h.docs.has(a);!f&&h.fromCache?l.reject(new E(y.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&h.fromCache&&c&&c.source==="server"?l.reject(new E(y.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(h)},error:h=>l.reject(h)}),d=new ju(oc(a.path),u,{includeMetadataChanges:!0,J_:!0});return sx(o,d)}(yield nc(t),t.asyncQueue,e,n,i)})),i.promise}function eG(t,e){let n=new lt;return t.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return function(r,o,s){return _(this,null,function*(){try{let a=yield fp(r,o,!0),c=new Dp(o,a.ls),l=c.ca(a.documents),u=c.applyChanges(l,!1);s.resolve(u.snapshot)}catch(a){let c=lc(a,`Failed to execute query '${o} against cache`);s.reject(c)}})}(yield gx(t),e,n)})),n.promise}function vN(t,e,n={}){let i=new lt;return t.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return function(o,s,a,c,l){let u=new tc({next:h=>{s.enqueueAndForget(()=>ax(o,d)),h.fromCache&&c.source==="server"?l.reject(new E(y.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(h)},error:h=>l.reject(h)}),d=new ju(a,u,{includeMetadataChanges:!0,J_:!0});return sx(o,d)}(yield nc(t),t.asyncQueue,e,n,i)})),i.promise}function tG(t,e){let n=new tc(e);return t.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return function(r,o){N(r).q_.add(o),o.next()}(yield nc(t),n)})),()=>{n.Na(),t.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return function(r,o){N(r).q_.delete(o)}(yield nc(t),n)}))}}function nG(t,e,n,i){let r=function(s,a){let c;return c=typeof s=="string"?NP().encode(s):s,function(u,d){return new CE(u,d)}(function(u,d){if(u instanceof Uint8Array)return Hk(u,d);if(u instanceof ArrayBuffer)return Hk(new Uint8Array(u),d);if(u instanceof ReadableStream)return u.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(n,Ku(e));t.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){Q8(yield bx(t),r,i)}))}function iG(t,e){return t.asyncQueue.enqueue(()=>_(this,null,function*(){return function(i,r){let o=N(i);return o.persistence.runTransaction("Get named query","readonly",s=>o.Kr.getNamedQuery(s,r))}(yield gx(t),e)}))}function wN(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var qk=new Map;function yx(t,e,n){if(!n)throw new E(y.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function _x(t,e,n,i){if(e===!0&&i===!0)throw new E(y.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Gk(t){if(!k.isDocumentKey(t))throw new E(y.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Wk(t){if(k.isDocumentKey(t))throw new E(y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function jp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":F()}function be(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new E(y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=jp(t);throw new E(y.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function EN(t,e){if(e<=0)throw new E(y.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}var Tp=class{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new E(y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new E(y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}_x("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=wN((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new E(y.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new E(y.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new E(y.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},ls=class{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Tp({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new E(y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new E(y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Tp(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new Y0;switch(i.type){case"firstParty":return new ew(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new E(y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let i=qk.get(n);i&&(x("ComponentProvider","Removing Datastore"),qk.delete(n),i.terminate())}(this),Promise.resolve()}};function xN(t,e,n,i={}){var r;let o=(t=be(t,ls))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Pn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),i.mockUserToken){let a,c;if(typeof i.mockUserToken=="string")a=i.mockUserToken,c=ct.MOCK_USER;else{a=Yx(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);let l=i.mockUserToken.sub||i.mockUserToken.user_id;if(!l)throw new E(y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new ct(l)}t._authCredentials=new Z0(new Bm(a,c))}}var Dt=class t{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},ke=class t{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ti(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Ti=class t extends Dt{constructor(e,n,i){super(e,n,oc(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new ke(this.firestore,null,new k(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function vx(t,e,...n){if(t=Ue(t),yx("collection","path",e),t instanceof ls){let i=ve.fromString(e,...n);return Wk(i),new Ti(t,null,i)}{if(!(t instanceof ke||t instanceof Ti))throw new E(y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=t._path.child(ve.fromString(e,...n));return Wk(i),new Ti(t.firestore,null,i)}}function IN(t,e){if(t=be(t,ls),yx("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new E(y.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Dt(t,null,function(i){return new Yn(ve.emptyPath(),i)}(e))}function Yu(t,e,...n){if(t=Ue(t),arguments.length===1&&(e=Um.newId()),yx("doc","path",e),t instanceof ls){let i=ve.fromString(e,...n);return Gk(i),new ke(t,null,new k(i))}{if(!(t instanceof ke||t instanceof Ti))throw new E(y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=t._path.child(ve.fromString(e,...n));return Gk(i),new ke(t.firestore,t instanceof Ti?t.converter:null,new k(i))}}function wx(t,e){return t=Ue(t),e=Ue(e),(t instanceof ke||t instanceof Ti)&&(e instanceof ke||e instanceof Ti)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Ex(t,e){return t=Ue(t),e=Ue(e),t instanceof Dt&&e instanceof Dt&&t.firestore===e.firestore&&Gu(t._query,e._query)&&t.converter===e.converter}var RE=class{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new Lu(this,"async_queue_retry"),this.iu=()=>{let n=Vm();n&&x("AsyncQueue","Visibility state changed to "+n.visibilityState),this.zo.Qo()};let e=Vm();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;let n=Vm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise(()=>{});let n=new lt;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ya.push(e),this._u()))}_u(){return _(this,null,function*(){if(this.Ya.length!==0){try{yield this.Ya[0](),this.Ya.shift(),this.zo.reset()}catch(e){if(!Jr(e))throw e;x("AsyncQueue","Operation failed with retryable error: "+e)}this.Ya.length>0&&this.zo.ko(()=>this._u())}})}ou(e){let n=this.Ja.then(()=>(this.tu=!0,e().catch(i=>{this.eu=i,this.tu=!1;let r=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(i);throw Ze("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.tu=!1,i))));return this.Ja=n,n}enqueueAfterDelay(e,n,i){this.su(),this.ru.indexOf(e)>-1&&(n=0);let r=gE.createAndSchedule(this,e,n,i,o=>this.au(o));return this.Xa.push(r),r}su(){this.eu&&F()}verifyOperationInProgress(){}uu(){return _(this,null,function*(){let e;do e=this.Ja,yield e;while(e!==this.Ja)})}cu(e){for(let n of this.Xa)if(n.timerId===e)return!0;return!1}lu(e){return this.uu().then(()=>{this.Xa.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(let n of this.Xa)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.uu()})}hu(e){this.ru.push(e)}au(e){let n=this.Xa.indexOf(e);this.Xa.splice(n,1)}};function kE(t){return function(n,i){if(typeof n!="object"||n===null)return!1;let r=n;for(let o of i)if(o in r&&typeof r[o]=="function")return!0;return!1}(t,["next","error","complete"])}var PE=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new lt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,i){this._progressObserver={next:e,error:n,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var DN=-1,je=class extends ls{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=function(){return new RE}(),this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||CN(this),this._firestoreClient.terminate()}};function ht(t){return t._firestoreClient||CN(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function CN(t){var e,n,i;let r=t._freezeSettings(),o=function(a,c,l,u){return new cw(a,c,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,wN(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new AE(t._authCredentials,t._appCheckCredentials,t._queue,o),!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}function TN(t,e){FN(t=be(t,je));let n=ht(t);if(n._uninitializedComponentsProvider)throw new E(y.FAILED_PRECONDITION,"SDK cache is already specified.");Pn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let i=t._freezeSettings(),r=new Uu;return AN(n,r,new Cp(r,i.cacheSizeBytes,e?.forceOwnership))}function SN(t){FN(t=be(t,je));let e=ht(t);if(e._uninitializedComponentsProvider)throw new E(y.FAILED_PRECONDITION,"SDK cache is already specified.");Pn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let n=t._freezeSettings(),i=new Uu;return AN(e,i,new DE(i,n.cacheSizeBytes))}function AN(t,e,n){let i=new lt;return t.asyncQueue.enqueue(()=>_(this,null,function*(){try{yield jm(t,n),yield ME(t,e),i.resolve()}catch(r){let o=r;if(!gN(o))throw o;Pn("Error enabling indexeddb cache. Falling back to memory cache: "+o),i.reject(o)}})).then(()=>i.promise)}function MN(t){if(t._initialized&&!t._terminated)throw new E(y.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new lt;return t._queue.enqueueAndForgetEvenWhileRestricted(()=>_(this,null,function*(){try{yield function(i){return _(this,null,function*(){if(!zr.D())return Promise.resolve();let r=i+"main";yield zr.delete(r)})}(nx(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function RN(t){return function(n){let i=new lt;return n.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return V8(yield bx(n),i)})),i.promise}(ht(t=be(t,je)))}function kN(t){return Z8(ht(t=be(t,je)))}function PN(t){return X8(ht(t=be(t,je)))}function NN(t,e){let n=ht(t=be(t,je)),i=new PE;return nG(n,t._databaseId,e,i),i}function ON(t,e){return iG(ht(t=be(t,je)),e).then(n=>n?new Dt(t,null,n.query):null)}function FN(t){if(t._initialized||t._terminated)throw new E(y.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Ri=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(yt.fromBase64String(e))}catch(n){throw new E(y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(yt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Xn=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new E(y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Xi=class{constructor(e){this._methodName=e}};var us=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new E(y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new E(y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ne(this._lat,e._lat)||ne(this._long,e._long)}};var rG=/^__.*__$/,NE=class{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Zn(e,this.data,this.fieldMask,n,this.fieldTransforms):new Qr(e,this.data,n,this.fieldTransforms)}},Sp=class{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Zn(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function LN(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw F()}}var Ap=class t{constructor(e,n,i,r,o,s){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.Pu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var n;let i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Tu({path:i,du:!1});return r.Au(e),r}Ru(e){var n;let i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Tu({path:i,du:!1});return r.Pu(),r}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return Mp(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(e.length===0)throw this.mu("Document fields must not be empty");if(LN(this.Iu)&&rG.test(e))throw this.mu('Document fields cannot begin and end with "__"')}},OE=class{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Ku(e)}pu(e,n,i,r=!1){return new Ap({Iu:e,methodName:n,gu:i,path:Xe.emptyPath(),du:!1,fu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function ms(t){let e=t._freezeSettings(),n=Ku(t._databaseId);return new OE(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Bp(t,e,n,i,r,o={}){let s=t.pu(o.merge||o.mergeFields?2:0,e,n,r);Dx("Data must be an object, but it was:",s,i);let a=BN(i,s),c,l;if(o.merge)c=new wn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let u=[];for(let d of o.mergeFields){let h=BE(e,d,n);if(!s.contains(h))throw new E(y.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);zN(u,h)||u.push(h)}c=new wn(u),l=s.fieldTransforms.filter(d=>c.covers(d.field))}else c=null,l=s.fieldTransforms;return new NE(new Pt(a),c,l)}var zu=class t extends Xi{_toFieldTransform(e){if(e.Iu!==2)throw e.Iu===1?e.mu(`${this._methodName}() can only appear at the top level of your update data`):e.mu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function VN(t,e,n){return new Ap({Iu:3,gu:e.settings.gu,methodName:t._methodName,du:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var FE=class t extends Xi{_toFieldTransform(e){return new ss(e.path,new Wr)}isEqual(e){return e instanceof t}},LE=class extends Xi{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){let n=VN(this,e,!0),i=this.yu.map(o=>ps(o,n)),r=new Yi(i);return new ss(e.path,r)}isEqual(e){return this===e}},VE=class extends Xi{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){let n=VN(this,e,!0),i=this.yu.map(o=>ps(o,n)),r=new Zi(i);return new ss(e.path,r)}isEqual(e){return this===e}},jE=class extends Xi{constructor(e,n){super(e),this.wu=n}_toFieldTransform(e){let n=new Kr(e.serializer,DP(e.serializer,this.wu));return new ss(e.path,n)}isEqual(e){return this===e}};function xx(t,e,n,i){let r=t.pu(1,e,n);Dx("Data must be an object, but it was:",r,i);let o=[],s=Pt.empty();fs(i,(c,l)=>{let u=Cx(e,c,n);l=Ue(l);let d=r.Ru(u);if(l instanceof zu)o.push(u);else{let h=ps(l,d);h!=null&&(o.push(u),s.set(u,h))}});let a=new wn(o);return new Sp(s,a,r.fieldTransforms)}function Ix(t,e,n,i,r,o){let s=t.pu(1,e,n),a=[BE(e,i,n)],c=[r];if(o.length%2!=0)throw new E(y.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<o.length;h+=2)a.push(BE(e,o[h])),c.push(o[h+1]);let l=[],u=Pt.empty();for(let h=a.length-1;h>=0;--h)if(!zN(l,a[h])){let f=a[h],m=c[h];m=Ue(m);let p=s.Ru(f);if(m instanceof zu)l.push(f);else{let g=ps(m,p);g!=null&&(l.push(f),u.set(f,g))}}let d=new wn(l);return new Sp(u,d,s.fieldTransforms)}function jN(t,e,n,i=!1){return ps(n,t.pu(i?4:3,e))}function ps(t,e){if(UN(t=Ue(t)))return Dx("Unsupported field value:",e,t),BN(t,e);if(t instanceof Xi)return function(i,r){if(!LN(r.Iu))throw r.mu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.mu(`${i._methodName}() is not currently supported inside arrays`);let o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.du&&e.Iu!==4)throw e.mu("Nested arrays are not supported");return function(i,r){let o=[],s=0;for(let a of i){let c=ps(a,r.Vu(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(t,e)}return function(i,r){if((i=Ue(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return DP(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let o=ze.fromDate(i);return{timestampValue:Ka(r.serializer,o)}}if(i instanceof ze){let o=new ze(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Ka(r.serializer,o)}}if(i instanceof us)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ri)return{bytesValue:OP(r.serializer,i._byteString)};if(i instanceof ke){let o=r.databaseId,s=i.firestore._databaseId;if(!s.isEqual(o))throw r.mu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:JE(i.firestore._databaseId||r.databaseId,i._key.path)}}throw r.mu(`Unsupported field value: ${jp(i)}`)}(t,e)}function BN(t,e){let n={};return aP(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fs(t,(i,r)=>{let o=ps(r,e.Eu(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function UN(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ze||t instanceof us||t instanceof Ri||t instanceof ke||t instanceof Xi)}function Dx(t,e,n){if(!UN(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){let i=jp(n);throw i==="an object"?e.mu(t+" a custom object"):e.mu(t+" "+i)}}function BE(t,e,n){if((e=Ue(e))instanceof Xn)return e._internalPath;if(typeof e=="string")return Cx(t,e);throw Mp("Field path arguments must be of type string or ",t,!1,void 0,n)}var oG=new RegExp("[~\\*/\\[\\]]");function Cx(t,e,n){if(e.search(oG)>=0)throw Mp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Xn(...e.split("."))._internalPath}catch{throw Mp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Mp(t,e,n,i,r){let o=i&&!i.isEmpty(),s=r!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${i}`),s&&(c+=` in document ${r}`),c+=")"),new E(y.INVALID_ARGUMENT,a+t+c)}function zN(t,e){return t.some(n=>n.isEqual(e))}var ds=class{constructor(e,n,i,r,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new ke(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new UE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(Up("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},UE=class extends ds{data(){return super.data()}};function Up(t,e){return typeof e=="string"?Cx(t,e):e instanceof Xn?e._internalPath:e._delegate._internalPath}function $N(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new E(y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var $u=class{},hs=class extends $u{};function tr(t,e,...n){let i=[];e instanceof $u&&i.push(e),i=i.concat(n),function(o){let s=o.filter(c=>c instanceof zE).length,a=o.filter(c=>c instanceof Rp).length;if(s>1||s>0&&a>0)throw new E(y.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(let r of i)t=r._apply(t);return t}var Rp=class t extends hs{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new t(e,n,i)}_apply(e){let n=this._parse(e);return JN(e._query,n),new Dt(e.firestore,e.converter,ww(e._query,n))}_parse(e){let n=ms(e.firestore);return function(o,s,a,c,l,u,d){let h;if(l.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new E(y.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){Qk(d,u);let f=[];for(let m of d)f.push(Kk(c,o,m));h={arrayValue:{values:f}}}else h=Kk(c,o,d)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||Qk(d,u),h=jN(a,s,d,u==="in"||u==="not-in");return ue.create(l,u,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function HN(t,e,n){let i=e,r=Up("where",t);return Rp._create(r,i,n)}var zE=class t extends $u{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:Te.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(r,o){let s=r,a=o.getFlattenedFilters();for(let c of a)JN(s,c),s=ww(s,c)}(e._query,n),new Dt(e.firestore,e.converter,ww(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var $E=class t extends hs{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(r,o,s){if(r.startAt!==null)throw new E(y.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new E(y.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new rs(o,s)}(e._query,this._field,this._direction);return new Dt(e.firestore,e.converter,function(r,o){let s=r.explicitOrderBy.concat([o]);return new Yn(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}};function qN(t,e="asc"){let n=e,i=Up("orderBy",t);return $E._create(i,n)}var kp=class t extends hs{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new t(e,n,i)}_apply(e){return new Dt(e.firestore,e.converter,Zm(e._query,this._limit,this._limitType))}};function GN(t){return EN("limit",t),kp._create("limit",t,"F")}function WN(t){return EN("limitToLast",t),kp._create("limitToLast",t,"L")}var Pp=class t extends hs{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new t(e,n,i)}_apply(e){let n=XN(e,this.type,this._docOrFields,this._inclusive);return new Dt(e.firestore,e.converter,function(r,o){return new Yn(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)}(e._query,n))}};function KN(...t){return Pp._create("startAt",t,!0)}function QN(...t){return Pp._create("startAfter",t,!1)}var Np=class t extends hs{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new t(e,n,i)}_apply(e){let n=XN(e,this.type,this._docOrFields,this._inclusive);return new Dt(e.firestore,e.converter,function(r,o){return new Yn(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)}(e._query,n))}};function YN(...t){return Np._create("endBefore",t,!1)}function ZN(...t){return Np._create("endAt",t,!0)}function XN(t,e,n,i){if(n[0]=Ue(n[0]),n[0]instanceof ds)return function(o,s,a,c,l){if(!c)throw new E(y.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let u=[];for(let d of Ba(o))if(d.field.isKeyField())u.push(is(s,c.key));else{let h=c.data.field(d.field);if(Fp(h))throw new E(y.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){let f=d.field.canonicalString();throw new E(y.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${f}' (used as the orderBy) does not exist.`)}u.push(h)}return new Ai(u,l)}(t._query,t.firestore._databaseId,e,n[0]._document,i);{let r=ms(t.firestore);return function(s,a,c,l,u,d){let h=s.explicitOrderBy;if(u.length>h.length)throw new E(y.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let f=[];for(let m=0;m<u.length;m++){let p=u[m];if(h[m].field.isKeyField()){if(typeof p!="string")throw new E(y.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof p}`);if(!ZE(s)&&p.indexOf("/")!==-1)throw new E(y.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${p}' contains a slash.`);let g=s.path.child(ve.fromString(p));if(!k.isDocumentKey(g))throw new E(y.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${g}' is not because it contains an odd number of segments.`);let w=new k(g);f.push(is(a,w))}else{let g=jN(c,l,p);f.push(g)}}return new Ai(f,d)}(t._query,t.firestore._databaseId,r,e,n,i)}}function Kk(t,e,n){if(typeof(n=Ue(n))=="string"){if(n==="")throw new E(y.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ZE(e)&&n.indexOf("/")!==-1)throw new E(y.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let i=e.path.child(ve.fromString(n));if(!k.isDocumentKey(i))throw new E(y.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return is(t,new k(i))}if(n instanceof ke)return is(t,n._key);throw new E(y.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jp(n)}.`)}function Qk(t,e){if(!Array.isArray(t)||t.length===0)throw new E(y.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function JN(t,e){let n=function(r,o){for(let s of r)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new E(y.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new E(y.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var ic=class{convertValue(e,n="none"){switch(ns(e)){case 0:return null;case 1:return e.booleanValue;case 2:return We(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Hr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw F()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let i={};return fs(e,(r,o)=>{i[r]=this.convertValue(o,n)}),i}convertGeoPoint(e){return new us(We(e.latitude),We(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":let i=QE(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(xu(e));default:return null}}convertTimestamp(e){let n=$r(e);return new ze(n.seconds,n.nanos)}convertDocumentKey(e,n){let i=ve.fromString(e);j(qP(i));let r=new qr(i.get(1),i.get(3)),o=new k(i.popFirst(5));return r.isEqual(n)||Ze(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function zp(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}var HE=class extends ic{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ri(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new ke(this.firestore,null,n)}};var Qi=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},On=class extends ds{constructor(e,n,i,r,o,s){super(e,n,i,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Br(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let i=this._document.data.field(Up("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}},Br=class extends On{data(e={}){return super.data(e)}},Jn=class{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Qi(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Br(this._firestore,this._userDataWriter,i.key,i,new Qi(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new E(y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(a=>{let c=new Br(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Qi(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new Br(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Qi(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter),l=-1,u=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),u=s.indexOf(a.doc.key)),{type:sG(a.type),doc:c,oldIndex:l,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function sG(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return F()}}function Tx(t,e){return t instanceof On&&e instanceof On?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Jn&&e instanceof Jn&&t._firestore===e._firestore&&Ex(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function eO(t){t=be(t,ke);let e=be(t.firestore,je);return _N(ht(e),t._key).then(n=>Rx(e,t,n))}var Ji=class extends ic{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ri(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new ke(this.firestore,null,n)}};function tO(t){t=be(t,ke);let e=be(t.firestore,je),n=ht(e),i=new Ji(e);return J8(n,t._key).then(r=>new On(e,i,t._key,r,new Qi(r!==null&&r.hasLocalMutations,!0),t.converter))}function nO(t){t=be(t,ke);let e=be(t.firestore,je);return _N(ht(e),t._key,{source:"server"}).then(n=>Rx(e,t,n))}function iO(t){t=be(t,Dt);let e=be(t.firestore,je),n=ht(e),i=new Ji(e);return $N(t._query),vN(n,t._query).then(r=>new Jn(e,i,t,r))}function rO(t){t=be(t,Dt);let e=be(t.firestore,je),n=ht(e),i=new Ji(e);return eG(n,t._query).then(r=>new Jn(e,i,t,r))}function oO(t){t=be(t,Dt);let e=be(t.firestore,je),n=ht(e),i=new Ji(e);return vN(n,t._query,{source:"server"}).then(r=>new Jn(e,i,t,r))}function Sx(t,e,n){t=be(t,ke);let i=be(t.firestore,je),r=zp(t.converter,e,n);return uc(i,[Bp(ms(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,Ke.none())])}function Ax(t,e,n,...i){t=be(t,ke);let r=be(t.firestore,je),o=ms(r),s;return s=typeof(e=Ue(e))=="string"||e instanceof Xn?Ix(o,"updateDoc",t._key,e,n,i):xx(o,"updateDoc",t._key,e),uc(r,[s.toMutation(t._key,Ke.exists(!0))])}function sO(t){return uc(be(t.firestore,je),[new Yr(t._key,Ke.none())])}function aO(t,e){let n=be(t.firestore,je),i=Yu(t),r=zp(t.converter,e);return uc(n,[Bp(ms(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,Ke.exists(!1))]).then(()=>i)}function Mx(t,...e){var n,i,r;t=Ue(t);let o={includeMetadataChanges:!1},s=0;typeof e[s]!="object"||kE(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges};if(kE(e[s])){let d=e[s];e[s]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[s+1]=(i=d.error)===null||i===void 0?void 0:i.bind(d),e[s+2]=(r=d.complete)===null||r===void 0?void 0:r.bind(d)}let c,l,u;if(t instanceof ke)l=be(t.firestore,je),u=oc(t._key.path),c={next:d=>{e[s]&&e[s](Rx(l,t,d))},error:e[s+1],complete:e[s+2]};else{let d=be(t,Dt);l=be(d.firestore,je),u=d._query;let h=new Ji(l);c={next:f=>{e[s]&&e[s](new Jn(l,h,d,f))},error:e[s+1],complete:e[s+2]},$N(t._query)}return function(h,f,m,p){let g=new tc(p),w=new ju(f,g,m);return h.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return sx(yield nc(h),w)})),()=>{g.Na(),h.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return ax(yield nc(h),w)}))}}(ht(l),u,a,c)}function cO(t,e){return tG(ht(t=be(t,je)),kE(e)?e:{next:e})}function uc(t,e){return function(i,r){let o=new lt;return i.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return N8(yield bx(i),r,o)})),o.promise}(ht(t),e)}function Rx(t,e,n){let i=n.docs.get(e._key),r=new Ji(t);return new On(t,r,e._key,i,new Qi(n.hasPendingWrites,n.fromCache),e.converter)}var aG={maxAttempts:5};var Op=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=ms(e)}set(e,n,i){this._verifyNotCommitted();let r=Vr(e,this._firestore),o=zp(r.converter,n,i),s=Bp(this._dataReader,"WriteBatch.set",r._key,o,r.converter!==null,i);return this._mutations.push(s.toMutation(r._key,Ke.none())),this}update(e,n,i,...r){this._verifyNotCommitted();let o=Vr(e,this._firestore),s;return s=typeof(n=Ue(n))=="string"||n instanceof Xn?Ix(this._dataReader,"WriteBatch.update",o._key,n,i,r):xx(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,Ke.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=Vr(e,this._firestore);return this._mutations=this._mutations.concat(new Yr(n._key,Ke.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new E(y.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Vr(t,e){if((t=Ue(t)).firestore!==e)throw new E(y.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var qE=class extends class{constructor(n,i){this._firestore=n,this._transaction=i,this._dataReader=ms(n)}get(n){let i=Vr(n,this._firestore),r=new HE(this._firestore);return this._transaction.lookup([i._key]).then(o=>{if(!o||o.length!==1)return F();let s=o[0];if(s.isFoundDocument())return new ds(this._firestore,r,s.key,s,i.converter);if(s.isNoDocument())return new ds(this._firestore,r,i._key,null,i.converter);throw F()})}set(n,i,r){let o=Vr(n,this._firestore),s=zp(o.converter,i,r),a=Bp(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,r);return this._transaction.set(o._key,a),this}update(n,i,r,...o){let s=Vr(n,this._firestore),a;return a=typeof(i=Ue(i))=="string"||i instanceof Xn?Ix(this._dataReader,"Transaction.update",s._key,i,r,o):xx(this._dataReader,"Transaction.update",s._key,i),this._transaction.update(s._key,a),this}delete(n){let i=Vr(n,this._firestore);return this._transaction.delete(i._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){let n=Vr(e,this._firestore),i=new Ji(this._firestore);return super.get(e).then(r=>new On(this._firestore,i,n._key,r._document,new Qi(!1,!1),n.converter))}};function lO(t,e,n){t=be(t,je);let i=Object.assign(Object.assign({},aG),n);return function(o){if(o.maxAttempts<1)throw new E(y.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(o,s,a){let c=new lt;return o.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){let l=yield Y8(o);new SE(o.asyncQueue,l,a,s,c).run()})),c.promise}(ht(t),r=>e(new qE(t,r)),i)}function uO(){return new zu("deleteField")}function dO(){return new FE("serverTimestamp")}function hO(...t){return new LE("arrayUnion",t)}function fO(...t){return new VE("arrayRemove",t)}function mO(t){return new jE("increment",t)}(function(e,n=!0){(function(r){rc=r})(eI),pc(new io("firestore",(i,{instanceIdentifier:r,options:o})=>{let s=i.getProvider("app").getImmediate(),a=new je(new X0(i.getProvider("auth-internal")),new nw(i.getProvider("app-check-internal")),function(l,u){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new E(y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qr(l.options.projectId,u)}(s,r),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),ir(Z1,"4.4.0",e),ir(Z1,"4.4.0","esm2017")})();var cG="@firebase/firestore-compat",lG="0.3.23";function Lx(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new E("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function pO(){if(typeof Uint8Array>"u")throw new E("unimplemented","Uint8Arrays are not available in this environment.")}function gO(){if(!cP())throw new E("unimplemented","Blobs are unavailable in Firestore in this environment.")}var $p=class t{constructor(e){this._delegate=e}static fromBase64String(e){return gO(),new t(Ri.fromBase64String(e))}static fromUint8Array(e){return pO(),new t(Ri.fromUint8Array(e))}toBase64(){return gO(),this._delegate.toBase64()}toUint8Array(){return pO(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function kx(t){return uG(t,["next","error","complete"])}function uG(t,e){if(typeof t!="object"||t===null)return!1;let n=t;for(let i of e)if(i in n&&typeof n[i]=="function")return!0;return!1}var Px=class{enableIndexedDbPersistence(e,n){return TN(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return SN(e._delegate)}clearIndexedDbPersistence(e){return MN(e._delegate)}},Hp=class{constructor(e,n,i){this._delegate=n,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof qr||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Pn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,i={}){xN(this._delegate,e,n,i)}enableNetwork(){return kN(this._delegate)}disableNetwork(){return PN(this._delegate)}enablePersistence(e){let n=!1,i=!1;return e&&(n=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,_x("synchronizeTabs",n,"experimentalForceOwningTab",i)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return RN(this._delegate)}onSnapshotsInSync(e){return cO(this._delegate,e)}get app(){if(!this._appCompat)throw new E("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new fc(this,vx(this._delegate,e))}catch(n){throw Ut(n,"collection()","Firestore.collection()")}}doc(e){try{return new ki(this,Yu(this._delegate,e))}catch(n){throw Ut(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new _s(this,IN(this._delegate,e))}catch(n){throw Ut(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return lO(this._delegate,n=>e(new qp(this,n)))}batch(){return ht(this._delegate),new Gp(new Op(this._delegate,e=>uc(this._delegate,e)))}loadBundle(e){return NN(this._delegate,e)}namedQuery(e){return ON(this._delegate,e).then(n=>n?new _s(this,n):null)}},dc=class extends ic{constructor(e){super(),this.firestore=e}convertBytes(e){return new $p(new Ri(e))}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return ki.forKey(n,this.firestore,null)}};function dG(t){Yk(t)}var qp=class{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new dc(e)}get(e){let n=gs(e);return this._delegate.get(n).then(i=>new bs(this._firestore,new On(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,n.converter)))}set(e,n,i){let r=gs(e);return i?(Lx("Transaction.set",i),this._delegate.set(r,n,i)):this._delegate.set(r,n),this}update(e,n,i,...r){let o=gs(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,i,...r),this}delete(e){let n=gs(e);return this._delegate.delete(n),this}},Gp=class{constructor(e){this._delegate=e}set(e,n,i){let r=gs(e);return i?(Lx("WriteBatch.set",i),this._delegate.set(r,n,i)):this._delegate.set(r,n),this}update(e,n,i,...r){let o=gs(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,i,...r),this}delete(e){let n=gs(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}},hc=class t{constructor(e,n,i){this._firestore=e,this._userDataWriter=n,this._delegate=i}fromFirestore(e,n){let i=new Br(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ys(this._firestore,i),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){let i=t.INSTANCES,r=i.get(e);r||(r=new WeakMap,i.set(e,r));let o=r.get(n);return o||(o=new t(e,new dc(e),n),r.set(n,o)),o}};hc.INSTANCES=new WeakMap;var ki=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new dc(e)}static forPath(e,n,i){if(e.length%2!==0)throw new E("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new t(n,new ke(n._delegate,i,new k(e)))}static forKey(e,n,i){return new t(n,new ke(n._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new fc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new fc(this.firestore,vx(this._delegate,e))}catch(n){throw Ut(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Ue(e),e instanceof ke?wx(this._delegate,e):!1}set(e,n){n=Lx("DocumentReference.set",n);try{return n?Sx(this._delegate,e,n):Sx(this._delegate,e)}catch(i){throw Ut(i,"setDoc()","DocumentReference.set()")}}update(e,n,...i){try{return arguments.length===1?Ax(this._delegate,e):Ax(this._delegate,e,n,...i)}catch(r){throw Ut(r,"updateDoc()","DocumentReference.update()")}}delete(){return sO(this._delegate)}onSnapshot(...e){let n=bO(e),i=yO(e,r=>new bs(this.firestore,new On(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return Mx(this._delegate,n,i)}get(e){let n;return e?.source==="cache"?n=tO(this._delegate):e?.source==="server"?n=nO(this._delegate):n=eO(this._delegate),n.then(i=>new bs(this.firestore,new On(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(hc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Ut(t,e,n){return t.message=t.message.replace(e,n),t}function bO(t){for(let e of t)if(typeof e=="object"&&!kx(e))return e;return{}}function yO(t,e){var n,i;let r;return kx(t[0])?r=t[0]:kx(t[1])?r=t[1]:typeof t[0]=="function"?r={next:t[0],error:t[1],complete:t[2]}:r={next:t[1],error:t[2],complete:t[3]},{next:o=>{r.next&&r.next(e(o))},error:(n=r.error)===null||n===void 0?void 0:n.bind(r),complete:(i=r.complete)===null||i===void 0?void 0:i.bind(r)}}var bs=class{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new ki(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return Tx(this._delegate,e._delegate)}},ys=class extends bs{data(e){let n=this._delegate.data(e);return this._delegate._converter||Zk(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}},_s=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new dc(e)}where(e,n,i){try{return new t(this.firestore,tr(this._delegate,HN(e,n,i)))}catch(r){throw Ut(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new t(this.firestore,tr(this._delegate,qN(e,n)))}catch(i){throw Ut(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new t(this.firestore,tr(this._delegate,GN(e)))}catch(n){throw Ut(n,"limit()","Query.limit()")}}limitToLast(e){try{return new t(this.firestore,tr(this._delegate,WN(e)))}catch(n){throw Ut(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new t(this.firestore,tr(this._delegate,KN(...e)))}catch(n){throw Ut(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new t(this.firestore,tr(this._delegate,QN(...e)))}catch(n){throw Ut(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new t(this.firestore,tr(this._delegate,YN(...e)))}catch(n){throw Ut(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new t(this.firestore,tr(this._delegate,ZN(...e)))}catch(n){throw Ut(n,"endAt()","Query.endAt()")}}isEqual(e){return Ex(this._delegate,e._delegate)}get(e){let n;return e?.source==="cache"?n=rO(this._delegate):e?.source==="server"?n=oO(this._delegate):n=iO(this._delegate),n.then(i=>new Zu(this.firestore,new Jn(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){let n=bO(e),i=yO(e,r=>new Zu(this.firestore,new Jn(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return Mx(this._delegate,n,i)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(hc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},Nx=class{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new ys(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Zu=class{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new _s(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new ys(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new Nx(this._firestore,n))}forEach(e,n){this._delegate.forEach(i=>{e.call(n,new ys(this._firestore,i))})}isEqual(e){return Tx(this._delegate,e._delegate)}},fc=class t extends _s{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new ki(this.firestore,e):null}doc(e){try{return e===void 0?new ki(this.firestore,Yu(this._delegate)):new ki(this.firestore,Yu(this._delegate,e))}catch(n){throw Ut(n,"doc()","CollectionReference.doc()")}}add(e){return aO(this._delegate,e).then(n=>new ki(this.firestore,n))}isEqual(e){return wx(this._delegate,e._delegate)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(hc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function gs(t){return be(t,ke)}var Ox=class t{constructor(...e){this._delegate=new Xn(...e)}static documentId(){return new t(Xe.keyField().canonicalString())}isEqual(e){return e=Ue(e),e instanceof Xn?this._delegate._internalPath.isEqual(e._internalPath):!1}};var Fx=class t{constructor(e){this._delegate=e}static serverTimestamp(){let e=dO();return e._methodName="FieldValue.serverTimestamp",new t(e)}static delete(){let e=uO();return e._methodName="FieldValue.delete",new t(e)}static arrayUnion(...e){let n=hO(...e);return n._methodName="FieldValue.arrayUnion",new t(n)}static arrayRemove(...e){let n=fO(...e);return n._methodName="FieldValue.arrayRemove",new t(n)}static increment(e){let n=mO(e);return n._methodName="FieldValue.increment",new t(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var hG={Firestore:Hp,GeoPoint:us,Timestamp:ze,Blob:$p,Transaction:qp,WriteBatch:Gp,DocumentReference:ki,DocumentSnapshot:bs,Query:_s,QueryDocumentSnapshot:ys,QuerySnapshot:Zu,CollectionReference:fc,FieldPath:Ox,FieldValue:Fx,setLogLevel:dG,CACHE_SIZE_UNLIMITED:DN};function fG(t,e){t.INTERNAL.registerComponent(new io("firestore-compat",n=>{let i=n.getProvider("app-compat").getImmediate(),r=n.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps(Object.assign({},hG)))}function mG(t){fG(t,(e,n)=>new Hp(e,n,new Px)),t.registerVersion(cG,lG)}mG(rn);function pG(t,e=ni){return new K(n=>{let i;return e!=null?e.schedule(()=>{i=t.onSnapshot({includeMetadataChanges:!0},n)}):i=t.onSnapshot({includeMetadataChanges:!0},n),()=>{i?.()}})}function _O(t,e){return pG(t,e)}function gG(t,e){return _O(t,e).pipe(Ht(void 0),Ns(),B(n=>{let[i,r]=n;return r.exists?i?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}}))}function Bx(t,e){return _O(t,e).pipe(B(n=>({payload:n,type:"query"})))}var Wp=class{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){let i=this.ref.collection(e),{ref:r,query:o}=EO(i,n);return new Qp(r,o,this.afs)}snapshotChanges(){return gG(this.ref,this.afs.schedulers.outsideAngular).pipe(Jt)}valueChanges(e={}){return this.snapshotChanges().pipe(B(({payload:n})=>e.idField?we(T({},n.data()),{[e.idField]:n.id}):n.data()))}get(e){return fe(this.ref.get(e)).pipe(Jt)}};function Kp(t,e){return Bx(t,e).pipe(Ht(void 0),Ns(),B(n=>{let[i,r]=n,o=r.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return i&&JSON.stringify(i.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((a,c)=>{let l=o.find(d=>d.doc.ref.isEqual(a.ref)),u=i?.payload.docs.find(d=>d.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&u&&JSON.stringify(u.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),s}))}function vO(t,e,n){return Kp(t,n).pipe(uo((i,r)=>bG(i,r.map(o=>o.payload),e),[]),ur(),B(i=>i.map(r=>({type:r.type,payload:r}))))}function bG(t,e,n){return e.forEach(i=>{n.indexOf(i.type)>-1&&(t=yG(t,i))}),t}function Vx(t,e,n,...i){let r=t.slice();return r.splice(e,n,...i),r}function yG(t,e){switch(e.type){case"added":if(!(t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)))return Vx(t,e.newIndex,0,e);break;case"modified":if(t[e.oldIndex]==null||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}else return Vx(t,e.newIndex,1,e);break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Vx(t,e.oldIndex,1);break}return t}function wO(t){return(!t||t.length===0)&&(t=["added","removed","modified"]),t}var Qp=class{ref;query;afs;constructor(e,n,i){this.ref=e,this.query=n,this.afs=i}stateChanges(e){let n=Kp(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(B(i=>i.filter(r=>e.indexOf(r.type)>-1)))),n.pipe(Ht(void 0),Ns(),Pe(([i,r])=>r.length>0||!i),B(([,i])=>i),Jt)}auditTrail(e){return this.stateChanges(e).pipe(uo((n,i)=>[...n,...i],[]))}snapshotChanges(e){let n=wO(e);return vO(this.query,n,this.afs.schedulers.outsideAngular).pipe(Jt)}valueChanges(e={}){return Bx(this.query,this.afs.schedulers.outsideAngular).pipe(B(n=>n.payload.docs.map(i=>e.idField?we(T({},i.data()),{[e.idField]:i.id}):i.data())),Jt)}get(e){return fe(this.query.get(e)).pipe(Jt)}add(e){return this.ref.add(e)}doc(e){return new Wp(this.ref.doc(e),this.afs)}},jx=class{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return!e||e.length===0?Kp(this.query,this.afs.schedulers.outsideAngular).pipe(Jt):Kp(this.query,this.afs.schedulers.outsideAngular).pipe(B(n=>n.filter(i=>e.indexOf(i.type)>-1)),Pe(n=>n.length>0),Jt)}auditTrail(e){return this.stateChanges(e).pipe(uo((n,i)=>[...n,...i],[]))}snapshotChanges(e){let n=wO(e);return vO(this.query,n,this.afs.schedulers.outsideAngular).pipe(Jt)}valueChanges(e={}){return Bx(this.query,this.afs.schedulers.outsideAngular).pipe(B(i=>i.payload.docs.map(r=>e.idField?T({[e.idField]:r.id},r.data()):r.data())),Jt)}get(e){return fe(this.query.get(e)).pipe(Jt)}},_G=new M("angularfire2.enableFirestorePersistence"),vG=new M("angularfire2.firestore.persistenceSettings"),wG=new M("angularfire2.firestore.settings"),EG=new M("angularfire2.firestore.use-emulator");function EO(t,e=n=>n){return{query:e(t),ref:t}}var xO=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,i,r,o,s,a,c,l,u,d,h,f,m,p,g,w,A){this.schedulers=c;let C=jl(n,a,i),O=u;d&&t0(C,a,h,m,p,g,f,w),[this.firestore,this.persistenceEnabled$]=em(`${C.name}.firestore`,"AngularFirestore",C.name,()=>{let z=a.runOutsideAngular(()=>C.firestore());if(o&&z.settings(o),O&&z.useEmulator(...O),r&&!Mo(s)){let H=()=>{try{return fe(z.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(oe){return typeof console<"u"&&console.warn(oe),V(!1)}};return[z,a.runOutsideAngular(H)]}else return[z,V(!1)]},[o,O,r])}collection(n,i){let r;typeof n=="string"?r=this.firestore.collection(n):r=n;let{ref:o,query:s}=EO(r,i),a=this.schedulers.ngZone.run(()=>o);return new Qp(a,s,this)}collectionGroup(n,i){let r=i||(s=>s),o=this.firestore.collectionGroup(n);return new jx(r(o),this)}doc(n){let i;typeof n=="string"?i=this.firestore.doc(n):i=n;let r=this.schedulers.ngZone.run(()=>i);return new Wp(r,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(i){return new(i||t)(v(wa),v(Ea,8),v(_G,8),v(wG,8),v(Et),v(U),v(Zf),v(vG,8),v(EG,8),v(AR,8),v(Qv,8),v(Yv,8),v(Zv,8),v(Xv,8),v(Jv,8),v(e0,8),v(zo,8))};static \u0275prov=R({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var IO=(()=>{let e=class e{constructor(i){this.store=i}read(){return this.store.collection("data").snapshotChanges()}write(i,r){this.store.collection("data").doc(i).set({value:r})}};e.\u0275fac=function(r){return new(r||e)(v(xO))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var DO=(()=>{let e=class e{constructor(i){this.firedataService=i,this.myin="",this.datamem="",this.datachat="",this.datax="",this.size=0,this.read()}read(){this.firedataService.read().subscribe(i=>{let r=i.map(o=>o.payload.doc.data());this.datachat=r[0].value,this.datamem=r[1].value,this.datax=this.datamem+this.datachat,this.size=r[2].value})}write(){this.firedataService.write("chat",this.datachat+this.username+": "+this.myin+`
`),this.firedataService.write("size",++this.size),this.size>6&&(this.firedataService.write("mem",this.datachat),this.firedataService.write("chat",this.username+": "+this.myin+`
`),this.firedataService.write("size",0)),this.myin=""}};e.\u0275fac=function(r){return new(r||e)(S(IO))},e.\u0275cmp=tt({type:e,selectors:[["app-chat"]],inputs:{username:"username"},decls:5,vars:2,consts:[["matInput","","readonly","","rows","16","cols","50",3,"ngModel","ngModelChange"],["matInput","","placeholder","scrivi qui cosa vuoi dire!","type","text","name","value",3,"ngModel","ngModelChange","keyup.enter"],["mat-raised-button","",3,"click"]],template:function(r,o){r&1&&(pe(0,"textarea",0),Ve("ngModelChange",function(a){return o.datax=a}),De(),pt(1,"br"),pe(2,"input",1),Ve("ngModelChange",function(a){return o.myin=a})("keyup.enter",function(){return o.write()}),De(),pe(3,"button",2),Ve("click",function(){return o.write()}),fn(4,"SEND"),De()),r&2&&(it("ngModel",o.datax),nt(2),it("ngModel",o.myin))},dependencies:[Qf,Rr,_a,Uo],styles:["input[_ngcontent-%COMP%]{margin:10px;background:none;font-size:large;color:#fff}textarea[_ngcontent-%COMP%]{background:none;font-size:small;color:#fff}"]});let t=e;return t})();var CO=(()=>{let e=class e{constructor(){this.username="user"}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=tt({type:e,selectors:[["app-root"]],decls:10,vars:2,consts:[[2,"color","rgb(158, 84, 255)"],["matInput","","placeholder","inserire username","type","text","name","value","id","userin",3,"ngModel","ngModelChange"],["dynamicHeight",""],["label","Roll"],["label","Chat"],[3,"username"],["label","?"]],template:function(r,o){r&1&&(pe(0,"mat-toolbar",0),fn(1," ! ! ! "),pe(2,"input",1),Ve("ngModelChange",function(a){return o.username=a}),De()(),pe(3,"mat-tab-group",2)(4,"mat-tab",3),pt(5,"app-roll"),De(),pe(6,"mat-tab",4),pt(7,"app-chat",5),De(),pe(8,"mat-tab",6),fn(9," ??? "),De()()),r&2&&(nt(2),it("ngModel",o.username),nt(5),it("username",o.username))},dependencies:[kM,Rr,_a,Uo,Bv,cR,hR,DO],styles:["#userin[_ngcontent-%COMP%]{color:#9e54ff;margin-left:20px;background:none;font-size:large;width:150px}"]});let t=e;return t})();var TO={firebase:{apiKey:"AIzaSyAOVjUyPX3FPyeClJh5MDkYrVYBUfS-tw8",authDomain:"datawhile.firebaseapp.com",projectId:"datawhile",storageBucket:"datawhile.appspot.com",messagingSenderId:"514163878515",appId:"1:514163878515:web:13a0cf8e9827b2f826d806",measurementId:"G-YEEPQ4LF8J"}};var SO=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=te({type:e}),e.\u0275inj=ee({imports:[Xt,na,fa,Xt]});let t=e;return t})();var AO=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=te({type:e,bootstrap:[CO]}),e.\u0275inj=ee({providers:[jS()],imports:[Qh,AA,wM,PM,uR,XM,lR,SR.initializeApp(TO.firebase),SO]});let t=e;return t})();VS().bootstrapModule(AO).catch(t=>console.error(t));
