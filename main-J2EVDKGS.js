import{A as St,B as BS,C as US,D as Oi,E as Zo,F as Rb,G as jl,H as $S,I as zS,J as HS,K as qS,L as Bl,M as ze,N as fr,O as Yn,P as Ia,Q as Xo,R as Ul,S as cf,T as WS,U as Jo,V as lf,W as ht,X as Nn,Y as Pb,a as M,b as Ae,c as kS,d as kb,e as v,f as MS,g as ef,h as RS,i as PS,j as R,k as Ea,l as tf,m as NS,n as FS,o as nf,p as xa,q as rf,r as of,s as Mb,t as OS,u as Fi,v as LS,w as sf,x as VS,y as jS,z as af}from"./chunk-JMKHNGKZ.js";var GS=null;var Nb=1;function Lt(t){let e=GS;return GS=t,e}var KS={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function CU(t){if(!(Lb(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Nb)){if(!t.producerMustRecompute(t)&&!Fb(t)){t.dirty=!1,t.lastCleanEpoch=Nb;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Nb}}function QS(t){return t&&(t.nextProducerIndex=0),Lt(t)}function YS(t,e){if(Lt(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Lb(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Ob(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Fb(t){uf(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],i=t.producerLastReadVersion[e];if(i!==n.version||(CU(n),i!==n.version))return!0}return!1}function ZS(t){if(uf(t),Lb(t))for(let e=0;e<t.producerNode.length;e++)Ob(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Ob(t,e){if(TU(t),uf(t),t.liveConsumerNode.length===1)for(let i=0;i<t.producerNode.length;i++)Ob(t.producerNode[i],t.producerIndexOfThis[i]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let i=t.liveConsumerIndexOfThis[e],r=t.liveConsumerNode[e];uf(r),r.producerIndexOfThis[i]=e}}function Lb(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function uf(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function TU(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function DU(){throw new Error}var SU=DU;function XS(t){SU=t}function Q(t){return typeof t=="function"}function Ca(t){let n=t(i=>{Error.call(i),i.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var df=Ca(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function es(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Te=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:i}=this;if(Q(i))try{i()}catch(o){e=o instanceof df?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{JS(o)}catch(s){e=e??[],s instanceof df?e=[...e,...s.errors]:e.push(s)}}if(e)throw new df(e)}}add(e){var n;if(e&&e!==this)if(this.closed)JS(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&es(n,e)}remove(e){let{_finalizers:n}=this;n&&es(n,e),e instanceof t&&e._removeParent(this)}};Te.EMPTY=(()=>{let t=new Te;return t.closed=!0,t})();var Vb=Te.EMPTY;function hf(t){return t instanceof Te||t&&"closed"in t&&Q(t.remove)&&Q(t.add)&&Q(t.unsubscribe)}function JS(t){Q(t)?t():t.unsubscribe()}var hi={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ta={setTimeout(t,e,...n){let{delegate:i}=Ta;return i?.setTimeout?i.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Ta;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function ff(t){Ta.setTimeout(()=>{let{onUnhandledError:e}=hi;if(e)e(t);else throw t})}function $l(){}var eA=(()=>jb("C",void 0,void 0))();function tA(t){return jb("E",void 0,t)}function nA(t){return jb("N",t,void 0)}function jb(t,e,n){return{kind:t,value:e,error:n}}var ts=null;function Da(t){if(hi.useDeprecatedSynchronousErrorHandling){let e=!ts;if(e&&(ts={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:i}=ts;if(ts=null,n)throw i}}else t()}function iA(t){hi.useDeprecatedSynchronousErrorHandling&&ts&&(ts.errorThrown=!0,ts.error=t)}var ns=class extends Te{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,hf(e)&&e.add(this)):this.destination=MU}static create(e,n,i){return new mr(e,n,i)}next(e){this.isStopped?Ub(nA(e),this):this._next(e)}error(e){this.isStopped?Ub(tA(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Ub(eA,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},AU=Function.prototype.bind;function Bb(t,e){return AU.call(t,e)}var $b=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(i){mf(i)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(i){mf(i)}else mf(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){mf(n)}}},mr=class extends ns{constructor(e,n,i){super();let r;if(Q(e)||!e)r={next:e??void 0,error:n??void 0,complete:i??void 0};else{let o;this&&hi.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&Bb(e.next,o),error:e.error&&Bb(e.error,o),complete:e.complete&&Bb(e.complete,o)}):r=e}this.destination=new $b(r)}};function mf(t){hi.useDeprecatedSynchronousErrorHandling?iA(t):ff(t)}function kU(t){throw t}function Ub(t,e){let{onStoppedNotification:n}=hi;n&&Ta.setTimeout(()=>n(t,e))}var MU={closed:!0,next:$l,error:kU,complete:$l};var Sa=(()=>typeof Symbol=="function"&&Symbol.observable||"@@observable")();function sn(t){return t}function zb(...t){return Hb(t)}function Hb(t){return t.length===0?sn:t.length===1?t[0]:function(n){return t.reduce((i,r)=>r(i),n)}}var Y=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let i=new t;return i.source=this,i.operator=n,i}subscribe(n,i,r){let o=PU(n)?n:new mr(n,i,r);return Da(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(i){n.error(i)}}forEach(n,i){return i=rA(i),new i((r,o)=>{let s=new mr({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(n){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(n)}[Sa](){return this}pipe(...n){return Hb(n)(this)}toPromise(n){return n=rA(n),new n((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return t.create=e=>new t(e),t})();function rA(t){var e;return(e=t??hi.Promise)!==null&&e!==void 0?e:Promise}function RU(t){return t&&Q(t.next)&&Q(t.error)&&Q(t.complete)}function PU(t){return t&&t instanceof ns||RU(t)&&hf(t)}function qb(t){return Q(t?.lift)}function ne(t){return e=>{if(qb(e))return e.lift(function(n){try{return t(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function J(t,e,n,i,r){return new Wb(t,e,n,i,r)}var Wb=class extends ns{constructor(e,n,i,r,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=r?function(a){try{r(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Aa(){return ne((t,e)=>{let n=null;t._refCount++;let i=J(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let r=t._connection,o=n;n=null,r&&(!o||r===o)&&r.unsubscribe(),e.unsubscribe()});t.subscribe(i),i.closed||(n=t.connect())})}var ka=class extends Y{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,qb(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Te;let n=this.getSubject();e.add(this.source.subscribe(J(n,void 0,()=>{this._teardown(),n.complete()},i=>{this._teardown(),n.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Te.EMPTY)}return e}refCount(){return Aa()(this)}};var oA=Ca(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var me=(()=>{class t extends Y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let i=new pf(this,this);return i.operator=n,i}_throwIfClosed(){if(this.closed)throw new oA}next(n){Da(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(n)}})}error(n){Da(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:i}=this;for(;i.length;)i.shift().error(n)}})}complete(){Da(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:i,isStopped:r,observers:o}=this;return i||r?Vb:(this.currentObservers=null,o.push(n),new Te(()=>{this.currentObservers=null,es(o,n)}))}_checkFinalizedStatuses(n){let{hasError:i,thrownError:r,isStopped:o}=this;i?n.error(r):o&&n.complete()}asObservable(){let n=new Y;return n.source=this,n}}return t.create=(e,n)=>new pf(e,n),t})(),pf=class extends me{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.next)===null||i===void 0||i.call(n,e)}error(e){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.error)===null||i===void 0||i.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,i;return(i=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&i!==void 0?i:Vb}};var _t=class extends me{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:i}=this;if(e)throw n;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}};var zl={now(){return(zl.delegate||Date).now()},delegate:void 0};var gf=class extends me{constructor(e=1/0,n=1/0,i=zl){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:o,_windowTime:s}=this;n||(i.push(e),!r&&i.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,o=r.slice();for(let s=0;s<o.length&&!e.closed;s+=i?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:i,_infiniteTimeWindow:r}=this,o=(r?1:2)*e;if(e<1/0&&o<i.length&&i.splice(0,i.length-o),!r){let s=n.now(),a=0;for(let c=1;c<i.length&&i[c]<=s;c+=2)a=c;a&&i.splice(0,a+1)}}};var _f=class extends Te{constructor(e,n){super()}schedule(e,n=0){return this}};var Hl={setInterval(t,e,...n){let{delegate:i}=Hl;return i?.setInterval?i.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Hl;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Ma=class extends _f{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var i;if(this.closed)return this;this.state=e;let r=this.id,o=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(o,r,n)),this.pending=!0,this.delay=n,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,i=0){return Hl.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,n,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return n;n!=null&&Hl.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(e,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i=!1,r;try{this.work(e)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:i}=n;this.work=this.state=this.scheduler=null,this.pending=!1,es(i,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Ra=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,i){return new this.schedulerActionCtor(this,e).schedule(i,n)}};Ra.now=zl.now;var Pa=class extends Ra{constructor(e,n=Ra.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let i;this._active=!0;do if(i=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,i){for(;e=n.shift();)e.unsubscribe();throw i}}};var Li=new Pa(Ma),Gb=Li;var bf=class extends Ma{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,i=0){return i!=null&&i>0||i==null&&this.delay>0?super.requestAsyncId(e,n,i):(e.flush(this),0)}};var yf=class extends Pa{};var Kb=new yf(bf);var Gt=new Y(t=>t.complete());function vf(t){return t&&Q(t.schedule)}function Qb(t){return t[t.length-1]}function wf(t){return Q(Qb(t))?t.pop():void 0}function Vi(t){return vf(Qb(t))?t.pop():void 0}function sA(t,e){return typeof Qb(t)=="number"?t.pop():e}var Na=t=>t&&typeof t.length=="number"&&typeof t!="function";function Ef(t){return Q(t?.then)}function xf(t){return Q(t[Sa])}function If(t){return Symbol.asyncIterator&&Q(t?.[Symbol.asyncIterator])}function Cf(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function NU(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Tf=NU();function Df(t){return Q(t?.[Tf])}function Sf(t){return RS(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:i,done:r}=yield ef(n.read());if(r)return yield ef(void 0);yield yield ef(i)}}finally{n.releaseLock()}})}function Af(t){return Q(t?.getReader)}function Re(t){if(t instanceof Y)return t;if(t!=null){if(xf(t))return FU(t);if(Na(t))return OU(t);if(Ef(t))return LU(t);if(If(t))return aA(t);if(Df(t))return VU(t);if(Af(t))return jU(t)}throw Cf(t)}function FU(t){return new Y(e=>{let n=t[Sa]();if(Q(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function OU(t){return new Y(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function LU(t){return new Y(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,ff)})}function VU(t){return new Y(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function aA(t){return new Y(e=>{BU(t,e).catch(n=>e.error(n))})}function jU(t){return aA(Sf(t))}function BU(t,e){var n,i,r,o;return MS(this,void 0,void 0,function*(){try{for(n=PS(t);i=yield n.next(),!i.done;){let s=i.value;if(e.next(s),e.closed)return}}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=n.return)&&(yield o.call(n))}finally{if(r)throw r.error}}e.complete()})}function vn(t,e,n,i=0,r=!1){let o=e.schedule(function(){n(),r?t.add(this.schedule(null,i)):this.unsubscribe()},i);if(t.add(o),!r)return o}function Fn(t,e=0){return ne((n,i)=>{n.subscribe(J(i,r=>vn(i,t,()=>i.next(r),e),()=>vn(i,t,()=>i.complete(),e),r=>vn(i,t,()=>i.error(r),e)))})}function Zn(t,e=0){return ne((n,i)=>{i.add(t.schedule(()=>n.subscribe(i),e))})}function cA(t,e){return Re(t).pipe(Zn(e),Fn(e))}function lA(t,e){return Re(t).pipe(Zn(e),Fn(e))}function uA(t,e){return new Y(n=>{let i=0;return e.schedule(function(){i===t.length?n.complete():(n.next(t[i++]),n.closed||this.schedule())})})}function dA(t,e){return new Y(n=>{let i;return vn(n,e,()=>{i=t[Tf](),vn(n,e,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){n.error(s);return}o?n.complete():n.next(r)},0,!0)}),()=>Q(i?.return)&&i.return()})}function kf(t,e){if(!t)throw new Error("Iterable cannot be null");return new Y(n=>{vn(n,e,()=>{let i=t[Symbol.asyncIterator]();vn(n,e,()=>{i.next().then(r=>{r.done?n.complete():n.next(r.value)})},0,!0)})})}function hA(t,e){return kf(Sf(t),e)}function fA(t,e){if(t!=null){if(xf(t))return cA(t,e);if(Na(t))return uA(t,e);if(Ef(t))return lA(t,e);if(If(t))return kf(t,e);if(Df(t))return dA(t,e);if(Af(t))return hA(t,e)}throw Cf(t)}function ve(t,e){return e?fA(t,e):Re(t)}function L(...t){let e=Vi(t);return ve(t,e)}function Hr(t,e){let n=Q(t)?t:()=>t,i=r=>r.error(n());return new Y(e?r=>e.schedule(i,0,r):i)}function Mf(t){return!!t&&(t instanceof Y||Q(t.lift)&&Q(t.subscribe))}var pr=Ca(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function mA(t){return t instanceof Date&&!isNaN(t)}function B(t,e){return ne((n,i)=>{let r=0;n.subscribe(J(i,o=>{i.next(t.call(e,o,r++))}))})}var{isArray:UU}=Array;function $U(t,e){return UU(e)?t(...e):t(e)}function Fa(t){return B(e=>$U(t,e))}var{isArray:zU}=Array,{getPrototypeOf:HU,prototype:qU,keys:WU}=Object;function Rf(t){if(t.length===1){let e=t[0];if(zU(e))return{args:e,keys:null};if(GU(e)){let n=WU(e);return{args:n.map(i=>e[i]),keys:n}}}return{args:t,keys:null}}function GU(t){return t&&typeof t=="object"&&HU(t)===qU}function Pf(t,e){return t.reduce((n,i,r)=>(n[i]=e[r],n),{})}function is(...t){let e=Vi(t),n=wf(t),{args:i,keys:r}=Rf(t);if(i.length===0)return ve([],e);let o=new Y(KU(i,e,r?s=>Pf(r,s):sn));return n?o.pipe(Fa(n)):o}function KU(t,e,n=sn){return i=>{pA(e,()=>{let{length:r}=t,o=new Array(r),s=r,a=r;for(let c=0;c<r;c++)pA(e,()=>{let l=ve(t[c],e),u=!1;l.subscribe(J(i,d=>{o[c]=d,u||(u=!0,a--),a||i.next(n(o.slice()))},()=>{--s||i.complete()}))},i)},i)}}function pA(t,e,n){t?vn(n,t,e):e()}function gA(t,e,n,i,r,o,s,a){let c=[],l=0,u=0,d=!1,h=()=>{d&&!c.length&&!l&&e.complete()},f=p=>l<i?m(p):c.push(p),m=p=>{o&&e.next(p),l++;let g=!1;Re(n(p,u++)).subscribe(J(e,w=>{r?.(w),o?f(w):e.next(w)},()=>{g=!0},void 0,()=>{if(g)try{for(l--;c.length&&l<i;){let w=c.shift();s?vn(e,s,()=>m(w)):m(w)}h()}catch(w){e.error(w)}}))};return t.subscribe(J(e,f,()=>{d=!0,h()})),()=>{a?.()}}function ct(t,e,n=1/0){return Q(e)?ct((i,r)=>B((o,s)=>e(i,o,r,s))(Re(t(i,r))),n):(typeof e=="number"&&(n=e),ne((i,r)=>gA(i,r,t,n)))}function qr(t=1/0){return ct(sn,t)}function _A(){return qr(1)}function Wr(...t){return _A()(ve(t,Vi(t)))}function Nf(t){return new Y(e=>{Re(t()).subscribe(e)})}function ql(...t){let e=wf(t),{args:n,keys:i}=Rf(t),r=new Y(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let u=0;u<s;u++){let d=!1;Re(n[u]).subscribe(J(o,h=>{d||(d=!0,l--),a[u]=h},()=>c--,void 0,()=>{(!c||!d)&&(l||o.next(i?Pf(i,a):a),o.complete())}))}});return e?r.pipe(Fa(e)):r}var QU=["addListener","removeListener"],YU=["addEventListener","removeEventListener"],ZU=["on","off"];function Gr(t,e,n,i){if(Q(n)&&(i=n,n=void 0),i)return Gr(t,e,n).pipe(Fa(i));let[r,o]=e$(t)?YU.map(s=>a=>t[s](e,a,n)):XU(t)?QU.map(bA(t,e)):JU(t)?ZU.map(bA(t,e)):[];if(!r&&Na(t))return ct(s=>Gr(s,e,n))(Re(t));if(!r)throw new TypeError("Invalid event target");return new Y(s=>{let a=(...c)=>s.next(1<c.length?c:c[0]);return r(a),()=>o(a)})}function bA(t,e){return n=>i=>t[n](e,i)}function XU(t){return Q(t.addListener)&&Q(t.removeListener)}function JU(t){return Q(t.on)&&Q(t.off)}function e$(t){return Q(t.addEventListener)&&Q(t.removeEventListener)}function Wl(t=0,e,n=Gb){let i=-1;return e!=null&&(vf(e)?n=e:i=e),new Y(r=>{let o=mA(t)?+t-n.now():t;o<0&&(o=0);let s=0;return n.schedule(function(){r.closed||(r.next(s++),0<=i?this.schedule(void 0,i):r.complete())},o)})}function rs(...t){let e=Vi(t),n=sA(t,1/0),i=t;return i.length?i.length===1?Re(i[0]):qr(n)(ve(i,e)):Gt}function He(t,e){return ne((n,i)=>{let r=0;n.subscribe(J(i,o=>t.call(e,o,r++)&&i.next(o)))})}function yA(t){return ne((e,n)=>{let i=!1,r=null,o=null,s=!1,a=()=>{if(o?.unsubscribe(),o=null,i){i=!1;let l=r;r=null,n.next(l)}s&&n.complete()},c=()=>{o=null,s&&n.complete()};e.subscribe(J(n,l=>{i=!0,r=l,o||Re(t(l)).subscribe(o=J(n,a,c))},()=>{s=!0,(!i||!o||o.closed)&&n.complete()}))})}function Yb(t,e=Li){return yA(()=>Wl(t,e))}function ji(t){return ne((e,n)=>{let i=null,r=!1,o;i=e.subscribe(J(n,void 0,void 0,s=>{o=Re(t(s,ji(t)(e))),i?(i.unsubscribe(),i=null,o.subscribe(n)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(n))})}function vA(t,e,n,i,r){return(o,s)=>{let a=n,c=e,l=0;o.subscribe(J(s,u=>{let d=l++;c=a?t(c,u,d):(a=!0,u),i&&s.next(c)},r&&(()=>{a&&s.next(c),s.complete()})))}}function gr(t,e){return Q(e)?ct(t,e,1):ct(t,1)}function os(t,e=Li){return ne((n,i)=>{let r=null,o=null,s=null,a=()=>{if(r){r.unsubscribe(),r=null;let l=o;o=null,i.next(l)}};function c(){let l=s+t,u=e.now();if(u<l){r=this.schedule(void 0,l-u),i.add(r);return}a()}n.subscribe(J(i,l=>{o=l,s=e.now(),r||(r=e.schedule(c,t),i.add(r))},()=>{a(),i.complete()},void 0,()=>{o=r=null}))})}function Kr(t){return ne((e,n)=>{let i=!1;e.subscribe(J(n,r=>{i=!0,n.next(r)},()=>{i||n.next(t),n.complete()}))})}function Kt(t){return t<=0?()=>Gt:ne((e,n)=>{let i=0;e.subscribe(J(n,r=>{++i<=t&&(n.next(r),t<=i&&n.complete())}))})}function Zb(t){return B(()=>t)}function Qr(t,e=sn){return t=t??t$,ne((n,i)=>{let r,o=!0;n.subscribe(J(i,s=>{let a=e(s);(o||!t(r,a))&&(o=!1,r=a,i.next(s))}))})}function t$(t,e){return t===e}function Ff(t=n$){return ne((e,n)=>{let i=!1;e.subscribe(J(n,r=>{i=!0,n.next(r)},()=>i?n.complete():n.error(t())))})}function n$(){return new pr}function Yr(t){return ne((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function On(t,e){let n=arguments.length>=2;return i=>i.pipe(t?He((r,o)=>t(r,o,i)):sn,Kt(1),n?Kr(e):Ff(()=>new pr))}function Oa(t){return t<=0?()=>Gt:ne((e,n)=>{let i=[];e.subscribe(J(n,r=>{i.push(r),t<i.length&&i.shift()},()=>{for(let r of i)n.next(r);n.complete()},void 0,()=>{i=null}))})}function Xb(t,e){let n=arguments.length>=2;return i=>i.pipe(t?He((r,o)=>t(r,o,i)):sn,Oa(1),n?Kr(e):Ff(()=>new pr))}function La(){return ne((t,e)=>{let n,i=!1;t.subscribe(J(e,r=>{let o=n;n=r,i&&e.next([o,r]),i=!0}))})}function ss(t,e){return ne(vA(t,e,arguments.length>=2,!0))}function Gl(t={}){let{connector:e=()=>new me,resetOnError:n=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=t;return o=>{let s,a,c,l=0,u=!1,d=!1,h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),s=c=void 0,u=d=!1},m=()=>{let p=s;f(),p?.unsubscribe()};return ne((p,g)=>{l++,!d&&!u&&h();let w=c=c??e();g.add(()=>{l--,l===0&&!d&&!u&&(a=Jb(m,r))}),w.subscribe(g),!s&&l>0&&(s=new mr({next:k=>w.next(k),error:k=>{d=!0,h(),a=Jb(f,n,k),w.error(k)},complete:()=>{u=!0,h(),a=Jb(f,i),w.complete()}}),Re(p).subscribe(s))})(o)}}function Jb(t,e,...n){if(e===!0){t();return}if(e===!1)return;let i=new mr({next:()=>{i.unsubscribe(),t()}});return Re(e(...n)).subscribe(i)}function Kl(t,e,n){let i,r=!1;return t&&typeof t=="object"?{bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:n}=t:i=t??1/0,Gl({connector:()=>new gf(i,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function as(t){return He((e,n)=>t<=n)}function wn(...t){let e=Vi(t);return ne((n,i)=>{(e?Wr(t,n,e):Wr(t,n)).subscribe(i)})}function qe(t,e){return ne((n,i)=>{let r=null,o=0,s=!1,a=()=>s&&!r&&i.complete();n.subscribe(J(i,c=>{r?.unsubscribe();let l=0,u=o++;Re(t(c,u)).subscribe(r=J(i,d=>i.next(e?e(c,d,u,l++):d),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function Of(t,e){return Q(e)?qe(()=>t,e):qe(()=>t)}function En(t){return ne((e,n)=>{Re(t).subscribe(J(n,()=>n.complete(),$l)),!n.closed&&e.subscribe(n)})}function Oe(t,e,n){let i=Q(t)||e||n?{next:t,error:e,complete:n}:t;return i?ne((r,o)=>{var s;(s=i.subscribe)===null||s===void 0||s.call(i);let a=!0;r.subscribe(J(o,c=>{var l;(l=i.next)===null||l===void 0||l.call(i,c),o.next(c)},()=>{var c;a=!1,(c=i.complete)===null||c===void 0||c.call(i),o.complete()},c=>{var l;a=!1,(l=i.error)===null||l===void 0||l.call(i,c),o.error(c)},()=>{var c,l;a&&((c=i.unsubscribe)===null||c===void 0||c.call(i)),(l=i.finalize)===null||l===void 0||l.call(i)}))}):sn}function je(t){for(let e in t)if(t[e]===je)return e;throw Error("Could not find renamed property on target object.")}function Lf(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function ln(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(ln).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function _y(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var i$=je({__forward_ref__:je});function Wi(t){return t.__forward_ref__=Wi,t.toString=function(){return ln(this())},t}function an(t){return ck(t)?t():t}function ck(t){return typeof t=="function"&&t.hasOwnProperty(i$)&&t.__forward_ref__===Wi}function lk(t){return t&&!!t.\u0275providers}var uk="https://g.co/ng/security#xss",S=class extends Error{constructor(e,n){super(Em(e,n)),this.code=e}};function Em(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}var r$=je({\u0275cmp:je}),o$=je({\u0275dir:je}),s$=je({\u0275pipe:je}),a$=je({\u0275mod:je}),Xf=je({\u0275fac:je}),Yl=je({__NG_ELEMENT_ID__:je}),wA=je({__NG_ENV_ID__:je});function kv(t){return typeof t=="string"?t:t==null?"":String(t)}function c$(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():kv(t)}function l$(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new S(-200,`Circular dependency in DI detected for ${t}${n}`)}function Mv(t,e){let n=e?` in ${e}`:"";throw new S(-201,!1)}function u$(t,e){t==null&&d$(e,t,null,"!=")}function d$(t,e,n,i){throw new Error(`ASSERTION ERROR: ${t}`+(i==null?"":` [Expected=> ${n} ${i} ${e} <=Actual]`))}function A(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function z(t){return{providers:t.providers||[],imports:t.imports||[]}}function xm(t){return EA(t,hk)||EA(t,fk)}function dk(t){return xm(t)!==null}function EA(t,e){return t.hasOwnProperty(e)?t[e]:null}function h$(t){let e=t&&(t[hk]||t[fk]);return e||null}function xA(t){return t&&(t.hasOwnProperty(IA)||t.hasOwnProperty(f$))?t[IA]:null}var hk=je({\u0275prov:je}),IA=je({\u0275inj:je}),fk=je({ngInjectableDef:je}),f$=je({ngInjectorDef:je}),fe=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(fe||{}),by;function mk(){return by}function Xn(t){let e=by;return by=t,e}function pk(t,e,n){let i=xm(t);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(n&fe.Optional)return null;if(e!==void 0)return e;Mv(ln(t),"Injector")}var un=globalThis;var C=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=A({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};var m$={},Xl=m$,yy="__NG_DI_FLAG__",Jf="ngTempTokenPath",p$="ngTokenPath",g$=/\n/gm,_$="\u0275",CA="__source",$a;function b$(){return $a}function Zr(t){let e=$a;return $a=t,e}function y$(t,e=fe.Default){if($a===void 0)throw new S(-203,!1);return $a===null?pk(t,void 0,e):$a.get(t,e&fe.Optional?null:void 0,e)}function y(t,e=fe.Default){return(mk()||y$)(an(t),e)}function T(t,e=fe.Default){return y(t,Im(e))}function Im(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function vy(t){let e=[];for(let n=0;n<t.length;n++){let i=an(t[n]);if(Array.isArray(i)){if(i.length===0)throw new S(900,!1);let r,o=fe.Default;for(let s=0;s<i.length;s++){let a=i[s],c=v$(a);typeof c=="number"?c===-1?r=a.token:o|=c:r=a}e.push(y(r,o))}else e.push(y(i))}return e}function gk(t,e){return t[yy]=e,t.prototype[yy]=e,t}function v$(t){return t[yy]}function w$(t,e,n,i){let r=t[Jf];throw e[CA]&&r.unshift(e[CA]),t.message=E$(`
`+t.message,r,n,i),t[p$]=r,t[Jf]=null,t}function E$(t,e,n,i=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==_$?t.slice(2):t;let r=ln(e);if(Array.isArray(e))r=e.map(ln).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):ln(a)))}r=`{${o.join(", ")}}`}return`${n}${i?"("+i+")":""}[${r}]: ${t.replace(g$,`
  `)}`}function uu(t){return{toString:t}.toString()}var _k=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(_k||{}),Hi=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Hi||{}),Ha={},cn=[];function bk(t,e,n){let i=t.length;for(;;){let r=t.indexOf(e,n);if(r===-1)return r;if(r===0||t.charCodeAt(r-1)<=32){let o=e.length;if(r+o===i||t.charCodeAt(r+o)<=32)return r}n=r+1}}function wy(t,e,n){let i=0;for(;i<n.length;){let r=n[i];if(typeof r=="number"){if(r!==0)break;i++;let o=n[i++],s=n[i++],a=n[i++];t.setAttribute(e,s,a,o)}else{let o=r,s=n[++i];x$(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),i++}}return i}function yk(t){return t===3||t===4||t===6}function x$(t){return t.charCodeAt(0)===64}function Jl(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let i=0;i<e.length;i++){let r=e[i];typeof r=="number"?n=r:n===0||(n===-1||n===2?TA(t,n,r,null,e[++i]):TA(t,n,r,null,null))}}return t}function TA(t,e,n,i,r){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){if(i===null){r!==null&&(t[o+1]=r);return}else if(i===t[o+1]){t[o+2]=r;return}}o++,i!==null&&o++,r!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i),r!==null&&t.splice(o++,0,r)}var vk="ng-template";function I$(t,e,n){let i=0,r=!0;for(;i<t.length;){let o=t[i++];if(typeof o=="string"&&r){let s=t[i++];if(n&&o==="class"&&bk(s.toLowerCase(),e,0)!==-1)return!0}else if(o===1){for(;i<t.length&&typeof(o=t[i++])=="string";)if(o.toLowerCase()===e)return!0;return!1}else typeof o=="number"&&(r=!1)}return!1}function wk(t){return t.type===4&&t.value!==vk}function C$(t,e,n){let i=t.type===4&&!n?vk:t.value;return e===i}function T$(t,e,n){let i=4,r=t.attrs||[],o=A$(r),s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!fi(i)&&!fi(c))return!1;if(s&&fi(c))continue;s=!1,i=c|i&1;continue}if(!s)if(i&4){if(i=2|i&1,c!==""&&!C$(t,c,n)||c===""&&e.length===1){if(fi(i))return!1;s=!0}}else{let l=i&8?c:e[++a];if(i&8&&t.attrs!==null){if(!I$(t.attrs,l,n)){if(fi(i))return!1;s=!0}continue}let u=i&8?"class":c,d=D$(u,r,wk(t),n);if(d===-1){if(fi(i))return!1;s=!0;continue}if(l!==""){let h;d>o?h="":h=r[d+1].toLowerCase();let f=i&8?h:null;if(f&&bk(f,l,0)!==-1||i&2&&l!==h){if(fi(i))return!1;s=!0}}}}return fi(i)||s}function fi(t){return(t&1)===0}function D$(t,e,n,i){if(e===null)return-1;let r=0;if(i||!n){let o=!1;for(;r<e.length;){let s=e[r];if(s===t)return r;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++r];for(;typeof a=="string";)a=e[++r];continue}else{if(s===4)break;if(s===0){r+=4;continue}}r+=o?1:2}return-1}else return k$(e,t)}function Ek(t,e,n=!1){for(let i=0;i<e.length;i++)if(T$(t,e[i],n))return!0;return!1}function S$(t){let e=t.attrs;if(e!=null){let n=e.indexOf(5);if(!(n&1))return e[n+1]}return null}function A$(t){for(let e=0;e<t.length;e++){let n=t[e];if(yk(n))return e}return t.length}function k$(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let i=t[n];if(typeof i=="number")return-1;if(i===e)return n;n++}return-1}function M$(t,e){e:for(let n=0;n<e.length;n++){let i=e[n];if(t.length===i.length){for(let r=0;r<t.length;r++)if(t[r]!==i[r])continue e;return!0}}return!1}function DA(t,e){return t?":not("+e.trim()+")":e}function R$(t){let e=t[0],n=1,i=2,r="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(i&2){let a=t[++n];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else i&8?r+="."+s:i&4&&(r+=" "+s);else r!==""&&!fi(s)&&(e+=DA(o,r),r=""),i=s,o=o||!fi(i);n++}return r!==""&&(e+=DA(o,r)),e}function P$(t){return t.map(R$).join(",")}function N$(t){let e=[],n=[],i=1,r=2;for(;i<t.length;){let o=t[i];if(typeof o=="string")r===2?o!==""&&e.push(o,t[++i]):r===8&&n.push(o);else{if(!fi(r))break;r=o}i++}return{attrs:e,classes:n}}function Qe(t){return uu(()=>{let e=Dk(t),n=Ae(M({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===_k.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Hi.Emulated,styles:t.styles||cn,_:null,schemas:t.schemas||null,tView:null,id:""});Sk(n);let i=t.dependencies;return n.directiveDefs=AA(i,!1),n.pipeDefs=AA(i,!0),n.id=L$(n),n})}function F$(t){return Jr(t)||xk(t)}function O$(t){return t!==null}function H(t){return uu(()=>({type:t.type,bootstrap:t.bootstrap||cn,declarations:t.declarations||cn,imports:t.imports||cn,exports:t.exports||cn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function SA(t,e){if(t==null)return Ha;let n={};for(let i in t)if(t.hasOwnProperty(i)){let r=t[i],o=r;Array.isArray(r)&&(o=r[1],r=r[0]),n[r]=i,e&&(e[r]=o)}return n}function _e(t){return uu(()=>{let e=Dk(t);return Sk(e),e})}function Jr(t){return t[r$]||null}function xk(t){return t[o$]||null}function Ik(t){return t[s$]||null}function Ck(t){let e=Jr(t)||xk(t)||Ik(t);return e!==null?e.standalone:!1}function Tk(t,e){let n=t[a$]||null;if(!n&&e===!0)throw new Error(`Type ${ln(t)} does not have '\u0275mod' property.`);return n}function Dk(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Ha,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||cn,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:SA(t.inputs,e),outputs:SA(t.outputs),debugInfo:null}}function Sk(t){t.features?.forEach(e=>e(t))}function AA(t,e){if(!t)return null;let n=e?Ik:F$;return()=>(typeof t=="function"?t():t).map(i=>n(i)).filter(O$)}function L$(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let r of n)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483647+1,"c"+e}var Ln=0,ie=1,X=2,ft=3,pi=4,Vn=5,gi=6,eu=7,Qt=8,qa=9,eo=10,Ke=11,tu=12,kA=13,Xa=14,xn=15,du=16,Va=17,$i=18,Cm=19,Ak=20,Xr=21,ey=22,ls=23,At=25,kk=1,nu=6,_r=7,em=8,Wa=9,Vt=10,Ga=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t[t.HasChildViewsToRefresh=4]="HasChildViewsToRefresh",t}(Ga||{});function zi(t){return Array.isArray(t)&&typeof t[kk]=="object"}function Jn(t){return Array.isArray(t)&&t[kk]===!0}function Mk(t){return(t.flags&4)!==0}function hu(t){return t.componentOffset>-1}function Rv(t){return(t.flags&1)===1}function to(t){return!!t.template}function Rk(t){return(t[X]&512)!==0}function Ka(t,e){let n=t.hasOwnProperty(Xf);return n?t[Xf]:null}var Ey=class{constructor(e,n,i){this.previousValue=e,this.currentValue=n,this.firstChange=i}isFirstChange(){return this.firstChange}};function Gi(){return Pk}function Pk(t){return t.type.prototype.ngOnChanges&&(t.setInput=j$),V$}Gi.ngInherit=!0;function V$(){let t=Fk(this),e=t?.current;if(e){let n=t.previous;if(n===Ha)t.previous=e;else for(let i in e)n[i]=e[i];t.current=null,this.ngOnChanges(e)}}function j$(t,e,n,i){let r=this.declaredInputs[n],o=Fk(t)||B$(t,{previous:Ha,current:null}),s=o.current||(o.current={}),a=o.previous,c=a[r];s[r]=new Ey(c&&c.currentValue,e,a===Ha),t[i]=e}var Nk="__ngSimpleChanges__";function Fk(t){return t[Nk]||null}function B$(t,e){return t[Nk]=e}var MA=null;var Bi=function(t,e,n){MA?.(t,e,n)},Ok="svg",U$="math",$$=!1;function z$(){return $$}function _i(t){for(;Array.isArray(t);)t=t[Ln];return t}function Lk(t,e){return _i(e[t])}function jn(t,e){return _i(e[t.index])}function Pv(t,e){return t.data[e]}function H$(t,e){return t[e]}function ro(t,e){let n=e[t];return zi(n)?n:n[Ln]}function q$(t){return(t[X]&4)===4}function Nv(t){return(t[X]&128)===128}function W$(t){return Jn(t[ft])}function tm(t,e){return e==null?null:t[e]}function Vk(t){t[Va]=0}function G$(t){t[X]&1024||(t[X]|=1024,Nv(t)&&iu(t))}function K$(t,e){for(;t>0;)e=e[Xa],t--;return e}function jk(t){return t[X]&9216||t[ls]?.dirty}function xy(t){jk(t)?iu(t):t[X]&64&&(z$()?(t[X]|=1024,iu(t)):t[eo].changeDetectionScheduler?.notify())}function iu(t){t[eo].changeDetectionScheduler?.notify();let e=t[ft];for(;e!==null&&!(Jn(e)&&e[X]&Ga.HasChildViewsToRefresh||zi(e)&&e[X]&8192);){if(Jn(e))e[X]|=Ga.HasChildViewsToRefresh;else if(e[X]|=8192,!Nv(e))break;e=e[ft]}}function Bk(t,e){if((t[X]&256)===256)throw new S(911,!1);t[Xr]===null&&(t[Xr]=[]),t[Xr].push(e)}function Q$(t,e){if(t[Xr]===null)return;let n=t[Xr].indexOf(e);n!==-1&&t[Xr].splice(n,1)}var se={lFrame:Yk(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Y$(){return se.lFrame.elementDepthCount}function Z$(){se.lFrame.elementDepthCount++}function X$(){se.lFrame.elementDepthCount--}function Uk(){return se.bindingsEnabled}function Ja(){return se.skipHydrationRootTNode!==null}function J$(t){return se.skipHydrationRootTNode===t}function ez(t){se.skipHydrationRootTNode=t}function tz(){se.skipHydrationRootTNode=null}function ge(){return se.lFrame.lView}function jt(){return se.lFrame.tView}function fu(t){return se.lFrame.contextLView=t,t[Qt]}function mu(t){return se.lFrame.contextLView=null,t}function Tn(){let t=$k();for(;t!==null&&t.type===64;)t=t.parent;return t}function $k(){return se.lFrame.currentTNode}function nz(){let t=se.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function pu(t,e){let n=se.lFrame;n.currentTNode=t,n.isParent=e}function zk(){return se.lFrame.isParent}function Hk(){se.lFrame.isParent=!1}function iz(){return se.lFrame.contextLView}function qk(){let t=se.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function rz(t){return se.lFrame.bindingIndex=t}function ec(){return se.lFrame.bindingIndex++}function Wk(t){let e=se.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function oz(){return se.lFrame.inI18n}function sz(t,e){let n=se.lFrame;n.bindingIndex=n.bindingRootIndex=t,Iy(e)}function az(){return se.lFrame.currentDirectiveIndex}function Iy(t){se.lFrame.currentDirectiveIndex=t}function cz(t){let e=se.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function Gk(){return se.lFrame.currentQueryIndex}function Fv(t){se.lFrame.currentQueryIndex=t}function lz(t){let e=t[ie];return e.type===2?e.declTNode:e.type===1?t[Vn]:null}function Kk(t,e,n){if(n&fe.SkipSelf){let r=e,o=t;for(;r=r.parent,r===null&&!(n&fe.Host);)if(r=lz(o),r===null||(o=o[Xa],r.type&10))break;if(r===null)return!1;e=r,t=o}let i=se.lFrame=Qk();return i.currentTNode=e,i.lView=t,!0}function Ov(t){let e=Qk(),n=t[ie];se.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Qk(){let t=se.lFrame,e=t===null?null:t.child;return e===null?Yk(t):e}function Yk(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function Zk(){let t=se.lFrame;return se.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var Xk=Zk;function Lv(){let t=Zk();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function uz(t){return(se.lFrame.contextLView=K$(t,se.lFrame.contextLView))[Qt]}function oo(){return se.lFrame.selectedIndex}function us(t){se.lFrame.selectedIndex=t}function Vv(){let t=se.lFrame;return Pv(t.tView,t.selectedIndex)}function Jk(){se.lFrame.currentNamespace=Ok}function eM(){dz()}function dz(){se.lFrame.currentNamespace=null}function tM(){return se.lFrame.currentNamespace}var nM=!0;function jv(){return nM}function so(t){nM=t}function hz(t,e,n){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(i){let s=Pk(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}r&&(n.preOrderHooks??=[]).push(0-t,r),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function Bv(t,e){for(let n=e.directiveStart,i=e.directiveEnd;n<i;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),u!=null&&(t.destroyHooks??=[]).push(n,u)}}function Wf(t,e,n){iM(t,e,3,n)}function Gf(t,e,n,i){(t[X]&3)===n&&iM(t,e,n,i)}function ty(t,e){let n=t[X];(n&3)===e&&(n&=16383,n+=1,t[X]=n)}function iM(t,e,n,i){let r=i!==void 0?t[Va]&65535:0,o=i??-1,s=e.length-1,a=0;for(let c=r;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],i!=null&&a>=i)break}else e[c]<0&&(t[Va]+=65536),(a<o||o==-1)&&(fz(t,n,e,c),t[Va]=(t[Va]&4294901760)+c+2),c++}function RA(t,e){Bi(4,t,e);let n=Lt(null);try{e.call(t)}finally{Lt(n),Bi(5,t,e)}}function fz(t,e,n,i){let r=n[i]<0,o=n[i+1],s=r?-n[i]:n[i],a=t[s];r?t[X]>>14<t[Va]>>16&&(t[X]&3)===e&&(t[X]+=16384,RA(a,o)):RA(a,o)}var za=-1,ds=class{constructor(e,n,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=i}};function mz(t){return t instanceof ds}function pz(t){return(t.flags&8)!==0}function gz(t){return(t.flags&16)!==0}function rM(t){return t!==za}function nm(t){let e=t&32767;return t&32767}function _z(t){return t>>16}function im(t,e){let n=_z(t),i=e;for(;n>0;)i=i[Xa],n--;return i}var Cy=!0;function PA(t){let e=Cy;return Cy=t,e}var bz=256,oM=bz-1,sM=5,yz=0,Ui={};function vz(t,e,n){let i;typeof n=="string"?i=n.charCodeAt(0)||0:n.hasOwnProperty(Yl)&&(i=n[Yl]),i==null&&(i=n[Yl]=yz++);let r=i&oM,o=1<<r;e.data[t+(r>>sM)]|=o}function rm(t,e){let n=aM(t,e);if(n!==-1)return n;let i=e[ie];i.firstCreatePass&&(t.injectorIndex=e.length,ny(i.data,t),ny(e,null),ny(i.blueprint,null));let r=Uv(t,e),o=t.injectorIndex;if(rM(r)){let s=nm(r),a=im(r,e),c=a[ie].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=r,o}function ny(t,e){t.push(0,0,0,0,0,0,0,0,e)}function aM(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Uv(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,i=null,r=e;for(;r!==null;){if(i=hM(r),i===null)return za;if(n++,r=r[Xa],i.injectorIndex!==-1)return i.injectorIndex|n<<16}return za}function Ty(t,e,n){vz(t,e,n)}function wz(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let i=n.length,r=0;for(;r<i;){let o=n[r];if(yk(o))break;if(o===0)r=r+2;else if(typeof o=="number")for(r++;r<i&&typeof n[r]=="string";)r++;else{if(o===e)return n[r+1];r=r+2}}}return null}function cM(t,e,n){if(n&fe.Optional||t!==void 0)return t;Mv(e,"NodeInjector")}function lM(t,e,n,i){if(n&fe.Optional&&i===void 0&&(i=null),!(n&(fe.Self|fe.Host))){let r=t[qa],o=Xn(void 0);try{return r?r.get(e,i,n&fe.Optional):pk(e,i,n&fe.Optional)}finally{Xn(o)}}return cM(i,e,n)}function uM(t,e,n,i=fe.Default,r){if(t!==null){if(e[X]&2048&&!(i&fe.Self)){let s=Cz(t,e,n,i,Ui);if(s!==Ui)return s}let o=dM(t,e,n,i,Ui);if(o!==Ui)return o}return lM(e,n,i,r)}function dM(t,e,n,i,r){let o=xz(n);if(typeof o=="function"){if(!Kk(e,t,i))return i&fe.Host?cM(r,n,i):lM(e,n,i,r);try{let s;if(s=o(i),s==null&&!(i&fe.Optional))Mv(n);else return s}finally{Xk()}}else if(typeof o=="number"){let s=null,a=aM(t,e),c=za,l=i&fe.Host?e[xn][Vn]:null;for((a===-1||i&fe.SkipSelf)&&(c=a===-1?Uv(t,e):e[a+8],c===za||!FA(i,!1)?a=-1:(s=e[ie],a=nm(c),e=im(c,e)));a!==-1;){let u=e[ie];if(NA(o,a,u.data)){let d=Ez(a,e,n,s,i,l);if(d!==Ui)return d}c=e[a+8],c!==za&&FA(i,e[ie].data[a+8]===l)&&NA(o,a,e)?(s=u,a=nm(c),e=im(c,e)):a=-1}}return r}function Ez(t,e,n,i,r,o){let s=e[ie],a=s.data[t+8],c=i==null?hu(a)&&Cy:i!=s&&(a.type&3)!==0,l=r&fe.Host&&o===a,u=Kf(a,s,n,c,l);return u!==null?hs(e,s,u,a):Ui}function Kf(t,e,n,i,r){let o=t.providerIndexes,s=e.data,a=o&1048575,c=t.directiveStart,l=t.directiveEnd,u=o>>20,d=i?a:a+u,h=r?a+u:l;for(let f=d;f<h;f++){let m=s[f];if(f<c&&n===m||f>=c&&m.type===n)return f}if(r){let f=s[c];if(f&&to(f)&&f.type===n)return c}return null}function hs(t,e,n,i){let r=t[n],o=e.data;if(mz(r)){let s=r;s.resolving&&l$(c$(o[n]));let a=PA(s.canSeeViewProviders);s.resolving=!0;let c,l=s.injectImpl?Xn(s.injectImpl):null,u=Kk(t,i,fe.Default);try{r=t[n]=s.factory(void 0,o,t,i),e.firstCreatePass&&n>=i.directiveStart&&hz(n,o[n],e)}finally{l!==null&&Xn(l),PA(a),s.resolving=!1,Xk()}}return r}function xz(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Yl)?t[Yl]:void 0;return typeof e=="number"?e>=0?e&oM:Iz:e}function NA(t,e,n){let i=1<<t;return!!(n[e+(t>>sM)]&i)}function FA(t,e){return!(t&fe.Self)&&!(t&fe.Host&&e)}var cs=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,i){return uM(this._tNode,this._lView,e,Im(i),n)}};function Iz(){return new cs(Tn(),ge())}function ao(t){return uu(()=>{let e=t.prototype.constructor,n=e[Xf]||Dy(e),i=Object.prototype,r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==i;){let o=r[Xf]||Dy(r);if(o&&o!==n)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function Dy(t){return ck(t)?()=>{let e=Dy(an(t));return e&&e()}:Ka(t)}function Cz(t,e,n,i,r){let o=t,s=e;for(;o!==null&&s!==null&&s[X]&2048&&!(s[X]&512);){let a=dM(o,s,n,i|fe.Self,Ui);if(a!==Ui)return a;let c=o.parent;if(!c){let l=s[Ak];if(l){let u=l.get(n,Ui,i);if(u!==Ui)return u}c=hM(s),s=s[Xa]}o=c}return r}function hM(t){let e=t[ie],n=e.type;return n===2?e.declTNode:n===1?t[Vn]:null}function co(t){return wz(Tn(),t)}var Vf="__parameters__";function Tz(t){return function(...n){if(t){let i=t(...n);for(let r in i)this[r]=i[r]}}}function fM(t,e,n){return uu(()=>{let i=Tz(e);function r(...o){if(this instanceof r)return i.apply(this,o),this;let s=new r(...o);return a.annotation=s,a;function a(c,l,u){let d=c.hasOwnProperty(Vf)?c[Vf]:Object.defineProperty(c,Vf,{value:[]})[Vf];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),c}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r})}function Dz(t){let e=un.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function Sz(t){return typeof t=="function"}function Az(t,e,n){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++){let r=t[i],o=e[i];if(n&&(r=n(r),o=n(o)),o!==r)return!1}return!0}function kz(t){return t.flat(Number.POSITIVE_INFINITY)}function $v(t,e){t.forEach(n=>Array.isArray(n)?$v(n,e):e(n))}function mM(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function om(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function pM(t,e){let n=[];for(let i=0;i<t;i++)n.push(e);return n}function Mz(t,e,n,i){let r=t.length;if(r==e)t.push(n,i);else if(r===1)t.push(i,t[0]),t[0]=n;else{for(r--,t.push(t[r-1],t[r]);r>e;){let o=r-2;t[r]=t[o],r--}t[e]=n,t[e+1]=i}}function zv(t,e,n){let i=gu(t,e);return i>=0?t[i|1]=n:(i=~i,Mz(t,i,e,n)),i}function iy(t,e){let n=gu(t,e);if(n>=0)return t[n|1]}function gu(t,e){return Rz(t,e,1)}function Rz(t,e,n){let i=0,r=t.length>>n;for(;r!==i;){let o=i+(r-i>>1),s=t[o<<n];if(e===s)return o<<n;s>e?r=o:i=o+1}return~(r<<n)}var Ye=gk(fM("Optional"),8);var _u=gk(fM("SkipSelf"),4);function Pz(t){let e=[],n=new Map;function i(r){let o=n.get(r);if(!o){let s=t(r);n.set(r,o=s.then(Lz))}return o}return sm.forEach((r,o)=>{let s=[];r.templateUrl&&s.push(i(r.templateUrl).then(l=>{r.template=l}));let a=typeof r.styles=="string"?[r.styles]:r.styles||[];if(r.styles=a,r.styleUrl&&r.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(r.styleUrls?.length){let l=r.styles.length,u=r.styleUrls;r.styleUrls.forEach((d,h)=>{a.push(""),s.push(i(d).then(f=>{a[l+h]=f,u.splice(u.indexOf(d),1),u.length==0&&(r.styleUrls=void 0)}))})}else r.styleUrl&&s.push(i(r.styleUrl).then(l=>{a.push(l),r.styleUrl=void 0}));let c=Promise.all(s).then(()=>Vz(o));e.push(c)}),Fz(),Promise.all(e).then(()=>{})}var sm=new Map,Nz=new Set;function Fz(){let t=sm;return sm=new Map,t}function Oz(){return sm.size===0}function Lz(t){return typeof t=="string"?t:t.text()}function Vz(t){Nz.delete(t)}var fs=new C("ENVIRONMENT_INITIALIZER"),gM=new C("INJECTOR",-1),_M=new C("INJECTOR_DEF_TYPES"),am=class{get(e,n=Xl){if(n===Xl){let i=new Error(`NullInjectorError: No provider for ${ln(e)}!`);throw i.name="NullInjectorError",i}return n}};function bu(t){return{\u0275providers:t}}function jz(...t){return{\u0275providers:bM(!0,t),\u0275fromNgModule:!0}}function bM(t,...e){let n=[],i=new Set,r,o=s=>{n.push(s)};return $v(e,s=>{let a=s;Sy(a,o,[],i)&&(r||=[],r.push(a))}),r!==void 0&&yM(r,o),n}function yM(t,e){for(let n=0;n<t.length;n++){let{ngModule:i,providers:r}=t[n];Hv(r,o=>{e(o,i)})}}function Sy(t,e,n,i){if(t=an(t),!t)return!1;let r=null,o=xA(t),s=!o&&Jr(t);if(!o&&!s){let c=t.ngModule;if(o=xA(c),o)r=c;else return!1}else{if(s&&!s.standalone)return!1;r=t}let a=i.has(r);if(s){if(a)return!1;if(i.add(r),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)Sy(l,e,n,i)}}else if(o){if(o.imports!=null&&!a){i.add(r);let l;try{$v(o.imports,u=>{Sy(u,e,n,i)&&(l||=[],l.push(u))})}finally{}l!==void 0&&yM(l,e)}if(!a){let l=Ka(r)||(()=>new r);e({provide:r,useFactory:l,deps:cn},r),e({provide:_M,useValue:r,multi:!0},r),e({provide:fs,useValue:()=>y(r),multi:!0},r)}let c=o.providers;if(c!=null&&!a){let l=t;Hv(c,u=>{e(u,l)})}}else return!1;return r!==t&&t.providers!==void 0}function Hv(t,e){for(let n of t)lk(n)&&(n=n.\u0275providers),Array.isArray(n)?Hv(n,e):e(n)}var Bz=je({provide:String,useValue:je});function vM(t){return t!==null&&typeof t=="object"&&Bz in t}function Uz(t){return!!(t&&t.useExisting)}function $z(t){return!!(t&&t.useFactory)}function Qa(t){return typeof t=="function"}function zz(t){return!!t.useClass}var Tm=new C("Set Injector scope."),Qf={},Hz={},ry;function qv(){return ry===void 0&&(ry=new am),ry}var In=class{},ru=class extends In{get destroyed(){return this._destroyed}constructor(e,n,i,r){super(),this.parent=n,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,ky(e,s=>this.processProvider(s)),this.records.set(gM,ja(void 0,this)),r.has("environment")&&this.records.set(In,ja(void 0,this));let o=this.records.get(Tm);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(_M,cn,fe.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(let n of this._ngOnDestroyHooks)n.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=Zr(this),i=Xn(void 0),r;try{return e()}finally{Zr(n),Xn(i)}}get(e,n=Xl,i=fe.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(wA))return e[wA](this);i=Im(i);let r,o=Zr(this),s=Xn(void 0);try{if(!(i&fe.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=Qz(e)&&xm(e);l&&this.injectableDefInScope(l)?c=ja(Ay(e),Qf):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=i&fe.Self?qv():this.parent;return n=i&fe.Optional&&n===Xl?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Jf]=a[Jf]||[]).unshift(ln(e)),o)throw a;return w$(a,e,"R3InjectorError",this.source)}else throw a}finally{Xn(s),Zr(o)}}resolveInjectorInitializers(){let e=Zr(this),n=Xn(void 0),i;try{let r=this.get(fs,cn,fe.Self);for(let o of r)o()}finally{Zr(e),Xn(n)}}toString(){let e=[],n=this.records;for(let i of n.keys())e.push(ln(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new S(205,!1)}processProvider(e){e=an(e);let n=Qa(e)?e:an(e&&e.provide),i=Wz(e);if(!Qa(e)&&e.multi===!0){let r=this.records.get(n);r||(r=ja(void 0,Qf,!0),r.factory=()=>vy(r.multi),this.records.set(n,r)),n=e,r.multi.push(e)}else{let r=this.records.get(n)}this.records.set(n,i)}hydrate(e,n){return n.value===Qf&&(n.value=Hz,n.value=n.factory()),typeof n.value=="object"&&n.value&&Kz(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;let n=an(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Ay(t){let e=xm(t),n=e!==null?e.factory:Ka(t);if(n!==null)return n;if(t instanceof C)throw new S(204,!1);if(t instanceof Function)return qz(t);throw new S(204,!1)}function qz(t){let e=t.length;if(e>0){let i=pM(e,"?");throw new S(204,!1)}let n=h$(t);return n!==null?()=>n.factory(t):()=>new t}function Wz(t){if(vM(t))return ja(void 0,t.useValue);{let e=wM(t);return ja(e,Qf)}}function wM(t,e,n){let i;if(Qa(t)){let r=an(t);return Ka(r)||Ay(r)}else if(vM(t))i=()=>an(t.useValue);else if($z(t))i=()=>t.useFactory(...vy(t.deps||[]));else if(Uz(t))i=()=>y(an(t.useExisting));else{let r=an(t&&(t.useClass||t.provide));if(Gz(t))i=()=>new r(...vy(t.deps));else return Ka(r)||Ay(r)}return i}function ja(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Gz(t){return!!t.deps}function Kz(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function Qz(t){return typeof t=="function"||typeof t=="object"&&t instanceof C}function ky(t,e){for(let n of t)Array.isArray(n)?ky(n,e):n&&lk(n)?ky(n.\u0275providers,e):e(n)}function vr(t,e){t instanceof ru&&t.assertNotDestroyed();let n,i=Zr(t),r=Xn(void 0);try{return e()}finally{Zr(i),Xn(r)}}function Yz(t){if(!mk()&&!b$())throw new S(-203,!1)}function OA(t,e=null,n=null,i){let r=EM(t,e,n,i);return r.resolveInjectorInitializers(),r}function EM(t,e=null,n=null,i,r=new Set){let o=[n||cn,jz(t)];return i=i||(typeof t=="object"?void 0:ln(t)),new ru(o,e||qv(),i||null,r)}var rt=(()=>{let e=class e{static create(i,r){if(Array.isArray(i))return OA({name:""},r,i,"");{let o=i.name??"";return OA({name:o},i.parent,i.providers,o)}}};e.THROW_IF_NOT_FOUND=Xl,e.NULL=new am,e.\u0275prov=A({token:e,providedIn:"any",factory:()=>y(gM)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var My;function xM(t){My=t}function Dm(){if(My!==void 0)return My;if(typeof document<"u")return document;throw new S(210,!1)}var tc=new C("AppId",{providedIn:"root",factory:()=>Zz}),Zz="ng",Wv=new C("Platform Initializer"),Ct=new C("Platform ID",{providedIn:"platform",factory:()=>"unknown"});var Bt=new C("AnimationModuleType"),yu=new C("CSP nonce",{providedIn:"root",factory:()=>Dm().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function Xz(t){return t.ownerDocument.body}function IM(t){return t instanceof Function?t():t}function Ql(t){return(t??T(rt)).get(Ct)==="browser"}var Jz="ngSkipHydration",e4="ngskiphydration";function CM(t){let e=t.mergedAttrs;if(e===null)return!1;for(let n=0;n<e.length;n+=2){let i=e[n];if(typeof i=="number")return!1;if(typeof i=="string"&&i.toLowerCase()===e4)return!0}return!1}function TM(t){return t.hasAttribute(Jz)}function cm(t){return(t.flags&128)===128}function t4(t){if(cm(t))return!0;let e=t.parent;for(;e;){if(cm(t)||CM(e))return!0;e=e.parent}return!1}var br=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(br||{}),n4=/^>|^->|<!--|-->|--!>|<!-$/g,i4=/(<|>)/g,r4="\u200B$1\u200B";function o4(t){return t.replace(n4,e=>e.replace(i4,r4))}var DM=new Map,s4=0;function a4(){return s4++}function c4(t){DM.set(t[Cm],t)}function l4(t){DM.delete(t[Cm])}var LA="__ngContext__";function ms(t,e){zi(e)?(t[LA]=e[Cm],c4(e)):t[LA]=e}var u4;function Gv(t,e){return u4(t,e)}function Kv(t){let e=t[ft];return Jn(e)?e[ft]:e}function SM(t){return kM(t[tu])}function AM(t){return kM(t[pi])}function kM(t){for(;t!==null&&!Jn(t);)t=t[pi];return t}function Ba(t,e,n,i,r){if(i!=null){let o,s=!1;Jn(i)?o=i:zi(i)&&(s=!0,i=i[Ln]);let a=_i(i);t===0&&n!==null?r==null?FM(e,n,a):lm(e,n,a,r||null,!0):t===1&&n!==null?lm(e,n,a,r||null,!0):t===2?VM(e,a,s):t===3&&e.destroyNode(a),o!=null&&T4(e,t,o,n,r)}}function MM(t,e){return t.createText(e)}function d4(t,e,n){t.setValue(e,n)}function RM(t,e){return t.createComment(o4(e))}function Qv(t,e,n){return t.createElement(e,n)}function h4(t,e){let n=e[Ke];vu(t,e,n,2,null,null),e[Ln]=null,e[Vn]=null}function f4(t,e,n,i,r,o){i[Ln]=r,i[Vn]=e,vu(t,i,n,1,r,o)}function m4(t,e){vu(t,e,e[Ke],2,null,null)}function p4(t){let e=t[tu];if(!e)return oy(t[ie],t);for(;e;){let n=null;if(zi(e))n=e[tu];else{let i=e[Vt];i&&(n=i)}if(!n){for(;e&&!e[pi]&&e!==t;)zi(e)&&oy(e[ie],e),e=e[ft];e===null&&(e=t),zi(e)&&oy(e[ie],e),n=e&&e[pi]}e=n}}function g4(t,e,n,i){let r=Vt+i,o=n.length;i>0&&(n[r-1][pi]=e),i<o-Vt?(e[pi]=n[r],mM(n,Vt+i,e)):(n.push(e),e[pi]=null),e[ft]=n;let s=e[du];s!==null&&n!==s&&_4(s,e);let a=e[$i];a!==null&&a.insertView(t),xy(e),e[X]|=128}function _4(t,e){let n=t[Wa],r=e[ft][ft][xn];e[xn]!==r&&(t[X]|=Ga.HasTransplantedViews),n===null?t[Wa]=[e]:n.push(e)}function PM(t,e){let n=t[Wa],i=n.indexOf(e),r=e[ft];n.splice(i,1)}function ou(t,e){if(t.length<=Vt)return;let n=Vt+e,i=t[n];if(i){let r=i[du];r!==null&&r!==t&&PM(r,i),e>0&&(t[n-1][pi]=i[pi]);let o=om(t,Vt+e);h4(i[ie],i);let s=o[$i];s!==null&&s.detachView(o[ie]),i[ft]=null,i[pi]=null,i[X]&=-129}return i}function Sm(t,e){if(!(e[X]&256)){let n=e[Ke];n.destroyNode&&vu(t,e,n,3,null,null),p4(e)}}function oy(t,e){if(!(e[X]&256)){e[X]&=-129,e[X]|=256,e[ls]&&ZS(e[ls]),y4(t,e),b4(t,e),e[ie].type===1&&e[Ke].destroy();let n=e[du];if(n!==null&&Jn(e[ft])){n!==e[ft]&&PM(n,e);let i=e[$i];i!==null&&i.detachView(t)}l4(e)}}function b4(t,e){let n=t.cleanup,i=e[eu];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?i[s]():i[-s].unsubscribe(),o+=2}else{let s=i[n[o+1]];n[o].call(s)}i!==null&&(e[eu]=null);let r=e[Xr];if(r!==null){e[Xr]=null;for(let o=0;o<r.length;o++){let s=r[o];s()}}}function y4(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let i=0;i<n.length;i+=2){let r=e[n[i]];if(!(r instanceof ds)){let o=n[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=r[o[s]],c=o[s+1];Bi(4,a,c);try{c.call(a)}finally{Bi(5,a,c)}}else{Bi(4,r,o);try{o.call(r)}finally{Bi(5,r,o)}}}}}function NM(t,e,n){return v4(t,e.parent,n)}function v4(t,e,n){let i=e;for(;i!==null&&i.type&40;)e=i,i=e.parent;if(i===null)return n[Ln];{let{componentOffset:r}=i;if(r>-1){let{encapsulation:o}=t.data[i.directiveStart+r];if(o===Hi.None||o===Hi.Emulated)return null}return jn(i,n)}}function lm(t,e,n,i,r){t.insertBefore(e,n,i,r)}function FM(t,e,n){t.appendChild(e,n)}function VA(t,e,n,i,r){i!==null?lm(t,e,n,i,r):FM(t,e,n)}function w4(t,e,n,i){t.removeChild(e,n,i)}function Yv(t,e){return t.parentNode(e)}function E4(t,e){return t.nextSibling(e)}function OM(t,e,n){return I4(t,e,n)}function x4(t,e,n){return t.type&40?jn(t,n):null}var I4=x4,jA;function Zv(t,e,n,i){let r=NM(t,i,e),o=e[Ke],s=i.parent||e[Vn],a=OM(s,i,e);if(r!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)VA(o,r,n[c],a,!1);else VA(o,r,n,a,!1);jA!==void 0&&jA(o,i,e,n,r)}function Yf(t,e){if(e!==null){let n=e.type;if(n&3)return jn(e,t);if(n&4)return Ry(-1,t[e.index]);if(n&8){let i=e.child;if(i!==null)return Yf(t,i);{let r=t[e.index];return Jn(r)?Ry(-1,r):_i(r)}}else{if(n&32)return Gv(e,t)()||_i(t[e.index]);{let i=LM(t,e);if(i!==null){if(Array.isArray(i))return i[0];let r=Kv(t[xn]);return Yf(r,i)}else return Yf(t,e.next)}}}return null}function LM(t,e){if(e!==null){let i=t[xn][Vn],r=e.projection;return i.projection[r]}return null}function Ry(t,e){let n=Vt+t+1;if(n<e.length){let i=e[n],r=i[ie].firstChild;if(r!==null)return Yf(i,r)}return e[_r]}function VM(t,e,n){let i=Yv(t,e);i&&w4(t,i,e,n)}function jM(t){t.textContent=""}function Xv(t,e,n,i,r,o,s){for(;n!=null;){let a=i[n.index],c=n.type;if(s&&e===0&&(a&&ms(_i(a),i),n.flags|=2),(n.flags&32)!==32)if(c&8)Xv(t,e,n.child,i,r,o,!1),Ba(e,t,r,a,o);else if(c&32){let l=Gv(n,i),u;for(;u=l();)Ba(e,t,r,u,o);Ba(e,t,r,a,o)}else c&16?BM(t,e,i,n,r,o):Ba(e,t,r,a,o);n=s?n.projectionNext:n.next}}function vu(t,e,n,i,r,o){Xv(n,i,t.firstChild,e,r,o,!1)}function C4(t,e,n){let i=e[Ke],r=NM(t,n,e),o=n.parent||e[Vn],s=OM(o,n,e);BM(i,0,e,n,r,s)}function BM(t,e,n,i,r,o){let s=n[xn],c=s[Vn].projection[i.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];Ba(e,t,r,u,o)}else{let l=c,u=s[ft];cm(i)&&(l.flags|=128),Xv(t,e,l,u,r,o,!0)}}function T4(t,e,n,i,r){let o=n[_r],s=_i(n);o!==s&&Ba(e,t,i,o,r);for(let a=Vt;a<n.length;a++){let c=n[a];vu(c[ie],c,t,e,i,o)}}function D4(t,e,n,i,r){if(e)r?t.addClass(n,i):t.removeClass(n,i);else{let o=i.indexOf("-")===-1?void 0:br.DashCase;r==null?t.removeStyle(n,i,o):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=br.Important),t.setStyle(n,i,r,o))}}function S4(t,e,n){t.setAttribute(e,"style",n)}function UM(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function $M(t,e,n){let{mergedAttrs:i,classes:r,styles:o}=n;i!==null&&wy(t,e,i),r!==null&&UM(t,e,r),o!==null&&S4(t,e,o)}var jf;function A4(){if(jf===void 0&&(jf=null,un.trustedTypes))try{jf=un.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return jf}function Am(t){return A4()?.createHTML(t)||t}var yr=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${uk})`}},Py=class extends yr{getTypeName(){return"HTML"}},Ny=class extends yr{getTypeName(){return"Style"}},Fy=class extends yr{getTypeName(){return"Script"}},Oy=class extends yr{getTypeName(){return"URL"}},Ly=class extends yr{getTypeName(){return"ResourceURL"}};function wr(t){return t instanceof yr?t.changingThisBreaksApplicationSecurity:t}function nc(t,e){let n=k4(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${uk})`)}return n===e}function k4(t){return t instanceof yr&&t.getTypeName()||null}function zM(t){return new Py(t)}function HM(t){return new Ny(t)}function qM(t){return new Fy(t)}function WM(t){return new Oy(t)}function GM(t){return new Ly(t)}function M4(t){let e=new jy(t);return R4()?new Vy(e):e}var Vy=class{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let n=new window.DOMParser().parseFromString(Am(e),"text/html").body;return n===null?this.inertDocumentHelper.getInertBodyElement(e):(n.removeChild(n.firstChild),n)}catch{return null}}},jy=class{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let n=this.inertDocument.createElement("template");return n.innerHTML=Am(e),n}};function R4(){try{return!!new window.DOMParser().parseFromString(Am(""),"text/html")}catch{return!1}}var P4=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Jv(t){return t=String(t),t.match(P4)?t:"unsafe:"+t}function Er(t){let e={};for(let n of t.split(","))e[n]=!0;return e}function wu(...t){let e={};for(let n of t)for(let i in n)n.hasOwnProperty(i)&&(e[i]=!0);return e}var KM=Er("area,br,col,hr,img,wbr"),QM=Er("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),YM=Er("rp,rt"),N4=wu(YM,QM),F4=wu(QM,Er("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),O4=wu(YM,Er("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),BA=wu(KM,F4,O4,N4),ZM=Er("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),L4=Er("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),V4=Er("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),j4=wu(ZM,L4,V4),B4=Er("script,style,template"),By=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let n=e.firstChild,i=!0;for(;n;){if(n.nodeType===Node.ELEMENT_NODE?i=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,i&&n.firstChild){n=n.firstChild;continue}for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let r=this.checkClobberedElement(n,n.nextSibling);if(r){n=r;break}n=this.checkClobberedElement(n,n.parentNode)}}return this.buf.join("")}startElement(e){let n=e.nodeName.toLowerCase();if(!BA.hasOwnProperty(n))return this.sanitizedSomething=!0,!B4.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);let i=e.attributes;for(let r=0;r<i.length;r++){let o=i.item(r),s=o.name,a=s.toLowerCase();if(!j4.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=o.value;ZM[a]&&(c=Jv(c)),this.buf.push(" ",s,'="',UA(c),'"')}return this.buf.push(">"),!0}endElement(e){let n=e.nodeName.toLowerCase();BA.hasOwnProperty(n)&&!KM.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(e){this.buf.push(UA(e))}checkClobberedElement(e,n){if(n&&(e.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return n}},U4=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,$4=/([^\#-~ |!])/g;function UA(t){return t.replace(/&/g,"&amp;").replace(U4,function(e){let n=e.charCodeAt(0),i=e.charCodeAt(1);return"&#"+((n-55296)*1024+(i-56320)+65536)+";"}).replace($4,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Bf;function XM(t,e){let n=null;try{Bf=Bf||M4(t);let i=e?String(e):"";n=Bf.getInertBodyElement(i);let r=5,o=i;do{if(r===0)throw new Error("Failed to sanitize html because the input is unstable");r--,i=o,o=n.innerHTML,n=Bf.getInertBodyElement(i)}while(i!==o);let a=new By().sanitizeChildren($A(n)||n);return Am(a)}finally{if(n){let i=$A(n)||n;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function $A(t){return"content"in t&&z4(t)?t.content:null}function z4(t){return t.nodeType===Node.ELEMENT_NODE&&t.nodeName==="TEMPLATE"}var Dn=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Dn||{});var Uy=class{};function H4(){let t=new bs;return T(Ct)==="browser"&&(t.store=q4(Dm(),T(tc))),t}var bs=(()=>{let e=class e{constructor(){this.store={},this.onSerializeCallbacks={}}get(i,r){return this.store[i]!==void 0?this.store[i]:r}set(i,r){this.store[i]=r}remove(i){delete this.store[i]}hasKey(i){return this.store.hasOwnProperty(i)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(i,r){this.onSerializeCallbacks[i]=r}toJson(){for(let i in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(i))try{this.store[i]=this.onSerializeCallbacks[i]()}catch(r){console.warn("Exception in onSerialize callback: ",r)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}};e.\u0275prov=A({token:e,providedIn:"root",factory:H4});let t=e;return t})();function q4(t,e){let n=t.getElementById(e+"-state");if(n?.textContent)try{return JSON.parse(n.textContent)}catch(i){console.warn("Exception while restoring TransferState for app "+e,i)}return{}}var JM="h",eR="b",$y=function(t){return t.FirstChild="f",t.NextSibling="n",t}($y||{}),W4="e",G4="t",e0="c",tR="x",um="r",K4="i",Q4="n",Y4="d",Z4="__nghData__",nR=Z4,sy="ngh",X4="nghm",iR=(t,e,n)=>null;function J4(t,e,n=!1){let i=t.getAttribute(sy);if(i==null)return null;let[r,o]=i.split("|");if(i=n?o:r,!i)return null;let s=n?r:o?`|${o}`:"",a={};if(i!==""){let l=e.get(bs,null,{optional:!0});l!==null&&(a=l.get(nR,[])[Number(i)])}let c={data:a,firstChild:t.firstChild??null};return n&&(c.firstChild=t,km(c,0,t.nextSibling)),s?t.setAttribute(sy,s):t.removeAttribute(sy),c}function eH(){iR=J4}function t0(t,e,n=!1){return iR(t,e,n)}function tH(t){let e=t._lView;return e[ie].type===2?null:(Rk(e)&&(e=e[At]),e)}function nH(t){return t.textContent?.replace(/\s/gm,"")}function iH(t){let e=Dm(),n=e.createNodeIterator(t,NodeFilter.SHOW_COMMENT,{acceptNode(o){let s=nH(o);return s==="ngetn"||s==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),i,r=[];for(;i=n.nextNode();)r.push(i);for(let o of r)o.textContent==="ngetn"?o.replaceWith(e.createTextNode("")):o.remove()}function km(t,e,n){t.segmentHeads??={},t.segmentHeads[e]=n}function zy(t,e){return t.segmentHeads?.[e]??null}function rH(t,e){let n=t.data,i=n[W4]?.[e]??null;return i===null&&n[e0]?.[e]&&(i=n0(t,e)),i}function rR(t,e){return t.data[e0]?.[e]??null}function n0(t,e){let n=rR(t,e)??[],i=0;for(let r of n)i+=r[um]*(r[tR]??1);return i}function Mm(t,e){if(typeof t.disconnectedNodes>"u"){let n=t.data[Y4];t.disconnectedNodes=n?new Set(n):null}return!!t.disconnectedNodes?.has(e)}var Hy=class{},dm=class{};function oH(t){let e=Error(`No component factory found for ${ln(t)}.`);return e[sH]=t,e}var sH="ngComponent";var qy=class{resolveComponentFactory(e){throw oH(e)}},lo=(()=>{let e=class e{};e.NULL=new qy;let t=e;return t})();function aH(){return ic(Tn(),ge())}function ic(t,e){return new he(jn(t,e))}var he=(()=>{let e=class e{constructor(i){this.nativeElement=i}};e.__NG_ELEMENT_ID__=aH;let t=e;return t})();function cH(t){return t instanceof he?t.nativeElement:t}var ps=class{},ys=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>lH();let t=e;return t})();function lH(){let t=ge(),e=Tn(),n=ro(e.index,t);return(zi(n)?n:t)[Ke]}var uH=(()=>{let e=class e{};e.\u0275prov=A({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),ay={};function oR(t){return i0(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function dH(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),i;for(;!(i=n.next()).done;)e(i.value)}}function i0(t){return t!==null&&(typeof t=="function"||typeof t=="object")}var Wy=class{constructor(){}supports(e){return oR(e)}create(e){return new Gy(e)}},hH=(t,e)=>e,Gy=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||hH}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,i=this._removalsHead,r=0,o=null;for(;n||i;){let s=!i||n&&n.currentIndex<zA(i,r,o)?n:i,a=zA(s,r,o),c=s.currentIndex;if(s===i)r--,i=i._nextRemoved;else if(n=n._next,s.previousIndex==null)r++;else{o||(o=[]);let l=a-r,u=c-r;if(l!=u){for(let h=0;h<l;h++){let f=h<o.length?o[h]:o[h]=0,m=f+h;u<=m&&m<l&&(o[h]=f+1)}let d=s.previousIndex;o[d]=u-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!oR(e))throw new S(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,i=!1,r,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),i=!0):(i&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else r=0,dH(e,a=>{s=this._trackByFn(r,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,r),i=!0):(i&&(n=this._verifyReinsertion(n,a,s,r)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,r++}),this.length=r;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,i,r){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,r)):(e=this._linkedRecords===null?null:this._linkedRecords.get(i,r),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,r)):e=this._addAfter(new Ky(n,i),o,r)),e}_verifyReinsertion(e,n,i,r){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return o!==null?e=this._reinsertAfter(o,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let r=e._prevRemoved,o=e._nextRemoved;return r===null?this._removalsHead=o:r._nextRemoved=o,o===null?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(e,n,i),this._addToMoves(e,i),e}_moveAfter(e,n,i){return this._unlink(e),this._insertAfter(e,n,i),this._addToMoves(e,i),e}_addAfter(e,n,i){return this._insertAfter(e,n,i),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,i){let r=n===null?this._itHead:n._next;return e._next=r,e._prev=n,r===null?this._itTail=e:r._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new hm),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,i=e._next;return n===null?this._itHead=i:n._next=i,i===null?this._itTail=n:i._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new hm),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Ky=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Qy=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let i;for(i=this._head;i!==null;i=i._nextDup)if((n===null||n<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){let n=e._prevDup,i=e._nextDup;return n===null?this._head=i:n._nextDup=i,i===null?this._tail=n:i._prevDup=n,this._head===null}},hm=class{constructor(){this.map=new Map}put(e){let n=e.trackById,i=this.map.get(n);i||(i=new Qy,this.map.set(n,i)),i.add(e)}get(e,n){let i=e,r=this.map.get(i);return r?r.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function zA(t,e,n){let i=t.previousIndex;if(i===null)return i;let r=0;return n&&i<n.length&&(r=n[i]),i+e+r}var Yy=class{constructor(){}supports(e){return e instanceof Map||i0(e)}create(){return new Zy}},Zy=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let n;for(n=this._mapHead;n!==null;n=n._next)e(n)}forEachPreviousItem(e){let n;for(n=this._previousMapHead;n!==null;n=n._nextPrevious)e(n)}forEachChangedItem(e){let n;for(n=this._changesHead;n!==null;n=n._nextChanged)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||i0(e)))throw new S(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(i,r)=>{if(n&&n.key===r)this._maybeAddToChanges(n,i),this._appendAfter=n,n=n._next;else{let o=this._getOrCreateRecordForKey(r,i);n=this._insertBeforeOrAppend(n,o)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let i=n;i!==null;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,n){if(e){let i=e._prev;return n._next=e,n._prev=i,e._prev=n,i&&(i._next=n),e===this._mapHead&&(this._mapHead=n),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(e,n){if(this._records.has(e)){let r=this._records.get(e);this._maybeAddToChanges(r,n);let o=r._prev,s=r._next;return o&&(o._next=s),s&&(s._prev=o),r._next=null,r._prev=null,r}let i=new Xy(e);return this._records.set(e,i),i.currentValue=n,this._addToAdditions(i),i}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,n){Object.is(n,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=n,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,n){e instanceof Map?e.forEach(n):Object.keys(e).forEach(i=>n(e[i],i))}},Xy=class{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function HA(){return new Eu([new Wy])}var Eu=(()=>{let e=class e{constructor(i){this.factories=i}static create(i,r){if(r!=null){let o=r.factories.slice();i=i.concat(o)}return new e(i)}static extend(i){return{provide:e,useFactory:r=>e.create(i,r||HA()),deps:[[e,new _u,new Ye]]}}find(i){let r=this.factories.find(o=>o.supports(i));if(r!=null)return r;throw new S(901,!1)}};e.\u0275prov=A({token:e,providedIn:"root",factory:HA});let t=e;return t})();function qA(){return new r0([new Yy])}var r0=(()=>{let e=class e{constructor(i){this.factories=i}static create(i,r){if(r){let o=r.factories.slice();i=i.concat(o)}return new e(i)}static extend(i){return{provide:e,useFactory:r=>e.create(i,r||qA()),deps:[[e,new _u,new Ye]]}}find(i){let r=this.factories.find(o=>o.supports(i));if(r)return r;throw new S(901,!1)}};e.\u0275prov=A({token:e,providedIn:"root",factory:qA});let t=e;return t})();function fm(t,e,n,i,r=!1){for(;n!==null;){let o=e[n.index];o!==null&&i.push(_i(o)),Jn(o)&&fH(o,i);let s=n.type;if(s&8)fm(t,e,n.child,i);else if(s&32){let a=Gv(n,e),c;for(;c=a();)i.push(c)}else if(s&16){let a=LM(e,n);if(Array.isArray(a))i.push(...a);else{let c=Kv(e[xn]);fm(c[ie],c,a,i,!0)}}n=r?n.projectionNext:n.next}return i}function fH(t,e){for(let n=Vt;n<t.length;n++){let i=t[n],r=i[ie].firstChild;r!==null&&fm(i[ie],i,r,e)}t[_r]!==t[Ln]&&e.push(t[_r])}var sR=[];function mH(t){return t[ls]??pH(t)}function pH(t){let e=sR.pop()??Object.create(_H);return e.lView=t,e}function gH(t){t.lView[ls]!==t&&(t.lView=null,sR.push(t))}var _H=Ae(M({},KS),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{iu(t.lView)},consumerOnSignalRead(){this.lView[ls]=this}}),bH="ngOriginalError";function cy(t){return t[bH]}var Cn=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&cy(e);for(;n&&cy(n);)n=cy(n);return n||null}},aR=new C("",{providedIn:"root",factory:()=>T(Cn).handleError.bind(void 0)}),Uf=new C(""),cR=!1,lR=new C("",{providedIn:"root",factory:()=>cR});var xr={};function Be(t){uR(jt(),ge(),oo()+t,!1)}function uR(t,e,n,i){if(!i)if((e[X]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Wf(e,o,n)}else{let o=t.preOrderHooks;o!==null&&Gf(e,o,0,n)}us(n)}function E(t,e=fe.Default){let n=ge();if(n===null)return y(t,e);let i=Tn();return uM(i,n,an(t),e)}function Rm(){let t="invalid";throw new Error(t)}function yH(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let i=0;i<n.length;i++){let r=n[i];if(r<0)us(~r);else{let o=r,s=n[++i],a=n[++i];sz(s,o);let c=e[o];a(2,c)}}}finally{us(-1)}}function Pm(t,e,n,i,r,o,s,a,c,l,u){let d=e.blueprint.slice();return d[Ln]=r,d[X]=i|4|128|8|64,(l!==null||t&&t[X]&2048)&&(d[X]|=2048),Vk(d),d[ft]=d[Xa]=t,d[Qt]=n,d[eo]=s||t&&t[eo],d[Ke]=a||t&&t[Ke],d[qa]=c||t&&t[qa]||null,d[Vn]=o,d[Cm]=a4(),d[gi]=u,d[Ak]=l,d[xn]=e.type==2?t[xn]:d,d}function xu(t,e,n,i,r){let o=t.data[e];if(o===null)o=vH(t,e,n,i,r),oz()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=i,o.attrs=r;let s=nz();o.injectorIndex=s===null?-1:s.injectorIndex}return pu(o,!0),o}function vH(t,e,n,i,r){let o=$k(),s=zk(),a=s?o:o&&o.parent,c=t.data[e]=DH(t,a,n,e,i,r);return t.firstChild===null&&(t.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function dR(t,e,n,i){if(n===0)return-1;let r=e.length;for(let o=0;o<n;o++)e.push(i),t.blueprint.push(i),t.data.push(null);return r}function hR(t,e,n,i,r){let o=oo(),s=i&2;try{us(-1),s&&e.length>At&&uR(t,e,At,!1),Bi(s?2:0,r),n(i,r)}finally{us(o),Bi(s?3:1,r)}}function fR(t,e,n){if(Mk(e)){let i=Lt(null);try{let r=e.directiveStart,o=e.directiveEnd;for(let s=r;s<o;s++){let a=t.data[s];a.contentQueries&&a.contentQueries(1,n[s],s)}}finally{Lt(i)}}}function mR(t,e,n){Uk()&&(PH(t,e,n,jn(n,e)),(n.flags&64)===64&&wR(t,e,n))}function pR(t,e,n=jn){let i=e.localNames;if(i!==null){let r=e.index+1;for(let o=0;o<i.length;o+=2){let s=i[o+1],a=s===-1?n(e,t):t[s];t[r++]=a}}}function gR(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=o0(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function o0(t,e,n,i,r,o,s,a,c,l,u){let d=At+i,h=d+r,f=wH(d,h),m=typeof l=="function"?l():l;return f[ie]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:m,incompleteFirstPass:!1,ssrId:u}}function wH(t,e){let n=[];for(let i=0;i<e;i++)n.push(i<t?null:xr);return n}function EH(t,e,n,i){let o=i.get(lR,cR)||n===Hi.ShadowDom,s=t.selectRootElement(e,o);return xH(s),s}function xH(t){_R(t)}var _R=t=>null;function IH(t){TM(t)?jM(t):iH(t)}function CH(){_R=IH}function TH(t,e,n,i){let r=CR(e);r.push(n),t.firstCreatePass&&TR(t).push(i,r.length-1)}function DH(t,e,n,i,r,o){let s=e?e.injectorIndex:-1,a=0;return Ja()&&(a|=128),{type:n,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function WA(t,e,n,i){for(let r in t)if(t.hasOwnProperty(r)){n=n===null?{}:n;let o=t[r];i===null?GA(n,e,r,o):i.hasOwnProperty(r)&&GA(n,e,i[r],o)}return n}function GA(t,e,n,i){t.hasOwnProperty(n)?t[n].push(e,i):t[n]=[e,i]}function SH(t,e,n){let i=e.directiveStart,r=e.directiveEnd,o=t.data,s=e.attrs,a=[],c=null,l=null;for(let u=i;u<r;u++){let d=o[u],h=n?n.get(d):null,f=h?h.inputs:null,m=h?h.outputs:null;c=WA(d.inputs,u,c,f),l=WA(d.outputs,u,l,m);let p=c!==null&&s!==null&&!wk(e)?HH(c,u,s):null;a.push(p)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function AH(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function bR(t,e,n,i,r,o,s,a){let c=jn(e,n),l=e.inputs,u;!a&&l!=null&&(u=l[i])?(s0(t,n,u,i,r),hu(e)&&kH(n,e.index)):e.type&3?(i=AH(i),r=s!=null?s(r,e.value||"",i):r,o.setProperty(c,i,r)):e.type&12}function kH(t,e){let n=ro(e,t);n[X]&16||(n[X]|=64)}function yR(t,e,n,i){if(Uk()){let r=i===null?null:{"":-1},o=FH(t,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&vR(t,e,n,s,r,a),r&&OH(n,i,r)}n.mergedAttrs=Jl(n.mergedAttrs,n.attrs)}function vR(t,e,n,i,r,o){for(let l=0;l<i.length;l++)Ty(rm(n,e),t,i[l].type);VH(n,t.data.length,i.length);for(let l=0;l<i.length;l++){let u=i[l];u.providersResolver&&u.providersResolver(u)}let s=!1,a=!1,c=dR(t,e,i.length,null);for(let l=0;l<i.length;l++){let u=i[l];n.mergedAttrs=Jl(n.mergedAttrs,u.hostAttrs),jH(t,n,e,c,u),LH(c,u,r),u.contentQueries!==null&&(n.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(n.flags|=64);let d=u.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}SH(t,n,o)}function MH(t,e,n,i,r){let o=r.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;RH(s)!=a&&s.push(a),s.push(n,i,o)}}function RH(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function PH(t,e,n,i){let r=n.directiveStart,o=n.directiveEnd;hu(n)&&BH(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||rm(n,e),ms(i,e);let s=n.initialInputs;for(let a=r;a<o;a++){let c=t.data[a],l=hs(e,t,a,n);if(ms(l,e),s!==null&&zH(e,a-r,l,c,n,s),to(c)){let u=ro(n.index,e);u[Qt]=hs(e,t,a,n)}}}function wR(t,e,n){let i=n.directiveStart,r=n.directiveEnd,o=n.index,s=az();try{us(o);for(let a=i;a<r;a++){let c=t.data[a],l=e[a];Iy(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&NH(c,l)}}finally{us(-1),Iy(s)}}function NH(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function FH(t,e){let n=t.directiveRegistry,i=null,r=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(Ek(e,s.selectors,!1))if(i||(i=[]),to(s))if(s.findHostDirectiveDefs!==null){let a=[];r=r||new Map,s.findHostDirectiveDefs(s,a,r),i.unshift(...a,s);let c=a.length;Jy(t,e,c)}else i.unshift(s),Jy(t,e,0);else r=r||new Map,s.findHostDirectiveDefs?.(s,i,r),i.push(s)}return i===null?null:[i,r]}function Jy(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function OH(t,e,n){if(e){let i=t.localNames=[];for(let r=0;r<e.length;r+=2){let o=n[e[r+1]];if(o==null)throw new S(-301,!1);i.push(e[r],o)}}}function LH(t,e,n){if(n){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)n[e.exportAs[i]]=t;to(e)&&(n[""]=t)}}function VH(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function jH(t,e,n,i,r){t.data[i]=r;let o=r.factory||(r.factory=Ka(r.type,!0)),s=new ds(o,to(r),E);t.blueprint[i]=s,n[i]=s,MH(t,e,i,dR(t,n,r.hostVars,xr),r)}function BH(t,e,n){let i=jn(e,t),r=gR(n),o=t[eo].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=Nm(t,Pm(t,r,null,s,i,e,null,o.createRenderer(i,n),null,null,null));t[e.index]=a}function UH(t,e,n,i,r,o){let s=jn(t,e);$H(e[Ke],s,o,t.value,n,i,r)}function $H(t,e,n,i,r,o,s){if(o==null)t.removeAttribute(e,r,n);else{let a=s==null?kv(o):s(o,i||"",r);t.setAttribute(e,r,a,n)}}function zH(t,e,n,i,r,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],l=s[a++],u=s[a++];ER(i,n,c,l,u)}}function ER(t,e,n,i,r){let o=Lt(null);try{let s=t.inputTransforms;s!==null&&s.hasOwnProperty(i)&&(r=s[i].call(e,r)),t.setInput!==null?t.setInput(e,r,n,i):e[i]=r}finally{Lt(o)}}function HH(t,e,n){let i=null,r=0;for(;r<n.length;){let o=n[r];if(o===0){r+=4;continue}else if(o===5){r+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){i===null&&(i=[]);let s=t[o];for(let a=0;a<s.length;a+=2)if(s[a]===e){i.push(o,s[a+1],n[r+1]);break}}r+=2}return i}function xR(t,e,n,i){return[t,!0,0,e,null,i,null,n,null,null]}function IR(t,e){let n=t.contentQueries;if(n!==null){let i=Lt(null);try{for(let r=0;r<n.length;r+=2){let o=n[r],s=n[r+1];if(s!==-1){let a=t.data[s];Fv(o),a.contentQueries(2,e[s],s)}}}finally{Lt(i)}}}function Nm(t,e){return t[tu]?t[kA][pi]=e:t[tu]=e,t[kA]=e,e}function ev(t,e,n){Fv(0);let i=Lt(null);try{e(t,n)}finally{Lt(i)}}function CR(t){return t[eu]||(t[eu]=[])}function TR(t){return t.cleanup||(t.cleanup=[])}function DR(t,e){let n=t[qa],i=n?n.get(Cn,null):null;i&&i.handleError(e)}function s0(t,e,n,i,r){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],c=e[s],l=t.data[s];ER(l,c,i,a,r)}}function qH(t,e,n){let i=Lk(e,t);d4(t[Ke],i,n)}var WH=100;function GH(t,e=!0){let n=t[eo],i=n.rendererFactory,r=n.afterRenderEventManager,o=!1;o||(i.begin?.(),r?.begin());try{KH(t)}catch(s){throw e&&DR(t,s),s}finally{o||(i.end?.(),n.inlineEffectRunner?.flush(),r?.end())}}function KH(t){tv(t,0);let e=0;for(;jk(t);){if(e===WH)throw new S(103,!1);e++,tv(t,1)}}function QH(t,e,n,i){let r=e[X];if((r&256)===256)return;let o=!1;!o&&e[eo].inlineEffectRunner?.flush(),Ov(e);let s=null,a=null;!o&&YH(t)&&(a=mH(e),s=QS(a));try{Vk(e),rz(t.bindingStartIndex),n!==null&&hR(t,e,n,2,i);let c=(r&3)===3;if(!o)if(c){let d=t.preOrderCheckHooks;d!==null&&Wf(e,d,null)}else{let d=t.preOrderHooks;d!==null&&Gf(e,d,0,null),ty(e,0)}if(ZH(e),SR(e,0),t.contentQueries!==null&&IR(t,e),!o)if(c){let d=t.contentCheckHooks;d!==null&&Wf(e,d)}else{let d=t.contentHooks;d!==null&&Gf(e,d,1),ty(e,1)}yH(t,e);let l=t.components;l!==null&&kR(e,l,0);let u=t.viewQuery;if(u!==null&&ev(2,u,i),!o)if(c){let d=t.viewCheckHooks;d!==null&&Wf(e,d)}else{let d=t.viewHooks;d!==null&&Gf(e,d,2),ty(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[ey]){for(let d of e[ey])d();e[ey]=null}o||(e[X]&=-73)}catch(c){throw iu(e),c}finally{a!==null&&(YS(a,s),gH(a)),Lv()}}function YH(t){return t.type!==2}function SR(t,e){for(let n=SM(t);n!==null;n=AM(n)){n[X]&=~Ga.HasChildViewsToRefresh;for(let i=Vt;i<n.length;i++){let r=n[i];AR(r,e)}}}function ZH(t){for(let e=SM(t);e!==null;e=AM(e)){if(!(e[X]&Ga.HasTransplantedViews))continue;let n=e[Wa];for(let i=0;i<n.length;i++){let r=n[i],o=r[ft];G$(r)}}}function XH(t,e,n){let i=ro(e,t);AR(i,n)}function AR(t,e){Nv(t)&&tv(t,e)}function tv(t,e){let i=t[ie],r=t[X],o=t[ls],s=!!(e===0&&r&16);if(s||=!!(r&64&&e===0),s||=!!(r&1024),s||=!!(o?.dirty&&Fb(o)),o&&(o.dirty=!1),t[X]&=-9217,s)QH(i,t,i.template,t[Qt]);else if(r&8192){SR(t,1);let a=i.components;a!==null&&kR(t,a,1)}}function kR(t,e,n){for(let i=0;i<e.length;i++)XH(t,e[i],n)}function a0(t){for(t[eo].changeDetectionScheduler?.notify();t;){t[X]|=64;let e=Kv(t);if(Rk(t)&&!e)return t;t=e}return null}var gs=class{get rootNodes(){let e=this._lView,n=e[ie];return fm(n,e,n.firstChild,[])}constructor(e,n,i=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Qt]}set context(e){this._lView[Qt]=e}get destroyed(){return(this._lView[X]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[ft];if(Jn(e)){let n=e[em],i=n?n.indexOf(this):-1;i>-1&&(ou(e,i),om(n,i))}this._attachedToViewContainer=!1}Sm(this._lView[ie],this._lView)}onDestroy(e){Bk(this._lView,e)}markForCheck(){a0(this._cdRefInjectingView||this._lView)}detach(){this._lView[X]&=-129}reattach(){xy(this._lView),this._lView[X]|=128}detectChanges(){this._lView[X]|=1024,GH(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new S(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,m4(this._lView[ie],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new S(902,!1);this._appRef=e,xy(this._lView)}},Yt=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=JH;let t=e;return t})();function JH(t){return e5(Tn(),ge(),(t&16)===16)}function e5(t,e,n){if(hu(t)&&!n){let i=ro(t.index,e);return new gs(i,i)}else if(t.type&47){let i=e[xn];return new gs(i,e)}return null}var MR=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=t5,e.__NG_ENV_ID__=i=>i;let t=e;return t})(),nv=class extends MR{constructor(e){super(),this._lView=e}onDestroy(e){return Bk(this._lView,e),()=>Q$(this._lView,e)}};function t5(){return new nv(ge())}var KA=new Set;function uo(t){KA.has(t)||(KA.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var iv=class extends me{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,i){let r=e,o=n||(()=>null),s=i;if(e&&typeof e=="object"){let c=e;r=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=ly(o),r&&(r=ly(r)),s&&(s=ly(s)));let a=super.subscribe({next:r,error:o,complete:s});return e instanceof Te&&e.add(a),a}};function ly(t){return e=>{setTimeout(t,void 0,e)}}var re=iv;function QA(...t){}function n5(){let t=typeof un.requestAnimationFrame=="function",e=un[t?"requestAnimationFrame":"setTimeout"],n=un[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i);let r=n[Zone.__symbol__("OriginalDelegate")];r&&(n=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var V=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new re(!1),this.onMicrotaskEmpty=new re(!1),this.onStable=new re(!1),this.onError=new re(!1),typeof Zone>"u")throw new S(908,!1);Zone.assertZonePatched();let r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&n,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=n5().nativeRequestAnimationFrame,o5(r)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new S(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new S(909,!1)}run(e,n,i){return this._inner.run(e,n,i)}runTask(e,n,i,r){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,e,i5,QA,QA);try{return o.runTask(s,n,i)}finally{o.cancelTask(s)}}runGuarded(e,n,i){return this._inner.runGuarded(e,n,i)}runOutsideAngular(e){return this._outer.run(e)}},i5={};function c0(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function r5(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(un,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,rv(t),t.isCheckStableRunning=!0,c0(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),rv(t))}function o5(t){let e=()=>{r5(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,i,r,o,s,a)=>{if(s5(a))return n.invokeTask(r,o,s,a);try{return YA(t),n.invokeTask(r,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),ZA(t)}},onInvoke:(n,i,r,o,s,a,c)=>{try{return YA(t),n.invoke(r,o,s,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),ZA(t)}},onHasTask:(n,i,r,o)=>{n.hasTask(r,o),i===r&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,rv(t),c0(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,i,r,o)=>(n.handleError(r,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function rv(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function YA(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function ZA(t){t._nesting--,c0(t)}var ov=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new re,this.onMicrotaskEmpty=new re,this.onStable=new re,this.onError=new re}run(e,n,i){return e.apply(n,i)}runGuarded(e,n,i){return e.apply(n,i)}runOutsideAngular(e){return e()}runTask(e,n,i,r){return e.apply(n,i)}};function s5(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}function a5(t="zone.js",e){return t==="noop"?new ov:t==="zone.js"?new V(e):t}var Ua=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(Ua||{}),c5={destroy(){}};function l0(t,e){!e&&Yz(l0);let n=e?.injector??T(rt);if(!Ql(n))return c5;uo("NgAfterNextRender");let i=n.get(RR),r=i.handler??=new av,o=e?.phase??Ua.MixedReadWrite,s=()=>{r.unregister(c),a()},a=n.get(MR).onDestroy(s),c=new sv(n,o,()=>{s(),t()});return r.register(c),{destroy:s}}var sv=class{constructor(e,n,i){this.phase=n,this.callbackFn=i,this.zone=e.get(V),this.errorHandler=e.get(Cn,null,{optional:!0})}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},av=class{constructor(){this.executingCallbacks=!1,this.buckets={[Ua.EarlyRead]:new Set,[Ua.Write]:new Set,[Ua.MixedReadWrite]:new Set,[Ua.Read]:new Set},this.deferredCallbacks=new Set}validateBegin(){if(this.executingCallbacks)throw new S(102,!1)}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let n of e)n.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},RR=(()=>{let e=class e{constructor(){this.renderDepth=0,this.handler=null,this.internalCallbacks=[]}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){if(this.renderDepth--,this.renderDepth===0){for(let i of this.internalCallbacks)i();this.internalCallbacks.length=0,this.handler?.execute()}}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=A({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function l5(t,e){let n=ro(e,t),i=n[ie];u5(i,n);let r=n[Ln];r!==null&&n[gi]===null&&(n[gi]=t0(r,n[qa])),u0(i,n,n[Qt])}function u5(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function u0(t,e,n){Ov(e);try{let i=t.viewQuery;i!==null&&ev(1,i,n);let r=t.template;r!==null&&hR(t,e,r,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&IR(t,e),t.staticViewQueries&&ev(2,t.viewQuery,n);let o=t.components;o!==null&&d5(e,o)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{e[X]&=-5,Lv()}}function d5(t,e){for(let n=0;n<e.length;n++)l5(t,e[n])}function cv(t,e,n){let i=n?t.styles:null,r=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)r=_y(r,a);else if(o==2){let c=a,l=e[++s];i=_y(i,c+": "+l+";")}}n?t.styles=i:t.stylesWithoutHost=i,n?t.classes=r:t.classesWithoutHost=r}var mm=class extends lo{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Jr(e);return new Ya(n,this.ngModule)}};function XA(t){let e=[];for(let n in t)if(t.hasOwnProperty(n)){let i=t[n];e.push({propName:i,templateName:n})}return e}function h5(t){let e=t.toLowerCase();return e==="svg"?Ok:e==="math"?U$:null}var lv=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,i){i=Im(i);let r=this.injector.get(e,ay,i);return r!==ay||n===ay?r:this.parentInjector.get(e,n,i)}},Ya=class extends dm{get inputs(){let e=this.componentDef,n=e.inputTransforms,i=XA(e.inputs);if(n!==null)for(let r of i)n.hasOwnProperty(r.propName)&&(r.transform=n[r.propName]);return i}get outputs(){return XA(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=P$(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,i,r){r=r||this.ngModule;let o=r instanceof In?r:r?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let s=o?new lv(e,o):e,a=s.get(ps,null);if(a===null)throw new S(407,!1);let c=s.get(uH,null),l=s.get(RR,null),u=s.get(Uy,null),d={rendererFactory:a,sanitizer:c,inlineEffectRunner:null,afterRenderEventManager:l,changeDetectionScheduler:u},h=a.createRenderer(null,this.componentDef),f=this.componentDef.selectors[0][0]||"div",m=i?EH(h,i,this.componentDef.encapsulation,s):Qv(h,f,h5(f)),p=512;this.componentDef.signals?p|=4096:this.componentDef.onPush||(p|=16);let g=null;m!==null&&(g=t0(m,s,!0));let w=o0(0,null,null,1,0,null,null,null,null,null,null),k=Pm(null,w,null,p,null,null,d,h,s,null,g);Ov(k);let D,O;try{let q=this.componentDef,G,de=null;q.findHostDirectiveDefs?(G=[],de=new Map,q.findHostDirectiveDefs(q,G,de),G.push(q)):G=[q];let at=f5(k,m),Rn=m5(at,m,q,G,k,d,h);O=Pv(w,At),m&&_5(h,q,m,i),n!==void 0&&b5(O,this.ngContentSelectors,n),D=g5(Rn,q,G,de,k,[y5]),u0(w,k,null)}finally{Lv()}return new uv(this.componentType,D,ic(O,k),k,O)}},uv=class extends Hy{constructor(e,n,i,r,o){super(),this.location=i,this._rootLView=r,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new gs(r,void 0,!1),this.componentType=e}setInput(e,n){let i=this._tNode.inputs,r;if(i!==null&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;s0(o[ie],o,r,e,n),this.previousInputValues.set(e,n);let s=ro(this._tNode.index,o);a0(s)}}get injector(){return new cs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function f5(t,e){let n=t[ie],i=At;return t[i]=e,xu(n,i,2,"#host",null)}function m5(t,e,n,i,r,o,s){let a=r[ie];p5(i,t,e,s);let c=null;e!==null&&(c=t0(e,r[qa]));let l=o.rendererFactory.createRenderer(e,n),u=16;n.signals?u=4096:n.onPush&&(u=64);let d=Pm(r,gR(n),null,u,r[t.index],t,o,l,null,null,c);return a.firstCreatePass&&Jy(a,t,i.length-1),Nm(r,d),r[t.index]=d}function p5(t,e,n,i){for(let r of t)e.mergedAttrs=Jl(e.mergedAttrs,r.hostAttrs);e.mergedAttrs!==null&&(cv(e,e.mergedAttrs,!0),n!==null&&$M(i,n,e))}function g5(t,e,n,i,r,o){let s=Tn(),a=r[ie],c=jn(s,r);vR(a,r,s,n,null,i);for(let u=0;u<n.length;u++){let d=s.directiveStart+u,h=hs(r,a,d,s);ms(h,r)}wR(a,r,s),c&&ms(c,r);let l=hs(r,a,s.directiveStart+s.componentOffset,s);if(t[Qt]=r[Qt]=l,o!==null)for(let u of o)u(l,e);return fR(a,s,t),l}function _5(t,e,n,i){if(i)wy(t,n,["ng-version","17.0.8"]);else{let{attrs:r,classes:o}=N$(e.selectors[0]);r&&wy(t,n,r),o&&o.length>0&&UM(t,n,o.join(" "))}}function b5(t,e,n){let i=t.projection=[];for(let r=0;r<e.length;r++){let o=n[r];i.push(o!=null?Array.from(o):null)}}function y5(){let t=Tn();Bv(ge()[ie],t)}function v5(t){return Object.getPrototypeOf(t.prototype).constructor}function We(t){let e=v5(t.type),n=!0,i=[t];for(;e;){let r;if(to(t))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new S(903,!1);r=e.\u0275dir}if(r){if(n){i.push(r);let s=t;s.inputs=$f(t.inputs),s.inputTransforms=$f(t.inputTransforms),s.declaredInputs=$f(t.declaredInputs),s.outputs=$f(t.outputs);let a=r.hostBindings;a&&I5(t,a);let c=r.viewQuery,l=r.contentQueries;if(c&&E5(t,c),l&&x5(t,l),Lf(t.inputs,r.inputs),Lf(t.declaredInputs,r.declaredInputs),Lf(t.outputs,r.outputs),r.inputTransforms!==null&&(s.inputTransforms===null&&(s.inputTransforms={}),Lf(s.inputTransforms,r.inputTransforms)),to(r)&&r.data.animation){let u=t.data;u.animation=(u.animation||[]).concat(r.data.animation)}}let o=r.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===We&&(n=!1)}}e=Object.getPrototypeOf(e)}w5(i)}function w5(t){let e=0,n=null;for(let i=t.length-1;i>=0;i--){let r=t[i];r.hostVars=e+=r.hostVars,r.hostAttrs=Jl(r.hostAttrs,n=Jl(n,r.hostAttrs))}}function $f(t){return t===Ha?{}:t===cn?[]:t}function E5(t,e){let n=t.viewQuery;n?t.viewQuery=(i,r)=>{e(i,r),n(i,r)}:t.viewQuery=e}function x5(t,e){let n=t.contentQueries;n?t.contentQueries=(i,r,o)=>{e(i,r,o),n(i,r,o)}:t.contentQueries=e}function I5(t,e){let n=t.hostBindings;n?t.hostBindings=(i,r)=>{e(i,r),n(i,r)}:t.hostBindings=e}function yi(t){let e=t.inputConfig,n={};for(let i in e)if(e.hasOwnProperty(i)){let r=e[i];Array.isArray(r)&&r[2]&&(n[i]=r[2])}t.inputTransforms=n}function PR(t,e,n){return t[e]=n}function bi(t,e,n){let i=t[e];return Object.is(i,n)?!1:(t[e]=n,!0)}function C5(t,e,n,i){let r=bi(t,e,n);return bi(t,e+1,i)||r}function kt(t,e,n,i){let r=ge(),o=ec();if(bi(r,o,e)){let s=jt(),a=Vv();UH(a,r,t,e,n,i)}return kt}function T5(t,e,n,i){return bi(t,ec(),n)?e+kv(n)+i:xr}function zf(t,e){return t<<17|e<<2}function _s(t){return t>>17&32767}function D5(t){return(t&2)==2}function S5(t,e){return t&131071|e<<17}function dv(t){return t|2}function Za(t){return(t&131068)>>2}function uy(t,e){return t&-131069|e<<2}function A5(t){return(t&1)===1}function hv(t){return t|1}function k5(t,e,n,i,r,o){let s=o?e.classBindings:e.styleBindings,a=_s(s),c=Za(s);t[i]=n;let l=!1,u;if(Array.isArray(n)){let d=n;u=d[1],(u===null||gu(d,u)>0)&&(l=!0)}else u=n;if(r)if(c!==0){let h=_s(t[a+1]);t[i+1]=zf(h,a),h!==0&&(t[h+1]=uy(t[h+1],i)),t[a+1]=S5(t[a+1],i)}else t[i+1]=zf(a,0),a!==0&&(t[a+1]=uy(t[a+1],i)),a=i;else t[i+1]=zf(c,0),a===0?a=i:t[c+1]=uy(t[c+1],i),c=i;l&&(t[i+1]=dv(t[i+1])),JA(t,u,i,!0,o),JA(t,u,i,!1,o),M5(e,u,t,i,o),s=zf(a,c),o?e.classBindings=s:e.styleBindings=s}function M5(t,e,n,i,r){let o=r?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&gu(o,e)>=0&&(n[i+1]=hv(n[i+1]))}function JA(t,e,n,i,r){let o=t[n+1],s=e===null,a=i?_s(o):Za(o),c=!1;for(;a!==0&&(c===!1||s);){let l=t[a],u=t[a+1];R5(l,e)&&(c=!0,t[a+1]=i?hv(u):dv(u)),a=i?_s(u):Za(u)}c&&(t[n+1]=i?dv(o):hv(o))}function R5(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?gu(t,e)>=0:!1}var mi={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function P5(t){return t.substring(mi.key,mi.keyEnd)}function N5(t){return F5(t),NR(t,FR(t,0,mi.textEnd))}function NR(t,e){let n=mi.textEnd;return n===e?-1:(e=mi.keyEnd=O5(t,mi.key=e,n),FR(t,e,n))}function F5(t){mi.key=0,mi.keyEnd=0,mi.value=0,mi.valueEnd=0,mi.textEnd=t.length}function FR(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function O5(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function Le(t,e,n){let i=ge(),r=ec();if(bi(i,r,e)){let o=jt(),s=Vv();bR(o,s,i,t,e,i[Ke],n,!1)}return Le}function fv(t,e,n,i,r){let o=e.inputs,s=r?"class":"style";s0(t,n,o[s],s,i)}function Iu(t,e,n){return OR(t,e,n,!1),Iu}function Pe(t,e){return OR(t,e,null,!0),Pe}function Cu(t){V5(H5,L5,t,!0)}function L5(t,e){for(let n=N5(e);n>=0;n=NR(e,n))zv(t,P5(e),!0)}function OR(t,e,n,i){let r=ge(),o=jt(),s=Wk(2);if(o.firstUpdatePass&&VR(o,t,s,i),e!==xr&&bi(r,s,e)){let a=o.data[oo()];jR(o,a,r,r[Ke],t,r[s+1]=W5(e,n),i,s)}}function V5(t,e,n,i){let r=jt(),o=Wk(2);r.firstUpdatePass&&VR(r,null,o,i);let s=ge();if(n!==xr&&bi(s,o,n)){let a=r.data[oo()];if(BR(a,i)&&!LR(r,o)){let c=i?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(n=_y(c,n||"")),fv(r,a,s,n,i)}else q5(r,a,s,s[Ke],s[o+1],s[o+1]=z5(t,e,n),i,o)}}function LR(t,e){return e>=t.expandoStartIndex}function VR(t,e,n,i){let r=t.data;if(r[n+1]===null){let o=r[oo()],s=LR(t,n);BR(o,i)&&e===null&&!s&&(e=!1),e=j5(r,o,e,i),k5(r,o,e,n,s,i)}}function j5(t,e,n,i){let r=cz(t),o=i?e.residualClasses:e.residualStyles;if(r===null)(i?e.classBindings:e.styleBindings)===0&&(n=dy(null,t,e,n,i),n=su(n,e.attrs,i),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==r)if(n=dy(r,t,e,n,i),o===null){let c=B5(t,e,i);c!==void 0&&Array.isArray(c)&&(c=dy(null,t,e,c[1],i),c=su(c,e.attrs,i),U5(t,e,i,c))}else o=$5(t,e,i)}return o!==void 0&&(i?e.residualClasses=o:e.residualStyles=o),n}function B5(t,e,n){let i=n?e.classBindings:e.styleBindings;if(Za(i)!==0)return t[_s(i)]}function U5(t,e,n,i){let r=n?e.classBindings:e.styleBindings;t[_s(r)]=i}function $5(t,e,n){let i,r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++){let s=t[o].hostAttrs;i=su(i,s,n)}return su(i,e.attrs,n)}function dy(t,e,n,i,r){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],i=su(i,o.hostAttrs,r),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),i}function su(t,e,n){let i=n?1:2,r=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?r=s:r===i&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),zv(t,s,n?!0:e[++o]))}return t===void 0?null:t}function z5(t,e,n){if(n==null||n==="")return cn;let i=[],r=wr(n);if(Array.isArray(r))for(let o=0;o<r.length;o++)t(i,r[o],!0);else if(typeof r=="object")for(let o in r)r.hasOwnProperty(o)&&t(i,o,r[o]);else typeof r=="string"&&e(i,r);return i}function H5(t,e,n){let i=String(e);i!==""&&!i.includes(" ")&&zv(t,i,n)}function q5(t,e,n,i,r,o,s,a){r===xr&&(r=cn);let c=0,l=0,u=0<r.length?r[0]:null,d=0<o.length?o[0]:null;for(;u!==null||d!==null;){let h=c<r.length?r[c+1]:void 0,f=l<o.length?o[l+1]:void 0,m=null,p;u===d?(c+=2,l+=2,h!==f&&(m=d,p=f)):d===null||u!==null&&u<d?(c+=2,m=u):(l+=2,m=d,p=f),m!==null&&jR(t,e,n,i,m,p,s,a),u=c<r.length?r[c]:null,d=l<o.length?o[l]:null}}function jR(t,e,n,i,r,o,s,a){if(!(e.type&3))return;let c=t.data,l=c[a+1],u=A5(l)?ek(c,e,n,r,Za(l),s):void 0;if(!pm(u)){pm(o)||D5(l)&&(o=ek(c,null,n,r,a,s));let d=Lk(oo(),n);D4(i,s,d,r,o)}}function ek(t,e,n,i,r,o){let s=e===null,a;for(;r>0;){let c=t[r],l=Array.isArray(c),u=l?c[1]:c,d=u===null,h=n[r+1];h===xr&&(h=d?cn:void 0);let f=d?iy(h,i):u===i?h:void 0;if(l&&!pm(f)&&(f=iy(c,i)),pm(f)&&(a=f,s))return a;let m=t[r+1];r=s?_s(m):Za(m)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=iy(c,i))}return a}function pm(t){return t!==void 0}function W5(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=ln(wr(t)))),t}function BR(t,e){return(t.flags&(e?8:16))!==0}function UR(t){let e=t[nu]??[],i=t[ft][Ke];for(let r of e)G5(r,i);t[nu]=cn}function G5(t,e){let n=0,i=t.firstChild;if(i){let r=t.data[um];for(;n<r;){let o=i.nextSibling;VM(e,i,!1),i=o,n++}}}function $R(t){UR(t);for(let e=Vt;e<t.length;e++)gm(t[e])}function gm(t){let e=t[ie];for(let n=At;n<e.bindingStartIndex;n++)if(Jn(t[n])){let i=t[n];$R(i)}else zi(t[n])&&gm(t[n])}function K5(t){let e=t._views;for(let n of e){let i=tH(n);if(i!==null&&i[Ln]!==null)if(zi(i))gm(i);else{let r=i[Ln];gm(r),$R(i)}}}var Q5=new RegExp(`^(\\d+)*(${eR}|${JM})*(.*)`);function Y5(t){let e=t.match(Q5),[n,i,r,o]=e,s=i?parseInt(i,10):r,a=[];for(let[c,l,u]of o.matchAll(/(f|n)(\d*)/g)){let d=parseInt(u,10)||1;a.push(l,d)}return[s,...a]}function Z5(t){return!t.prev&&t.parent?.type===8}function hy(t){return t.index-At}function Fm(t,e,n,i){let r=null,o=hy(i),s=t.data[Q4];if(s?.[o])r=J5(s[o],n);else if(e.firstChild===i)r=t.firstChild;else{let a=i.prev===null,c=i.prev??i.parent;if(Z5(i)){let l=hy(i.parent);r=zy(t,l)}else{let l=jn(c,n);if(a)r=l.firstChild;else{let u=hy(c),d=zy(t,u);if(c.type===2&&d){let f=n0(t,u)+1;r=Om(f,d)}else r=l.nextSibling}}}return r}function Om(t,e){let n=e;for(let i=0;i<t;i++)n=n.nextSibling;return n}function X5(t,e){let n=t;for(let i=0;i<e.length;i+=2){let r=e[i],o=e[i+1];for(let s=0;s<o;s++)switch(r){case $y.FirstChild:n=n.firstChild;break;case $y.NextSibling:n=n.nextSibling;break}}return n}function J5(t,e){let[n,...i]=Y5(t),r;if(n===JM)r=e[xn][Ln];else if(n===eR)r=Xz(e[xn][Ln]);else{let o=Number(n);r=_i(e[o+At])}return X5(r,i)}function e3(t,e){let n=[];for(let i of e)for(let r=0;r<(i[tR]??1);r++){let o={data:i,firstChild:null};i[um]>0&&(o.firstChild=t,t=Om(i[um],t)),n.push(o)}return[t,n]}var zR=(t,e)=>null;function t3(t,e){let n=t[nu];return!e||n===null||n.length===0?null:n[0].data[K4]===e?n.shift():(UR(t),null)}function n3(){zR=t3}function au(t,e){return zR(t,e)}var mv=class{destroy(e){}updateValue(e,n){}swap(e,n){let i=Math.min(e,n),r=Math.max(e,n),o=this.detach(r);if(r-i>1){let s=this.detach(i);this.attach(i,o),this.attach(r,s)}else this.attach(i,o)}move(e,n){this.attach(n,this.detach(e))}};function fy(t,e,n,i,r){return t===n&&Object.is(e,i)?1:Object.is(r(t,e),r(n,i))?-1:0}function i3(t,e,n){let i,r,o=0,s=t.length-1;if(Array.isArray(e)){let a=e.length-1;for(;o<=s&&o<=a;){let c=t.at(o),l=e[o],u=fy(o,c,o,l,n);if(u!==0){u<0&&t.updateValue(o,l),o++;continue}let d=t.at(s),h=e[a],f=fy(s,d,a,h,n);if(f!==0){f<0&&t.updateValue(s,h),s--,a--;continue}let m=n(o,c),p=n(s,d),g=n(o,l);if(Object.is(g,p)){let w=n(a,h);Object.is(w,m)?(t.swap(o,s),t.updateValue(s,h),a--,s--):t.move(s,o),t.updateValue(o,l),o++;continue}if(i??=new _m,r??=nk(t,o,s,n),pv(t,i,o,g))t.updateValue(o,l),o++,s++;else if(r.has(g))i.set(m,t.detach(o)),s--;else{let w=t.create(o,e[o]);t.attach(o,w),o++,s++}}for(;o<=a;)tk(t,i,n,o,e[o]),o++}else if(e!=null){let a=e[Symbol.iterator](),c=a.next();for(;!c.done&&o<=s;){let l=t.at(o),u=c.value,d=fy(o,l,o,u,n);if(d!==0)d<0&&t.updateValue(o,u),o++,c=a.next();else{i??=new _m,r??=nk(t,o,s,n);let h=n(o,u);if(pv(t,i,o,h))t.updateValue(o,u),o++,s++,c=a.next();else if(!r.has(h))t.attach(o,t.create(o,u)),o++,s++,c=a.next();else{let f=n(o,l);i.set(f,t.detach(o)),s--}}}for(;!c.done;)tk(t,i,n,t.length,c.value),c=a.next()}for(;o<=s;)t.destroy(t.detach(s--));i?.forEach(a=>{t.destroy(a)})}function pv(t,e,n,i){return e!==void 0&&e.has(i)?(t.attach(n,e.get(i)),e.delete(i),!0):!1}function tk(t,e,n,i,r){if(pv(t,e,i,n(i,r)))t.updateValue(i,r);else{let o=t.create(i,r);t.attach(i,o)}}function nk(t,e,n,i){let r=new Set;for(let o=e;o<=n;o++)r.add(i(o,t.at(o)));return r}var _m=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let i=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let r=this._vMap;for(;r.has(i);)i=r.get(i);r.set(i,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,i]of this.kvMap)if(e(i,n),this._vMap!==void 0){let r=this._vMap;for(;r.has(i);)i=r.get(i),e(i,n)}}};function Lm(t,e,n,i){let r=e.tView,s=t[X]&4096?4096:16,a=Pm(t,r,n,s,null,e,null,null,null,i?.injector??null,i?.dehydratedView??null),c=t[e.index];a[du]=c;let l=t[$i];return l!==null&&(a[$i]=l.createEmbeddedView(r)),u0(r,a,n),a}function HR(t,e){let n=Vt+e;if(n<t.length)return t[n]}function cu(t,e){return!e||e.firstChild===null||cm(t)}function Vm(t,e,n,i=!0){let r=e[ie];if(g4(r,e,t,n),i){let s=Ry(n,t),a=e[Ke],c=Yv(a,t[_r]);c!==null&&f4(r,t[Vn],a,e,c,s)}let o=e[gi];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function qR(t,e){let n=ou(t,e);return n!==void 0&&Sm(n[ie],n),n}var hn=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=r3;let t=e;return t})();function r3(){let t=Tn();return GR(t,ge())}var o3=hn,WR=class extends o3{constructor(e,n,i){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=i}get element(){return ic(this._hostTNode,this._hostLView)}get injector(){return new cs(this._hostTNode,this._hostLView)}get parentInjector(){let e=Uv(this._hostTNode,this._hostLView);if(rM(e)){let n=im(e,this._hostLView),i=nm(e),r=n[ie].data[i+8];return new cs(r,n)}else return new cs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=ik(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Vt}createEmbeddedView(e,n,i){let r,o;typeof i=="number"?r=i:i!=null&&(r=i.index,o=i.injector);let s=au(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,r,cu(this._hostTNode,s)),a}createComponent(e,n,i,r,o){let s=e&&!Sz(e),a;if(s)a=n;else{let m=n||{};a=m.index,i=m.injector,r=m.projectableNodes,o=m.environmentInjector||m.ngModuleRef}let c=s?e:new Ya(Jr(e)),l=i||this.parentInjector;if(!o&&c.ngModule==null){let p=(s?l:this.parentInjector).get(In,null);p&&(o=p)}let u=Jr(c.componentType??{}),d=au(this._lContainer,u?.id??null),h=d?.firstChild??null,f=c.create(l,r,h,o);return this.insertImpl(f.hostView,a,cu(this._hostTNode,d)),f}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,i){let r=e._lView;if(W$(r)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=r[ft],l=new WR(c,c[Vn],c[ft]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return Vm(s,r,o,i),e.attachToViewContainerRef(),mM(my(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=ik(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),i=ou(this._lContainer,n);i&&(om(my(this._lContainer),n),Sm(i[ie],i))}detach(e){let n=this._adjustIndex(e,-1),i=ou(this._lContainer,n);return i&&om(my(this._lContainer),n)!=null?new gs(i):null}_adjustIndex(e,n=0){return e??this.length+n}};function ik(t){return t[em]}function my(t){return t[em]||(t[em]=[])}function GR(t,e){let n,i=e[t.index];return Jn(i)?n=i:(n=xR(i,e,null,t),e[t.index]=n,Nm(e,n)),KR(n,e,t,i),new WR(n,t,e)}function s3(t,e){let n=t[Ke],i=n.createComment(""),r=jn(e,t),o=Yv(n,r);return lm(n,o,i,E4(n,r),!1),i}var KR=QR,d0=(t,e,n)=>!1;function a3(t,e,n){return d0(t,e,n)}function QR(t,e,n,i){if(t[_r])return;let r;n.type&8?r=_i(i):r=s3(e,n),t[_r]=r}function c3(t,e,n){if(t[_r]&&t[nu])return!0;let i=n[gi],r=e.index-At;if(!i||t4(e)||Mm(i,r))return!1;let s=zy(i,r),a=i.data[e0]?.[r],[c,l]=e3(s,a);return t[_r]=c,t[nu]=l,!0}function l3(t,e,n,i){d0(t,n,e)||QR(t,e,n,i)}function u3(){KR=l3,d0=c3}function d3(t,e,n,i,r,o,s,a,c){let l=e.consts,u=xu(e,t,4,s||null,tm(l,a));yR(e,n,u,tm(l,c)),Bv(e,u);let d=u.tView=o0(2,u,i,r,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}function ei(t,e,n,i,r,o,s,a){let c=ge(),l=jt(),u=t+At,d=l.firstCreatePass?d3(u,l,c,e,n,i,r,o,s):l.data[u];pu(d,!1);let h=YR(l,c,d,t);jv()&&Zv(l,c,h,d),ms(h,c);let f=xR(h,c,h,d);return c[u]=f,Nm(c,f),a3(f,d,c),Rv(d)&&mR(l,c,d),s!=null&&pR(c,d,a),ei}var YR=ZR;function ZR(t,e,n,i){return so(!0),e[Ke].createComment("")}function h3(t,e,n,i){let r=e[gi],o=!r||Ja()||Mm(r,i);if(so(o),o)return ZR(t,e,n,i);let s=r.data[G4]?.[i]??null;s!==null&&n.tView!==null&&n.tView.ssrId===null&&(n.tView.ssrId=s);let a=Fm(r,t,e,n);km(r,i,a);let c=n0(r,i);return Om(c,a)}function f3(){YR=h3}function jm(t,e,n){uo("NgControlFlow");let i=ge(),r=ec(),o=yv(i,At+t),s=0;if(bi(i,r,e)){let a=Lt(null);try{if(qR(o,s),e!==-1){let c=vv(i[ie],At+e),l=au(o,c.tView.ssrId),u=Lm(i,c,n,{dehydratedView:l});Vm(o,u,s,cu(c,l))}}finally{Lt(a)}}else{let a=HR(o,s);a!==void 0&&(a[Qt]=n)}}var gv=class{constructor(e,n,i){this.lContainer=e,this.$implicit=n,this.$index=i}get $count(){return this.lContainer.length-Vt}};function h0(t,e){return e}var _v=class{constructor(e,n,i){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=i}};function f0(t,e,n,i,r,o,s,a,c,l,u){uo("NgControlFlow");let d=c!==void 0,h=ge(),f=a?s.bind(h[xn][Qt]):s,m=new _v(d,f);h[At+t]=m,ei(t+1,e,n,i,r,o),d&&ei(t+2,c,l,u)}var bv=class extends mv{constructor(e,n,i){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=i,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-Vt}at(e){return this.getLView(e)[Qt].$implicit}attach(e,n){let i=n[gi];this.needsIndexUpdate||=e!==this.length,Vm(this.lContainer,n,e,cu(this.templateTNode,i))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,m3(this.lContainer,e)}create(e,n){let i=au(this.lContainer,this.templateTNode.tView.ssrId);return Lm(this.hostLView,this.templateTNode,new gv(this.lContainer,n,e),{dehydratedView:i})}destroy(e){Sm(e[ie],e)}updateValue(e,n){this.getLView(e)[Qt].$implicit=n}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Qt].$index=e}getLView(e){return p3(this.lContainer,e)}};function m0(t){let e=Lt(null),n=oo();try{let i=ge(),r=i[ie],o=i[n];if(o.liveCollection===void 0){let a=n+1,c=yv(i,a),l=vv(r,a);o.liveCollection=new bv(c,i,l)}else o.liveCollection.reset();let s=o.liveCollection;if(i3(s,t,o.trackByFn),s.updateIndexes(),o.hasEmptyBlock){let a=ec(),c=s.length===0;if(bi(i,a,c)){let l=n+2,u=yv(i,l);if(c){let d=vv(r,l),h=au(u,d.tView.ssrId),f=Lm(i,d,void 0,{dehydratedView:h});Vm(u,f,0,cu(d,h))}else qR(u,0)}}}finally{Lt(e)}}function yv(t,e){return t[e]}function m3(t,e){return ou(t,e)}function p3(t,e){return HR(t,e)}function vv(t,e){return Pv(t,e)}function g3(t,e,n,i,r,o){let s=e.consts,a=tm(s,r),c=xu(e,t,2,i,a);return yR(e,n,c,tm(s,o)),c.attrs!==null&&cv(c,c.attrs,!1),c.mergedAttrs!==null&&cv(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function ee(t,e,n,i){let r=ge(),o=jt(),s=At+t,a=r[Ke],c=o.firstCreatePass?g3(s,o,r,e,n,i):o.data[s],l=XR(o,r,c,a,e,t);r[s]=l;let u=Rv(c);return pu(c,!0),$M(a,l,c),(c.flags&32)!==32&&jv()&&Zv(o,r,l,c),Y$()===0&&ms(l,r),Z$(),u&&(mR(o,r,c),fR(o,c,r)),i!==null&&pR(r,c),ee}function le(){let t=Tn();zk()?Hk():(t=t.parent,pu(t,!1));let e=t;J$(e)&&tz(),X$();let n=jt();return n.firstCreatePass&&(Bv(n,t),Mk(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&pz(e)&&fv(n,e,ge(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&gz(e)&&fv(n,e,ge(),e.stylesWithoutHost,!1),le}function ke(t,e,n,i){return ee(t,e,n,i),le(),ke}var XR=(t,e,n,i,r,o)=>(so(!0),Qv(i,r,tM()));function _3(t,e,n,i,r,o){let s=e[gi],a=!s||Ja()||Mm(s,o);if(so(a),a)return Qv(i,r,tM());let c=Fm(s,t,e,n);return rR(s,o)&&km(s,o,c.nextSibling),s&&(CM(n)||TM(c))&&hu(n)&&(ez(n),jM(c)),c}function b3(){XR=_3}var y3=(t,e,n,i)=>(so(!0),RM(e[Ke],""));function v3(t,e,n,i){let r,o=e[gi],s=!o||Ja();if(so(s),s)return RM(e[Ke],"");let a=Fm(o,t,e,n),c=rH(o,i);return km(o,i,a),r=Om(c,a),r}function w3(){y3=v3}function p0(){return ge()}function Tu(t,e,n){let i=ge(),r=ec();if(bi(i,r,e)){let o=jt(),s=Vv();bR(o,s,i,t,e,i[Ke],n,!0)}return Tu}var bm="en-US";var E3=bm;function x3(t){u$(t,"Expected localeId to be defined"),typeof t=="string"&&(E3=t.toLowerCase().replace(/_/g,"-"))}function vs(t){return!!t&&typeof t.then=="function"}function JR(t){return!!t&&typeof t.subscribe=="function"}function De(t,e,n,i){let r=ge(),o=jt(),s=Tn();return C3(o,r,r[Ke],s,t,e,i),De}function I3(t,e,n,i){let r=t.cleanup;if(r!=null)for(let o=0;o<r.length-1;o+=2){let s=r[o];if(s===n&&r[o+1]===i){let a=e[eu],c=r[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function C3(t,e,n,i,r,o,s){let a=Rv(i),l=t.firstCreatePass&&TR(t),u=e[Qt],d=CR(e),h=!0;if(i.type&3||s){let p=jn(i,e),g=s?s(p):p,w=d.length,k=s?O=>s(_i(O[i.index])):i.index,D=null;if(!s&&a&&(D=I3(t,e,r,i.index)),D!==null){let O=D.__ngLastListenerFn__||D;O.__ngNextListenerFn__=o,D.__ngLastListenerFn__=o,h=!1}else{o=ok(i,e,u,o,!1);let O=n.listen(g,r,o);d.push(o,O),l&&l.push(r,k,w,w+1)}}else o=ok(i,e,u,o,!1);let f=i.outputs,m;if(h&&f!==null&&(m=f[r])){let p=m.length;if(p)for(let g=0;g<p;g+=2){let w=m[g],k=m[g+1],q=e[w][k].subscribe(o),G=d.length;d.push(o,q),l&&l.push(r,i.index,G,-(G+1))}}}function rk(t,e,n,i){try{return Bi(6,e,n),n(i)!==!1}catch(r){return DR(t,r),!1}finally{Bi(7,e,n)}}function ok(t,e,n,i,r){return function o(s){if(s===Function)return i;let a=t.componentOffset>-1?ro(t.index,e):e;a0(a);let c=rk(e,n,i,s),l=o.__ngNextListenerFn__;for(;l;)c=rk(e,n,l,s)&&c,l=l.__ngNextListenerFn__;return r&&c===!1&&s.preventDefault(),c}}function vi(t=1){return uz(t)}function T3(t,e){let n=null,i=S$(t);for(let r=0;r<e.length;r++){let o=e[r];if(o==="*"){n=r;continue}if(i===null?Ek(t,o,!0):M$(i,o))return r}return n}function fn(t){let e=ge()[xn][Vn];if(!e.projection){let n=t?t.length:1,i=e.projection=pM(n,null),r=i.slice(),o=e.child;for(;o!==null;){let s=t?T3(o,t):0;s!==null&&(r[s]?r[s].projectionNext=o:i[s]=o,r[s]=o),o=o.next}}}function Mt(t,e=0,n){let i=ge(),r=jt(),o=xu(r,At+t,16,null,n||null);o.projection===null&&(o.projection=e),Hk(),(!i[gi]||Ja())&&(o.flags&32)!==32&&C4(r,i,o)}function rc(t){let e=iz();return H$(e,At+t)}function mn(t,e=""){let n=ge(),i=jt(),r=t+At,o=i.firstCreatePass?xu(i,r,1,e,null):i.data[r],s=e1(i,n,o,e,t);n[r]=s,jv()&&Zv(i,n,s,o),pu(o,!1)}var e1=(t,e,n,i,r)=>(so(!0),MM(e[Ke],i));function D3(t,e,n,i,r){let o=e[gi],s=!o||Ja()||Mm(o,r);return so(s),s?MM(e[Ke],i):Fm(o,t,e,n)}function S3(){e1=D3}function Bm(t){return Du("",t,""),Bm}function Du(t,e,n){let i=ge(),r=T5(i,t,e,n);return r!==xr&&qH(i,oo(),r),Du}function A3(t,e,n){let i=jt();if(i.firstCreatePass){let r=to(t);wv(n,i.data,i.blueprint,r,!0),wv(e,i.data,i.blueprint,r,!1)}}function wv(t,e,n,i,r){if(t=an(t),Array.isArray(t))for(let o=0;o<t.length;o++)wv(t[o],e,n,i,r);else{let o=jt(),s=ge(),a=Tn(),c=Qa(t)?t:an(t.provide),l=wM(t),u=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(Qa(t)||!t.multi){let f=new ds(l,r,E),m=gy(c,e,r?u:u+h,d);m===-1?(Ty(rm(a,s),o,c),py(o,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),n.push(f),s.push(f)):(n[m]=f,s[m]=f)}else{let f=gy(c,e,u+h,d),m=gy(c,e,u,u+h),p=f>=0&&n[f],g=m>=0&&n[m];if(r&&!g||!r&&!p){Ty(rm(a,s),o,c);let w=R3(r?M3:k3,n.length,r,i,l);!r&&g&&(n[m].providerFactory=w),py(o,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),n.push(w),s.push(w)}else{let w=t1(n[r?m:f],l,!r&&i);py(o,t,f>-1?f:m,w)}!r&&i&&g&&n[m].componentProviders++}}}function py(t,e,n,i){let r=Qa(e),o=zz(e);if(r||o){let c=(o?an(e.useClass):e).prototype.ngOnDestroy;if(c){let l=t.destroyHooks||(t.destroyHooks=[]);if(!r&&e.multi){let u=l.indexOf(n);u===-1?l.push(n,[i,c]):l[u+1].push(i,c)}else l.push(n,c)}}}function t1(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function gy(t,e,n,i){for(let r=n;r<i;r++)if(e[r]===t)return r;return-1}function k3(t,e,n,i){return Ev(this.multi,[])}function M3(t,e,n,i){let r=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=hs(n,n[ie],this.providerFactory.index,i);o=a.slice(0,s),Ev(r,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],Ev(r,o);return o}function Ev(t,e){for(let n=0;n<t.length;n++){let i=t[n];e.push(i())}return e}function R3(t,e,n,i,r){let o=new ds(t,n,E);return o.multi=[],o.index=e,o.componentProviders=0,t1(o,r,i&&!n),o}function Zt(t,e=[]){return n=>{n.providersResolver=(i,r)=>A3(i,r?r(t):t,e)}}var no=class{},lu=class{};var ym=class extends no{constructor(e,n,i){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new mm(this);let r=Tk(e);this._bootstrapComponents=IM(r.bootstrap),this._r3Injector=EM(e,n,[{provide:no,useValue:this},{provide:lo,useValue:this.componentFactoryResolver},...i],ln(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},vm=class extends lu{constructor(e){super(),this.moduleType=e}create(e){return new ym(this.moduleType,e,[])}};function P3(t,e,n){return new ym(t,e,n)}var xv=class extends no{constructor(e){super(),this.componentFactoryResolver=new mm(this),this.instance=null;let n=new ru([...e.providers,{provide:no,useValue:this},{provide:lo,useValue:this.componentFactoryResolver}],e.parent||qv(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Um(t,e,n=null){return new xv({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var N3=(()=>{let e=class e{constructor(i){this._injector=i,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(i){if(!i.standalone)return null;if(!this.cachedInjectors.has(i)){let r=bM(!1,i.type),o=r.length>0?Um([r],this._injector,`Standalone[${i.type.name}]`):null;this.cachedInjectors.set(i,o)}return this.cachedInjectors.get(i)}ngOnDestroy(){try{for(let i of this.cachedInjectors.values())i!==null&&i.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=A({token:e,providedIn:"environment",factory:()=>new e(y(In))});let t=e;return t})();function g0(t){uo("NgStandalone"),t.getStandaloneInjector=e=>e.get(N3).getOrCreateStandaloneInjector(t)}function n1(t,e,n,i){return F3(ge(),qk(),t,e,n,i)}function i1(t,e,n,i,r){return O3(ge(),qk(),t,e,n,i,r)}function r1(t,e){let n=t[e];return n===xr?void 0:n}function F3(t,e,n,i,r,o){let s=e+n;return bi(t,s,r)?PR(t,s+1,o?i.call(o,r):i(r)):r1(t,s+1)}function O3(t,e,n,i,r,o,s){let a=e+n;return C5(t,a,r,o)?PR(t,a+2,s?i.call(s,r,o):i(r,o)):r1(t,a+2)}function L3(){return this._results[Symbol.iterator]()}var io=class t{get changes(){return this._changes??=new re}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=t.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=L3)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let i=kz(e);(this._changesDetected=!Az(this._results,i,n))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}},dn=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=B3;let t=e;return t})(),V3=dn,j3=class extends V3{constructor(e,n,i){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,i){let r=Lm(this._declarationLView,this._declarationTContainer,e,{injector:n,dehydratedView:i});return new gs(r)}};function B3(){return _0(Tn(),ge())}function _0(t,e){return t.type&4?new j3(e,t,ic(t,e)):null}var Iv=class t{constructor(e){this.queryList=e,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},Cv=class t{constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let i=e.contentQueries!==null?e.contentQueries[0]:n.length,r=[];for(let o=0;o<i;o++){let s=n.getByIndex(o),a=this.queries[s.indexInDeclarationView];r.push(a.clone())}return new t(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)c1(e,n).matches!==null&&this.queries[n].setDirty()}},wm=class{constructor(e,n,i=null){this.predicate=e,this.flags=n,this.read=i}},Tv=class t{constructor(e=[]){this.queries=e}elementStart(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let i=0;i<this.length;i++){let r=n!==null?n.length:0,o=this.getByIndex(i).embeddedTView(e,r);o&&(o.indexInDeclarationView=i,n!==null?n.push(o):n=[o])}return n!==null?new t(n):null}template(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Dv=class t{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,i=e.parent;for(;i!==null&&i.type&8&&i.index!==n;)i=i.parent;return n===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let o=i[r];this.matchTNodeWithReadOption(e,n,U3(n,o)),this.matchTNodeWithReadOption(e,n,Kf(n,e,o,!1,!1))}else i===dn?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Kf(n,e,i,!1,!1))}matchTNodeWithReadOption(e,n,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===he||r===hn||r===dn&&n.type&4)this.addMatch(n.index,-2);else{let o=Kf(n,e,r,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,i)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function U3(t,e){let n=t.localNames;if(n!==null){for(let i=0;i<n.length;i+=2)if(n[i]===e)return n[i+1]}return null}function $3(t,e){return t.type&11?ic(t,e):t.type&4?_0(t,e):null}function z3(t,e,n,i){return n===-1?$3(e,t):n===-2?H3(t,e,i):hs(t,t[ie],n,e)}function H3(t,e,n){if(n===he)return ic(e,t);if(n===dn)return _0(e,t);if(n===hn)return GR(e,t)}function o1(t,e,n,i){let r=e[$i].queries[i];if(r.matches===null){let o=t.data,s=n.matches,a=[];for(let c=0;c<s.length;c+=2){let l=s[c];if(l<0)a.push(null);else{let u=o[l];a.push(z3(e,u,s[c+1],n.metadata.read))}}r.matches=a}return r.matches}function Sv(t,e,n,i){let r=t.queries.getByIndex(n),o=r.matches;if(o!==null){let s=o1(t,e,r,n);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)i.push(s[a/2]);else{let l=o[a+1],u=e[-c];for(let d=Vt;d<u.length;d++){let h=u[d];h[du]===h[ft]&&Sv(h[ie],h,l,i)}if(u[Wa]!==null){let d=u[Wa];for(let h=0;h<d.length;h++){let f=d[h];Sv(f[ie],f,l,i)}}}}}return i}function et(t){let e=ge(),n=jt(),i=Gk();Fv(i+1);let r=c1(n,i);if(t.dirty&&q$(e)===((r.metadata.flags&2)===2)){if(r.matches===null)t.reset([]);else{let o=r.crossesNgTemplate?Sv(n,e,i,[]):o1(n,e,r,i);t.reset(o,cH),t.notifyOnChanges()}return!0}return!1}function Ut(t,e,n){let i=jt();i.firstCreatePass&&(a1(i,new wm(t,e,n),-1),(e&2)===2&&(i.staticViewQueries=!0)),s1(i,ge(),e)}function Ir(t,e,n,i){let r=jt();if(r.firstCreatePass){let o=Tn();a1(r,new wm(e,n,i),o.index),W3(r,t),(n&2)===2&&(r.staticContentQueries=!0)}s1(r,ge(),n)}function tt(){return q3(ge(),Gk())}function q3(t,e){return t[$i].queries[e].queryList}function s1(t,e,n){let i=new io((n&4)===4);TH(t,e,i,i.destroy),e[$i]===null&&(e[$i]=new Cv),e[$i].queries.push(new Iv(i))}function a1(t,e,n){t.queries===null&&(t.queries=new Tv),t.queries.track(new Dv(e,n))}function W3(t,e){let n=t.contentQueries||(t.contentQueries=[]),i=n.length?n[n.length-1]:-1;e!==i&&n.push(t.queries.length-1,e)}function c1(t,e){return t.queries.getByIndex(e)}var Hf=null;function G3(t){Hf!==null&&(t.defaultEncapsulation!==Hf.defaultEncapsulation||t.preserveWhitespaces!==Hf.preserveWhitespaces)||(Hf=t)}var qi=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},$m=new qi("17.0.8");var zm=(()=>{let e=class e{log(i){console.log(i)}warn(i){console.warn(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})(),Av=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Hm=(()=>{let e=class e{compileModuleSync(i){return new vm(i)}compileModuleAsync(i){return Promise.resolve(this.compileModuleSync(i))}compileModuleAndAllComponentsSync(i){let r=this.compileModuleSync(i),o=Tk(i),s=IM(o.declarations).reduce((a,c)=>{let l=Jr(c);return l&&a.push(new Ya(l)),a},[]);return new Av(r,s)}compileModuleAndAllComponentsAsync(i){return Promise.resolve(this.compileModuleAndAllComponentsSync(i))}clearCache(){}clearCacheFor(i){}getModuleId(i){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),K3=new C("compilerOptions");var Su=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new _t(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let i=this.taskId++;return this.pendingTasks.add(i),i}remove(i){this.pendingTasks.delete(i),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var b0=new C(""),Au=new C(""),qm=(()=>{let e=class e{constructor(i,r,o){this._ngZone=i,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,y0||(Q3(o),o.addToWindow(r)),this._watchAngularEvents(),i.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{V.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&this._pendingCount===0&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let i=this._callbacks.pop();clearTimeout(i.timeoutId),i.doneCb(this._didWork)}this._didWork=!1});else{let i=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(i)?(clearTimeout(r.timeoutId),!1):!0),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(i=>({source:i.source,creationLocation:i.creationLocation,data:i.data})):[]}addCallback(i,r,o){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==s),i(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:i,timeoutId:s,updateCb:o})}whenStable(i,r,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(i,r,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(i){this.registry.registerApplication(i,this)}unregisterApplication(i){this.registry.unregisterApplication(i)}findProviders(i,r,o){return[]}};e.\u0275fac=function(r){return new(r||e)(y(V),y(Wm),y(Au))},e.\u0275prov=A({token:e,factory:e.\u0275fac});let t=e;return t})(),Wm=(()=>{let e=class e{constructor(){this._applications=new Map}registerApplication(i,r){this._applications.set(i,r)}unregisterApplication(i){this._applications.delete(i)}unregisterAllApplications(){this._applications.clear()}getTestability(i){return this._applications.get(i)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(i,r=!0){return y0?.findTestabilityInTree(this,i,r)??null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();function Q3(t){y0=t}var y0,Gm=new C("Application Initializer"),l1=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r}),this.appInits=T(Gm,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let i=[];for(let o of this.appInits){let s=o();if(vs(s))i.push(s);else if(JR(s)){let a=new Promise((c,l)=>{s.subscribe({complete:c,error:l})});i.push(a)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(i).then(()=>{r()}).catch(o=>{this.reject(o)}),i.length===0&&r(),this.initialized=!0}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),oc=new C("appBootstrapListener");function Y3(t,e,n){let i=new vm(n);return Promise.resolve(i)}function Z3(){XS(()=>{throw new S(600,!1)})}function X3(t){return t.isBoundToModule}function J3(t,e,n){try{let i=n();return vs(i)?i.catch(r=>{throw e.runOutsideAngular(()=>t.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>t.handleError(i)),i}}function u1(t,e){return Array.isArray(e)?e.reduce(u1,t):M(M({},t),e)}var wi=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=T(aR),this.componentTypes=[],this.components=[],this.isStable=T(Su).hasPendingTasks.pipe(B(i=>!i)),this._injector=T(In)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(i,r){let o=i instanceof dm;if(!this._injector.get(l1).done){let m="Cannot bootstrap as there are still asynchronous initializers running."+(!o&&Ck(i)?"":" Bootstrap components in the `ngDoBootstrap` method of the root module.");throw new S(405,!1)}let a;o?a=i:a=this._injector.get(lo).resolveComponentFactory(i),this.componentTypes.push(a.componentType);let c=X3(a)?void 0:this._injector.get(no),l=r||a.selector,u=a.create(rt.NULL,[],l,c),d=u.location.nativeElement,h=u.injector.get(b0,null);return h?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),Zf(this.components,u),h?.unregisterApplication(d)}),this._loadComponent(u),u}tick(){if(this._runningTick)throw new S(101,!1);try{this._runningTick=!0;for(let i of this._views)i.detectChanges()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1}}attachView(i){let r=i;this._views.push(r),r.attachToAppRef(this)}detachView(i){let r=i;Zf(this._views,r),r.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i);let r=this._injector.get(oc,[]);[...this._bootstrapListeners,...r].forEach(o=>o(i))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(i=>i()),this._views.slice().forEach(i=>i.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(i){return this._destroyListeners.push(i),()=>Zf(this._destroyListeners,i)}destroy(){if(this._destroyed)throw new S(406,!1);let i=this._injector;i.destroy&&!i.destroyed&&i.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Zf(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function sk(t){for(let e=t.length-1;e>=0;e--)if(t[e]!==void 0)return t[e]}var qf;function v0(t){qf??=new WeakMap;let e=qf.get(t);if(e)return e;let n=t.isStable.pipe(On(i=>i)).toPromise().then(()=>{});return qf.set(t,n),t.onDestroy(()=>qf?.delete(t)),n}var eq=(()=>{let e=class e{constructor(){this.zone=T(V),this.applicationRef=T(wi)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function tq(t){return[{provide:V,useFactory:t},{provide:fs,multi:!0,useFactory:()=>{let e=T(eq,{optional:!0});return()=>e.initialize()}},{provide:fs,multi:!0,useFactory:()=>{let e=T(rq);return()=>{e.initialize()}}},{provide:aR,useFactory:nq}]}function nq(){let t=T(V),e=T(Cn);return n=>t.runOutsideAngular(()=>e.handleError(n))}function iq(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var rq=(()=>{let e=class e{constructor(){this.subscription=new Te,this.initialized=!1,this.zone=T(V),this.pendingTasks=T(Su)}initialize(){if(this.initialized)return;this.initialized=!0;let i=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(i=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{V.assertNotInAngularZone(),queueMicrotask(()=>{i!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(i),i=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{V.assertInAngularZone(),i??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function oq(){return typeof $localize<"u"&&$localize.locale||bm}var Km=new C("LocaleId",{providedIn:"root",factory:()=>T(Km,fe.Optional|fe.SkipSelf)||oq()});var d1=new C("PlatformDestroyListeners"),h1=(()=>{let e=class e{constructor(i){this._injector=i,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(i,r){let o=a5(r?.ngZone,iq({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return o.run(()=>{let s=P3(i.moduleType,this.injector,tq(()=>o)),a=s.injector.get(Cn,null);return o.runOutsideAngular(()=>{let c=o.onError.subscribe({next:l=>{a.handleError(l)}});s.onDestroy(()=>{Zf(this._modules,s),c.unsubscribe()})}),J3(a,o,()=>{let c=s.injector.get(l1);return c.runInitializers(),c.donePromise.then(()=>{let l=s.injector.get(Km,bm);return x3(l||bm),this._moduleDoBootstrap(s),s})})})}bootstrapModule(i,r=[]){let o=u1({},r);return Y3(this.injector,o,i).then(s=>this.bootstrapModuleFactory(s,o))}_moduleDoBootstrap(i){let r=i.injector.get(wi);if(i._bootstrapComponents.length>0)i._bootstrapComponents.forEach(o=>r.bootstrap(o));else if(i.instance.ngDoBootstrap)i.instance.ngDoBootstrap(r);else throw new S(-403,!1);this._modules.push(i)}onDestroy(i){this._destroyListeners.push(i)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new S(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let i=this._injector.get(d1,null);i&&(i.forEach(r=>r()),i.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}};e.\u0275fac=function(r){return new(r||e)(y(rt))},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})(),Zl=null,f1=new C("AllowMultipleToken");function sq(t){if(Zl&&!Zl.get(f1,!1))throw new S(400,!1);Z3(),Zl=t;let e=t.get(h1);return lq(t),e}function w0(t,e,n=[]){let i=`Platform: ${e}`,r=new C(i);return(o=[])=>{let s=m1();if(!s||s.injector.get(f1,!1)){let a=[...n,...o,{provide:r,useValue:!0}];t?t(a):sq(aq(a,i))}return cq(r)}}function aq(t=[],e){return rt.create({name:e,providers:[{provide:Tm,useValue:"platform"},{provide:d1,useValue:new Set([()=>Zl=null])},...t]})}function cq(t){let e=m1();if(!e)throw new S(401,!1);return e}function m1(){return Zl?.get(h1)??null}function lq(t){t.get(Wv,null)?.forEach(n=>n())}function E0(){return!1}var p1=w0(null,"core",[]),g1=(()=>{let e=class e{constructor(i){}};e.\u0275fac=function(r){return new(r||e)(y(wi))},e.\u0275mod=H({type:e}),e.\u0275inj=z({});let t=e;return t})();var ak=!1;function uq(){ak||(ak=!0,eH(),b3(),S3(),w3(),f3(),u3(),n3(),CH())}function dq(t,e){return v0(t)}function _1(){return bu([{provide:Uf,useFactory:()=>{let t=!0;return Ql()&&(t=!!T(bs,{optional:!0})?.get(nR,null)),t&&uo("NgHydration"),t}},{provide:fs,useValue:()=>{Ql()&&T(Uf)&&(hq(),uq())},multi:!0},{provide:lR,useFactory:()=>Ql()&&T(Uf)},{provide:oc,useFactory:()=>{if(Ql()&&T(Uf)){let t=T(wi),e=T(rt);return()=>{dq(t,e).then(()=>{V.assertInAngularZone(),K5(t)})}}return()=>{}},multi:!0}])}function hq(){let t=Dm(),e;for(let n of t.body.childNodes)if(n.nodeType===Node.COMMENT_NODE&&n.textContent?.trim()===X4){e=n;break}if(!e)throw new S(-507,!1)}function $t(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function Qm(t,e=NaN){return!isNaN(parseFloat(t))&&!isNaN(Number(t))?Number(t):e}function b1(t){let e=Jr(t);if(!e)return null;let n=new Ya(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var I0=null;function Ki(){return I0}function x1(t){I0||(I0=t)}var Ym=class{},ae=new C("DocumentToken"),D0=(()=>{let e=class e{historyGo(i){throw new Error("Not implemented")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=A({token:e,factory:()=>(()=>T(fq))(),providedIn:"platform"});let t=e;return t})(),I1=new C("Location Initialized"),fq=(()=>{let e=class e extends D0{constructor(){super(),this._doc=T(ae),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ki().getBaseHref(this._doc)}onPopState(i){let r=Ki().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",i,!1),()=>r.removeEventListener("popstate",i)}onHashChange(i){let r=Ki().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",i,!1),()=>r.removeEventListener("hashchange",i)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(i){this._location.pathname=i}pushState(i,r,o){this._history.pushState(i,r,o)}replaceState(i,r,o){this._history.replaceState(i,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(i=0){this._history.go(i)}getState(){return this._history.state}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=A({token:e,factory:()=>(()=>new e)(),providedIn:"platform"});let t=e;return t})();function S0(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function y1(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,i=n-(t[n-1]==="/"?1:0);return t.slice(0,i)+t.slice(n)}function Cr(t){return t&&t[0]!=="?"?"?"+t:t}var ws=(()=>{let e=class e{historyGo(i){throw new Error("Not implemented")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=A({token:e,factory:()=>(()=>T(A0))(),providedIn:"root"});let t=e;return t})(),C1=new C("appBaseHref"),A0=(()=>{let e=class e extends ws{constructor(i,r){super(),this._platformLocation=i,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??T(ae).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}prepareExternalUrl(i){return S0(this._baseHref,i)}path(i=!1){let r=this._platformLocation.pathname+Cr(this._platformLocation.search),o=this._platformLocation.hash;return o&&i?`${r}${o}`:r}pushState(i,r,o,s){let a=this.prepareExternalUrl(o+Cr(s));this._platformLocation.pushState(i,r,a)}replaceState(i,r,o,s){let a=this.prepareExternalUrl(o+Cr(s));this._platformLocation.replaceState(i,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(i=0){this._platformLocation.historyGo?.(i)}};e.\u0275fac=function(r){return new(r||e)(y(D0),y(C1,8))},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),T1=(()=>{let e=class e extends ws{constructor(i,r){super(),this._platformLocation=i,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}path(i=!1){let r=this._platformLocation.hash;return r==null&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(i){let r=S0(this._baseHref,i);return r.length>0?"#"+r:r}pushState(i,r,o,s){let a=this.prepareExternalUrl(o+Cr(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(i,r,a)}replaceState(i,r,o,s){let a=this.prepareExternalUrl(o+Cr(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(i,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(i=0){this._platformLocation.historyGo?.(i)}};e.\u0275fac=function(r){return new(r||e)(y(D0),y(C1,8))},e.\u0275prov=A({token:e,factory:e.\u0275fac});let t=e;return t})(),sc=(()=>{let e=class e{constructor(i){this._subject=new re,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=i;let r=this._locationStrategy.getBaseHref();this._basePath=gq(y1(v1(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(i=!1){return this.normalize(this._locationStrategy.path(i))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(i,r=""){return this.path()==this.normalize(i+Cr(r))}normalize(i){return e.stripTrailingSlash(pq(this._basePath,v1(i)))}prepareExternalUrl(i){return i&&i[0]!=="/"&&(i="/"+i),this._locationStrategy.prepareExternalUrl(i)}go(i,r="",o=null){this._locationStrategy.pushState(o,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+Cr(r)),o)}replaceState(i,r="",o=null){this._locationStrategy.replaceState(o,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+Cr(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(i=0){this._locationStrategy.historyGo?.(i)}onUrlChange(i){return this._urlChangeListeners.push(i),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{let r=this._urlChangeListeners.indexOf(i);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(i="",r){this._urlChangeListeners.forEach(o=>o(i,r))}subscribe(i,r,o){return this._subject.subscribe({next:i,error:r,complete:o})}};e.normalizeQueryParams=Cr,e.joinWithSlash=S0,e.stripTrailingSlash=y1,e.\u0275fac=function(r){return new(r||e)(y(ws))},e.\u0275prov=A({token:e,factory:()=>mq(),providedIn:"root"});let t=e;return t})();function mq(){return new sc(y(ws))}function pq(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function v1(t){return t.replace(/\/index.html$/,"")}function gq(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function D1(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let i=n.indexOf("="),[r,o]=i==-1?[n,""]:[n.slice(0,i),n.slice(i+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}var x0=/\s+/,w1=[],Xm=(()=>{let e=class e{constructor(i,r,o,s){this._iterableDiffers=i,this._keyValueDiffers=r,this._ngEl=o,this._renderer=s,this.initialClasses=w1,this.stateMap=new Map}set klass(i){this.initialClasses=i!=null?i.trim().split(x0):w1}set ngClass(i){this.rawClass=typeof i=="string"?i.trim().split(x0):i}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let i=this.rawClass;if(Array.isArray(i)||i instanceof Set)for(let r of i)this._updateState(r,!0);else if(i!=null)for(let r of Object.keys(i))this._updateState(r,!!i[r]);this._applyStateDiff()}_updateState(i,r){let o=this.stateMap.get(i);o!==void 0?(o.enabled!==r&&(o.changed=!0,o.enabled=r),o.touched=!0):this.stateMap.set(i,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let i of this.stateMap){let r=i[0],o=i[1];o.changed?(this._toggleClass(r,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),o.touched=!1}}_toggleClass(i,r){i=i.trim(),i.length>0&&i.split(x0).forEach(o=>{r?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}};e.\u0275fac=function(r){return new(r||e)(E(Eu),E(r0),E(he),E(ys))},e.\u0275dir=_e({type:e,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0});let t=e;return t})();var C0=class{constructor(e,n,i,r){this.$implicit=e,this.ngForOf=n,this.index=i,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},S1=(()=>{let e=class e{set ngForOf(i){this._ngForOf=i,this._ngForOfDirty=!0}set ngForTrackBy(i){this._trackByFn=i}get ngForTrackBy(){return this._trackByFn}constructor(i,r,o){this._viewContainer=i,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(i){i&&(this._template=i)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let i=this._ngForOf;if(!this._differ&&i)if(!1)try{}catch{}else this._differ=this._differs.find(i).create(this.ngForTrackBy)}if(this._differ){let i=this._differ.diff(this._ngForOf);i&&this._applyChanges(i)}}_applyChanges(i){let r=this._viewContainer;i.forEachOperation((o,s,a)=>{if(o.previousIndex==null)r.createEmbeddedView(this._template,new C0(o.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)r.remove(s===null?void 0:s);else if(s!==null){let c=r.get(s);r.move(c,a),E1(c,o)}});for(let o=0,s=r.length;o<s;o++){let c=r.get(o).context;c.index=o,c.count=s,c.ngForOf=this._ngForOf}i.forEachIdentityChange(o=>{let s=r.get(o.currentIndex);E1(s,o)})}static ngTemplateContextGuard(i,r){return!0}};e.\u0275fac=function(r){return new(r||e)(E(hn),E(dn),E(Eu))},e.\u0275dir=_e({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function E1(t,e){t.context.$implicit=e.item}var ac=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=H({type:e}),e.\u0275inj=z({});let t=e;return t})(),k0="browser",_q="server";function A1(t){return t===k0}function Es(t){return t===_q}var k1=(()=>{let e=class e{};e.\u0275prov=A({token:e,providedIn:"root",factory:()=>new T0(y(ae),window)});let t=e;return t})(),T0=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;let n=bq(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){let n=e.getBoundingClientRect(),i=n.left+this.window.pageXOffset,r=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(i-o[0],r-o[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}};function bq(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let i=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),r=i.currentNode;for(;r;){let o=r.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}r=i.nextNode()}}return null}var Zm=class{};var P0=class{};var xs=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let i=n.indexOf(":");if(i>0){let r=n.slice(0,i),o=r.toLowerCase(),s=n.slice(i+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,i)=>{this.setHeaderEntries(i,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,i])=>{this.setHeaderEntries(n,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(e.name,n);let r=(e.op==="a"?this.headers.get(n):void 0)||[];r.push(...i),this.headers.set(n,r);break;case"d":let o=e.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}setHeaderEntries(e,n){let i=(Array.isArray(n)?n:[n]).map(o=>o.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var N0=class{encodeKey(e){return M1(e)}encodeValue(e){return M1(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function vq(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(r=>{let o=r.indexOf("="),[s,a]=o==-1?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,o)),e.decodeValue(r.slice(o+1))],c=n.get(s)||[];c.push(a),n.set(s,c)}),n}var wq=/%(\d[a-f0-9])/gi,Eq={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function M1(t){return encodeURIComponent(t).replace(wq,(e,n)=>Eq[n]??e)}function Jm(t){return`${t}`}var ho=class t{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new N0,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=vq(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let i=e.fromObject[n],r=Array.isArray(i)?i.map(Jm):[Jm(i)];this.map.set(n,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(i=>{let r=e[i];Array.isArray(r)?r.forEach(o=>{n.push({param:i,value:o,op:"a"})}):n.push({param:i,value:r,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(i=>n+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(Jm(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let i=this.map.get(e.param)||[],r=i.indexOf(Jm(e.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var F0=class{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function xq(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function R1(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function P1(t){return typeof Blob<"u"&&t instanceof Blob}function N1(t){return typeof FormData<"u"&&t instanceof FormData}function Iq(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var ku=class t{constructor(e,n,i,r){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let o;if(xq(this.method)||r?(this.body=i!==void 0?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers||(this.headers=new xs),this.context||(this.context=new F0),!this.params)this.params=new ho,this.urlWithParams=n;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),c=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+c+s}}}serializeBody(){return this.body===null?null:R1(this.body)||P1(this.body)||N1(this.body)||Iq(this.body)||typeof this.body=="string"?this.body:this.body instanceof ho?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||N1(this.body)?null:P1(this.body)?this.body.type||null:R1(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof ho?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let n=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,o=e.body!==void 0?e.body:this.body,s=e.withCredentials!==void 0?e.withCredentials:this.withCredentials,a=e.reportProgress!==void 0?e.reportProgress:this.reportProgress,c=e.headers||this.headers,l=e.params||this.params,u=e.context??this.context;return e.setHeaders!==void 0&&(c=Object.keys(e.setHeaders).reduce((d,h)=>d.set(h,e.setHeaders[h]),c)),e.setParams&&(l=Object.keys(e.setParams).reduce((d,h)=>d.set(h,e.setParams[h]),l)),new t(n,i,o,{params:l,headers:c,context:u,reportProgress:a,responseType:r,withCredentials:s})}},U1=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(U1||{}),O0=class{constructor(e,n=200,i="OK"){this.headers=e.headers||new xs,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}};var Mu=class t extends O0{constructor(e={}){super(e),this.type=U1.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}};function R0(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var $1=(()=>{let e=class e{constructor(i){this.handler=i}request(i,r,o={}){let s;if(i instanceof ku)s=i;else{let l;o.headers instanceof xs?l=o.headers:l=new xs(o.headers);let u;o.params&&(o.params instanceof ho?u=o.params:u=new ho({fromObject:o.params})),s=new ku(i,r,o.body!==void 0?o.body:null,{headers:l,context:o.context,params:u,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache})}let a=L(s).pipe(gr(l=>this.handler.handle(l)));if(i instanceof ku||o.observe==="events")return a;let c=a.pipe(He(l=>l instanceof Mu));switch(o.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return c.pipe(B(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return c.pipe(B(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return c.pipe(B(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return c.pipe(B(l=>l.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(i,r={}){return this.request("DELETE",i,r)}get(i,r={}){return this.request("GET",i,r)}head(i,r={}){return this.request("HEAD",i,r)}jsonp(i,r){return this.request("JSONP",i,{params:new ho().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(i,r={}){return this.request("OPTIONS",i,r)}patch(i,r,o={}){return this.request("PATCH",i,R0(o,r))}post(i,r,o={}){return this.request("POST",i,R0(o,r))}put(i,r,o={}){return this.request("PUT",i,R0(o,r))}};e.\u0275fac=function(r){return new(r||e)(y(P0))},e.\u0275prov=A({token:e,factory:e.\u0275fac});let t=e;return t})();var Cq=new C("");var F1="b",O1="h",L1="s",V1="st",j1="u",B1="rt",ep=new C(""),Tq=["GET","HEAD"];function Dq(t,e){let u=T(ep),{isCacheActive:n}=u,i=kS(u,["isCacheActive"]),{transferCache:r,method:o}=t;if(!n||o==="POST"&&!i.includePostRequests&&!r||o!=="POST"&&!Tq.includes(o)||r===!1||i.filter?.(t)===!1)return e(t);let s=T(bs),a=Aq(t),c=s.get(a,null),l=i.includeHeaders;if(typeof r=="object"&&r.includeHeaders&&(l=r.includeHeaders),c){let{[F1]:d,[B1]:h,[O1]:f,[L1]:m,[V1]:p,[j1]:g}=c,w=d;switch(h){case"arraybuffer":w=new TextEncoder().encode(d).buffer;break;case"blob":w=new Blob([d]);break}let k=new xs(f);return L(new Mu({body:w,headers:k,status:m,statusText:p,url:g}))}return e(t).pipe(Oe(d=>{d instanceof Mu&&s.set(a,{[F1]:d.body,[O1]:Sq(d.headers,l),[L1]:d.status,[V1]:d.statusText,[j1]:d.url||"",[B1]:t.responseType})}))}function Sq(t,e){if(!e)return{};let n={};for(let i of e){let r=t.getAll(i);r!==null&&(n[i]=r)}return n}function Aq(t){let{params:e,method:n,responseType:i,url:r}=t,o=e.keys().sort().map(c=>`${c}=${e.getAll(c)}`).join("&"),s=n+"."+i+"."+r+"?"+o,a=kq(s);return a}function kq(t){let e=0;for(let n of t)e=Math.imul(31,e)+n.charCodeAt(0)<<0;return e+=2147483647+1,e.toString()}function z1(t){return[{provide:ep,useFactory:()=>(uo("NgHttpTransferCache"),M({isCacheActive:!0},t))},{provide:Cq,useValue:Dq,multi:!0,deps:[bs,ep]},{provide:oc,multi:!0,useFactory:()=>{let e=T(wi),n=T(ep);return()=>{v0(e).then(()=>{n.isCacheActive=!1})}}}]}var j0=class extends Ym{constructor(){super(...arguments),this.supportsDOMEvents=!0}},B0=class t extends j0{static makeCurrent(){x1(new t)}onAndCancel(e,n,i){return e.addEventListener(n,i),()=>{e.removeEventListener(n,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=Rq();return n==null?null:Pq(n)}resetBaseElement(){Ru=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return D1(document.cookie,e)}},Ru=null;function Rq(){return Ru=Ru||document.querySelector("base"),Ru?Ru.getAttribute("href"):null}function Pq(t){return new URL(t,document.baseURI).pathname}var U0=class{addToWindow(e){un.getAngularTestability=(i,r=!0)=>{let o=e.findTestabilityInTree(i,r);if(o==null)throw new S(5103,!1);return o},un.getAllAngularTestabilities=()=>e.getAllTestabilities(),un.getAllAngularRootElements=()=>e.getAllRootElements();let n=i=>{let r=un.getAllAngularTestabilities(),o=r.length,s=!1,a=function(c){s=s||c,o--,o==0&&i(s)};r.forEach(c=>{c.whenStable(a)})};un.frameworkStabilizers||(un.frameworkStabilizers=[]),un.frameworkStabilizers.push(n)}findTestabilityInTree(e,n,i){if(n==null)return null;let r=e.getTestability(n);return r??(i?Ki().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},Nq=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=A({token:e,factory:e.\u0275fac});let t=e;return t})(),$0=new C("EventManagerPlugins"),W1=(()=>{let e=class e{constructor(i,r){this._zone=r,this._eventNameToPlugin=new Map,i.forEach(o=>{o.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,r,o){return this._findPluginFor(r).addEventListener(i,r,o)}getZone(){return this._zone}_findPluginFor(i){let r=this._eventNameToPlugin.get(i);if(r)return r;if(r=this._plugins.find(s=>s.supports(i)),!r)throw new S(5101,!1);return this._eventNameToPlugin.set(i,r),r}};e.\u0275fac=function(r){return new(r||e)(y($0),y(V))},e.\u0275prov=A({token:e,factory:e.\u0275fac});let t=e;return t})(),tp=class{constructor(e){this._doc=e}},L0="ng-app-id",G1=(()=>{let e=class e{constructor(i,r,o,s={}){this.doc=i,this.appId=r,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Es(s),this.resetHostNodes()}addStyles(i){for(let r of i)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(i){for(let r of i)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let i=this.styleNodesInDOM;i&&(i.forEach(r=>r.remove()),i.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(let r of this.getAllStyles())this.addStyleToHost(i,r)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(let r of this.hostNodes)this.addStyleToHost(r,i)}onStyleRemoved(i){let r=this.styleRef;r.get(i)?.elements?.forEach(o=>o.remove()),r.delete(i)}collectServerRenderedStyles(){let i=this.doc.head?.querySelectorAll(`style[${L0}="${this.appId}"]`);if(i?.length){let r=new Map;return i.forEach(o=>{o.textContent!=null&&r.set(o.textContent,o)}),r}return null}changeUsageCount(i,r){let o=this.styleRef;if(o.has(i)){let s=o.get(i);return s.usage+=r,s.usage}return o.set(i,{usage:r,elements:[]}),r}getStyleElement(i,r){let o=this.styleNodesInDOM,s=o?.get(r);if(s?.parentNode===i)return o.delete(r),s.removeAttribute(L0),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=r,this.platformIsServer&&a.setAttribute(L0,this.appId),i.appendChild(a),a}}addStyleToHost(i,r){let o=this.getStyleElement(i,r),s=this.styleRef,a=s.get(r)?.elements;a?a.push(o):s.set(r,{elements:[o],usage:1})}resetHostNodes(){let i=this.hostNodes;i.clear(),i.add(this.doc.head)}};e.\u0275fac=function(r){return new(r||e)(y(ae),y(tc),y(yu,8),y(Ct))},e.\u0275prov=A({token:e,factory:e.\u0275fac});let t=e;return t})(),V0={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},H0=/%COMP%/g,K1="%COMP%",Fq=`_nghost-${K1}`,Oq=`_ngcontent-${K1}`,Lq=!0,Vq=new C("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>Lq});function jq(t){return Oq.replace(H0,t)}function Bq(t){return Fq.replace(H0,t)}function Q1(t,e){return e.map(n=>n.replace(H0,t))}var np=(()=>{let e=class e{constructor(i,r,o,s,a,c,l,u=null){this.eventManager=i,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=Es(c),this.defaultRenderer=new Pu(i,a,l,this.platformIsServer)}createRenderer(i,r){if(!i||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Hi.ShadowDom&&(r=Ae(M({},r),{encapsulation:Hi.Emulated}));let o=this.getOrCreateRenderer(i,r);return o instanceof ip?o.applyToHost(i):o instanceof Nu&&o.applyStyles(),o}getOrCreateRenderer(i,r){let o=this.rendererByCompId,s=o.get(r.id);if(!s){let a=this.doc,c=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(r.encapsulation){case Hi.Emulated:s=new ip(l,u,r,this.appId,d,a,c,h);break;case Hi.ShadowDom:return new z0(l,u,i,r,a,c,this.nonce,h);default:s=new Nu(l,u,r,d,a,c,h);break}o.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(r){return new(r||e)(y(W1),y(G1),y(tc),y(Vq),y(ae),y(Ct),y(V),y(yu))},e.\u0275prov=A({token:e,factory:e.\u0275fac});let t=e;return t})(),Pu=class{constructor(e,n,i,r){this.eventManager=e,this.doc=n,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(V0[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(H1(e)?e.content:e).appendChild(n)}insertBefore(e,n,i){e&&(H1(e)?e.content:e).insertBefore(n,i)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new S(-5104,!1);return n||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,i,r){if(r){n=r+":"+n;let o=V0[r];o?e.setAttributeNS(o,n,i):e.setAttribute(n,i)}else e.setAttribute(n,i)}removeAttribute(e,n,i){if(i){let r=V0[i];r?e.removeAttributeNS(r,n):e.removeAttribute(`${i}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,i,r){r&(br.DashCase|br.Important)?e.style.setProperty(n,i,r&br.Important?"important":""):e.style[n]=i}removeStyle(e,n,i){i&br.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,i){e!=null&&(e[n]=i)}setValue(e,n){e.nodeValue=n}listen(e,n,i){if(typeof e=="string"&&(e=Ki().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(i))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function H1(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var z0=class extends Pu{constructor(e,n,i,r,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=Q1(r.id,r.styles);for(let u of l){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,i){return super.insertBefore(this.nodeOrShadowRoot(e),n,i)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Nu=class extends Pu{constructor(e,n,i,r,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=r,this.styles=c?Q1(c,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},ip=class extends Nu{constructor(e,n,i,r,o,s,a,c){let l=r+"-"+i.id;super(e,n,i,o,s,a,c,l),this.contentAttr=jq(l),this.hostAttr=Bq(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let i=super.createElement(e,n);return super.setAttribute(i,this.contentAttr,""),i}},Uq=(()=>{let e=class e extends tp{constructor(i){super(i)}supports(i){return!0}addEventListener(i,r,o){return i.addEventListener(r,o,!1),()=>this.removeEventListener(i,r,o)}removeEventListener(i,r,o){return i.removeEventListener(r,o)}};e.\u0275fac=function(r){return new(r||e)(y(ae))},e.\u0275prov=A({token:e,factory:e.\u0275fac});let t=e;return t})(),q1=["alt","control","meta","shift"],$q={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},zq={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},Hq=(()=>{let e=class e extends tp{constructor(i){super(i)}supports(i){return e.parseEventName(i)!=null}addEventListener(i,r,o){let s=e.parseEventName(r),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ki().onAndCancel(i,s.domEventName,a))}static parseEventName(i){let r=i.toLowerCase().split("."),o=r.shift();if(r.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(r.pop()),a="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),a="code."),q1.forEach(u=>{let d=r.indexOf(u);d>-1&&(r.splice(d,1),a+=u+".")}),a+=s,r.length!=0||s.length===0)return null;let l={};return l.domEventName=o,l.fullKey=a,l}static matchEventFullKeyCode(i,r){let o=$q[i.key]||i.key,s="";return r.indexOf("code.")>-1&&(o=i.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),q1.forEach(a=>{if(a!==o){let c=zq[a];c(i)&&(s+=a+".")}}),s+=o,s===r)}static eventCallback(i,r,o){return s=>{e.matchEventFullKeyCode(s,i)&&o.runGuarded(()=>r(s))}}static _normalizeKey(i){return i==="esc"?"escape":i}};e.\u0275fac=function(r){return new(r||e)(y(ae))},e.\u0275prov=A({token:e,factory:e.\u0275fac});let t=e;return t})();function qq(){B0.makeCurrent()}function Wq(){return new Cn}function Gq(){return xM(document),document}var Kq=[{provide:Ct,useValue:k0},{provide:Wv,useValue:qq,multi:!0},{provide:ae,useFactory:Gq,deps:[]}],Y1=w0(p1,"browser",Kq),Qq=new C(""),Yq=[{provide:Au,useClass:U0,deps:[]},{provide:b0,useClass:qm,deps:[V,Wm,Au]},{provide:qm,useClass:qm,deps:[V,Wm,Au]}],Zq=[{provide:Tm,useValue:"root"},{provide:Cn,useFactory:Wq,deps:[]},{provide:$0,useClass:Uq,multi:!0,deps:[ae,V,Ct]},{provide:$0,useClass:Hq,multi:!0,deps:[ae]},np,G1,W1,{provide:ps,useExisting:np},{provide:Zm,useClass:Nq,deps:[]},[]],rp=(()=>{let e=class e{constructor(i){}static withServerTransition(i){return{ngModule:e,providers:[{provide:tc,useValue:i.appId}]}}};e.\u0275fac=function(r){return new(r||e)(y(Qq,12))},e.\u0275mod=H({type:e}),e.\u0275inj=z({providers:[...Zq,...Yq],imports:[ac,g1]});let t=e;return t})();function Xq(){return new q0(y(ae))}var q0=(()=>{let e=class e{constructor(i){this._doc=i}getTitle(){return this._doc.title}setTitle(i){this._doc.title=i||""}};e.\u0275fac=function(r){return new(r||e)(y(ae))},e.\u0275prov=A({token:e,factory:function(r){let o=null;return r?o=new r:o=Xq(),o},providedIn:"root"});let t=e;return t})();var W0=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=A({token:e,factory:function(r){let o=null;return r?o=new(r||e):o=y(Z1),o},providedIn:"root"});let t=e;return t})();function Jq(t){return new Z1(t.get(ae))}var Z1=(()=>{let e=class e extends W0{constructor(i){super(),this._doc=i}sanitize(i,r){if(r==null)return null;switch(i){case Dn.NONE:return r;case Dn.HTML:return nc(r,"HTML")?wr(r):XM(this._doc,String(r)).toString();case Dn.STYLE:return nc(r,"Style")?wr(r):r;case Dn.SCRIPT:if(nc(r,"Script"))return wr(r);throw new S(5200,!1);case Dn.URL:return nc(r,"URL")?wr(r):Jv(String(r));case Dn.RESOURCE_URL:if(nc(r,"ResourceURL"))return wr(r);throw new S(5201,!1);default:throw new S(5202,!1)}}bypassSecurityTrustHtml(i){return zM(i)}bypassSecurityTrustStyle(i){return HM(i)}bypassSecurityTrustScript(i){return qM(i)}bypassSecurityTrustUrl(i){return WM(i)}bypassSecurityTrustResourceUrl(i){return GM(i)}};e.\u0275fac=function(r){return new(r||e)(y(ae))},e.\u0275prov=A({token:e,factory:function(r){let o=null;return r?o=new r:o=Jq(y(rt)),o},providedIn:"root"});let t=e;return t})();function X1(...t){let e=[],n=new Set,i=n.has(1);for(let{\u0275providers:r,\u0275kind:o}of t)n.add(o),r.length&&e.push(r);return bu([[],_1(),n.has(0)||i?[]:z1({}),e])}var ue="primary",Qu=Symbol("RouteTitle"),X0=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function hc(t){return new X0(t)}function eW(t,e,n){let i=n.path.split("/");if(i.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||i.length<t.length))return null;let r={};for(let o=0;o<i.length;o++){let s=i[o],a=t[o];if(s.startsWith(":"))r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,i.length),posParams:r}}function tW(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Qi(t[n],e[n]))return!1;return!0}function Qi(t,e){let n=t?J0(t):void 0,i=e?J0(e):void 0;if(!n||!i||n.length!=i.length)return!1;let r;for(let o=0;o<n.length;o++)if(r=n[o],!aP(t[r],e[r]))return!1;return!0}function J0(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function aP(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),i=[...e].sort();return n.every((r,o)=>i[o]===r)}else return t===e}function cP(t){return t.length>0?t[t.length-1]:null}function go(t){return Mf(t)?t:vs(t)?ve(Promise.resolve(t)):L(t)}var nW={exact:uP,subset:dP},lP={exact:iW,subset:rW,ignored:()=>!0};function J1(t,e,n){return nW[n.paths](t.root,e.root,n.matrixParams)&&lP[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function iW(t,e){return Qi(t,e)}function uP(t,e,n){if(!Cs(t.segments,e.segments)||!ap(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!t.children[i]||!uP(t.children[i],e.children[i],n))return!1;return!0}function rW(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>aP(t[n],e[n]))}function dP(t,e,n){return hP(t,e,e.segments,n)}function hP(t,e,n,i){if(t.segments.length>n.length){let r=t.segments.slice(0,n.length);return!(!Cs(r,n)||e.hasChildren()||!ap(r,n,i))}else if(t.segments.length===n.length){if(!Cs(t.segments,n)||!ap(t.segments,n,i))return!1;for(let r in e.children)if(!t.children[r]||!dP(t.children[r],e.children[r],i))return!1;return!0}else{let r=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!Cs(t.segments,r)||!ap(t.segments,r,i)||!t.children[ue]?!1:hP(t.children[ue],e,o,i)}}function ap(t,e,n){return e.every((i,r)=>lP[n](t[r].parameters,i.parameters))}var fo=class{constructor(e=new Me([],{}),n={},i=null){this.root=e,this.queryParams=n,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=hc(this.queryParams)),this._queryParamMap}toString(){return aW.serialize(this)}},Me=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return cp(this)}},Is=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=hc(this.parameters)),this._parameterMap}toString(){return mP(this)}};function oW(t,e){return Cs(t,e)&&t.every((n,i)=>Qi(n.parameters,e[i].parameters))}function Cs(t,e){return t.length!==e.length?!1:t.every((n,i)=>n.path===e[i].path)}function sW(t,e){let n=[];return Object.entries(t.children).forEach(([i,r])=>{i===ue&&(n=n.concat(e(r,i)))}),Object.entries(t.children).forEach(([i,r])=>{i!==ue&&(n=n.concat(e(r,i)))}),n}var Yu=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=A({token:e,factory:()=>(()=>new Uu)(),providedIn:"root"});let t=e;return t})(),Uu=class{parse(e){let n=new tw(e);return new fo(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Fu(e.root,!0)}`,i=uW(e.queryParams),r=typeof e.fragment=="string"?`#${cW(e.fragment)}`:"";return`${n}${i}${r}`}},aW=new Uu;function cp(t){return t.segments.map(e=>mP(e)).join("/")}function Fu(t,e){if(!t.hasChildren())return cp(t);if(e){let n=t.children[ue]?Fu(t.children[ue],!1):"",i=[];return Object.entries(t.children).forEach(([r,o])=>{r!==ue&&i.push(`${r}:${Fu(o,!1)}`)}),i.length>0?`${n}(${i.join("//")})`:n}else{let n=sW(t,(i,r)=>r===ue?[Fu(t.children[ue],!1)]:[`${r}:${Fu(i,!1)}`]);return Object.keys(t.children).length===1&&t.children[ue]!=null?`${cp(t)}/${n[0]}`:`${cp(t)}/(${n.join("//")})`}}function fP(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function op(t){return fP(t).replace(/%3B/gi,";")}function cW(t){return encodeURI(t)}function ew(t){return fP(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function lp(t){return decodeURIComponent(t)}function eP(t){return lp(t.replace(/\+/g,"%20"))}function mP(t){return`${ew(t.path)}${lW(t.parameters)}`}function lW(t){return Object.keys(t).map(e=>`;${ew(e)}=${ew(t[e])}`).join("")}function uW(t){let e=Object.keys(t).map(n=>{let i=t[n];return Array.isArray(i)?i.map(r=>`${op(n)}=${op(r)}`).join("&"):`${op(n)}=${op(i)}`}).filter(n=>!!n);return e.length?`?${e.join("&")}`:""}var dW=/^[^\/()?;#]+/;function K0(t){let e=t.match(dW);return e?e[0]:""}var hW=/^[^\/()?;=#]+/;function fW(t){let e=t.match(hW);return e?e[0]:""}var mW=/^[^=?&#]+/;function pW(t){let e=t.match(mW);return e?e[0]:""}var gW=/^[^&#]+/;function _W(t){let e=t.match(gW);return e?e[0]:""}var tw=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Me([],{}):new Me([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(i[ue]=new Me(e,n)),i}parseSegment(){let e=K0(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new S(4009,!1);return this.capture(e),new Is(lp(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=fW(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let r=K0(this.remaining);r&&(i=r,this.capture(i))}e[lp(n)]=lp(i)}parseQueryParam(e){let n=pW(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let s=_W(this.remaining);s&&(i=s,this.capture(i))}let r=eP(n),o=eP(i);if(e.hasOwnProperty(r)){let s=e[r];Array.isArray(s)||(s=[s],e[r]=s),s.push(o)}else e[r]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=K0(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new S(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ue);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[ue]:new Me([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new S(4011,!1)}};function pP(t){return t.segments.length>0?new Me([],{[ue]:t}):t}function gP(t){let e={};for(let i of Object.keys(t.children)){let r=t.children[i],o=gP(r);if(i===ue&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[i]=o)}let n=new Me(t.segments,e);return bW(n)}function bW(t){if(t.numberOfChildren===1&&t.children[ue]){let e=t.children[ue];return new Me(t.segments.concat(e.segments),e.children)}return t}function fc(t){return t instanceof fo}function yW(t,e,n=null,i=null){let r=_P(t);return bP(r,e,n,i)}function _P(t){let e;function n(o){let s={};for(let c of o.children){let l=n(c);s[c.outlet]=l}let a=new Me(o.url,s);return o===t&&(e=a),a}let i=n(t.root),r=pP(i);return e??r}function bP(t,e,n,i){let r=t;for(;r.parent;)r=r.parent;if(e.length===0)return Q0(r,r,r,n,i);let o=vW(e);if(o.toRoot())return Q0(r,r,new Me([],{}),n,i);let s=wW(o,r,t),a=s.processChildren?Vu(s.segmentGroup,s.index,o.commands):vP(s.segmentGroup,s.index,o.commands);return Q0(r,s.segmentGroup,a,n,i)}function up(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function $u(t){return typeof t=="object"&&t!=null&&t.outlets}function Q0(t,e,n,i,r){let o={};i&&Object.entries(i).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let s;t===e?s=n:s=yP(t,e,n);let a=pP(gP(s));return new fo(a,o,r)}function yP(t,e,n){let i={};return Object.entries(t.children).forEach(([r,o])=>{o===e?i[r]=n:i[r]=yP(o,e,n)}),new Me(t.segments,i)}var dp=class{constructor(e,n,i){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=i,e&&i.length>0&&up(i[0]))throw new S(4003,!1);let r=i.find($u);if(r&&r!==cP(i))throw new S(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function vW(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new dp(!0,0,t);let e=0,n=!1,i=t.reduce((r,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&r.push(a))}),r):[...r,o]},[]);return new dp(n,e,i)}var uc=class{constructor(e,n,i){this.segmentGroup=e,this.processChildren=n,this.index=i}};function wW(t,e,n){if(t.isAbsolute)return new uc(e,!0,0);if(!n)return new uc(e,!1,NaN);if(n.parent===null)return new uc(n,!0,0);let i=up(t.commands[0])?0:1,r=n.segments.length-1+i;return EW(n,r,t.numberOfDoubleDots)}function EW(t,e,n){let i=t,r=e,o=n;for(;o>r;){if(o-=r,i=i.parent,!i)throw new S(4005,!1);r=i.segments.length}return new uc(i,!1,r-o)}function xW(t){return $u(t[0])?t[0].outlets:{[ue]:t}}function vP(t,e,n){if(t||(t=new Me([],{})),t.segments.length===0&&t.hasChildren())return Vu(t,e,n);let i=IW(t,e,n),r=n.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){let o=new Me(t.segments.slice(0,i.pathIndex),{});return o.children[ue]=new Me(t.segments.slice(i.pathIndex),t.children),Vu(o,0,r)}else return i.match&&r.length===0?new Me(t.segments,{}):i.match&&!t.hasChildren()?nw(t,e,n):i.match?Vu(t,0,r):nw(t,e,n)}function Vu(t,e,n){if(n.length===0)return new Me(t.segments,{});{let i=xW(n),r={};if(Object.keys(i).some(o=>o!==ue)&&t.children[ue]&&t.numberOfChildren===1&&t.children[ue].segments.length===0){let o=Vu(t.children[ue],e,n);return new Me(t.segments,o.children)}return Object.entries(i).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(r[o]=vP(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{i[o]===void 0&&(r[o]=s)}),new Me(t.segments,r)}}function IW(t,e,n){let i=0,r=e,o={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(i>=n.length)return o;let s=t.segments[r],a=n[i];if($u(a))break;let c=`${a}`,l=i<n.length-1?n[i+1]:null;if(r>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!nP(c,l,s))return o;i+=2}else{if(!nP(c,{},s))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function nw(t,e,n){let i=t.segments.slice(0,e),r=0;for(;r<n.length;){let o=n[r];if($u(o)){let c=CW(o.outlets);return new Me(i,c)}if(r===0&&up(n[0])){let c=t.segments[e];i.push(new Is(c.path,tP(n[0]))),r++;continue}let s=$u(o)?o.outlets[ue]:`${o}`,a=r<n.length-1?n[r+1]:null;s&&a&&up(a)?(i.push(new Is(s,tP(a))),r+=2):(i.push(new Is(s,{})),r++)}return new Me(i,{})}function CW(t){let e={};return Object.entries(t).forEach(([n,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[n]=nw(new Me([],{}),0,i))}),e}function tP(t){let e={};return Object.entries(t).forEach(([n,i])=>e[n]=`${i}`),e}function nP(t,e,n){return t==n.path&&Qi(e,n.parameters)}var ju="imperative",ti=class{constructor(e,n){this.id=e,this.url=n}},mc=class extends ti{constructor(e,n,i="imperative",r=null){super(e,n),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Tr=class extends ti{constructor(e,n,i){super(e,n),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},mo=class extends ti{constructor(e,n,i,r){super(e,n),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},po=class extends ti{constructor(e,n,i,r){super(e,n),this.reason=i,this.code=r,this.type=16}},zu=class extends ti{constructor(e,n,i,r){super(e,n),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},hp=class extends ti{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},iw=class extends ti{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},rw=class extends ti{constructor(e,n,i,r,o){super(e,n),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},ow=class extends ti{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},sw=class extends ti{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},aw=class{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},cw=class{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},lw=class{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},uw=class{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},dw=class{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},hw=class{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},fp=class{constructor(e,n,i){this.routerEvent=e,this.position=n,this.anchor=i,this.type=15}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Hu=class{},qu=class{constructor(e){this.url=e}};var fw=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Zu,this.attachRef=null}},Zu=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(i,r){let o=this.getOrCreateContext(i);o.outlet=r,this.contexts.set(i,o)}onChildOutletDestroyed(i){let r=this.getContext(i);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let r=this.getContext(i);return r||(r=new fw,this.contexts.set(i,r)),r}getContext(i){return this.contexts.get(i)||null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),mp=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=mw(e,this._root);return n?n.children.map(i=>i.value):[]}firstChild(e){let n=mw(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=pw(e,this._root);return n.length<2?[]:n[n.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return pw(e,this._root).map(n=>n.value)}};function mw(t,e){if(t===e.value)return e;for(let n of e.children){let i=mw(t,n);if(i)return i}return null}function pw(t,e){if(t===e.value)return[e];for(let n of e.children){let i=pw(t,n);if(i.length)return i.unshift(e),i}return[]}var Bn=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function lc(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var pp=class extends mp{constructor(e,n){super(e),this.snapshot=n,Cw(this,e)}toString(){return this.snapshot.toString()}};function wP(t,e){let n=TW(t,e),i=new _t([new Is("",{})]),r=new _t({}),o=new _t({}),s=new _t({}),a=new _t(""),c=new pc(i,r,s,a,o,ue,e,n.root);return c.snapshot=n.root,new pp(new Bn(c,[]),n)}function TW(t,e){let n={},i={},r={},o="",s=new Wu([],n,r,o,i,ue,e,null,{});return new gp("",new Bn(s,[]))}var pc=class{constructor(e,n,i,r,o,s,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(B(l=>l[Qu]))??L(void 0),this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(B(e=>hc(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(B(e=>hc(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Iw(t,e,n="emptyOnly"){let i,{routeConfig:r}=t;return e!==null&&(n==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:M(M({},e.params),t.params),data:M(M({},e.data),t.data),resolve:M(M(M(M({},t.data),e.data),r?.data),t._resolvedData)}:i={params:M({},t.params),data:M({},t.data),resolve:M(M({},t.data),t._resolvedData??{})},r&&xP(r)&&(i.resolve[Qu]=r.title),i}var Wu=class{get title(){return this.data?.[Qu]}constructor(e,n,i,r,o,s,a,c,l){this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=hc(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=hc(this.queryParams)),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},gp=class extends mp{constructor(e,n){super(n),this.url=e,Cw(this,n)}toString(){return EP(this._root)}};function Cw(t,e){e.value._routerState=t,e.children.forEach(n=>Cw(t,n))}function EP(t){let e=t.children.length>0?` { ${t.children.map(EP).join(", ")} } `:"";return`${t.value}${e}`}function Y0(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Qi(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Qi(e.params,n.params)||t.paramsSubject.next(n.params),tW(e.url,n.url)||t.urlSubject.next(n.url),Qi(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function gw(t,e){let n=Qi(t.params,e.params)&&oW(t.url,e.url),i=!t.parent!=!e.parent;return n&&!i&&(!t.parent||gw(t.parent,e.parent))}function xP(t){return typeof t.title=="string"||t.title===null}var DW=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=ue,this.activateEvents=new re,this.deactivateEvents=new re,this.attachEvents=new re,this.detachEvents=new re,this.parentContexts=T(Zu),this.location=T(hn),this.changeDetector=T(Yt),this.environmentInjector=T(In),this.inputBinder=T(wp,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(i){if(i.name){let{firstChange:r,previousValue:o}=i.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(i){return this.parentContexts.getContext(i)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let i=this.parentContexts.getContext(this.name);i?.route&&(i.attachRef?this.attach(i.attachRef,i.route):this.activateWith(i.route,i.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new S(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new S(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new S(4012,!1);this.location.detach();let i=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(i.instance),i}attach(i,r){this.activated=i,this._activatedRoute=r,this.location.insert(i.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(i.instance)}deactivate(){if(this.activated){let i=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(i)}}activateWith(i,r){if(this.isActivated)throw new S(4013,!1);this._activatedRoute=i;let o=this.location,a=i.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new _w(i,c,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:l,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=_e({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Gi]});let t=e;return t})(),_w=class{constructor(e,n,i){this.route=e,this.childContexts=n,this.parent=i}get(e,n){return e===pc?this.route:e===Zu?this.childContexts:this.parent.get(e,n)}},wp=new C(""),iP=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(i){this.unsubscribeFromRouteData(i),this.subscribeToRouteData(i)}unsubscribeFromRouteData(i){this.outletDataSubscriptions.get(i)?.unsubscribe(),this.outletDataSubscriptions.delete(i)}subscribeToRouteData(i){let{activatedRoute:r}=i,o=is([r.queryParams,r.params,r.data]).pipe(qe(([s,a,c],l)=>(c=M(M(M({},s),a),c),l===0?L(c):Promise.resolve(c)))).subscribe(s=>{if(!i.isActivated||!i.activatedComponentRef||i.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(i);return}let a=b1(r.component);if(!a){this.unsubscribeFromRouteData(i);return}for(let{templateName:c}of a.inputs)i.activatedComponentRef.setInput(c,s[c])});this.outletDataSubscriptions.set(i,o)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=A({token:e,factory:e.\u0275fac});let t=e;return t})();function SW(t,e,n){let i=Gu(t,e._root,n?n._root:void 0);return new pp(i,e)}function Gu(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let i=n.value;i._futureSnapshot=e.value;let r=AW(t,e,n);return new Bn(i,r)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Gu(t,a)),s}}let i=kW(e.value),r=e.children.map(o=>Gu(t,o));return new Bn(i,r)}}function AW(t,e,n){return e.children.map(i=>{for(let r of n.children)if(t.shouldReuseRoute(i.value,r.value.snapshot))return Gu(t,i,r);return Gu(t,i)})}function kW(t){return new pc(new _t(t.url),new _t(t.params),new _t(t.queryParams),new _t(t.fragment),new _t(t.data),t.outlet,t.component,t)}var IP="ngNavigationCancelingError";function CP(t,e){let{redirectTo:n,navigationBehaviorOptions:i}=fc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=TP(!1,0,e);return r.url=n,r.navigationBehaviorOptions=i,r}function TP(t,e,n){let i=new Error("NavigationCancelingError: "+(t||""));return i[IP]=!0,i.cancellationCode=e,n&&(i.url=n),i}function MW(t){return DP(t)&&fc(t.url)}function DP(t){return t&&t[IP]}var RW=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Qe({type:e,selectors:[["ng-component"]],standalone:!0,features:[g0],decls:1,vars:0,template:function(r,o){r&1&&ke(0,"router-outlet")},dependencies:[DW],encapsulation:2});let t=e;return t})();function PW(t,e){return t.providers&&!t._injector&&(t._injector=Um(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Tw(t){let e=t.children&&t.children.map(Tw),n=e?Ae(M({},t),{children:e}):M({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==ue&&(n.component=RW),n}function Yi(t){return t.outlet||ue}function NW(t,e){let n=t.filter(i=>Yi(i)===e);return n.push(...t.filter(i=>Yi(i)!==e)),n}function Xu(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var FW=(t,e,n,i)=>B(r=>(new bw(e,r.targetRouterState,r.currentRouterState,n,i).activate(t),r)),bw=class{constructor(e,n,i,r,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,i,e),Y0(this.futureState.root),this.activateChildRoutes(n,i,e)}deactivateChildRoutes(e,n,i){let r=lc(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,r[s],i),delete r[s]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(e,n,i){let r=e.value,o=n?n.value:null;if(r===o)if(r.component){let s=i.getContext(r.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,i);else o&&this.deactivateRouteAndItsChildren(n,i)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let i=n.getContext(e.value.outlet),r=i&&e.value.component?i.children:n,o=lc(e);for(let s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],r);if(i&&i.outlet){let s=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let i=n.getContext(e.value.outlet),r=i&&e.value.component?i.children:n,o=lc(e);for(let s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,n,i){let r=lc(n);e.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new hw(o.value.snapshot))}),e.children.length&&this.forwardEvent(new uw(e.value.snapshot))}activateRoutes(e,n,i){let r=e.value,o=n?n.value:null;if(Y0(r),r===o)if(r.component){let s=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,i);else if(r.component){let s=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Y0(a.route.value),this.activateChildRoutes(e,null,s.children)}else{let a=Xu(r.snapshot);s.attachRef=null,s.route=r,s.injector=a,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,i)}},_p=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},dc=class{constructor(e,n){this.component=e,this.route=n}};function OW(t,e,n){let i=t._root,r=e?e._root:null;return Ou(i,r,n,[i.value])}function LW(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function _c(t,e){let n=Symbol(),i=e.get(t,n);return i===n?typeof t=="function"&&!dk(t)?t:e.get(t):i}function Ou(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=lc(e);return t.children.forEach(s=>{VW(s,o[s.value.outlet],n,i.concat([s.value]),r),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Bu(a,n.getContext(s),r)),r}function VW(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=jW(s,o,o.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new _p(i)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Ou(t,e,a?a.children:null,i,r):Ou(t,e,n,i,r),c&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new dc(a.outlet.component,s))}else s&&Bu(e,a,r),r.canActivateChecks.push(new _p(i)),o.component?Ou(t,null,a?a.children:null,i,r):Ou(t,null,n,i,r);return r}function jW(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Cs(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Cs(t.url,e.url)||!Qi(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!gw(t,e)||!Qi(t.queryParams,e.queryParams);case"paramsChange":default:return!gw(t,e)}}function Bu(t,e,n){let i=lc(t),r=t.value;Object.entries(i).forEach(([o,s])=>{r.component?e?Bu(s,e.children.getContext(o),n):Bu(s,null,n):Bu(s,e,n)}),r.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new dc(e.outlet.component,r)):n.canDeactivateChecks.push(new dc(null,r)):n.canDeactivateChecks.push(new dc(null,r))}function Ju(t){return typeof t=="function"}function BW(t){return typeof t=="boolean"}function UW(t){return t&&Ju(t.canLoad)}function $W(t){return t&&Ju(t.canActivate)}function zW(t){return t&&Ju(t.canActivateChild)}function HW(t){return t&&Ju(t.canDeactivate)}function qW(t){return t&&Ju(t.canMatch)}function SP(t){return t instanceof pr||t?.name==="EmptyError"}var sp=Symbol("INITIAL_VALUE");function gc(){return qe(t=>is(t.map(e=>e.pipe(Kt(1),wn(sp)))).pipe(B(e=>{for(let n of e)if(n!==!0){if(n===sp)return sp;if(n===!1||n instanceof fo)return n}return!0}),He(e=>e!==sp),Kt(1)))}function WW(t,e){return ct(n=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?L(Ae(M({},n),{guardsResult:!0})):GW(s,i,r,t).pipe(ct(a=>a&&BW(a)?KW(i,o,t,e):L(a)),B(a=>Ae(M({},n),{guardsResult:a})))})}function GW(t,e,n,i){return ve(t).pipe(ct(r=>JW(r.component,r.route,n,e,i)),On(r=>r!==!0,!0))}function KW(t,e,n,i){return ve(e).pipe(gr(r=>Wr(YW(r.route.parent,i),QW(r.route,i),XW(t,r.path,n),ZW(t,r.route,n))),On(r=>r!==!0,!0))}function QW(t,e){return t!==null&&e&&e(new dw(t)),L(!0)}function YW(t,e){return t!==null&&e&&e(new lw(t)),L(!0)}function ZW(t,e,n){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return L(!0);let r=i.map(o=>Nf(()=>{let s=Xu(e)??n,a=_c(o,s),c=$W(a)?a.canActivate(e,t):vr(s,()=>a(e,t));return go(c).pipe(On())}));return L(r).pipe(gc())}function XW(t,e,n){let i=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>LW(s)).filter(s=>s!==null).map(s=>Nf(()=>{let a=s.guards.map(c=>{let l=Xu(s.node)??n,u=_c(c,l),d=zW(u)?u.canActivateChild(i,t):vr(l,()=>u(i,t));return go(d).pipe(On())});return L(a).pipe(gc())}));return L(o).pipe(gc())}function JW(t,e,n,i,r){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return L(!0);let s=o.map(a=>{let c=Xu(e)??r,l=_c(a,c),u=HW(l)?l.canDeactivate(t,e,n,i):vr(c,()=>l(t,e,n,i));return go(u).pipe(On())});return L(s).pipe(gc())}function eG(t,e,n,i){let r=e.canLoad;if(r===void 0||r.length===0)return L(!0);let o=r.map(s=>{let a=_c(s,t),c=UW(a)?a.canLoad(e,n):vr(t,()=>a(e,n));return go(c)});return L(o).pipe(gc(),AP(i))}function AP(t){return zb(Oe(e=>{if(fc(e))throw CP(t,e)}),B(e=>e===!0))}function tG(t,e,n,i){let r=e.canMatch;if(!r||r.length===0)return L(!0);let o=r.map(s=>{let a=_c(s,t),c=qW(a)?a.canMatch(e,n):vr(t,()=>a(e,n));return go(c)});return L(o).pipe(gc(),AP(i))}var Ku=class{constructor(e){this.segmentGroup=e||null}},bp=class extends Error{constructor(e){super(),this.urlTree=e}};function cc(t){return Hr(new Ku(t))}function nG(t){return Hr(new S(4e3,!1))}function iG(t){return Hr(TP(!1,3))}var yw=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let i=[],r=n.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return L(i);if(r.numberOfChildren>1||!r.children[ue])return nG(e.redirectTo);r=r.children[ue]}}applyRedirectCommands(e,n,i){let r=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,i);if(n.startsWith("/"))throw new bp(r);return r}applyRedirectCreateUrlTree(e,n,i,r){let o=this.createSegmentGroup(e,n.root,i,r);return new fo(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let i={};return Object.entries(e).forEach(([r,o])=>{if(typeof o=="string"&&o.startsWith(":")){let a=o.substring(1);i[r]=n[a]}else i[r]=o}),i}createSegmentGroup(e,n,i,r){let o=this.createSegments(e,n.segments,i,r),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,i,r)}),new Me(o,s)}createSegments(e,n,i,r){return n.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,r):this.findOrReturn(o,i))}findPosParam(e,n,i){let r=i[n.path.substring(1)];if(!r)throw new S(4001,!1);return r}findOrReturn(e,n){let i=0;for(let r of n){if(r.path===e.path)return n.splice(i),r;i++}return e}},vw={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function rG(t,e,n,i,r){let o=Dw(t,e,n);return o.matched?(i=PW(e,i),tG(i,e,n,r).pipe(B(s=>s===!0?o:M({},vw)))):L(o)}function Dw(t,e,n){if(e.path==="**")return oG(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?M({},vw):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let r=(e.matcher||eW)(n,t,e);if(!r)return M({},vw);let o={};Object.entries(r.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=r.consumed.length>0?M(M({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:n.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function oG(t){return{matched:!0,parameters:t.length>0?cP(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function rP(t,e,n,i){return n.length>0&&cG(t,n,i)?{segmentGroup:new Me(e,aG(i,new Me(n,t.children))),slicedSegments:[]}:n.length===0&&lG(t,n,i)?{segmentGroup:new Me(t.segments,sG(t,e,n,i,t.children)),slicedSegments:n}:{segmentGroup:new Me(t.segments,t.children),slicedSegments:n}}function sG(t,e,n,i,r){let o={};for(let s of i)if(Ep(t,n,s)&&!r[Yi(s)]){let a=new Me([],{});o[Yi(s)]=a}return M(M({},r),o)}function aG(t,e){let n={};n[ue]=e;for(let i of t)if(i.path===""&&Yi(i)!==ue){let r=new Me([],{});n[Yi(i)]=r}return n}function cG(t,e,n){return n.some(i=>Ep(t,e,i)&&Yi(i)!==ue)}function lG(t,e,n){return n.some(i=>Ep(t,e,i))}function Ep(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function uG(t,e,n,i){return Yi(t)!==i&&(i===ue||!Ep(e,n,t))?!1:Dw(e,t,n).matched}function dG(t,e,n){return e.length===0&&!t.children[n]}var ww=class{};function hG(t,e,n,i,r,o,s="emptyOnly"){return new Ew(t,e,n,i,r,s,o).recognize()}var fG=31,Ew=class{constructor(e,n,i,r,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new yw(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new S(4002,`'${e.segmentGroup}'`)}recognize(){let e=rP(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(B(n=>{let i=new Wu([],Object.freeze({}),Object.freeze(M({},this.urlTree.queryParams)),this.urlTree.fragment,{},ue,this.rootComponentType,null,{}),r=new Bn(i,n),o=new gp("",r),s=yW(i,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,ue).pipe(ji(i=>{if(i instanceof bp)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Ku?this.noMatchError(i):i}))}inheritParamsAndData(e,n){let i=e.value,r=Iw(i,n,this.paramsInheritanceStrategy);i.params=Object.freeze(r.params),i.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o,i))}processSegmentGroup(e,n,i,r){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,n,i):this.processSegment(e,n,i,i.segments,r,!0).pipe(B(o=>o instanceof Bn?[o]:[]))}processChildren(e,n,i){let r=[];for(let o of Object.keys(i.children))o==="primary"?r.unshift(o):r.push(o);return ve(r).pipe(gr(o=>{let s=i.children[o],a=NW(n,o);return this.processSegmentGroup(e,a,s,o)}),ss((o,s)=>(o.push(...s),o)),Kr(null),Xb(),ct(o=>{if(o===null)return cc(i);let s=kP(o);return mG(s),L(s)}))}processSegment(e,n,i,r,o,s){return ve(n).pipe(gr(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,i,r,o,s).pipe(ji(c=>{if(c instanceof Ku)return L(null);throw c}))),On(a=>!!a),ji(a=>{if(SP(a))return dG(i,r,o)?L(new ww):cc(i);throw a}))}processSegmentAgainstRoute(e,n,i,r,o,s,a){return uG(i,r,o,s)?i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,r,n,i,o,s):cc(r):cc(r)}expandSegmentAgainstRouteUsingRedirect(e,n,i,r,o,s){let{matched:a,consumedSegments:c,positionalParamSegments:l,remainingSegments:u}=Dw(n,r,o);if(!a)return cc(n);r.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>fG&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(c,r.redirectTo,l);return this.applyRedirects.lineralizeSegments(r,d).pipe(ct(h=>this.processSegment(e,i,n,h.concat(u),s,!1)))}matchSegmentAgainstRoute(e,n,i,r,o){let s=rG(n,i,r,e,this.urlSerializer);return i.path==="**"&&(n.children={}),s.pipe(qe(a=>a.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(qe(({routes:c})=>{let l=i._loadedInjector??e,{consumedSegments:u,remainingSegments:d,parameters:h}=a,f=new Wu(u,h,Object.freeze(M({},this.urlTree.queryParams)),this.urlTree.fragment,gG(i),Yi(i),i.component??i._loadedComponent??null,i,_G(i)),{segmentGroup:m,slicedSegments:p}=rP(n,u,d,c);if(p.length===0&&m.hasChildren())return this.processChildren(l,c,m).pipe(B(w=>w===null?null:new Bn(f,w)));if(c.length===0&&p.length===0)return L(new Bn(f,[]));let g=Yi(i)===o;return this.processSegment(l,c,m,p,g?ue:o,!0).pipe(B(w=>new Bn(f,w instanceof Bn?[w]:[])))}))):cc(n)))}getChildConfig(e,n,i){return n.children?L({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?L({routes:n._loadedRoutes,injector:n._loadedInjector}):eG(e,n,i,this.urlSerializer).pipe(ct(r=>r?this.configLoader.loadChildren(e,n).pipe(Oe(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):iG(n))):L({routes:[],injector:e})}};function mG(t){t.sort((e,n)=>e.value.outlet===ue?-1:n.value.outlet===ue?1:e.value.outlet.localeCompare(n.value.outlet))}function pG(t){let e=t.value.routeConfig;return e&&e.path===""}function kP(t){let e=[],n=new Set;for(let i of t){if(!pG(i)){e.push(i);continue}let r=e.find(o=>i.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...i.children),n.add(r)):e.push(i)}for(let i of n){let r=kP(i.children);e.push(new Bn(i.value,r))}return e.filter(i=>!n.has(i))}function gG(t){return t.data||{}}function _G(t){return t.resolve||{}}function bG(t,e,n,i,r,o){return ct(s=>hG(t,e,n,i,s.extractedUrl,r,o).pipe(B(({state:a,tree:c})=>Ae(M({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function yG(t,e){return ct(n=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=n;if(!r.length)return L(n);let o=new Set(r.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of MP(c))s.add(l);let a=0;return ve(s).pipe(gr(c=>o.has(c)?vG(c,i,t,e):(c.data=Iw(c,c.parent,t).resolve,L(void 0))),Oe(()=>a++),Oa(1),ct(c=>a===s.size?L(n):Gt))})}function MP(t){let e=t.children.map(n=>MP(n)).flat();return[t,...e]}function vG(t,e,n,i){let r=t.routeConfig,o=t._resolve;return r?.title!==void 0&&!xP(r)&&(o[Qu]=r.title),wG(o,t,e,i).pipe(B(s=>(t._resolvedData=s,t.data=Iw(t,t.parent,n).resolve,null)))}function wG(t,e,n,i){let r=J0(t);if(r.length===0)return L({});let o={};return ve(r).pipe(ct(s=>EG(t[s],e,n,i).pipe(On(),Oe(a=>{o[s]=a}))),Oa(1),Zb(o),ji(s=>SP(s)?Gt:Hr(s)))}function EG(t,e,n,i){let r=Xu(e)??i,o=_c(t,r),s=o.resolve?o.resolve(e,n):vr(r,()=>o(e,n));return go(s)}function Z0(t){return qe(e=>{let n=t(e);return n?ve(n).pipe(B(()=>e)):L(e)})}var RP=(()=>{let e=class e{buildTitle(i){let r,o=i.root;for(;o!==void 0;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(s=>s.outlet===ue);return r}getResolvedTitleForRoute(i){return i.data[Qu]}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=A({token:e,factory:()=>(()=>T(xG))(),providedIn:"root"});let t=e;return t})(),xG=(()=>{let e=class e extends RP{constructor(i){super(),this.title=i}updateTitle(i){let r=this.buildTitle(i);r!==void 0&&this.title.setTitle(r)}};e.\u0275fac=function(r){return new(r||e)(y(q0))},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ed=new C("",{providedIn:"root",factory:()=>({})}),yp=new C("ROUTES"),Sw=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=T(Hm)}loadComponent(i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return L(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=go(i.loadComponent()).pipe(B(PP),Oe(s=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=s}),Yr(()=>{this.componentLoaders.delete(i)})),o=new ka(r,()=>new me).pipe(Aa());return this.componentLoaders.set(i,o),o}loadChildren(i,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return L({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=IG(r,this.compiler,i,this.onLoadEndListener).pipe(Yr(()=>{this.childrenLoaders.delete(r)})),a=new ka(s,()=>new me).pipe(Aa());return this.childrenLoaders.set(r,a),a}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function IG(t,e,n,i){return go(t.loadChildren()).pipe(B(PP),ct(r=>r instanceof lu||Array.isArray(r)?L(r):ve(e.compileModuleAsync(r))),B(r=>{i&&i(t);let o,s,a=!1;return Array.isArray(r)?(s=r,a=!0):(o=r.create(n).injector,s=o.get(yp,[],{optional:!0,self:!0}).flat()),{routes:s.map(Tw),injector:o}}))}function CG(t){return t&&typeof t=="object"&&"default"in t}function PP(t){return CG(t)?t.default:t}var Aw=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=A({token:e,factory:()=>(()=>T(TG))(),providedIn:"root"});let t=e;return t})(),TG=(()=>{let e=class e{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,r){return i}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),NP=new C(""),FP=new C("");function DG(t,e,n){let i=t.get(FP),r=t.get(ae);return t.get(V).runOutsideAngular(()=>{if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,Promise.resolve();let o,s=new Promise(l=>{o=l}),a=r.startViewTransition(()=>(o(),SG(t))),{onViewTransitionCreated:c}=i;return c&&vr(t,()=>c({transition:a,from:e,to:n})),s})}function SG(t){return new Promise(e=>{l0(e,{injector:t})})}var kw=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new me,this.transitionAbortSubject=new me,this.configLoader=T(Sw),this.environmentInjector=T(In),this.urlSerializer=T(Yu),this.rootContexts=T(Zu),this.location=T(sc),this.inputBindingEnabled=T(wp,{optional:!0})!==null,this.titleStrategy=T(RP),this.options=T(ed,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=T(Aw),this.createViewTransition=T(NP,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>L(void 0),this.rootComponentType=null;let i=o=>this.events.next(new aw(o)),r=o=>this.events.next(new cw(o));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=i}complete(){this.transitions?.complete()}handleNavigationRequest(i){let r=++this.navigationId;this.transitions?.next(Ae(M(M({},this.transitions.value),i),{id:r}))}setupNavigations(i,r,o){return this.transitions=new _t({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ju,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(He(s=>s.id!==0),B(s=>Ae(M({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),qe(s=>{this.currentTransition=s;let a=!1,c=!1;return L(s).pipe(Oe(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?Ae(M({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),qe(l=>{let u=!i.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=l.extras.onSameUrlNavigation??i.onSameUrlNavigation;if(!u&&d!=="reload"){let h="";return this.events.next(new po(l.id,this.urlSerializer.serialize(l.rawUrl),h,0)),l.resolve(null),Gt}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return L(l).pipe(qe(h=>{let f=this.transitions?.getValue();return this.events.next(new mc(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?Gt:Promise.resolve(h)}),bG(this.environmentInjector,this.configLoader,this.rootComponentType,i.config,this.urlSerializer,this.paramsInheritanceStrategy),Oe(h=>{s.targetSnapshot=h.targetSnapshot,s.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=Ae(M({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let f=new hp(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:h,extractedUrl:f,source:m,restoredState:p,extras:g}=l,w=new mc(h,this.urlSerializer.serialize(f),m,p);this.events.next(w);let k=wP(f,this.rootComponentType).snapshot;return this.currentTransition=s=Ae(M({},l),{targetSnapshot:k,urlAfterRedirects:f,extras:Ae(M({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,L(s)}else{let h="";return this.events.next(new po(l.id,this.urlSerializer.serialize(l.extractedUrl),h,1)),l.resolve(null),Gt}}),Oe(l=>{let u=new iw(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),B(l=>(this.currentTransition=s=Ae(M({},l),{guards:OW(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),s)),WW(this.environmentInjector,l=>this.events.next(l)),Oe(l=>{if(s.guardsResult=l.guardsResult,fc(l.guardsResult))throw CP(this.urlSerializer,l.guardsResult);let u=new rw(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(u)}),He(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",3),!1)),Z0(l=>{if(l.guards.canActivateChecks.length)return L(l).pipe(Oe(u=>{let d=new ow(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),qe(u=>{let d=!1;return L(u).pipe(yG(this.paramsInheritanceStrategy,this.environmentInjector),Oe({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(u,"",2)}}))}),Oe(u=>{let d=new sw(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}))}),Z0(l=>{let u=d=>{let h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(Oe(f=>{d.component=f}),B(()=>{})));for(let f of d.children)h.push(...u(f));return h};return is(u(l.targetSnapshot.root)).pipe(Kr(null),Kt(1))}),Z0(()=>this.afterPreactivation()),qe(()=>{let{currentSnapshot:l,targetSnapshot:u}=s,d=this.createViewTransition?.(this.environmentInjector,l.root,u.root);return d?ve(d).pipe(B(()=>s)):L(s)}),B(l=>{let u=SW(i.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s=Ae(M({},l),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,s}),Oe(()=>{this.events.next(new Hu)}),FW(this.rootContexts,i.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Kt(1),Oe({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Tr(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),En(this.transitionAbortSubject.pipe(Oe(l=>{throw l}))),Yr(()=>{if(!a&&!c){let l="";this.cancelNavigationTransition(s,l,1)}this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),ji(l=>{if(c=!0,DP(l))this.events.next(new mo(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),MW(l)?this.events.next(new qu(l.url)):s.resolve(!1);else{this.events.next(new zu(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0));try{s.resolve(i.errorHandler(l))}catch(u){s.reject(u)}}return Gt}))}))}cancelNavigationTransition(i,r,o){let s=new mo(i.id,this.urlSerializer.serialize(i.extractedUrl),r,o);this.events.next(s),i.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function AG(t){return t!==ju}var kG=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=A({token:e,factory:()=>(()=>T(MG))(),providedIn:"root"});let t=e;return t})(),xw=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},MG=(()=>{let e=class e extends xw{};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=ao(e)))(o||e)}})(),e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),OP=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=A({token:e,factory:()=>(()=>T(RG))(),providedIn:"root"});let t=e;return t})(),RG=(()=>{let e=class e extends OP{constructor(){super(...arguments),this.location=T(sc),this.urlSerializer=T(Yu),this.options=T(ed,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=T(Aw),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new fo,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=wP(this.currentUrlTree,null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(i){return this.location.subscribe(r=>{r.type==="popstate"&&i(r.url,r.state)})}handleRouterEvent(i,r){if(i instanceof mc)this.stateMemento=this.createStateMemento();else if(i instanceof po)this.rawUrlTree=r.initialUrl;else if(i instanceof hp){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(o,r)}}else i instanceof Hu?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):i instanceof mo&&(i.code===3||i.code===2)?this.restoreHistory(r):i instanceof zu?this.restoreHistory(r,!0):i instanceof Tr&&(this.lastSuccessfulId=i.id,this.currentPageId=this.browserPageId)}setBrowserUrl(i,r){let o=this.urlSerializer.serialize(i);if(this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl){let s=this.browserPageId,a=M(M({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(o,"",a)}else{let s=M(M({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(i,r=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===i.finalUrl&&s===0&&(this.resetState(i),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(i),this.resetUrlToCurrentUrlTree())}resetState(i){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(i,r){return this.canceledNavigationResolution==="computed"?{navigationId:i,\u0275routerPageId:r}:{navigationId:i}}};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=ao(e)))(o||e)}})(),e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Lu=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Lu||{});function LP(t,e){t.events.pipe(He(n=>n instanceof Tr||n instanceof mo||n instanceof zu||n instanceof po),B(n=>n instanceof Tr||n instanceof po?Lu.COMPLETE:(n instanceof mo?n.code===0||n.code===1:!1)?Lu.REDIRECTING:Lu.FAILED),He(n=>n!==Lu.REDIRECTING),Kt(1)).subscribe(()=>{e()})}function PG(t){throw t}var NG={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},FG={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ts=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=T(zm),this.stateManager=T(OP),this.options=T(ed,{optional:!0})||{},this.pendingTasks=T(Su),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=T(kw),this.urlSerializer=T(Yu),this.location=T(sc),this.urlHandlingStrategy=T(Aw),this._events=new me,this.errorHandler=this.options.errorHandler||PG,this.navigated=!1,this.routeReuseStrategy=T(kG),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=T(yp,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!T(wp,{optional:!0}),this.eventsSubscription=new Te,this.isNgZoneEnabled=T(V)instanceof V&&V.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:i=>{this.console.warn(i)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let i=this.navigationTransitions.events.subscribe(r=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof mo&&r.code!==0&&r.code!==1)this.navigated=!0;else if(r instanceof Tr)this.navigated=!0;else if(r instanceof qu){let a=this.urlHandlingStrategy.merge(r.url,o.currentRawUrl),c={skipLocationChange:o.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||AG(o.source)};this.scheduleNavigation(a,ju,null,c,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}LG(r)&&this._events.next(r)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(i)}resetRootComponentType(i){this.routerState.root.component=i,this.navigationTransitions.rootComponentType=i}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ju,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription||(this.nonRouterCurrentEntryChangeSubscription=this.stateManager.registerNonRouterCurrentEntryChangeListener((i,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(i,"popstate",r)},0)}))}navigateToSyncWithBrowser(i,r,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let l=M({},o);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let c=this.parseUrl(i);this.scheduleNavigation(c,r,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(i){this.config=i.map(Tw),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(i,r={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:c,preserveFragment:l}=r,u=l?this.currentUrlTree.fragment:a,d=null;switch(c){case"merge":d=M(M({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let f=o?o.snapshot:this.routerState.snapshot.root;h=_P(f)}catch{(typeof i[0]!="string"||!i[0].startsWith("/"))&&(i=[]),h=this.currentUrlTree.root}return bP(h,i,d,u??null)}navigateByUrl(i,r={skipLocationChange:!1}){let o=fc(i)?i:this.parseUrl(i),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,ju,null,r)}navigate(i,r={skipLocationChange:!1}){return OG(i),this.navigateByUrl(this.createUrlTree(i,r),r)}serializeUrl(i){return this.urlSerializer.serialize(i)}parseUrl(i){try{return this.urlSerializer.parse(i)}catch{return this.urlSerializer.parse("/")}}isActive(i,r){let o;if(r===!0?o=M({},NG):r===!1?o=M({},FG):o=r,fc(i))return J1(this.currentUrlTree,i,o);let s=this.parseUrl(i);return J1(this.currentUrlTree,s,o)}removeEmptyProps(i){return Object.keys(i).reduce((r,o)=>{let s=i[o];return s!=null&&(r[o]=s),r},{})}scheduleNavigation(i,r,o,s,a){if(this.disposed)return Promise.resolve(!1);let c,l,u;a?(c=a.resolve,l=a.reject,u=a.promise):u=new Promise((h,f)=>{c=h,l=f});let d=this.pendingTasks.add();return LP(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:i,extras:s,resolve:c,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(h=>Promise.reject(h))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function OG(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new S(4008,!1)}function LG(t){return!(t instanceof Hu)&&!(t instanceof qu)}var vp=class{};var VG=(()=>{let e=class e{constructor(i,r,o,s,a){this.router=i,this.injector=o,this.preloadingStrategy=s,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(He(i=>i instanceof Tr),gr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(i,r){let o=[];for(let s of r){s.providers&&!s._injector&&(s._injector=Um(s.providers,i,`Route: ${s.path}`));let a=s._injector??i,c=s._loadedInjector??a;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&o.push(this.preloadConfig(a,s)),(s.children||s._loadedRoutes)&&o.push(this.processRoutes(c,s.children??s._loadedRoutes))}return ve(o).pipe(qr())}preloadConfig(i,r){return this.preloadingStrategy.preload(r,()=>{let o;r.loadChildren&&r.canLoad===void 0?o=this.loader.loadChildren(i,r):o=L(null);let s=o.pipe(ct(a=>a===null?L(void 0):(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,this.processRoutes(a.injector??i,a.routes))));if(r.loadComponent&&!r._loadedComponent){let a=this.loader.loadComponent(r);return ve([s,a]).pipe(qr())}else return s})}};e.\u0275fac=function(r){return new(r||e)(y(Ts),y(Hm),y(In),y(vp),y(Sw))},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),VP=new C(""),jG=(()=>{let e=class e{constructor(i,r,o,s,a={}){this.urlSerializer=i,this.transitions=r,this.viewportScroller=o,this.zone=s,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration=a.scrollPositionRestoration||"disabled",a.anchorScrolling=a.anchorScrolling||"disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(i=>{i instanceof mc?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=i.navigationTrigger,this.restoredId=i.restoredState?i.restoredState.navigationId:0):i instanceof Tr?(this.lastId=i.id,this.scheduleScrollEvent(i,this.urlSerializer.parse(i.urlAfterRedirects).fragment)):i instanceof po&&i.code===0&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(i,this.urlSerializer.parse(i.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(i=>{i instanceof fp&&(i.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(i.position):i.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(i.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(i,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new fp(i,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(r){Rm()},e.\u0275prov=A({token:e,factory:e.\u0275fac});let t=e;return t})();function BG(t){return t.routerState.root}function td(t,e){return{\u0275kind:t,\u0275providers:e}}function UG(){let t=T(rt);return e=>{let n=t.get(wi);if(e!==n.components[0])return;let i=t.get(Ts),r=t.get(jP);t.get(Mw)===1&&i.initialNavigation(),t.get(BP,null,fe.Optional)?.setUpPreloading(),t.get(VP,null,fe.Optional)?.init(),i.resetRootComponentType(n.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var jP=new C("",{factory:()=>new me}),Mw=new C("",{providedIn:"root",factory:()=>1});function $G(){return td(2,[{provide:Mw,useValue:0},{provide:Gm,multi:!0,deps:[rt],useFactory:e=>{let n=e.get(I1,Promise.resolve());return()=>n.then(()=>new Promise(i=>{let r=e.get(Ts),o=e.get(jP);LP(r,()=>{i(!0)}),e.get(kw).afterPreactivation=()=>(i(!0),o.closed?L(void 0):o),r.initialNavigation()}))}}])}function zG(){return td(3,[{provide:Gm,multi:!0,useFactory:()=>{let e=T(Ts);return()=>{e.setUpLocationChangeListener()}}},{provide:Mw,useValue:2}])}var BP=new C("");function HG(t){return td(0,[{provide:BP,useExisting:VG},{provide:vp,useExisting:t}])}function qG(){return td(8,[iP,{provide:wp,useExisting:iP}])}function WG(t){let e=[{provide:NP,useValue:DG},{provide:FP,useValue:M({skipNextTransition:!!t?.skipInitialTransition},t)}];return td(9,e)}var oP=new C("ROUTER_FORROOT_GUARD"),GG=[sc,{provide:Yu,useClass:Uu},Ts,Zu,{provide:pc,useFactory:BG,deps:[Ts]},Sw,[]],Rw=(()=>{let e=class e{constructor(i){}static forRoot(i,r){return{ngModule:e,providers:[GG,[],{provide:yp,multi:!0,useValue:i},{provide:oP,useFactory:ZG,deps:[[Ts,new Ye,new _u]]},{provide:ed,useValue:r||{}},r?.useHash?QG():YG(),KG(),r?.preloadingStrategy?HG(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?XG(r):[],r?.bindToComponentInputs?qG().\u0275providers:[],r?.enableViewTransitions?WG().\u0275providers:[],JG()]}}static forChild(i){return{ngModule:e,providers:[{provide:yp,multi:!0,useValue:i}]}}};e.\u0275fac=function(r){return new(r||e)(y(oP,8))},e.\u0275mod=H({type:e}),e.\u0275inj=z({});let t=e;return t})();function KG(){return{provide:VP,useFactory:()=>{let t=T(k1),e=T(V),n=T(ed),i=T(kw),r=T(Yu);return n.scrollOffset&&t.setOffset(n.scrollOffset),new jG(r,i,t,e,n)}}}function QG(){return{provide:ws,useClass:T1}}function YG(){return{provide:ws,useClass:A0}}function ZG(t){return"guarded"}function XG(t){return[t.initialNavigation==="disabled"?zG().\u0275providers:[],t.initialNavigation==="enabledBlocking"?$G().\u0275providers:[]]}var sP=new C("");function JG(){return[{provide:sP,useFactory:UG},{provide:oc,multi:!0,useExisting:sP}]}var e8=[],UP=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=H({type:e}),e.\u0275inj=z({imports:[Rw.forRoot(e8),Rw]});let t=e;return t})();var Nw;try{Nw=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Nw=!1}var bt=(()=>{let e=class e{constructor(i){this._platformId=i,this.isBrowser=this._platformId?A1(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||Nw)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};e.\u0275fac=function(r){return new(r||e)(y(Ct))},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var nd;function t8(){if(nd==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>nd=!0}))}finally{nd=nd||!1}return nd}function _o(t){return t8()?t:!!t.capture}var Pw;function n8(){if(Pw==null){let t=typeof document<"u"?document.head:null;Pw=!!(t&&(t.createShadowRoot||t.attachShadow))}return Pw}function $P(t){if(n8()){let e=t.getRootNode?t.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function bo(t){return t.composedPath?t.composedPath()[0]:t.target}function zP(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function xp(t,...e){return e.length?e.some(n=>t[n]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}function Sn(t){return t!=null&&`${t}`!="false"}function Ss(t,e=0){return i8(t)?Number(t):e}function i8(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}function Fw(t){return Array.isArray(t)?t:[t]}function Dr(t){return t instanceof he?t.nativeElement:t}var HP=(()=>{let e=class e{create(i){return typeof MutationObserver>"u"?null:new MutationObserver(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),r8=(()=>{let e=class e{constructor(i){this._mutationObserverFactory=i,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((i,r)=>this._cleanupObserver(r))}observe(i){let r=Dr(i);return new Y(o=>{let a=this._observeElement(r).subscribe(o);return()=>{a.unsubscribe(),this._unobserveElement(r)}})}_observeElement(i){if(this._observedElements.has(i))this._observedElements.get(i).count++;else{let r=new me,o=this._mutationObserverFactory.create(s=>r.next(s));o&&o.observe(i,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(i,{observer:o,stream:r,count:1})}return this._observedElements.get(i).stream}_unobserveElement(i){this._observedElements.has(i)&&(this._observedElements.get(i).count--,this._observedElements.get(i).count||this._cleanupObserver(i))}_cleanupObserver(i){if(this._observedElements.has(i)){let{observer:r,stream:o}=this._observedElements.get(i);r&&r.disconnect(),o.complete(),this._observedElements.delete(i)}}};e.\u0275fac=function(r){return new(r||e)(y(HP))},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),qP=(()=>{let e=class e{get disabled(){return this._disabled}set disabled(i){this._disabled=i,this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(i){this._debounce=Ss(i),this._subscribe()}constructor(i,r,o){this._contentObserver=i,this._elementRef=r,this._ngZone=o,this.event=new re,this._disabled=!1,this._currentSubscription=null}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();let i=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?i.pipe(os(this.debounce)):i).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)(E(r8),E(he),E(V))},e.\u0275dir=_e({type:e,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled",$t],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"],features:[yi]});let t=e;return t})(),bc=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=H({type:e}),e.\u0275inj=z({providers:[HP]});let t=e;return t})();var WP=new Set,As,s8=(()=>{let e=class e{constructor(i,r){this._platform=i,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):c8}matchMedia(i){return(this._platform.WEBKIT||this._platform.BLINK)&&a8(i,this._nonce),this._matchMedia(i)}};e.\u0275fac=function(r){return new(r||e)(y(bt),y(yu,8))},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function a8(t,e){if(!WP.has(t))try{As||(As=document.createElement("style"),e&&(As.nonce=e),As.setAttribute("type","text/css"),document.head.appendChild(As)),As.sheet&&(As.sheet.insertRule(`@media ${t} {body{ }}`,0),WP.add(t))}catch(n){console.error(n)}}function c8(t){return{matches:t==="all"||t==="",media:t,addListener:()=>{},removeListener:()=>{}}}var KP=(()=>{let e=class e{constructor(i,r){this._mediaMatcher=i,this._zone=r,this._queries=new Map,this._destroySubject=new me}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(i){return GP(Fw(i)).some(o=>this._registerQuery(o).mql.matches)}observe(i){let o=GP(Fw(i)).map(a=>this._registerQuery(a).observable),s=is(o);return s=Wr(s.pipe(Kt(1)),s.pipe(as(1),os(0))),s.pipe(B(a=>{let c={matches:!1,breakpoints:{}};return a.forEach(({matches:l,query:u})=>{c.matches=c.matches||l,c.breakpoints[u]=l}),c}))}_registerQuery(i){if(this._queries.has(i))return this._queries.get(i);let r=this._mediaMatcher.matchMedia(i),s={observable:new Y(a=>{let c=l=>this._zone.run(()=>a.next(l));return r.addListener(c),()=>{r.removeListener(c)}}).pipe(wn(r),B(({matches:a})=>({query:i,matches:a})),En(this._destroySubject)),mql:r};return this._queries.set(i,s),s}};e.\u0275fac=function(r){return new(r||e)(y(s8),y(V))},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function GP(t){return t.map(e=>e.split(",")).reduce((e,n)=>e.concat(n)).map(e=>e.trim())}var Lw=class{constructor(e){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new me,this._typeaheadSubscription=Te.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=n=>n.disabled,this._pressedLetters=[],this.tabOut=new me,this.change=new me,e instanceof io&&(this._itemChangesSubscription=e.changes.subscribe(n=>{if(this._activeItem){let r=n.toArray().indexOf(this._activeItem);r>-1&&r!==this._activeItemIndex&&(this._activeItemIndex=r)}}))}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(Oe(n=>this._pressedLetters.push(n)),os(e),He(()=>this._pressedLetters.length>0),B(()=>this._pressedLetters.join(""))).subscribe(n=>{let i=this._getItemsArray();for(let r=1;r<i.length+1;r++){let o=(this._activeItemIndex+r)%i.length,s=i[o];if(!this._skipPredicateFn(s)&&s.getLabel().toUpperCase().trim().indexOf(n)===0){this.setActiveItem(o);break}}this._pressedLetters=[]}),this}cancelTypeahead(){return this._pressedLetters=[],this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}withPageUpDown(e=!0,n=10){return this._pageUpAndDown={enabled:e,delta:n},this}setActiveItem(e){let n=this._activeItem;this.updateActiveItem(e),this._activeItem!==n&&this.change.next(this._activeItemIndex)}onKeydown(e){let n=e.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(o=>!e[o]||this._allowedModifierKeys.indexOf(o)>-1);switch(n){case 9:this.tabOut.next();return;case 40:if(this._vertical&&r){this.setNextItemActive();break}else return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}else return;case 39:if(this._horizontal&&r){this._horizontal==="rtl"?this.setPreviousItemActive():this.setNextItemActive();break}else return;case 37:if(this._horizontal&&r){this._horizontal==="rtl"?this.setNextItemActive():this.setPreviousItemActive();break}else return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}else return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}else return;case 33:if(this._pageUpAndDown.enabled&&r){let o=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(o>0?o:0,1);break}else return;case 34:if(this._pageUpAndDown.enabled&&r){let o=this._activeItemIndex+this._pageUpAndDown.delta,s=this._getItemsArray().length;this._setActiveItemByIndex(o<s?o:s-1,-1);break}else return;default:(r||xp(e,"shiftKey"))&&(e.key&&e.key.length===1?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(n>=65&&n<=90||n>=48&&n<=57)&&this._letterKeyStream.next(String.fromCharCode(n)));return}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){let n=this._getItemsArray(),i=typeof e=="number"?e:n.indexOf(e),r=n[i];this._activeItem=r??null,this._activeItemIndex=i}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._letterKeyStream.complete(),this.tabOut.complete(),this.change.complete(),this._pressedLetters=[]}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){let n=this._getItemsArray();for(let i=1;i<=n.length;i++){let r=(this._activeItemIndex+e*i+n.length)%n.length,o=n[r];if(!this._skipPredicateFn(o)){this.setActiveItem(r);return}}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,n){let i=this._getItemsArray();if(i[e]){for(;this._skipPredicateFn(i[e]);)if(e+=n,!i[e])return;this.setActiveItem(e)}}_getItemsArray(){return this._items instanceof io?this._items.toArray():this._items}};var Cp=class extends Lw{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}};function Vw(t){return t.buttons===0||t.detail===0}function jw(t){let e=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var D8=new C("cdk-input-modality-detector-options"),S8={ignoreKeys:[18,17,224,91,16]},ZP=650,yc=_o({passive:!0,capture:!0}),A8=(()=>{let e=class e{get mostRecentModality(){return this._modality.value}constructor(i,r,o,s){this._platform=i,this._mostRecentTarget=null,this._modality=new _t(null),this._lastTouchMs=0,this._onKeydown=a=>{this._options?.ignoreKeys?.some(c=>c===a.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=bo(a))},this._onMousedown=a=>{Date.now()-this._lastTouchMs<ZP||(this._modality.next(Vw(a)?"keyboard":"mouse"),this._mostRecentTarget=bo(a))},this._onTouchstart=a=>{if(jw(a)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=bo(a)},this._options=M(M({},S8),s),this.modalityDetected=this._modality.pipe(as(1)),this.modalityChanged=this.modalityDetected.pipe(Qr()),i.isBrowser&&r.runOutsideAngular(()=>{o.addEventListener("keydown",this._onKeydown,yc),o.addEventListener("mousedown",this._onMousedown,yc),o.addEventListener("touchstart",this._onTouchstart,yc)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,yc),document.removeEventListener("mousedown",this._onMousedown,yc),document.removeEventListener("touchstart",this._onTouchstart,yc))}};e.\u0275fac=function(r){return new(r||e)(y(bt),y(V),y(ae),y(D8,8))},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var k8=new C("cdk-focus-monitor-default-options"),Ip=_o({passive:!0,capture:!0}),Tp=(()=>{let e=class e{constructor(i,r,o,s,a){this._ngZone=i,this._platform=r,this._inputModalityDetector=o,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new me,this._rootNodeFocusAndBlurListener=c=>{let l=bo(c);for(let u=l;u;u=u.parentElement)c.type==="focus"?this._onFocus(c,u):this._onBlur(c,u)},this._document=s,this._detectionMode=a?.detectionMode||0}monitor(i,r=!1){let o=Dr(i);if(!this._platform.isBrowser||o.nodeType!==1)return L();let s=$P(o)||this._getDocument(),a=this._elementInfo.get(o);if(a)return r&&(a.checkChildren=!0),a.subject;let c={checkChildren:r,subject:new me,rootNode:s};return this._elementInfo.set(o,c),this._registerGlobalListeners(c),c.subject}stopMonitoring(i){let r=Dr(i),o=this._elementInfo.get(r);o&&(o.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(o))}focusVia(i,r,o){let s=Dr(i),a=this._getDocument().activeElement;s===a?this._getClosestElementsInfo(s).forEach(([c,l])=>this._originChanged(c,r,l)):(this._setOrigin(r),typeof s.focus=="function"&&s.focus(o))}ngOnDestroy(){this._elementInfo.forEach((i,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(i){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(i)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:i&&this._isLastInteractionFromInputLabel(i)?"mouse":"program"}_shouldBeAttributedToTouch(i){return this._detectionMode===1||!!i?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(i,r){i.classList.toggle("cdk-focused",!!r),i.classList.toggle("cdk-touch-focused",r==="touch"),i.classList.toggle("cdk-keyboard-focused",r==="keyboard"),i.classList.toggle("cdk-mouse-focused",r==="mouse"),i.classList.toggle("cdk-program-focused",r==="program")}_setOrigin(i,r=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=i,this._originFromTouchInteraction=i==="touch"&&r,this._detectionMode===0){clearTimeout(this._originTimeoutId);let o=this._originFromTouchInteraction?ZP:1;this._originTimeoutId=setTimeout(()=>this._origin=null,o)}})}_onFocus(i,r){let o=this._elementInfo.get(r),s=bo(i);!o||!o.checkChildren&&r!==s||this._originChanged(r,this._getFocusOrigin(s),o)}_onBlur(i,r){let o=this._elementInfo.get(r);!o||o.checkChildren&&i.relatedTarget instanceof Node&&r.contains(i.relatedTarget)||(this._setClasses(r),this._emitOrigin(o,null))}_emitOrigin(i,r){i.subject.observers.length&&this._ngZone.run(()=>i.subject.next(r))}_registerGlobalListeners(i){if(!this._platform.isBrowser)return;let r=i.rootNode,o=this._rootNodeFocusListenerCount.get(r)||0;o||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,Ip),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,Ip)}),this._rootNodeFocusListenerCount.set(r,o+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(En(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(i){let r=i.rootNode;if(this._rootNodeFocusListenerCount.has(r)){let o=this._rootNodeFocusListenerCount.get(r);o>1?this._rootNodeFocusListenerCount.set(r,o-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Ip),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Ip),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(i,r,o){this._setClasses(i,r),this._emitOrigin(o,r),this._lastFocusOrigin=r}_getClosestElementsInfo(i){let r=[];return this._elementInfo.forEach((o,s)=>{(s===i||o.checkChildren&&s.contains(i))&&r.push([s,o])}),r}_isLastInteractionFromInputLabel(i){let{_mostRecentTarget:r,mostRecentModality:o}=this._inputModalityDetector;if(o!=="mouse"||!r||r===i||i.nodeName!=="INPUT"&&i.nodeName!=="TEXTAREA"||i.disabled)return!1;let s=i.labels;if(s){for(let a=0;a<s.length;a++)if(s[a].contains(r))return!0}return!1}};e.\u0275fac=function(r){return new(r||e)(y(V),y(bt),y(A8),y(ae,8),y(k8,8))},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),XP=(()=>{let e=class e{constructor(i,r){this._elementRef=i,this._focusMonitor=r,this._focusOrigin=null,this.cdkFocusChange=new re}get focusOrigin(){return this._focusOrigin}ngAfterViewInit(){let i=this._elementRef.nativeElement;this._monitorSubscription=this._focusMonitor.monitor(i,i.nodeType===1&&i.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(r=>{this._focusOrigin=r,this.cdkFocusChange.emit(r)})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._monitorSubscription&&this._monitorSubscription.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)(E(he),E(Tp))},e.\u0275dir=_e({type:e,selectors:[["","cdkMonitorElementFocus",""],["","cdkMonitorSubtreeFocus",""]],outputs:{cdkFocusChange:"cdkFocusChange"},exportAs:["cdkMonitorFocus"]});let t=e;return t})(),QP="cdk-high-contrast-black-on-white",YP="cdk-high-contrast-white-on-black",Ow="cdk-high-contrast-active",Bw=(()=>{let e=class e{constructor(i,r){this._platform=i,this._document=r,this._breakpointSubscription=T(KP).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;let i=this._document.createElement("div");i.style.backgroundColor="rgb(1,2,3)",i.style.position="absolute",this._document.body.appendChild(i);let r=this._document.defaultView||window,o=r&&r.getComputedStyle?r.getComputedStyle(i):null,s=(o&&o.backgroundColor||"").replace(/ /g,"");switch(i.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let i=this._document.body.classList;i.remove(Ow,QP,YP),this._hasCheckedHighContrastMode=!0;let r=this.getHighContrastMode();r===1?i.add(Ow,QP):r===2&&i.add(Ow,YP)}}};e.\u0275fac=function(r){return new(r||e)(y(bt),y(ae))},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),JP=(()=>{let e=class e{constructor(i){i._applyBodyHighContrastModeCssClasses()}};e.\u0275fac=function(r){return new(r||e)(y(Bw))},e.\u0275mod=H({type:e}),e.\u0275inj=z({imports:[bc]});let t=e;return t})();var M8=new C("cdk-dir-doc",{providedIn:"root",factory:R8});function R8(){return T(ae)}var P8=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function N8(t){let e=t?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?P8.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var Dp=(()=>{let e=class e{constructor(i){if(this.value="ltr",this.change=new re,i){let r=i.body?i.body.dir:null,o=i.documentElement?i.documentElement.dir:null;this.value=N8(r||o||"ltr")}}ngOnDestroy(){this.change.complete()}};e.\u0275fac=function(r){return new(r||e)(y(M8,8))},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Uw=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=H({type:e}),e.\u0275inj=z({});let t=e;return t})();var Zi="*";function tN(t,e){return{type:7,name:t,definitions:e,options:{}}}function Sp(t,e=null){return{type:4,styles:e,timings:t}}function nN(t,e=null){return{type:2,steps:t,options:e}}function Sr(t){return{type:6,styles:t,offset:null}}function Ap(t,e,n){return{type:0,name:t,styles:e,options:n}}function kp(t,e,n=null){return{type:1,expr:t,animation:e,options:n}}var yo=class{constructor(e=0,n=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+n}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let n=e=="start"?this._onStartFns:this._onDoneFns;n.forEach(i=>i()),n.length=0}},id=class{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let n=0,i=0,r=0,o=this.players.length;o==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++n==o&&this._onFinish()}),s.onDestroy(()=>{++i==o&&this._onDestroy()}),s.onStart(()=>{++r==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let n=e*this.totalTime;this.players.forEach(i=>{let r=i.totalTime?Math.min(1,n/i.totalTime):1;i.setPosition(r)})}getPosition(){let e=this.players.reduce((n,i)=>n===null||i.totalTime>n.totalTime?i:n,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let n=e=="start"?this._onStartFns:this._onDoneFns;n.forEach(i=>i()),n.length=0}},Mp="!";function iN(t){return new S(3e3,!1)}function O8(){return new S(3100,!1)}function L8(){return new S(3101,!1)}function V8(t){return new S(3001,!1)}function j8(t){return new S(3003,!1)}function B8(t){return new S(3004,!1)}function U8(t,e){return new S(3005,!1)}function $8(){return new S(3006,!1)}function z8(){return new S(3007,!1)}function H8(t,e){return new S(3008,!1)}function q8(t){return new S(3002,!1)}function W8(t,e,n,i,r){return new S(3010,!1)}function G8(){return new S(3011,!1)}function K8(){return new S(3012,!1)}function Q8(){return new S(3200,!1)}function Y8(){return new S(3202,!1)}function Z8(){return new S(3013,!1)}function X8(t){return new S(3014,!1)}function J8(t){return new S(3015,!1)}function e6(t){return new S(3016,!1)}function t6(t,e){return new S(3404,!1)}function n6(t){return new S(3502,!1)}function i6(t){return new S(3503,!1)}function r6(){return new S(3300,!1)}function o6(t){return new S(3504,!1)}function s6(t){return new S(3301,!1)}function a6(t,e){return new S(3302,!1)}function c6(t){return new S(3303,!1)}function l6(t,e){return new S(3400,!1)}function u6(t){return new S(3401,!1)}function d6(t){return new S(3402,!1)}function h6(t,e){return new S(3505,!1)}function vo(t){switch(t.length){case 0:return new yo;case 1:return t[0];default:return new id(t)}}function _N(t,e,n=new Map,i=new Map){let r=[],o=[],s=-1,a=null;if(e.forEach(c=>{let l=c.get("offset"),u=l==s,d=u&&a||new Map;c.forEach((h,f)=>{let m=f,p=h;if(f!=="offset")switch(m=t.normalizePropertyName(m,r),p){case Mp:p=n.get(f);break;case Zi:p=i.get(f);break;default:p=t.normalizeStyleValue(f,m,p,r);break}d.set(m,p)}),u||o.push(d),a=d,s=l}),r.length)throw n6(r);return o}function lE(t,e,n,i){switch(e){case"start":t.onStart(()=>i(n&&$w(n,"start",t)));break;case"done":t.onDone(()=>i(n&&$w(n,"done",t)));break;case"destroy":t.onDestroy(()=>i(n&&$w(n,"destroy",t)));break}}function $w(t,e,n){let i=n.totalTime,r=!!n.disabled,o=uE(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,i??t.totalTime,r),s=t._data;return s!=null&&(o._data=s),o}function uE(t,e,n,i,r="",o=0,s){return{element:t,triggerName:e,fromState:n,toState:i,phaseName:r,totalTime:o,disabled:!!s}}function $n(t,e,n){let i=t.get(e);return i||t.set(e,i=n),i}function rN(t){let e=t.indexOf(":"),n=t.substring(1,e),i=t.slice(e+1);return[n,i]}var f6=(()=>typeof document>"u"?null:document.documentElement)();function dE(t){let e=t.parentNode||t.host||null;return e===f6?null:e}function m6(t){return t.substring(1,6)=="ebkit"}var ks=null,oN=!1;function p6(t){ks||(ks=g6()||{},oN=ks.style?"WebkitAppearance"in ks.style:!1);let e=!0;return ks.style&&!m6(t)&&(e=t in ks.style,!e&&oN&&(e="Webkit"+t.charAt(0).toUpperCase()+t.slice(1)in ks.style)),e}function g6(){return typeof document<"u"?document.body:null}function bN(t,e){for(;e;){if(e===t)return!0;e=dE(e)}return!1}function yN(t,e,n){if(n)return Array.from(t.querySelectorAll(e));let i=t.querySelector(e);return i?[i]:[]}var hE=(()=>{let e=class e{validateStyleProperty(i){return p6(i)}matchesElement(i,r){return!1}containsElement(i,r){return bN(i,r)}getParentElement(i){return dE(i)}query(i,r,o){return yN(i,r,o)}computeStyle(i,r,o){return o||""}animate(i,r,o,s,a,c=[],l){return new yo(o,s)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=A({token:e,factory:e.\u0275fac});let t=e;return t})(),ud=(()=>{let e=class e{};e.NOOP=new hE;let t=e;return t})(),Ps=class{};var _6=1e3,vN="{{",b6="}}",wN="ng-enter",Kw="ng-leave",Rp="ng-trigger",Lp=".ng-trigger",sN="ng-animating",Qw=".ng-animating";function Ar(t){if(typeof t=="number")return t;let e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Yw(parseFloat(e[1]),e[2])}function Yw(t,e){switch(e){case"s":return t*_6;default:return t}}function Vp(t,e,n){return t.hasOwnProperty("duration")?t:y6(t,e,n)}function y6(t,e,n){let i=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,r,o=0,s="";if(typeof t=="string"){let a=t.match(i);if(a===null)return e.push(iN(t)),{duration:0,delay:0,easing:""};r=Yw(parseFloat(a[1]),a[2]);let c=a[3];c!=null&&(o=Yw(parseFloat(c),a[4]));let l=a[5];l&&(s=l)}else r=t;if(!n){let a=!1,c=e.length;r<0&&(e.push(O8()),a=!0),o<0&&(e.push(L8()),a=!0),a&&e.splice(c,0,iN(t))}return{duration:r,delay:o,easing:s}}function dd(t,e={}){return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}function EN(t){let e=new Map;return Object.keys(t).forEach(n=>{let i=t[n];e.set(n,i)}),e}function v6(t){return t.length?t[0]instanceof Map?t:t.map(e=>EN(e)):[]}function wc(t,e=new Map,n){if(n)for(let[i,r]of n)e.set(i,r);for(let[i,r]of t)e.set(i,r);return e}function Xi(t,e,n){e.forEach((i,r)=>{let o=fE(r);n&&!n.has(r)&&n.set(r,t.style[o]),t.style[o]=i})}function Rs(t,e){e.forEach((n,i)=>{let r=fE(i);t.style[r]=""})}function rd(t){return Array.isArray(t)?t.length==1?t[0]:nN(t):t}function w6(t,e,n){let i=e.params||{},r=xN(t);r.length&&r.forEach(o=>{i.hasOwnProperty(o)||n.push(V8(o))})}var Zw=new RegExp(`${vN}\\s*(.+?)\\s*${b6}`,"g");function xN(t){let e=[];if(typeof t=="string"){let n;for(;n=Zw.exec(t);)e.push(n[1]);Zw.lastIndex=0}return e}function sd(t,e,n){let i=t.toString(),r=i.replace(Zw,(o,s)=>{let a=e[s];return a==null&&(n.push(j8(s)),a=""),a.toString()});return r==i?t:r}function jp(t){let e=[],n=t.next();for(;!n.done;)e.push(n.value),n=t.next();return e}var E6=/-+([a-z0-9])/g;function fE(t){return t.replace(E6,(...e)=>e[1].toUpperCase())}function x6(t,e){return t===0||e===0}function I6(t,e,n){if(n.size&&e.length){let i=e[0],r=[];if(n.forEach((o,s)=>{i.has(s)||r.push(s),i.set(s,o)}),r.length)for(let o=1;o<e.length;o++){let s=e[o];r.forEach(a=>s.set(a,IN(t,a)))}}return e}function Un(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw B8(e.type)}}function IN(t,e){return window.getComputedStyle(t)[e]}var C6=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),Bp=class extends Ps{normalizePropertyName(e,n){return fE(e)}normalizeStyleValue(e,n,i,r){let o="",s=i.toString().trim();if(C6.has(n)&&i!==0&&i!=="0")if(typeof i=="number")o="px";else{let a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&r.push(U8(e,i))}return s+o}};var Up="*";function T6(t,e){let n=[];return typeof t=="string"?t.split(/\s*,\s*/).forEach(i=>D6(i,n,e)):n.push(t),n}function D6(t,e,n){if(t[0]==":"){let c=S6(t,n);if(typeof c=="function"){e.push(c);return}t=c}let i=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(i==null||i.length<4)return n.push(J8(t)),e;let r=i[1],o=i[2],s=i[3];e.push(aN(r,s));let a=r==Up&&s==Up;o[0]=="<"&&!a&&e.push(aN(s,r))}function S6(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(n,i)=>parseFloat(i)>parseFloat(n);case":decrement":return(n,i)=>parseFloat(i)<parseFloat(n);default:return e.push(e6(t)),"* => *"}}var Pp=new Set(["true","1"]),Np=new Set(["false","0"]);function aN(t,e){let n=Pp.has(t)||Np.has(t),i=Pp.has(e)||Np.has(e);return(r,o)=>{let s=t==Up||t==r,a=e==Up||e==o;return!s&&n&&typeof r=="boolean"&&(s=r?Pp.has(t):Np.has(t)),!a&&i&&typeof o=="boolean"&&(a=o?Pp.has(e):Np.has(e)),s&&a}}var CN=":self",A6=new RegExp(`s*${CN}s*,?`,"g");function TN(t,e,n,i){return new Xw(t).build(e,n,i)}var cN="",Xw=class{constructor(e){this._driver=e}build(e,n,i){let r=new Jw(n);return this._resetContextStyleTimingState(r),Un(this,rd(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector=cN,e.collectedStyles=new Map,e.collectedStyles.set(cN,new Map),e.currentTime=0}visitTrigger(e,n){let i=n.queryCount=0,r=n.depCount=0,o=[],s=[];return e.name.charAt(0)=="@"&&n.errors.push($8()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(n),a.type==0){let c=a,l=c.name;l.toString().split(/\s*,\s*/).forEach(u=>{c.name=u,o.push(this.visitState(c,n))}),c.name=l}else if(a.type==1){let c=this.visitTransition(a,n);i+=c.queryCount,r+=c.depCount,s.push(c)}else n.errors.push(z8())}),{type:7,name:e.name,states:o,transitions:s,queryCount:i,depCount:r,options:null}}visitState(e,n){let i=this.visitStyle(e.styles,n),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){let o=new Set,s=r||{};if(i.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{xN(c).forEach(l=>{s.hasOwnProperty(l)||o.add(l)})})}),o.size){let a=jp(o.values());n.errors.push(H8(e.name,a))}}return{type:0,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,n){n.queryCount=0,n.depCount=0;let i=Un(this,rd(e.animation),n);return{type:1,matchers:T6(e.expr,n.errors),animation:i,queryCount:n.queryCount,depCount:n.depCount,options:Ms(e.options)}}visitSequence(e,n){return{type:2,steps:e.steps.map(i=>Un(this,i,n)),options:Ms(e.options)}}visitGroup(e,n){let i=n.currentTime,r=0,o=e.steps.map(s=>{n.currentTime=i;let a=Un(this,s,n);return r=Math.max(r,n.currentTime),a});return n.currentTime=r,{type:3,steps:o,options:Ms(e.options)}}visitAnimate(e,n){let i=P6(e.timings,n.errors);n.currentAnimateTimings=i;let r,o=e.styles?e.styles:Sr({});if(o.type==5)r=this.visitKeyframes(o,n);else{let s=e.styles,a=!1;if(!s){a=!0;let l={};i.easing&&(l.easing=i.easing),s=Sr(l)}n.currentTime+=i.duration+i.delay;let c=this.visitStyle(s,n);c.isEmptyStep=a,r=c}return n.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(e,n){let i=this._makeStyleAst(e,n);return this._validateStyleAst(i,n),i}_makeStyleAst(e,n){let i=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of r)typeof a=="string"?a===Zi?i.push(a):n.errors.push(q8(a)):i.push(EN(a));let o=!1,s=null;return i.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!o)){for(let c of a.values())if(c.toString().indexOf(vN)>=0){o=!0;break}}}),{type:6,styles:i,easing:s,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,n){let i=n.currentAnimateTimings,r=n.currentTime,o=n.currentTime;i&&o>0&&(o-=i.duration+i.delay),e.styles.forEach(s=>{typeof s!="string"&&s.forEach((a,c)=>{let l=n.collectedStyles.get(n.currentQuerySelector),u=l.get(c),d=!0;u&&(o!=r&&o>=u.startTime&&r<=u.endTime&&(n.errors.push(W8(c,u.startTime,u.endTime,o,r)),d=!1),o=u.startTime),d&&l.set(c,{startTime:o,endTime:r}),n.options&&w6(a,n.options,n.errors)})})}visitKeyframes(e,n){let i={type:5,styles:[],options:null};if(!n.currentAnimateTimings)return n.errors.push(G8()),i;let r=1,o=0,s=[],a=!1,c=!1,l=0,u=e.steps.map(w=>{let k=this._makeStyleAst(w,n),D=k.offset!=null?k.offset:R6(k.styles),O=0;return D!=null&&(o++,O=k.offset=D),c=c||O<0||O>1,a=a||O<l,l=O,s.push(O),k});c&&n.errors.push(K8()),a&&n.errors.push(Q8());let d=e.steps.length,h=0;o>0&&o<d?n.errors.push(Y8()):o==0&&(h=r/(d-1));let f=d-1,m=n.currentTime,p=n.currentAnimateTimings,g=p.duration;return u.forEach((w,k)=>{let D=h>0?k==f?1:h*k:s[k],O=D*g;n.currentTime=m+p.delay+O,p.duration=O,this._validateStyleAst(w,n),w.offset=D,i.styles.push(w)}),i}visitReference(e,n){return{type:8,animation:Un(this,rd(e.animation),n),options:Ms(e.options)}}visitAnimateChild(e,n){return n.depCount++,{type:9,options:Ms(e.options)}}visitAnimateRef(e,n){return{type:10,animation:this.visitReference(e.animation,n),options:Ms(e.options)}}visitQuery(e,n){let i=n.currentQuerySelector,r=e.options||{};n.queryCount++,n.currentQuery=e;let[o,s]=k6(e.selector);n.currentQuerySelector=i.length?i+" "+o:o,$n(n.collectedStyles,n.currentQuerySelector,new Map);let a=Un(this,rd(e.animation),n);return n.currentQuery=null,n.currentQuerySelector=i,{type:11,selector:o,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:a,originalSelector:e.selector,options:Ms(e.options)}}visitStagger(e,n){n.currentQuery||n.errors.push(Z8());let i=e.timings==="full"?{duration:0,delay:0,easing:"full"}:Vp(e.timings,n.errors,!0);return{type:12,animation:Un(this,rd(e.animation),n),timings:i,options:null}}};function k6(t){let e=!!t.split(/\s*,\s*/).find(n=>n==CN);return e&&(t=t.replace(A6,"")),t=t.replace(/@\*/g,Lp).replace(/@\w+/g,n=>Lp+"-"+n.slice(1)).replace(/:animating/g,Qw),[t,e]}function M6(t){return t?dd(t):null}var Jw=class{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}};function R6(t){if(typeof t=="string")return null;let e=null;if(Array.isArray(t))t.forEach(n=>{if(n instanceof Map&&n.has("offset")){let i=n;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(t instanceof Map&&t.has("offset")){let n=t;e=parseFloat(n.get("offset")),n.delete("offset")}return e}function P6(t,e){if(t.hasOwnProperty("duration"))return t;if(typeof t=="number"){let o=Vp(t,e).duration;return zw(o,0,"")}let n=t;if(n.split(/\s+/).some(o=>o.charAt(0)=="{"&&o.charAt(1)=="{")){let o=zw(0,0,"");return o.dynamic=!0,o.strValue=n,o}let r=Vp(n,e);return zw(r.duration,r.delay,r.easing)}function Ms(t){return t?(t=dd(t),t.params&&(t.params=M6(t.params))):t={},t}function zw(t,e,n){return{duration:t,delay:e,easing:n}}function mE(t,e,n,i,r,o,s=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:i,duration:r,delay:o,totalTime:r+o,easing:s,subTimeline:a}}var ad=class{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,n){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...n)}has(e){return this._map.has(e)}clear(){this._map.clear()}},N6=1,F6=":enter",O6=new RegExp(F6,"g"),L6=":leave",V6=new RegExp(L6,"g");function DN(t,e,n,i,r,o=new Map,s=new Map,a,c,l=[]){return new eE().buildKeyframes(t,e,n,i,r,o,s,a,c,l)}var eE=class{buildKeyframes(e,n,i,r,o,s,a,c,l,u=[]){l=l||new ad;let d=new tE(e,n,l,r,o,u,[]);d.options=c;let h=c.delay?Ar(c.delay):0;d.currentTimeline.delayNextStep(h),d.currentTimeline.setStyles([s],null,d.errors,c),Un(this,i,d);let f=d.timelines.filter(m=>m.containsAnimation());if(f.length&&a.size){let m;for(let p=f.length-1;p>=0;p--){let g=f[p];if(g.element===n){m=g;break}}m&&!m.allowOnlyTimelineStyles()&&m.setStyles([a],null,d.errors,c)}return f.length?f.map(m=>m.buildKeyframes()):[mE(n,[],[],[],0,h,"",!1)]}visitTrigger(e,n){}visitState(e,n){}visitTransition(e,n){}visitAnimateChild(e,n){let i=n.subInstructions.get(n.element);if(i){let r=n.createSubContext(e.options),o=n.currentTimeline.currentTime,s=this._visitSubInstructions(i,r,r.options);o!=s&&n.transformIntoNewTimeline(s)}n.previousNode=e}visitAnimateRef(e,n){let i=n.createSubContext(e.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],n,i),this.visitReference(e.animation,i),n.transformIntoNewTimeline(i.currentTimeline.currentTime),n.previousNode=e}_applyAnimationRefDelays(e,n,i){for(let r of e){let o=r?.delay;if(o){let s=typeof o=="number"?o:Ar(sd(o,r?.params??{},n.errors));i.delayNextStep(s)}}}_visitSubInstructions(e,n,i){let o=n.currentTimeline.currentTime,s=i.duration!=null?Ar(i.duration):null,a=i.delay!=null?Ar(i.delay):null;return s!==0&&e.forEach(c=>{let l=n.appendInstructionToTimeline(c,s,a);o=Math.max(o,l.duration+l.delay)}),o}visitReference(e,n){n.updateOptions(e.options,!0),Un(this,e.animation,n),n.previousNode=e}visitSequence(e,n){let i=n.subContextCount,r=n,o=e.options;if(o&&(o.params||o.delay)&&(r=n.createSubContext(o),r.transformIntoNewTimeline(),o.delay!=null)){r.previousNode.type==6&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=$p);let s=Ar(o.delay);r.delayNextStep(s)}e.steps.length&&(e.steps.forEach(s=>Un(this,s,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),n.previousNode=e}visitGroup(e,n){let i=[],r=n.currentTimeline.currentTime,o=e.options&&e.options.delay?Ar(e.options.delay):0;e.steps.forEach(s=>{let a=n.createSubContext(e.options);o&&a.delayNextStep(o),Un(this,s,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(s=>n.currentTimeline.mergeTimelineCollectedStyles(s)),n.transformIntoNewTimeline(r),n.previousNode=e}_visitTiming(e,n){if(e.dynamic){let i=e.strValue,r=n.params?sd(i,n.params,n.errors):i;return Vp(r,n.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,n){let i=n.currentAnimateTimings=this._visitTiming(e.timings,n),r=n.currentTimeline;i.delay&&(n.incrementTime(i.delay),r.snapshotCurrentStyles());let o=e.style;o.type==5?this.visitKeyframes(o,n):(n.incrementTime(i.duration),this.visitStyle(o,n),r.applyStylesToKeyframe()),n.currentAnimateTimings=null,n.previousNode=e}visitStyle(e,n){let i=n.currentTimeline,r=n.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();let o=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(o):i.setStyles(e.styles,o,n.errors,n.options),n.previousNode=e}visitKeyframes(e,n){let i=n.currentAnimateTimings,r=n.currentTimeline.duration,o=i.duration,a=n.createSubContext().currentTimeline;a.easing=i.easing,e.styles.forEach(c=>{let l=c.offset||0;a.forwardTime(l*o),a.setStyles(c.styles,c.easing,n.errors,n.options),a.applyStylesToKeyframe()}),n.currentTimeline.mergeTimelineCollectedStyles(a),n.transformIntoNewTimeline(r+o),n.previousNode=e}visitQuery(e,n){let i=n.currentTimeline.currentTime,r=e.options||{},o=r.delay?Ar(r.delay):0;o&&(n.previousNode.type===6||i==0&&n.currentTimeline.hasCurrentStyleProperties())&&(n.currentTimeline.snapshotCurrentStyles(),n.previousNode=$p);let s=i,a=n.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,n.errors);n.currentQueryTotal=a.length;let c=null;a.forEach((l,u)=>{n.currentQueryIndex=u;let d=n.createSubContext(e.options,l);o&&d.delayNextStep(o),l===n.element&&(c=d.currentTimeline),Un(this,e.animation,d),d.currentTimeline.applyStylesToKeyframe();let h=d.currentTimeline.currentTime;s=Math.max(s,h)}),n.currentQueryIndex=0,n.currentQueryTotal=0,n.transformIntoNewTimeline(s),c&&(n.currentTimeline.mergeTimelineCollectedStyles(c),n.currentTimeline.snapshotCurrentStyles()),n.previousNode=e}visitStagger(e,n){let i=n.parentContext,r=n.currentTimeline,o=e.timings,s=Math.abs(o.duration),a=s*(n.currentQueryTotal-1),c=s*n.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":c=a-c;break;case"full":c=i.currentStaggerTime;break}let u=n.currentTimeline;c&&u.delayNextStep(c);let d=u.currentTime;Un(this,e.animation,n),n.previousNode=e,i.currentStaggerTime=r.currentTime-d+(r.startTime-i.currentTimeline.startTime)}},$p={},tE=class t{constructor(e,n,i,r,o,s,a,c){this._driver=e,this.element=n,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=o,this.errors=s,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=$p,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=c||new zp(this._driver,n,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,n){if(!e)return;let i=e,r=this.options;i.duration!=null&&(r.duration=Ar(i.duration)),i.delay!=null&&(r.delay=Ar(i.delay));let o=i.params;if(o){let s=r.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!n||!s.hasOwnProperty(a))&&(s[a]=sd(o[a],s,this.errors))})}}_copyOptions(){let e={};if(this.options){let n=this.options.params;if(n){let i=e.params={};Object.keys(n).forEach(r=>{i[r]=n[r]})}}return e}createSubContext(e=null,n,i){let r=n||this.element,o=new t(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=$p,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,n,i){let r={duration:n??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},o=new nE(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(o),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,n,i,r,o,s){let a=[];if(r&&a.push(this.element),e.length>0){e=e.replace(O6,"."+this._enterClassName),e=e.replace(V6,"."+this._leaveClassName);let c=i!=1,l=this._driver.query(this.element,e,c);i!==0&&(l=i<0?l.slice(l.length+i,l.length):l.slice(0,i)),a.push(...l)}return!o&&a.length==0&&s.push(X8(n)),a}},zp=class t{constructor(e,n,i,r){this._driver=e,this.element=n,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(n),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(n,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let n=this._keyframes.size===1&&this._pendingStyles.size;this.duration||n?(this.forwardTime(this.currentTime+e),n&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,n){return this.applyStylesToKeyframe(),new t(this._driver,e,n||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=N6,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,n){this._localTimelineStyles.set(e,n),this._globalTimelineStyles.set(e,n),this._styleSummary.set(e,{time:this.currentTime,value:n})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[n,i]of this._globalTimelineStyles)this._backFill.set(n,i||Zi),this._currentKeyframe.set(n,Zi);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,n,i,r){n&&this._previousKeyframe.set("easing",n);let o=r&&r.params||{},s=j6(e,this._globalTimelineStyles);for(let[a,c]of s){let l=sd(c,o,i);this._pendingStyles.set(a,l),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Zi),this._updateStyle(a,l)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,n)=>{this._currentKeyframe.set(n,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,n)=>{this._currentKeyframe.has(n)||this._currentKeyframe.set(n,e)}))}snapshotCurrentStyles(){for(let[e,n]of this._localTimelineStyles)this._pendingStyles.set(e,n),this._updateStyle(e,n)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let n in this._currentKeyframe)e.push(n);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((n,i)=>{let r=this._styleSummary.get(i);(!r||n.time>r.time)&&this._updateStyle(i,n.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,n=new Set,i=this._keyframes.size===1&&this.duration===0,r=[];this._keyframes.forEach((a,c)=>{let l=wc(a,new Map,this._backFill);l.forEach((u,d)=>{u===Mp?e.add(d):u===Zi&&n.add(d)}),i||l.set("offset",c/this.duration),r.push(l)});let o=e.size?jp(e.values()):[],s=n.size?jp(n.values()):[];if(i){let a=r[0],c=new Map(a);a.set("offset",0),c.set("offset",1),r=[a,c]}return mE(this.element,r,o,s,this.duration,this.startTime,this.easing,!1)}},nE=class extends zp{constructor(e,n,i,r,o,s,a=!1){super(e,n,s.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:n,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&n){let o=[],s=i+n,a=n/s,c=wc(e[0]);c.set("offset",0),o.push(c);let l=wc(e[0]);l.set("offset",lN(a)),o.push(l);let u=e.length-1;for(let d=1;d<=u;d++){let h=wc(e[d]),f=h.get("offset"),m=n+f*i;h.set("offset",lN(m/s)),o.push(h)}i=s,n=0,r="",e=o}return mE(this.element,e,this.preStyleProps,this.postStyleProps,i,n,r,!0)}};function lN(t,e=3){let n=Math.pow(10,e-1);return Math.round(t*n)/n}function j6(t,e){let n=new Map,i;return t.forEach(r=>{if(r==="*"){i=i||e.keys();for(let o of i)n.set(o,Zi)}else wc(r,n)}),n}function uN(t,e,n,i,r,o,s,a,c,l,u,d,h){return{type:0,element:t,triggerName:e,isRemovalTransition:r,fromState:n,fromStyles:o,toState:i,toStyles:s,timelines:a,queriedElements:c,preStyleProps:l,postStyleProps:u,totalTime:d,errors:h}}var Hw={},Hp=class{constructor(e,n,i){this._triggerName=e,this.ast=n,this._stateStyles=i}match(e,n,i,r){return B6(this.ast.matchers,e,n,i,r)}buildStyles(e,n,i){let r=this._stateStyles.get("*");return e!==void 0&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(n,i):new Map}build(e,n,i,r,o,s,a,c,l,u){let d=[],h=this.ast.options&&this.ast.options.params||Hw,f=a&&a.params||Hw,m=this.buildStyles(i,f,d),p=c&&c.params||Hw,g=this.buildStyles(r,p,d),w=new Set,k=new Map,D=new Map,O=r==="void",q={params:U6(p,h),delay:this.ast.options?.delay},G=u?[]:DN(e,n,this.ast.animation,o,s,m,g,q,l,d),de=0;if(G.forEach(Rn=>{de=Math.max(Rn.duration+Rn.delay,de)}),d.length)return uN(n,this._triggerName,i,r,O,m,g,[],[],k,D,de,d);G.forEach(Rn=>{let Kn=Rn.element,TS=$n(k,Kn,new Set);Rn.preStyleProps.forEach(Qo=>TS.add(Qo));let Vl=$n(D,Kn,new Set);Rn.postStyleProps.forEach(Qo=>Vl.add(Qo)),Kn!==n&&w.add(Kn)});let at=jp(w.values());return uN(n,this._triggerName,i,r,O,m,g,G,at,k,D,de)}};function B6(t,e,n,i,r){return t.some(o=>o(e,n,i,r))}function U6(t,e){let n=dd(e);for(let i in t)t.hasOwnProperty(i)&&t[i]!=null&&(n[i]=t[i]);return n}var iE=class{constructor(e,n,i){this.styles=e,this.defaultParams=n,this.normalizer=i}buildStyles(e,n){let i=new Map,r=dd(this.defaultParams);return Object.keys(e).forEach(o=>{let s=e[o];s!==null&&(r[o]=s)}),this.styles.styles.forEach(o=>{typeof o!="string"&&o.forEach((s,a)=>{s&&(s=sd(s,r,n));let c=this.normalizer.normalizePropertyName(a,n);s=this.normalizer.normalizeStyleValue(a,c,s,n),i.set(a,s)})}),i}};function $6(t,e,n){return new rE(t,e,n)}var rE=class{constructor(e,n,i){this.name=e,this.ast=n,this._normalizer=i,this.transitionFactories=[],this.states=new Map,n.states.forEach(r=>{let o=r.options&&r.options.params||{};this.states.set(r.name,new iE(r.style,o,i))}),dN(this.states,"true","1"),dN(this.states,"false","0"),n.transitions.forEach(r=>{this.transitionFactories.push(new Hp(e,r,this.states))}),this.fallbackTransition=z6(e,this.states,this._normalizer)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,n,i,r){return this.transitionFactories.find(s=>s.match(e,n,i,r))||null}matchStyles(e,n,i){return this.fallbackTransition.buildStyles(e,n,i)}};function z6(t,e,n){let o={type:1,animation:{type:2,steps:[],options:null},matchers:[(s,a)=>!0],options:null,queryCount:0,depCount:0};return new Hp(t,o,e)}function dN(t,e,n){t.has(e)?t.has(n)||t.set(n,t.get(e)):t.has(n)&&t.set(e,t.get(n))}var H6=new ad,oE=class{constructor(e,n,i){this.bodyNode=e,this._driver=n,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,n){let i=[],r=[],o=TN(this._driver,n,i,r);if(i.length)throw i6(i);r.length&&void 0,this._animations.set(e,o)}_buildPlayer(e,n,i){let r=e.element,o=_N(this._normalizer,e.keyframes,n,i);return this._driver.animate(r,o,e.duration,e.delay,e.easing,[],!0)}create(e,n,i={}){let r=[],o=this._animations.get(e),s,a=new Map;if(o?(s=DN(this._driver,n,o,wN,Kw,new Map,new Map,i,H6,r),s.forEach(u=>{let d=$n(a,u.element,new Map);u.postStyleProps.forEach(h=>d.set(h,null))})):(r.push(r6()),s=[]),r.length)throw o6(r);a.forEach((u,d)=>{u.forEach((h,f)=>{u.set(f,this._driver.computeStyle(d,f,Zi))})});let c=s.map(u=>{let d=a.get(u.element);return this._buildPlayer(u,new Map,d)}),l=vo(c);return this._playersById.set(e,l),l.onDestroy(()=>this.destroy(e)),this.players.push(l),l}destroy(e){let n=this._getPlayer(e);n.destroy(),this._playersById.delete(e);let i=this.players.indexOf(n);i>=0&&this.players.splice(i,1)}_getPlayer(e){let n=this._playersById.get(e);if(!n)throw s6(e);return n}listen(e,n,i,r){let o=uE(n,"","","");return lE(this._getPlayer(e),i,o,r),()=>{}}command(e,n,i,r){if(i=="register"){this.register(e,r[0]);return}if(i=="create"){let s=r[0]||{};this.create(e,n,s);return}let o=this._getPlayer(e);switch(i){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e);break}}},hN="ng-animate-queued",q6=".ng-animate-queued",qw="ng-animate-disabled",W6=".ng-animate-disabled",G6="ng-star-inserted",K6=".ng-star-inserted",Q6=[],SN={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Y6={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ei="__ng_removed",cd=class{get params(){return this.options.params}constructor(e,n=""){this.namespaceId=n;let i=e&&e.hasOwnProperty("value"),r=i?e.value:e;if(this.value=X6(r),i){let o=dd(e);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let n=e.params;if(n){let i=this.options.params;Object.keys(n).forEach(r=>{i[r]==null&&(i[r]=n[r])})}}},od="void",Ww=new cd(od),sE=class{constructor(e,n,i){this.id=e,this.hostElement=n,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,ni(n,this._hostClassName)}listen(e,n,i,r){if(!this._triggers.has(n))throw a6(i,n);if(i==null||i.length==0)throw c6(n);if(!J6(i))throw l6(i,n);let o=$n(this._elementListeners,e,[]),s={name:n,phase:i,callback:r};o.push(s);let a=$n(this._engine.statesByElement,e,new Map);return a.has(n)||(ni(e,Rp),ni(e,Rp+"-"+n),a.set(n,Ww)),()=>{this._engine.afterFlush(()=>{let c=o.indexOf(s);c>=0&&o.splice(c,1),this._triggers.has(n)||a.delete(n)})}}register(e,n){return this._triggers.has(e)?!1:(this._triggers.set(e,n),!0)}_getTrigger(e){let n=this._triggers.get(e);if(!n)throw u6(e);return n}trigger(e,n,i,r=!0){let o=this._getTrigger(n),s=new ld(this.id,n,e),a=this._engine.statesByElement.get(e);a||(ni(e,Rp),ni(e,Rp+"-"+n),this._engine.statesByElement.set(e,a=new Map));let c=a.get(n),l=new cd(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&c&&l.absorbOptions(c.options),a.set(n,l),c||(c=Ww),!(l.value===od)&&c.value===l.value){if(!n9(c.params,l.params)){let p=[],g=o.matchStyles(c.value,c.params,p),w=o.matchStyles(l.value,l.params,p);p.length?this._engine.reportError(p):this._engine.afterFlush(()=>{Rs(e,g),Xi(e,w)})}return}let h=$n(this._engine.playersByElement,e,[]);h.forEach(p=>{p.namespaceId==this.id&&p.triggerName==n&&p.queued&&p.destroy()});let f=o.matchTransition(c.value,l.value,e,l.params),m=!1;if(!f){if(!r)return;f=o.fallbackTransition,m=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:n,transition:f,fromState:c,toState:l,player:s,isFallbackTransition:m}),m||(ni(e,hN),s.onStart(()=>{vc(e,hN)})),s.onDone(()=>{let p=this.players.indexOf(s);p>=0&&this.players.splice(p,1);let g=this._engine.playersByElement.get(e);if(g){let w=g.indexOf(s);w>=0&&g.splice(w,1)}}),this.players.push(s),h.push(s),s}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(n=>n.delete(e)),this._elementListeners.forEach((n,i)=>{this._elementListeners.set(i,n.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let n=this._engine.playersByElement.get(e);n&&(n.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,n){let i=this._engine.driver.query(e,Lp,!0);i.forEach(r=>{if(r[Ei])return;let o=this._engine.fetchNamespacesByElement(r);o.size?o.forEach(s=>s.triggerLeaveAnimation(r,n,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,n,i,r){let o=this._engine.statesByElement.get(e),s=new Map;if(o){let a=[];if(o.forEach((c,l)=>{if(s.set(l,c.value),this._triggers.has(l)){let u=this.trigger(e,l,od,r);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,n,s),i&&vo(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let n=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(n&&i){let r=new Set;n.forEach(o=>{let s=o.name;if(r.has(s))return;r.add(s);let c=this._triggers.get(s).fallbackTransition,l=i.get(s)||Ww,u=new cd(od),d=new ld(this.id,s,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:s,transition:c,fromState:l,toState:u,player:d,isFallbackTransition:!0})})}}removeNode(e,n){let i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,n),this.triggerLeaveAnimation(e,n,!0))return;let r=!1;if(i.totalAnimations){let o=i.players.length?i.playersByQueriedElement.get(e):[];if(o&&o.length)r=!0;else{let s=e;for(;s=s.parentNode;)if(i.statesByElement.get(s)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,n);else{let o=e[Ei];(!o||o===SN)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,n))}}insertNode(e,n){ni(e,this._hostClassName)}drainQueuedTransitions(e){let n=[];return this._queue.forEach(i=>{let r=i.player;if(r.destroyed)return;let o=i.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==i.triggerName){let c=uE(o,i.triggerName,i.fromState.value,i.toState.value);c._data=e,lE(i.player,a.phase,c,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):n.push(i)}),this._queue=[],n.sort((i,r)=>{let o=i.transition.ast.depCount,s=r.transition.ast.depCount;return o==0||s==0?o-s:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(n=>n.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},aE=class{_onRemovalComplete(e,n){this.onRemovalComplete(e,n)}constructor(e,n,i){this.bodyNode=e,this.driver=n,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,o)=>{}}get queuedPlayers(){let e=[];return this._namespaceList.forEach(n=>{n.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,n){let i=new sE(e,n,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,n)?this._balanceNamespaceList(i,n):(this.newHostElements.set(n,i),this.collectEnterElement(n)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,n){let i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let s=!1,a=this.driver.getParentElement(n);for(;a;){let c=r.get(a);if(c){let l=i.indexOf(c);i.splice(l+1,0,e),s=!0;break}a=this.driver.getParentElement(a)}s||i.unshift(e)}else i.push(e);return r.set(n,e),e}register(e,n){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,n)),i}registerTrigger(e,n,i){let r=this._namespaceLookup[e];r&&r.register(n,i)&&this.totalAnimations++}destroy(e,n){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let i=this._fetchNamespace(e);this.namespacesByHostElement.delete(i.hostElement);let r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1),i.destroy(n),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let n=new Set,i=this.statesByElement.get(e);if(i){for(let r of i.values())if(r.namespaceId){let o=this._fetchNamespace(r.namespaceId);o&&n.add(o)}}return n}trigger(e,n,i,r){if(Fp(n)){let o=this._fetchNamespace(e);if(o)return o.trigger(n,i,r),!0}return!1}insertNode(e,n,i,r){if(!Fp(n))return;let o=n[Ei];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;let s=this.collectedLeaveElements.indexOf(n);s>=0&&this.collectedLeaveElements.splice(s,1)}if(e){let s=this._fetchNamespace(e);s&&s.insertNode(n,i)}r&&this.collectEnterElement(n)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,n){n?this.disabledNodes.has(e)||(this.disabledNodes.add(e),ni(e,qw)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),vc(e,qw))}removeNode(e,n,i){if(Fp(n)){let r=e?this._fetchNamespace(e):null;r?r.removeNode(n,i):this.markElementAsRemoved(e,n,!1,i);let o=this.namespacesByHostElement.get(n);o&&o.id!==e&&o.removeNode(n,i)}else this._onRemovalComplete(n,i)}markElementAsRemoved(e,n,i,r,o){this.collectedLeaveElements.push(n),n[Ei]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,n,i,r,o){return Fp(n)?this._fetchNamespace(e).listen(n,i,r,o):()=>{}}_buildInstruction(e,n,i,r,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,n,o)}destroyInnerAnimations(e){let n=this.driver.query(e,Lp,!0);n.forEach(i=>this.destroyActiveAnimationsForElement(i)),this.playersByQueriedElement.size!=0&&(n=this.driver.query(e,Qw,!0),n.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){let n=this.playersByElement.get(e);n&&n.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){let n=this.playersByQueriedElement.get(e);n&&n.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return vo(this.players).onDone(()=>e());e()})}processLeaveNode(e){let n=e[Ei];if(n&&n.setForRemoval){if(e[Ei]=SN,n.namespaceId){this.destroyInnerAnimations(e);let i=this._fetchNamespace(n.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,n.setForRemoval)}e.classList?.contains(qw)&&this.markElementAsDisabled(e,!1),this.driver.query(e,W6,!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let n=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++){let r=this.collectedEnterElements[i];ni(r,G6)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let i=[];try{n=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++){let r=this.collectedLeaveElements[i];this.processLeaveNode(r)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){let i=this._whenQuietFns;this._whenQuietFns=[],n.length?vo(n).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw d6(e)}_flushAnimations(e,n){let i=new ad,r=[],o=new Map,s=[],a=new Map,c=new Map,l=new Map,u=new Set;this.disabledNodes.forEach(U=>{u.add(U);let K=this.driver.query(U,q6,!0);for(let Z=0;Z<K.length;Z++)u.add(K[Z])});let d=this.bodyNode,h=Array.from(this.statesByElement.keys()),f=pN(h,this.collectedEnterElements),m=new Map,p=0;f.forEach((U,K)=>{let Z=wN+p++;m.set(K,Z),U.forEach(Ce=>ni(Ce,Z))});let g=[],w=new Set,k=new Set;for(let U=0;U<this.collectedLeaveElements.length;U++){let K=this.collectedLeaveElements[U],Z=K[Ei];Z&&Z.setForRemoval&&(g.push(K),w.add(K),Z.hasAnimation?this.driver.query(K,K6,!0).forEach(Ce=>w.add(Ce)):k.add(K))}let D=new Map,O=pN(h,Array.from(w));O.forEach((U,K)=>{let Z=Kw+p++;D.set(K,Z),U.forEach(Ce=>ni(Ce,Z))}),e.push(()=>{f.forEach((U,K)=>{let Z=m.get(K);U.forEach(Ce=>vc(Ce,Z))}),O.forEach((U,K)=>{let Z=D.get(K);U.forEach(Ce=>vc(Ce,Z))}),g.forEach(U=>{this.processLeaveNode(U)})});let q=[],G=[];for(let U=this._namespaceList.length-1;U>=0;U--)this._namespaceList[U].drainQueuedTransitions(n).forEach(Z=>{let Ce=Z.player,Dt=Z.element;if(q.push(Ce),this.collectedEnterElements.length){let Wt=Dt[Ei];if(Wt&&Wt.setForMove){if(Wt.previousTriggersValues&&Wt.previousTriggersValues.has(Z.triggerName)){let Yo=Wt.previousTriggersValues.get(Z.triggerName),Qn=this.statesByElement.get(Z.element);if(Qn&&Qn.has(Z.triggerName)){let Jh=Qn.get(Z.triggerName);Jh.value=Yo,Qn.set(Z.triggerName,Jh)}}Ce.destroy();return}}let Ni=!d||!this.driver.containsElement(d,Dt),Pn=D.get(Dt),zr=m.get(Dt),it=this._buildInstruction(Z,i,zr,Pn,Ni);if(it.errors&&it.errors.length){G.push(it);return}if(Ni){Ce.onStart(()=>Rs(Dt,it.fromStyles)),Ce.onDestroy(()=>Xi(Dt,it.toStyles)),r.push(Ce);return}if(Z.isFallbackTransition){Ce.onStart(()=>Rs(Dt,it.fromStyles)),Ce.onDestroy(()=>Xi(Dt,it.toStyles)),r.push(Ce);return}let AS=[];it.timelines.forEach(Wt=>{Wt.stretchStartingKeyframe=!0,this.disabledNodes.has(Wt.element)||AS.push(Wt)}),it.timelines=AS,i.append(Dt,it.timelines);let IU={instruction:it,player:Ce,element:Dt};s.push(IU),it.queriedElements.forEach(Wt=>$n(a,Wt,[]).push(Ce)),it.preStyleProps.forEach((Wt,Yo)=>{if(Wt.size){let Qn=c.get(Yo);Qn||c.set(Yo,Qn=new Set),Wt.forEach((Jh,Ab)=>Qn.add(Ab))}}),it.postStyleProps.forEach((Wt,Yo)=>{let Qn=l.get(Yo);Qn||l.set(Yo,Qn=new Set),Wt.forEach((Jh,Ab)=>Qn.add(Ab))})});if(G.length){let U=[];G.forEach(K=>{U.push(h6(K.triggerName,K.errors))}),q.forEach(K=>K.destroy()),this.reportError(U)}let de=new Map,at=new Map;s.forEach(U=>{let K=U.element;i.has(K)&&(at.set(K,K),this._beforeAnimationBuild(U.player.namespaceId,U.instruction,de))}),r.forEach(U=>{let K=U.element;this._getPreviousPlayers(K,!1,U.namespaceId,U.triggerName,null).forEach(Ce=>{$n(de,K,[]).push(Ce),Ce.destroy()})});let Rn=g.filter(U=>gN(U,c,l)),Kn=new Map;mN(Kn,this.driver,k,l,Zi).forEach(U=>{gN(U,c,l)&&Rn.push(U)});let Vl=new Map;f.forEach((U,K)=>{mN(Vl,this.driver,new Set(U),c,Mp)}),Rn.forEach(U=>{let K=Kn.get(U),Z=Vl.get(U);Kn.set(U,new Map([...K?.entries()??[],...Z?.entries()??[]]))});let Qo=[],DS=[],SS={};s.forEach(U=>{let{element:K,player:Z,instruction:Ce}=U;if(i.has(K)){if(u.has(K)){Z.onDestroy(()=>Xi(K,Ce.toStyles)),Z.disabled=!0,Z.overrideTotalTime(Ce.totalTime),r.push(Z);return}let Dt=SS;if(at.size>1){let Pn=K,zr=[];for(;Pn=Pn.parentNode;){let it=at.get(Pn);if(it){Dt=it;break}zr.push(Pn)}zr.forEach(it=>at.set(it,Dt))}let Ni=this._buildAnimation(Z.namespaceId,Ce,de,o,Vl,Kn);if(Z.setRealPlayer(Ni),Dt===SS)Qo.push(Z);else{let Pn=this.playersByElement.get(Dt);Pn&&Pn.length&&(Z.parentPlayer=vo(Pn)),r.push(Z)}}else Rs(K,Ce.fromStyles),Z.onDestroy(()=>Xi(K,Ce.toStyles)),DS.push(Z),u.has(K)&&r.push(Z)}),DS.forEach(U=>{let K=o.get(U.element);if(K&&K.length){let Z=vo(K);U.setRealPlayer(Z)}}),r.forEach(U=>{U.parentPlayer?U.syncPlayerEvents(U.parentPlayer):U.destroy()});for(let U=0;U<g.length;U++){let K=g[U],Z=K[Ei];if(vc(K,Kw),Z&&Z.hasAnimation)continue;let Ce=[];if(a.size){let Ni=a.get(K);Ni&&Ni.length&&Ce.push(...Ni);let Pn=this.driver.query(K,Qw,!0);for(let zr=0;zr<Pn.length;zr++){let it=a.get(Pn[zr]);it&&it.length&&Ce.push(...it)}}let Dt=Ce.filter(Ni=>!Ni.destroyed);Dt.length?e9(this,K,Dt):this.processLeaveNode(K)}return g.length=0,Qo.forEach(U=>{this.players.push(U),U.onDone(()=>{U.destroy();let K=this.players.indexOf(U);this.players.splice(K,1)}),U.play()}),Qo}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,n,i,r,o){let s=[];if(n){let a=this.playersByQueriedElement.get(e);a&&(s=a)}else{let a=this.playersByElement.get(e);if(a){let c=!o||o==od;a.forEach(l=>{l.queued||!c&&l.triggerName!=r||s.push(l)})}}return(i||r)&&(s=s.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),s}_beforeAnimationBuild(e,n,i){let r=n.triggerName,o=n.element,s=n.isRemovalTransition?void 0:e,a=n.isRemovalTransition?void 0:r;for(let c of n.timelines){let l=c.element,u=l!==o,d=$n(i,l,[]);this._getPreviousPlayers(l,u,s,a,n.toState).forEach(f=>{let m=f.getRealPlayer();m.beforeDestroy&&m.beforeDestroy(),f.destroy(),d.push(f)})}Rs(o,n.fromStyles)}_buildAnimation(e,n,i,r,o,s){let a=n.triggerName,c=n.element,l=[],u=new Set,d=new Set,h=n.timelines.map(m=>{let p=m.element;u.add(p);let g=p[Ei];if(g&&g.removedBeforeQueried)return new yo(m.duration,m.delay);let w=p!==c,k=t9((i.get(p)||Q6).map(de=>de.getRealPlayer())).filter(de=>{let at=de;return at.element?at.element===p:!1}),D=o.get(p),O=s.get(p),q=_N(this._normalizer,m.keyframes,D,O),G=this._buildPlayer(m,q,k);if(m.subTimeline&&r&&d.add(p),w){let de=new ld(e,a,p);de.setRealPlayer(G),l.push(de)}return G});l.forEach(m=>{$n(this.playersByQueriedElement,m.element,[]).push(m),m.onDone(()=>Z6(this.playersByQueriedElement,m.element,m))}),u.forEach(m=>ni(m,sN));let f=vo(h);return f.onDestroy(()=>{u.forEach(m=>vc(m,sN)),Xi(c,n.toStyles)}),d.forEach(m=>{$n(r,m,[]).push(f)}),f}_buildPlayer(e,n,i){return n.length>0?this.driver.animate(e.element,n,e.duration,e.delay,e.easing,i):new yo(e.duration,e.delay)}},ld=class{constructor(e,n,i){this.namespaceId=e,this.triggerName=n,this.element=i,this._player=new yo,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((n,i)=>{n.forEach(r=>lE(e,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let n=this._player;n.triggerCallback&&e.onStart(()=>n.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,n){$n(this._queuedCallbacks,e,[]).push(n)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let n=this._player;n.triggerCallback&&n.triggerCallback(e)}};function Z6(t,e,n){let i=t.get(e);if(i){if(i.length){let r=i.indexOf(n);i.splice(r,1)}i.length==0&&t.delete(e)}return i}function X6(t){return t??null}function Fp(t){return t&&t.nodeType===1}function J6(t){return t=="start"||t=="done"}function fN(t,e){let n=t.style.display;return t.style.display=e??"none",n}function mN(t,e,n,i,r){let o=[];n.forEach(c=>o.push(fN(c)));let s=[];i.forEach((c,l)=>{let u=new Map;c.forEach(d=>{let h=e.computeStyle(l,d,r);u.set(d,h),(!h||h.length==0)&&(l[Ei]=Y6,s.push(l))}),t.set(l,u)});let a=0;return n.forEach(c=>fN(c,o[a++])),s}function pN(t,e){let n=new Map;if(t.forEach(a=>n.set(a,[])),e.length==0)return n;let i=1,r=new Set(e),o=new Map;function s(a){if(!a)return i;let c=o.get(a);if(c)return c;let l=a.parentNode;return n.has(l)?c=l:r.has(l)?c=i:c=s(l),o.set(a,c),c}return e.forEach(a=>{let c=s(a);c!==i&&n.get(c).push(a)}),n}function ni(t,e){t.classList?.add(e)}function vc(t,e){t.classList?.remove(e)}function e9(t,e,n){vo(n).onDone(()=>t.processLeaveNode(e))}function t9(t){let e=[];return AN(t,e),e}function AN(t,e){for(let n=0;n<t.length;n++){let i=t[n];i instanceof id?AN(i.players,e):e.push(i)}}function n9(t,e){let n=Object.keys(t),i=Object.keys(e);if(n.length!=i.length)return!1;for(let r=0;r<n.length;r++){let o=n[r];if(!e.hasOwnProperty(o)||t[o]!==e[o])return!1}return!0}function gN(t,e,n){let i=n.get(t);if(!i)return!1;let r=e.get(t);return r?i.forEach(o=>r.add(o)):e.set(t,i),n.delete(t),!0}var Ec=class{constructor(e,n,i){this._driver=n,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,o)=>{},this._transitionEngine=new aE(e.body,n,i),this._timelineEngine=new oE(e.body,n,i),this._transitionEngine.onRemovalComplete=(r,o)=>this.onRemovalComplete(r,o)}registerTrigger(e,n,i,r,o){let s=e+"-"+r,a=this._triggerCache[s];if(!a){let c=[],l=[],u=TN(this._driver,o,c,l);if(c.length)throw t6(r,c);l.length&&void 0,a=$6(r,u,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(n,r,a)}register(e,n){this._transitionEngine.register(e,n)}destroy(e,n){this._transitionEngine.destroy(e,n)}onInsert(e,n,i,r){this._transitionEngine.insertNode(e,n,i,r)}onRemove(e,n,i){this._transitionEngine.removeNode(e,n,i)}disableAnimations(e,n){this._transitionEngine.markElementAsDisabled(e,n)}process(e,n,i,r){if(i.charAt(0)=="@"){let[o,s]=rN(i),a=r;this._timelineEngine.command(o,n,s,a)}else this._transitionEngine.trigger(e,n,i,r)}listen(e,n,i,r,o){if(i.charAt(0)=="@"){let[s,a]=rN(i);return this._timelineEngine.listen(s,n,a,o)}return this._transitionEngine.listen(e,n,i,r,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function i9(t,e){let n=null,i=null;return Array.isArray(e)&&e.length?(n=Gw(e[0]),e.length>1&&(i=Gw(e[e.length-1]))):e instanceof Map&&(n=Gw(e)),n||i?new r9(t,n,i):null}var r9=(()=>{let e=class e{constructor(i,r,o){this._element=i,this._startStyles=r,this._endStyles=o,this._state=0;let s=e.initialStylesByElement.get(i);s||e.initialStylesByElement.set(i,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Xi(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Xi(this._element,this._initialStyles),this._endStyles&&(Xi(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(e.initialStylesByElement.delete(this._element),this._startStyles&&(Rs(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Rs(this._element,this._endStyles),this._endStyles=null),Xi(this._element,this._initialStyles),this._state=3)}};e.initialStylesByElement=new WeakMap;let t=e;return t})();function Gw(t){let e=null;return t.forEach((n,i)=>{o9(i)&&(e=e||new Map,e.set(i,n))}),e}function o9(t){return t==="display"||t==="position"}var qp=class{constructor(e,n,i,r){this.element=e,this.keyframes=n,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let n=()=>this._onFinish();this.domPlayer.addEventListener("finish",n),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",n)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let n=[];return e.forEach(i=>{n.push(Object.fromEntries(i))}),n}_triggerWebAnimation(e,n,i){return e.animate(this._convertKeyframesToObject(n),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{r!=="offset"&&e.set(r,this._finished?i:IN(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){let n=e==="start"?this._onStartFns:this._onDoneFns;n.forEach(i=>i()),n.length=0}},Wp=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,n){return!1}containsElement(e,n){return bN(e,n)}getParentElement(e){return dE(e)}query(e,n,i){return yN(e,n,i)}computeStyle(e,n,i){return window.getComputedStyle(e)[n]}animate(e,n,i,r,o,s=[]){let a=r==0?"both":"forwards",c={duration:i,delay:r,fill:a};o&&(c.easing=o);let l=new Map,u=s.filter(f=>f instanceof qp);x6(i,r)&&u.forEach(f=>{f.currentSnapshot.forEach((m,p)=>l.set(p,m))});let d=v6(n).map(f=>wc(f));d=I6(e,d,l);let h=i9(e,d);return new qp(e,d,c,h)}};var Op="@",kN="@.disabled",Gp=class{constructor(e,n,i,r){this.namespaceId=e,this.delegate=n,this.engine=i,this._onDestroy=r,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,n){return this.delegate.createElement(e,n)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,n){this.delegate.appendChild(e,n),this.engine.onInsert(this.namespaceId,n,e,!1)}insertBefore(e,n,i,r=!0){this.delegate.insertBefore(e,n,i),this.engine.onInsert(this.namespaceId,n,e,r)}removeChild(e,n,i){this.engine.onRemove(this.namespaceId,n,this.delegate)}selectRootElement(e,n){return this.delegate.selectRootElement(e,n)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,n,i,r){this.delegate.setAttribute(e,n,i,r)}removeAttribute(e,n,i){this.delegate.removeAttribute(e,n,i)}addClass(e,n){this.delegate.addClass(e,n)}removeClass(e,n){this.delegate.removeClass(e,n)}setStyle(e,n,i,r){this.delegate.setStyle(e,n,i,r)}removeStyle(e,n,i){this.delegate.removeStyle(e,n,i)}setProperty(e,n,i){n.charAt(0)==Op&&n==kN?this.disableAnimations(e,!!i):this.delegate.setProperty(e,n,i)}setValue(e,n){this.delegate.setValue(e,n)}listen(e,n,i){return this.delegate.listen(e,n,i)}disableAnimations(e,n){this.engine.disableAnimations(e,n)}},cE=class extends Gp{constructor(e,n,i,r,o){super(n,i,r,o),this.factory=e,this.namespaceId=n}setProperty(e,n,i){n.charAt(0)==Op?n.charAt(1)=="."&&n==kN?(i=i===void 0?!0:!!i,this.disableAnimations(e,i)):this.engine.process(this.namespaceId,e,n.slice(1),i):this.delegate.setProperty(e,n,i)}listen(e,n,i){if(n.charAt(0)==Op){let r=s9(e),o=n.slice(1),s="";return o.charAt(0)!=Op&&([o,s]=a9(o)),this.engine.listen(this.namespaceId,r,o,s,a=>{let c=a._data||-1;this.factory.scheduleListenerCallback(c,i,a)})}return this.delegate.listen(e,n,i)}};function s9(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}function a9(t){let e=t.indexOf("."),n=t.substring(0,e),i=t.slice(e+1);return[n,i]}var Kp=class{constructor(e,n,i){this.delegate=e,this.engine=n,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,n.onRemovalComplete=(r,o)=>{let s=o?.parentNode(r);s&&o.removeChild(s,r)}}createRenderer(e,n){let i="",r=this.delegate.createRenderer(e,n);if(!e||!n?.data?.animation){let l=this._rendererCache,u=l.get(r);if(!u){let d=()=>l.delete(r);u=new Gp(i,r,this.engine,d),l.set(r,u)}return u}let o=n.id,s=n.id+"-"+this._currentId;this._currentId++,this.engine.register(s,e);let a=l=>{Array.isArray(l)?l.forEach(a):this.engine.registerTrigger(o,s,e,l.name,l)};return n.data.animation.forEach(a),new cE(this,s,r,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,n,i){if(e>=0&&e<this._microtaskId){this._zone.run(()=>n(i));return}let r=this._animationCallbacksBuffer;r.length==0&&queueMicrotask(()=>{this._zone.run(()=>{r.forEach(o=>{let[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),r.push([n,i])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}};var l9=(()=>{let e=class e extends Ec{constructor(i,r,o,s){super(i,r,o)}ngOnDestroy(){this.flush()}};e.\u0275fac=function(r){return new(r||e)(y(ae),y(ud),y(Ps),y(wi))},e.\u0275prov=A({token:e,factory:e.\u0275fac});let t=e;return t})();function u9(){return new Bp}function d9(t,e,n){return new Kp(t,e,n)}var RN=[{provide:Ps,useFactory:u9},{provide:Ec,useClass:l9},{provide:ps,useFactory:d9,deps:[np,Ec,V]}],MN=[{provide:ud,useFactory:()=>new Wp},{provide:Bt,useValue:"BrowserAnimations"},...RN],h9=[{provide:ud,useClass:hE},{provide:Bt,useValue:"NoopAnimations"},...RN],PN=(()=>{let e=class e{static withConfig(i){return{ngModule:e,providers:i.disableAnimations?h9:MN}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=H({type:e}),e.\u0275inj=z({providers:MN,imports:[rp]});let t=e;return t})();function f9(){return!0}var m9=new C("mat-sanity-checks",{providedIn:"root",factory:f9}),yt=(()=>{let e=class e{constructor(i,r,o){this._sanityChecks=r,this._document=o,this._hasDoneGlobalChecks=!1,i._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(i){return zP()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[i]}};e.\u0275fac=function(r){return new(r||e)(y(Bw),y(m9,8),y(ae))},e.\u0275mod=H({type:e}),e.\u0275inj=z({imports:[Uw,Uw]});let t=e;return t})();function vE(t){return class extends t{get disabled(){return this._disabled}set disabled(e){this._disabled=Sn(e)}constructor(...e){super(...e),this._disabled=!1}}}function xc(t,e){return class extends t{get color(){return this._color}set color(n){let i=n||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}constructor(...n){super(...n),this.defaultColor=e,this.color=e}}}function $N(t){return class extends t{get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=Sn(e)}constructor(...e){super(...e),this._disableRipple=!1}}}var _E=class{constructor(e,n,i,r=!1){this._renderer=e,this.element=n,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}},NN=_o({passive:!0,capture:!0}),bE=class{constructor(){this._events=new Map,this._delegateEventHandler=e=>{let n=bo(e);n&&this._events.get(e.type)?.forEach((i,r)=>{(r===n||r.contains(n))&&i.forEach(o=>o.handleEvent(e))})}}addHandler(e,n,i,r){let o=this._events.get(n);if(o){let s=o.get(i);s?s.add(r):o.set(i,new Set([r]))}else this._events.set(n,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(n,this._delegateEventHandler,NN)})}removeHandler(e,n,i){let r=this._events.get(e);if(!r)return;let o=r.get(n);o&&(o.delete(i),o.size===0&&r.delete(n),r.size===0&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,NN)))}},FN={enterDuration:225,exitDuration:150},p9=800,ON=_o({passive:!0,capture:!0}),LN=["mousedown","touchstart"],VN=["mouseup","mouseleave","touchend","touchcancel"],hd=class hd{constructor(e,n,i,r){this._target=e,this._ngZone=n,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=Dr(i))}fadeInRipple(e,n,i={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o=M(M({},FN),i.animation);i.centered&&(e=r.left+r.width/2,n=r.top+r.height/2);let s=i.radius||g9(e,n,r),a=e-r.left,c=n-r.top,l=o.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=`${a-s}px`,u.style.top=`${c-s}px`,u.style.height=`${s*2}px`,u.style.width=`${s*2}px`,i.color!=null&&(u.style.backgroundColor=i.color),u.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(u);let d=window.getComputedStyle(u),h=d.transitionProperty,f=d.transitionDuration,m=h==="none"||f==="0s"||f==="0s, 0s"||r.width===0&&r.height===0,p=new _E(this,u,i,m);u.style.transform="scale3d(1, 1, 1)",p.state=0,i.persistent||(this._mostRecentTransientRipple=p);let g=null;return!m&&(l||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let w=()=>this._finishRippleTransition(p),k=()=>this._destroyRipple(p);u.addEventListener("transitionend",w),u.addEventListener("transitioncancel",k),g={onTransitionEnd:w,onTransitionCancel:k}}),this._activeRipples.set(p,g),(m||!l)&&this._finishRippleTransition(p),p}fadeOutRipple(e){if(e.state===2||e.state===3)return;let n=e.element,i=M(M({},FN),e.config.animation);n.style.transitionDuration=`${i.exitDuration}ms`,n.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){let n=Dr(e);!this._platform.isBrowser||!n||n===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=n,LN.forEach(i=>{hd._eventManager.addHandler(this._ngZone,i,n,this)}))}handleEvent(e){e.type==="mousedown"?this._onMousedown(e):e.type==="touchstart"?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{VN.forEach(n=>{this._triggerElement.addEventListener(n,this,ON)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===0?this._startFadeOutTransition(e):e.state===2&&this._destroyRipple(e)}_startFadeOutTransition(e){let n=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=1,!i&&(!n||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){let n=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,n!==null&&(e.element.removeEventListener("transitionend",n.onTransitionEnd),e.element.removeEventListener("transitioncancel",n.onTransitionCancel)),e.element.remove()}_onMousedown(e){let n=Vw(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+p9;!this._target.rippleDisabled&&!n&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!jw(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let n=e.changedTouches;if(n)for(let i=0;i<n.length;i++)this.fadeInRipple(n[i].clientX,n[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{let n=e.state===1||e.config.terminateOnPointerUp&&e.state===0;!e.config.persistent&&n&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let e=this._triggerElement;e&&(LN.forEach(n=>hd._eventManager.removeHandler(n,e,this)),this._pointerUpEventsRegistered&&VN.forEach(n=>e.removeEventListener(n,this,ON)))}};hd._eventManager=new bE;var yE=hd;function g9(t,e,n){let i=Math.max(Math.abs(t-n.left),Math.abs(t-n.right)),r=Math.max(Math.abs(e-n.top),Math.abs(e-n.bottom));return Math.sqrt(i*i+r*r)}var wE=new C("mat-ripple-global-options"),wo=(()=>{let e=class e{get disabled(){return this._disabled}set disabled(i){i&&this.fadeOutAllNonPersistent(),this._disabled=i,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(i){this._trigger=i,this._setupTriggerEventsIfEnabled()}constructor(i,r,o,s,a){this._elementRef=i,this._animationMode=a,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new yE(this,r,i,o)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:M(M(M({},this._globalOptions.animation),this._animationMode==="NoopAnimations"?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(i,r=0,o){return typeof i=="number"?this._rippleRenderer.fadeInRipple(i,r,M(M({},this.rippleConfig),o)):this._rippleRenderer.fadeInRipple(0,0,M(M({},this.rippleConfig),i))}};e.\u0275fac=function(r){return new(r||e)(E(he),E(V),E(bt),E(wE,8),E(Bt,8))},e.\u0275dir=_e({type:e,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(r,o){r&2&&Pe("mat-ripple-unbounded",o.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]});let t=e;return t})(),Ic=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=H({type:e}),e.\u0275inj=z({imports:[yt,yt]});let t=e;return t})();var jN={capture:!0},BN=["focus","click","mouseenter","touchstart"],pE="mat-ripple-loader-uninitialized",gE="mat-ripple-loader-class-name",UN="mat-ripple-loader-centered",Qp="mat-ripple-loader-disabled",zN=(()=>{let e=class e{constructor(){this._document=T(ae,{optional:!0}),this._animationMode=T(Bt,{optional:!0}),this._globalRippleOptions=T(wE,{optional:!0}),this._platform=T(bt),this._ngZone=T(V),this._hosts=new Map,this._onInteraction=i=>{if(!(i.target instanceof HTMLElement))return;let o=i.target.closest(`[${pE}]`);o&&this._createRipple(o)},this._ngZone.runOutsideAngular(()=>{for(let i of BN)this._document?.addEventListener(i,this._onInteraction,jN)})}ngOnDestroy(){let i=this._hosts.keys();for(let r of i)this.destroyRipple(r);for(let r of BN)this._document?.removeEventListener(r,this._onInteraction,jN)}configureRipple(i,r){i.setAttribute(pE,""),(r.className||!i.hasAttribute(gE))&&i.setAttribute(gE,r.className||""),r.centered&&i.setAttribute(UN,""),r.disabled&&i.setAttribute(Qp,"")}getRipple(i){return this._hosts.get(i)||this._createRipple(i)}setDisabled(i,r){let o=this._hosts.get(i);if(o){o.disabled=r;return}r?i.setAttribute(Qp,""):i.removeAttribute(Qp)}_createRipple(i){if(!this._document)return;let r=this._hosts.get(i);if(r)return r;i.querySelector(".mat-ripple")?.remove();let o=this._document.createElement("span");o.classList.add("mat-ripple",i.getAttribute(gE)),i.append(o);let s=new wo(new he(o),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return s._isInitialized=!0,s.trigger=i,s.centered=i.hasAttribute(UN),s.disabled=i.hasAttribute(Qp),this.attachRipple(i,s),s}attachRipple(i,r){i.removeAttribute(pE),this._hosts.set(i,r)}destroyRipple(i){let r=this._hosts.get(i);r&&(r.ngOnDestroy(),this._hosts.delete(i))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var _9=["*",[["mat-toolbar-row"]]],b9=["*","mat-toolbar-row"],y9=xc(class{constructor(t){this._elementRef=t}}),v9=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=_e({type:e,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]});let t=e;return t})(),qN=(()=>{let e=class e extends y9{constructor(i,r,o){super(i),this._platform=r,this._document=o}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){this._toolbarRows.length}};e.\u0275fac=function(r){return new(r||e)(E(he),E(bt),E(ae))},e.\u0275cmp=Qe({type:e,selectors:[["mat-toolbar"]],contentQueries:function(r,o,s){if(r&1&&Ir(s,v9,5),r&2){let a;et(a=tt())&&(o._toolbarRows=a)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(r,o){r&2&&Pe("mat-toolbar-multiple-rows",o._toolbarRows.length>0)("mat-toolbar-single-row",o._toolbarRows.length===0)},inputs:{color:"color"},exportAs:["matToolbar"],features:[We],ngContentSelectors:b9,decls:2,vars:0,template:function(r,o){r&1&&(fn(_9),Mt(0),Mt(1,1))},styles:[".mat-toolbar{background:var(--mat-toolbar-container-background-color);color:var(--mat-toolbar-container-text-color)}.mat-toolbar,.mat-toolbar h1,.mat-toolbar h2,.mat-toolbar h3,.mat-toolbar h4,.mat-toolbar h5,.mat-toolbar h6{font-family:var(--mat-toolbar-title-text-font);font-size:var(--mat-toolbar-title-text-size);line-height:var(--mat-toolbar-title-text-line-height);font-weight:var(--mat-toolbar-title-text-weight);letter-spacing:var(--mat-toolbar-title-text-tracking);margin:0}.cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar .mat-form-field-underline,.mat-toolbar .mat-form-field-ripple,.mat-toolbar .mat-focused .mat-form-field-ripple{background-color:currentColor}.mat-toolbar .mat-form-field-label,.mat-toolbar .mat-focused .mat-form-field-label,.mat-toolbar .mat-select-value,.mat-toolbar .mat-select-arrow,.mat-toolbar .mat-form-field.mat-focused .mat-select-arrow{color:inherit}.mat-toolbar .mat-input-element{caret-color:currentColor}.mat-toolbar .mat-mdc-button-base.mat-mdc-button-base.mat-unthemed{--mdc-text-button-label-text-color: inherit;--mdc-outlined-button-label-text-color: inherit}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap;height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-row,.mat-toolbar-single-row{height:var(--mat-toolbar-mobile-height)}}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%;min-height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:var(--mat-toolbar-mobile-height)}}"],encapsulation:2,changeDetection:0});let t=e;return t})();var WN=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=H({type:e}),e.\u0275inj=z({imports:[yt,yt]});let t=e;return t})();var eF=(()=>{let e=class e{constructor(i,r){this._renderer=i,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(i,r){this._renderer.setProperty(this._elementRef.nativeElement,i,r)}registerOnTouched(i){this.onTouched=i}registerOnChange(i){this.onChange=i}setDisabledState(i){this.setProperty("disabled",i)}};e.\u0275fac=function(r){return new(r||e)(E(ys),E(he))},e.\u0275dir=_e({type:e});let t=e;return t})(),tF=(()=>{let e=class e extends eF{};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=ao(e)))(o||e)}})(),e.\u0275dir=_e({type:e,features:[We]});let t=e;return t})(),gd=new C("NgValueAccessor");var E9={provide:gd,useExisting:Wi(()=>Eo),multi:!0};function x9(){let t=Ki()?Ki().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var I9=new C("CompositionEventMode"),Eo=(()=>{let e=class e extends eF{constructor(i,r,o){super(i,r),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!x9())}writeValue(i){let r=i??"";this.setProperty("value",r)}_handleInput(i){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(i)}_compositionStart(){this._composing=!0}_compositionEnd(i){this._composing=!1,this._compositionMode&&this.onChange(i)}};e.\u0275fac=function(r){return new(r||e)(E(ys),E(he),E(I9,8))},e.\u0275dir=_e({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,o){r&1&&De("input",function(a){return o._handleInput(a.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(a){return o._compositionEnd(a.target.value)})},features:[Zt([E9]),We]});let t=e;return t})();var nF=new C("NgValidators"),C9=new C("NgAsyncValidators");function iF(t){return t!=null}function rF(t){return vs(t)?ve(t):t}function oF(t){let e={};return t.forEach(n=>{e=n!=null?M(M({},e),n):e}),Object.keys(e).length===0?null:e}function sF(t,e){return e.map(n=>n(t))}function T9(t){return!t.validate}function aF(t){return t.map(e=>T9(e)?e:n=>e.validate(n))}function D9(t){if(!t)return null;let e=t.filter(iF);return e.length==0?null:function(n){return oF(sF(n,e))}}function cF(t){return t!=null?D9(aF(t)):null}function S9(t){if(!t)return null;let e=t.filter(iF);return e.length==0?null:function(n){let i=sF(n,e).map(rF);return ql(i).pipe(B(oF))}}function lF(t){return t!=null?S9(aF(t)):null}function GN(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function A9(t){return t._rawValidators}function k9(t){return t._rawAsyncValidators}function EE(t){return t?Array.isArray(t)?t:[t]:[]}function Zp(t,e){return Array.isArray(t)?t.includes(e):t===e}function KN(t,e){let n=EE(e);return EE(t).forEach(r=>{Zp(n,r)||n.push(r)}),n}function QN(t,e){return EE(e).filter(n=>!Zp(t,n))}var Xp=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=cF(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=lF(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},xE=class extends Xp{get formDirective(){return null}get path(){return null}},pd=class extends Xp{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},IE=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},M9={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Ihe=Ae(M({},M9),{"[class.ng-submitted]":"isSubmitted"}),Tc=(()=>{let e=class e extends IE{constructor(i){super(i)}};e.\u0275fac=function(r){return new(r||e)(E(pd,2))},e.\u0275dir=_e({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,o){r&2&&Pe("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[We]});let t=e;return t})();var fd="VALID",Yp="INVALID",Cc="PENDING",md="DISABLED";function R9(t){return(Jp(t)?t.validators:t)||null}function P9(t){return Array.isArray(t)?cF(t):t||null}function N9(t,e){return(Jp(e)?e.asyncValidators:t)||null}function F9(t){return Array.isArray(t)?lF(t):t||null}function Jp(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}var CE=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===fd}get invalid(){return this.status===Yp}get pending(){return this.status==Cc}get disabled(){return this.status===md}get enabled(){return this.status!==md}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(KN(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(KN(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(QN(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(QN(e,this._rawAsyncValidators))}hasValidator(e){return Zp(this._rawValidators,e)}hasAsyncValidator(e){return Zp(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Cc,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=md,this.errors=null,this._forEachChild(i=>{i.disable(Ae(M({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Ae(M({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=fd,this._forEachChild(i=>{i.enable(Ae(M({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Ae(M({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===fd||this.status===Cc)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?md:fd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Cc,this._hasOwnPendingAsyncValidator=!0;let n=rF(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((i,r)=>i&&i._find(r),this)}getError(e,n){let i=n?this.get(n):this;return i&&i.errors?i.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new re,this.statusChanges=new re}_calculateStatus(){return this._allControlsDisabled()?md:this.errors?Yp:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Cc)?Cc:this._anyControlsHaveStatus(Yp)?Yp:fd}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Jp(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=P9(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=F9(this._rawAsyncValidators)}};var uF=new C("CallSetDisabledState",{providedIn:"root",factory:()=>TE}),TE="always";function O9(t,e){return[...e.path,t]}function L9(t,e,n=TE){j9(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),B9(t,e),$9(t,e),U9(t,e),V9(t,e)}function YN(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function V9(t,e){if(e.valueAccessor.setDisabledState){let n=i=>{e.valueAccessor.setDisabledState(i)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function j9(t,e){let n=A9(t);e.validator!==null?t.setValidators(GN(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let i=k9(t);e.asyncValidator!==null?t.setAsyncValidators(GN(i,e.asyncValidator)):typeof i=="function"&&t.setAsyncValidators([i]);let r=()=>t.updateValueAndValidity();YN(e._rawValidators,r),YN(e._rawAsyncValidators,r)}function B9(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&dF(t,e)})}function U9(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&dF(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function dF(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function $9(t,e){let n=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function z9(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function H9(t){return Object.getPrototypeOf(t.constructor)===tF}function q9(t,e){if(!e)return null;Array.isArray(e);let n,i,r;return e.forEach(o=>{o.constructor===Eo?n=o:H9(o)?i=o:r=o}),r||i||n||null}function ZN(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function XN(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var W9=class extends CE{constructor(e=null,n,i){super(R9(n),N9(i,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Jp(n)&&(n.nonNullable||n.initialValueIsDefault)&&(XN(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){ZN(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){ZN(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){XN(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var G9={provide:pd,useExisting:Wi(()=>Ns)},JN=(()=>Promise.resolve())(),Ns=(()=>{let e=class e extends pd{constructor(i,r,o,s,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this.control=new W9,this._registered=!1,this.name="",this.update=new re,this._parent=i,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=q9(this,s)}ngOnChanges(i){if(this._checkForErrors(),!this._registered||"name"in i){if(this._registered&&(this._checkName(),this.formDirective)){let r=i.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in i&&this._updateDisabled(i),z9(i,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){L9(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(i){JN.then(()=>{this.control.setValue(i,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(i){let r=i.isDisabled.currentValue,o=r!==0&&$t(r);JN.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(i){return this._parent?O9(i,this._parent):[i]}};e.\u0275fac=function(r){return new(r||e)(E(xE,9),E(nF,10),E(C9,10),E(gd,10),E(Yt,8),E(uF,8))},e.\u0275dir=_e({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Zt([G9]),We,Gi]});let t=e;return t})();var K9={provide:gd,useExisting:Wi(()=>DE),multi:!0},DE=(()=>{let e=class e extends tF{writeValue(i){let r=i??"";this.setProperty("value",r)}registerOnChange(i){this.onChange=r=>{i(r==""?null:parseFloat(r))}}};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=ao(e)))(o||e)}})(),e.\u0275dir=_e({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,o){r&1&&De("input",function(a){return o.onChange(a.target.value)})("blur",function(){return o.onTouched()})},features:[Zt([K9]),We]});let t=e;return t})();var Q9=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=H({type:e}),e.\u0275inj=z({});let t=e;return t})();var Y9=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=H({type:e}),e.\u0275inj=z({imports:[Q9]});let t=e;return t})();var hF=(()=>{let e=class e{static withConfig(i){return{ngModule:e,providers:[{provide:uF,useValue:i.callSetDisabledState??TE}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=H({type:e}),e.\u0275inj=z({imports:[Y9]});let t=e;return t})();var _d=class{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;e!=null&&(this._attachedHost=null,e.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},AE=class extends _d{constructor(e,n,i,r,o){super(),this.component=e,this.viewContainerRef=n,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=o}},Dc=class extends _d{constructor(e,n,i,r){super(),this.templateRef=e,this.viewContainerRef=n,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,n=this.context){return this.context=n,super.attach(e)}detach(){return this.context=void 0,super.detach()}},kE=class extends _d{constructor(e){super(),this.element=e instanceof he?e.nativeElement:e}},ME=class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){if(e instanceof AE)return this._attachedPortal=e,this.attachComponentPortal(e);if(e instanceof Dc)return this._attachedPortal=e,this.attachTemplatePortal(e);if(this.attachDomPortal&&e instanceof kE)return this._attachedPortal=e,this.attachDomPortal(e)}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var fF=(()=>{let e=class e extends Dc{constructor(i,r){super(i,r)}};e.\u0275fac=function(r){return new(r||e)(E(dn),E(hn))},e.\u0275dir=_e({type:e,selectors:[["","cdkPortal",""]],exportAs:["cdkPortal"],features:[We]});let t=e;return t})();var bd=(()=>{let e=class e extends ME{constructor(i,r,o){super(),this._componentFactoryResolver=i,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new re,this.attachDomPortal=s=>{this._document;let a=s.element;a.parentNode;let c=this._document.createComment("dom-portal");s.setAttachedHost(this),a.parentNode.insertBefore(c,a),this._getRootNode().appendChild(a),this._attachedPortal=s,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=o}get portal(){return this._attachedPortal}set portal(i){this.hasAttached()&&!i&&!this._isInitialized||(this.hasAttached()&&super.detach(),i&&super.attach(i),this._attachedPortal=i||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(i){i.setAttachedHost(this);let r=i.viewContainerRef!=null?i.viewContainerRef:this._viewContainerRef,s=(i.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(i.component),a=r.createComponent(s,r.length,i.injector||r.injector,i.projectableNodes||void 0);return r!==this._viewContainerRef&&this._getRootNode().appendChild(a.hostView.rootNodes[0]),super.setDisposeFn(()=>a.destroy()),this._attachedPortal=i,this._attachedRef=a,this.attached.emit(a),a}attachTemplatePortal(i){i.setAttachedHost(this);let r=this._viewContainerRef.createEmbeddedView(i.templateRef,i.context,{injector:i.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=i,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){let i=this._viewContainerRef.element.nativeElement;return i.nodeType===i.ELEMENT_NODE?i:i.parentNode}};e.\u0275fac=function(r){return new(r||e)(E(lo),E(hn),E(ae))},e.\u0275dir=_e({type:e,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[We]});let t=e;return t})();var mF=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=H({type:e}),e.\u0275inj=z({});let t=e;return t})();var X9=20,RE=(()=>{let e=class e{constructor(i,r,o){this._platform=i,this._change=new me,this._changeListener=s=>{this._change.next(s)},this._document=o,r.runOutsideAngular(()=>{if(i.isBrowser){let s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let i=this._getWindow();i.removeEventListener("resize",this._changeListener),i.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let i={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),i}getViewportRect(){let i=this.getViewportScrollPosition(),{width:r,height:o}=this.getViewportSize();return{top:i.top,left:i.left,bottom:i.top+o,right:i.left+r,height:o,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let i=this._document,r=this._getWindow(),o=i.documentElement,s=o.getBoundingClientRect(),a=-s.top||i.body.scrollTop||r.scrollY||o.scrollTop||0,c=-s.left||i.body.scrollLeft||r.scrollX||o.scrollLeft||0;return{top:a,left:c}}change(i=X9){return i>0?this._change.pipe(Yb(i)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let i=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:i.innerWidth,height:i.innerHeight}:{width:0,height:0}}};e.\u0275fac=function(r){return new(r||e)(y(bt),y(V),y(ae,8))},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function nK(t,e){}var iK=t=>({animationDuration:t}),rK=(t,e)=>({value:t,params:e});function oK(t,e){t&1&&Mt(0)}var _F=["*"],sK=["tabListContainer"],aK=["tabList"],cK=["tabListInner"],lK=["nextPaginator"],uK=["previousPaginator"],dK=["tabBodyWrapper"],hK=["tabHeader"];function fK(t,e){}function mK(t,e){if(t&1&&ei(0,fK,0,0,"ng-template",10),t&2){let n=vi().$implicit;Le("cdkPortalOutlet",n.templateLabel)}}function pK(t,e){if(t&1&&mn(0),t&2){let n=vi().$implicit;Bm(n.textLabel)}}function gK(t,e){if(t&1){let n=p0();ee(0,"div",4,5),De("click",function(){let r=fu(n),o=r.$implicit,s=r.$index,a=vi(),c=rc(1);return mu(a._handleClick(o,c,s))})("cdkFocusChange",function(r){let s=fu(n).$index,a=vi();return mu(a._tabFocusChanged(r,s))}),ke(2,"span",6)(3,"div",7),ee(4,"span",8)(5,"span",9),ei(6,mK,1,1,null,10)(7,pK,1,1),le()()()}if(t&2){let n=e.$implicit,i=e.$index,r=rc(1),o=vi();Pe("mdc-tab--active",o.selectedIndex===i),Le("id",o._getTabLabelId(i))("ngClass",n.labelClass)("disabled",n.disabled)("fitInkBarToContent",o.fitInkBarToContent),kt("tabIndex",o._getTabIndex(i))("aria-posinset",i+1)("aria-setsize",o._tabs.length)("aria-controls",o._getTabContentId(i))("aria-selected",o.selectedIndex===i)("aria-label",n.ariaLabel||null)("aria-labelledby",!n.ariaLabel&&n.ariaLabelledby?n.ariaLabelledby:null),Be(3),Le("matRippleTrigger",r)("matRippleDisabled",n.disabled||o.disableRipple),Be(3),jm(6,n.templateLabel?6:7)}}function _K(t,e){if(t&1){let n=p0();ee(0,"mat-tab-body",11),De("_onCentered",function(){fu(n);let r=vi();return mu(r._removeTabBodyWrapperHeight())})("_onCentering",function(r){fu(n);let o=vi();return mu(o._setTabBodyWrapperHeight(r))}),le()}if(t&2){let n=e.$implicit,i=e.$index,r=vi();Pe("mat-mdc-tab-body-active",r.selectedIndex===i),Le("id",r._getTabContentId(i))("ngClass",n.bodyClass)("content",n.content)("position",n.position)("origin",n.origin)("animationDuration",r.animationDuration)("preserveContent",r.preserveContent),kt("tabindex",r.contentTabIndex!=null&&r.selectedIndex===i?r.contentTabIndex:null)("aria-labelledby",r._getTabLabelId(i))("aria-hidden",r.selectedIndex!==i)}}var bK={translateTab:tN("translateTab",[Ap("center, void, left-origin-center, right-origin-center",Sr({transform:"none"})),Ap("left",Sr({transform:"translate3d(-100%, 0, 0)",minHeight:"1px",visibility:"hidden"})),Ap("right",Sr({transform:"translate3d(100%, 0, 0)",minHeight:"1px",visibility:"hidden"})),kp("* => left, * => right, left => center, right => center",Sp("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")),kp("void => left-origin-center",[Sr({transform:"translate3d(-100%, 0, 0)",visibility:"hidden"}),Sp("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")]),kp("void => right-origin-center",[Sr({transform:"translate3d(100%, 0, 0)",visibility:"hidden"}),Sp("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")])])},yK=(()=>{let e=class e extends bd{constructor(i,r,o,s){super(i,r,s),this._host=o,this._centeringSub=Te.EMPTY,this._leavingSub=Te.EMPTY}ngOnInit(){super.ngOnInit(),this._centeringSub=this._host._beforeCentering.pipe(wn(this._host._isCenterPosition(this._host._position))).subscribe(i=>{i&&!this.hasAttached()&&this.attach(this._host._content)}),this._leavingSub=this._host._afterLeavingCenter.subscribe(()=>{this._host.preserveContent||this.detach()})}ngOnDestroy(){super.ngOnDestroy(),this._centeringSub.unsubscribe(),this._leavingSub.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)(E(lo),E(hn),E(Wi(()=>bF)),E(ae))},e.\u0275dir=_e({type:e,selectors:[["","matTabBodyHost",""]],features:[We]});let t=e;return t})(),bF=(()=>{let e=class e{set position(i){this._positionIndex=i,this._computePositionAnimationState()}constructor(i,r,o){this._elementRef=i,this._dir=r,this._dirChangeSubscription=Te.EMPTY,this._translateTabComplete=new me,this._onCentering=new re,this._beforeCentering=new re,this._afterLeavingCenter=new re,this._onCentered=new re(!0),this.animationDuration="500ms",this.preserveContent=!1,r&&(this._dirChangeSubscription=r.change.subscribe(s=>{this._computePositionAnimationState(s),o.markForCheck()})),this._translateTabComplete.pipe(Qr((s,a)=>s.fromState===a.fromState&&s.toState===a.toState)).subscribe(s=>{this._isCenterPosition(s.toState)&&this._isCenterPosition(this._position)&&this._onCentered.emit(),this._isCenterPosition(s.fromState)&&!this._isCenterPosition(this._position)&&this._afterLeavingCenter.emit()})}ngOnInit(){this._position=="center"&&this.origin!=null&&(this._position=this._computePositionFromOrigin(this.origin))}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._translateTabComplete.complete()}_onTranslateTabStarted(i){let r=this._isCenterPosition(i.toState);this._beforeCentering.emit(r),r&&this._onCentering.emit(this._elementRef.nativeElement.clientHeight)}_getLayoutDirection(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}_isCenterPosition(i){return i=="center"||i=="left-origin-center"||i=="right-origin-center"}_computePositionAnimationState(i=this._getLayoutDirection()){this._positionIndex<0?this._position=i=="ltr"?"left":"right":this._positionIndex>0?this._position=i=="ltr"?"right":"left":this._position="center"}_computePositionFromOrigin(i){let r=this._getLayoutDirection();return r=="ltr"&&i<=0||r=="rtl"&&i>0?"left-origin-center":"right-origin-center"}};e.\u0275fac=function(r){return new(r||e)(E(he),E(Dp,8),E(Yt))},e.\u0275cmp=Qe({type:e,selectors:[["mat-tab-body"]],viewQuery:function(r,o){if(r&1&&Ut(bd,5),r&2){let s;et(s=tt())&&(o._portalHost=s.first)}},hostAttrs:[1,"mat-mdc-tab-body"],inputs:{_content:["content","_content"],origin:"origin",animationDuration:"animationDuration",preserveContent:"preserveContent",position:"position"},outputs:{_onCentering:"_onCentering",_beforeCentering:"_beforeCentering",_afterLeavingCenter:"_afterLeavingCenter",_onCentered:"_onCentered"},decls:3,vars:6,consts:[["cdkScrollable","",1,"mat-mdc-tab-body-content"],["content",""],["matTabBodyHost",""]],template:function(r,o){r&1&&(ee(0,"div",0,1),De("@translateTab.start",function(a){return o._onTranslateTabStarted(a)})("@translateTab.done",function(a){return o._translateTabComplete.next(a)}),ei(2,nK,0,0,"ng-template",2),le()),r&2&&Le("@translateTab",i1(3,rK,o._position,n1(1,iK,o.animationDuration)))},dependencies:[yK],styles:['.mat-mdc-tab-body{top:0;left:0;right:0;bottom:0;position:absolute;display:block;overflow:hidden;outline:0;flex-basis:100%}.mat-mdc-tab-body.mat-mdc-tab-body-active{position:relative;overflow-x:hidden;overflow-y:auto;z-index:1;flex-grow:1}.mat-mdc-tab-group.mat-mdc-tab-group-dynamic-height .mat-mdc-tab-body.mat-mdc-tab-body-active{overflow-y:hidden}.mat-mdc-tab-body-content{height:100%;overflow:auto}.mat-mdc-tab-group-dynamic-height .mat-mdc-tab-body-content{overflow:hidden}.mat-mdc-tab-body-content[style*="visibility: hidden"]{display:none}'],encapsulation:2,data:{animation:[bK.translateTab]}});let t=e;return t})(),vK=new C("MatTabContent"),wK=(()=>{let e=class e{constructor(i){this.template=i}};e.\u0275fac=function(r){return new(r||e)(E(dn))},e.\u0275dir=_e({type:e,selectors:[["","matTabContent",""]],features:[Zt([{provide:vK,useExisting:e}])]});let t=e;return t})(),EK=new C("MatTabLabel"),yF=new C("MAT_TAB"),xK=(()=>{let e=class e extends fF{constructor(i,r,o){super(i,r),this._closestTab=o}};e.\u0275fac=function(r){return new(r||e)(E(dn),E(hn),E(yF,8))},e.\u0275dir=_e({type:e,selectors:[["","mat-tab-label",""],["","matTabLabel",""]],features:[Zt([{provide:EK,useExisting:e}]),We]});let t=e;return t})(),PE="mdc-tab-indicator--active",pF="mdc-tab-indicator--no-transition",NE=class{constructor(e){this._items=e}hide(){this._items.forEach(e=>e.deactivateInkBar())}alignToElement(e){let n=this._items.find(r=>r.elementRef.nativeElement===e),i=this._currentItem;if(n!==i&&(i?.deactivateInkBar(),n)){let r=i?.elementRef.nativeElement.getBoundingClientRect?.();n.activateInkBar(r),this._currentItem=n}}};function IK(t){return class extends t{constructor(...e){super(...e),this._fitToContent=!1}get fitInkBarToContent(){return this._fitToContent}set fitInkBarToContent(e){let n=Sn(e);this._fitToContent!==n&&(this._fitToContent=n,this._inkBarElement&&this._appendInkBarElement())}activateInkBar(e){let n=this.elementRef.nativeElement;if(!e||!n.getBoundingClientRect||!this._inkBarContentElement){n.classList.add(PE);return}let i=n.getBoundingClientRect(),r=e.width/i.width,o=e.left-i.left;n.classList.add(pF),this._inkBarContentElement.style.setProperty("transform",`translateX(${o}px) scaleX(${r})`),n.getBoundingClientRect(),n.classList.remove(pF),n.classList.add(PE),this._inkBarContentElement.style.setProperty("transform","")}deactivateInkBar(){this.elementRef.nativeElement.classList.remove(PE)}ngOnInit(){this._createInkBarElement()}ngOnDestroy(){this._inkBarElement?.remove(),this._inkBarElement=this._inkBarContentElement=null}_createInkBarElement(){let e=this.elementRef.nativeElement.ownerDocument||document;this._inkBarElement=e.createElement("span"),this._inkBarContentElement=e.createElement("span"),this._inkBarElement.className="mdc-tab-indicator",this._inkBarContentElement.className="mdc-tab-indicator__content mdc-tab-indicator__content--underline",this._inkBarElement.appendChild(this._inkBarContentElement),this._appendInkBarElement()}_appendInkBarElement(){this._inkBarElement;let e=this._fitToContent?this.elementRef.nativeElement.querySelector(".mdc-tab__content"):this.elementRef.nativeElement;e.appendChild(this._inkBarElement)}}}var CK=IK(vE(class{})),vF=(()=>{let e=class e extends CK{constructor(i){super(),this.elementRef=i}focus(){this.elementRef.nativeElement.focus()}getOffsetLeft(){return this.elementRef.nativeElement.offsetLeft}getOffsetWidth(){return this.elementRef.nativeElement.offsetWidth}};e.\u0275fac=function(r){return new(r||e)(E(he))},e.\u0275dir=_e({type:e,selectors:[["","matTabLabelWrapper",""]],hostVars:3,hostBindings:function(r,o){r&2&&(kt("aria-disabled",!!o.disabled),Pe("mat-mdc-tab-disabled",o.disabled))},inputs:{disabled:"disabled",fitInkBarToContent:"fitInkBarToContent"},features:[We]});let t=e;return t})(),TK=vE(class{}),wF=new C("MAT_TAB_GROUP"),OE=(()=>{let e=class e extends TK{get templateLabel(){return this._templateLabel}set templateLabel(i){this._setTemplateLabelInput(i)}get content(){return this._contentPortal}constructor(i,r){super(),this._viewContainerRef=i,this._closestTabGroup=r,this._explicitContent=void 0,this.textLabel="",this._contentPortal=null,this._stateChanges=new me,this.position=null,this.origin=null,this.isActive=!1}ngOnChanges(i){(i.hasOwnProperty("textLabel")||i.hasOwnProperty("disabled"))&&this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}ngOnInit(){this._contentPortal=new Dc(this._explicitContent||this._implicitContent,this._viewContainerRef)}_setTemplateLabelInput(i){i&&i._closestTab===this&&(this._templateLabel=i)}};e.\u0275fac=function(r){return new(r||e)(E(hn),E(wF,8))},e.\u0275cmp=Qe({type:e,selectors:[["mat-tab"]],contentQueries:function(r,o,s){if(r&1&&(Ir(s,xK,5),Ir(s,wK,7,dn)),r&2){let a;et(a=tt())&&(o.templateLabel=a.first),et(a=tt())&&(o._explicitContent=a.first)}},viewQuery:function(r,o){if(r&1&&Ut(dn,7),r&2){let s;et(s=tt())&&(o._implicitContent=s.first)}},inputs:{disabled:"disabled",textLabel:["label","textLabel"],ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],labelClass:"labelClass",bodyClass:"bodyClass"},exportAs:["matTab"],features:[Zt([{provide:yF,useExisting:e}]),We,Gi],ngContentSelectors:_F,decls:1,vars:0,template:function(r,o){r&1&&(fn(),ei(0,oK,1,0,"ng-template"))},encapsulation:2});let t=e;return t})(),gF=_o({passive:!0}),DK=650,SK=100,AK=(()=>{let e=class e{get disablePagination(){return this._disablePagination}set disablePagination(i){this._disablePagination=Sn(i)}get selectedIndex(){return this._selectedIndex}set selectedIndex(i){i=Ss(i),this._selectedIndex!=i&&(this._selectedIndexChanged=!0,this._selectedIndex=i,this._keyManager&&this._keyManager.updateActiveItem(i))}constructor(i,r,o,s,a,c,l){this._elementRef=i,this._changeDetectorRef=r,this._viewportRuler=o,this._dir=s,this._ngZone=a,this._platform=c,this._animationMode=l,this._scrollDistance=0,this._selectedIndexChanged=!1,this._destroyed=new me,this._showPaginationControls=!1,this._disableScrollAfter=!0,this._disableScrollBefore=!0,this._stopScrolling=new me,this._disablePagination=!1,this._selectedIndex=0,this.selectFocusedIndex=new re,this.indexFocused=new re,a.runOutsideAngular(()=>{Gr(i.nativeElement,"mouseleave").pipe(En(this._destroyed)).subscribe(()=>{this._stopInterval()})})}ngAfterViewInit(){Gr(this._previousPaginator.nativeElement,"touchstart",gF).pipe(En(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("before")}),Gr(this._nextPaginator.nativeElement,"touchstart",gF).pipe(En(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("after")})}ngAfterContentInit(){let i=this._dir?this._dir.change:L("ltr"),r=this._viewportRuler.change(150),o=()=>{this.updatePagination(),this._alignInkBarToSelectedTab()};this._keyManager=new Cp(this._items).withHorizontalOrientation(this._getLayoutDirection()).withHomeAndEnd().withWrap().skipPredicate(()=>!1),this._keyManager.updateActiveItem(this._selectedIndex),this._ngZone.onStable.pipe(Kt(1)).subscribe(o),rs(i,r,this._items.changes,this._itemsResized()).pipe(En(this._destroyed)).subscribe(()=>{this._ngZone.run(()=>{Promise.resolve().then(()=>{this._scrollDistance=Math.max(0,Math.min(this._getMaxScrollDistance(),this._scrollDistance)),o()})}),this._keyManager.withHorizontalOrientation(this._getLayoutDirection())}),this._keyManager.change.subscribe(s=>{this.indexFocused.emit(s),this._setTabFocus(s)})}_itemsResized(){return typeof ResizeObserver!="function"?Gt:this._items.changes.pipe(wn(this._items),qe(i=>new Y(r=>this._ngZone.runOutsideAngular(()=>{let o=new ResizeObserver(s=>r.next(s));return i.forEach(s=>o.observe(s.elementRef.nativeElement)),()=>{o.disconnect()}}))),as(1),He(i=>i.some(r=>r.contentRect.width>0&&r.contentRect.height>0)))}ngAfterContentChecked(){this._tabLabelCount!=this._items.length&&(this.updatePagination(),this._tabLabelCount=this._items.length,this._changeDetectorRef.markForCheck()),this._selectedIndexChanged&&(this._scrollToLabel(this._selectedIndex),this._checkScrollingControls(),this._alignInkBarToSelectedTab(),this._selectedIndexChanged=!1,this._changeDetectorRef.markForCheck()),this._scrollDistanceChanged&&(this._updateTabScrollPosition(),this._scrollDistanceChanged=!1,this._changeDetectorRef.markForCheck())}ngOnDestroy(){this._keyManager?.destroy(),this._destroyed.next(),this._destroyed.complete(),this._stopScrolling.complete()}_handleKeydown(i){if(!xp(i))switch(i.keyCode){case 13:case 32:if(this.focusIndex!==this.selectedIndex){let r=this._items.get(this.focusIndex);r&&!r.disabled&&(this.selectFocusedIndex.emit(this.focusIndex),this._itemSelected(i))}break;default:this._keyManager.onKeydown(i)}}_onContentChanges(){let i=this._elementRef.nativeElement.textContent;i!==this._currentTextContent&&(this._currentTextContent=i||"",this._ngZone.run(()=>{this.updatePagination(),this._alignInkBarToSelectedTab(),this._changeDetectorRef.markForCheck()}))}updatePagination(){this._checkPaginationEnabled(),this._checkScrollingControls(),this._updateTabScrollPosition()}get focusIndex(){return this._keyManager?this._keyManager.activeItemIndex:0}set focusIndex(i){!this._isValidIndex(i)||this.focusIndex===i||!this._keyManager||this._keyManager.setActiveItem(i)}_isValidIndex(i){return this._items?!!this._items.toArray()[i]:!0}_setTabFocus(i){if(this._showPaginationControls&&this._scrollToLabel(i),this._items&&this._items.length){this._items.toArray()[i].focus();let r=this._tabListContainer.nativeElement;this._getLayoutDirection()=="ltr"?r.scrollLeft=0:r.scrollLeft=r.scrollWidth-r.offsetWidth}}_getLayoutDirection(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}_updateTabScrollPosition(){if(this.disablePagination)return;let i=this.scrollDistance,r=this._getLayoutDirection()==="ltr"?-i:i;this._tabList.nativeElement.style.transform=`translateX(${Math.round(r)}px)`,(this._platform.TRIDENT||this._platform.EDGE)&&(this._tabListContainer.nativeElement.scrollLeft=0)}get scrollDistance(){return this._scrollDistance}set scrollDistance(i){this._scrollTo(i)}_scrollHeader(i){let r=this._tabListContainer.nativeElement.offsetWidth,o=(i=="before"?-1:1)*r/3;return this._scrollTo(this._scrollDistance+o)}_handlePaginatorClick(i){this._stopInterval(),this._scrollHeader(i)}_scrollToLabel(i){if(this.disablePagination)return;let r=this._items?this._items.toArray()[i]:null;if(!r)return;let o=this._tabListContainer.nativeElement.offsetWidth,{offsetLeft:s,offsetWidth:a}=r.elementRef.nativeElement,c,l;this._getLayoutDirection()=="ltr"?(c=s,l=c+a):(l=this._tabListInner.nativeElement.offsetWidth-s,c=l-a);let u=this.scrollDistance,d=this.scrollDistance+o;c<u?this.scrollDistance-=u-c:l>d&&(this.scrollDistance+=Math.min(l-d,c-u))}_checkPaginationEnabled(){if(this.disablePagination)this._showPaginationControls=!1;else{let i=this._tabListInner.nativeElement.scrollWidth>this._elementRef.nativeElement.offsetWidth;i||(this.scrollDistance=0),i!==this._showPaginationControls&&this._changeDetectorRef.markForCheck(),this._showPaginationControls=i}}_checkScrollingControls(){this.disablePagination?this._disableScrollAfter=this._disableScrollBefore=!0:(this._disableScrollBefore=this.scrollDistance==0,this._disableScrollAfter=this.scrollDistance==this._getMaxScrollDistance(),this._changeDetectorRef.markForCheck())}_getMaxScrollDistance(){let i=this._tabListInner.nativeElement.scrollWidth,r=this._tabListContainer.nativeElement.offsetWidth;return i-r||0}_alignInkBarToSelectedTab(){let i=this._items&&this._items.length?this._items.toArray()[this.selectedIndex]:null,r=i?i.elementRef.nativeElement:null;r?this._inkBar.alignToElement(r):this._inkBar.hide()}_stopInterval(){this._stopScrolling.next()}_handlePaginatorPress(i,r){r&&r.button!=null&&r.button!==0||(this._stopInterval(),Wl(DK,SK).pipe(En(rs(this._stopScrolling,this._destroyed))).subscribe(()=>{let{maxScrollDistance:o,distance:s}=this._scrollHeader(i);(s===0||s>=o)&&this._stopInterval()}))}_scrollTo(i){if(this.disablePagination)return{maxScrollDistance:0,distance:0};let r=this._getMaxScrollDistance();return this._scrollDistance=Math.max(0,Math.min(r,i)),this._scrollDistanceChanged=!0,this._checkScrollingControls(),{maxScrollDistance:r,distance:this._scrollDistance}}};e.\u0275fac=function(r){return new(r||e)(E(he),E(Yt),E(RE),E(Dp,8),E(V),E(bt),E(Bt,8))},e.\u0275dir=_e({type:e,inputs:{disablePagination:"disablePagination"}});let t=e;return t})(),kK=(()=>{let e=class e extends AK{get disableRipple(){return this._disableRipple}set disableRipple(i){this._disableRipple=Sn(i)}constructor(i,r,o,s,a,c,l){super(i,r,o,s,a,c,l),this._disableRipple=!1}ngAfterContentInit(){this._inkBar=new NE(this._items),super.ngAfterContentInit()}_itemSelected(i){i.preventDefault()}};e.\u0275fac=function(r){return new(r||e)(E(he),E(Yt),E(RE),E(Dp,8),E(V),E(bt),E(Bt,8))},e.\u0275cmp=Qe({type:e,selectors:[["mat-tab-header"]],contentQueries:function(r,o,s){if(r&1&&Ir(s,vF,4),r&2){let a;et(a=tt())&&(o._items=a)}},viewQuery:function(r,o){if(r&1&&(Ut(sK,7),Ut(aK,7),Ut(cK,7),Ut(lK,5),Ut(uK,5)),r&2){let s;et(s=tt())&&(o._tabListContainer=s.first),et(s=tt())&&(o._tabList=s.first),et(s=tt())&&(o._tabListInner=s.first),et(s=tt())&&(o._nextPaginator=s.first),et(s=tt())&&(o._previousPaginator=s.first)}},hostAttrs:[1,"mat-mdc-tab-header"],hostVars:4,hostBindings:function(r,o){r&2&&Pe("mat-mdc-tab-header-pagination-controls-enabled",o._showPaginationControls)("mat-mdc-tab-header-rtl",o._getLayoutDirection()=="rtl")},inputs:{selectedIndex:"selectedIndex",disableRipple:"disableRipple"},outputs:{selectFocusedIndex:"selectFocusedIndex",indexFocused:"indexFocused"},features:[We],ngContentSelectors:_F,decls:13,vars:10,consts:[["aria-hidden","true","type","button","mat-ripple","","tabindex","-1",1,"mat-mdc-tab-header-pagination","mat-mdc-tab-header-pagination-before",3,"matRippleDisabled","disabled","click","mousedown","touchend"],["previousPaginator",""],[1,"mat-mdc-tab-header-pagination-chevron"],[1,"mat-mdc-tab-label-container",3,"keydown"],["tabListContainer",""],["role","tablist",1,"mat-mdc-tab-list",3,"cdkObserveContent"],["tabList",""],[1,"mat-mdc-tab-labels"],["tabListInner",""],["aria-hidden","true","type","button","mat-ripple","","tabindex","-1",1,"mat-mdc-tab-header-pagination","mat-mdc-tab-header-pagination-after",3,"matRippleDisabled","disabled","mousedown","click","touchend"],["nextPaginator",""]],template:function(r,o){r&1&&(fn(),ee(0,"button",0,1),De("click",function(){return o._handlePaginatorClick("before")})("mousedown",function(a){return o._handlePaginatorPress("before",a)})("touchend",function(){return o._stopInterval()}),ke(2,"div",2),le(),ee(3,"div",3,4),De("keydown",function(a){return o._handleKeydown(a)}),ee(5,"div",5,6),De("cdkObserveContent",function(){return o._onContentChanges()}),ee(7,"div",7,8),Mt(9),le()()(),ee(10,"button",9,10),De("mousedown",function(a){return o._handlePaginatorPress("after",a)})("click",function(){return o._handlePaginatorClick("after")})("touchend",function(){return o._stopInterval()}),ke(12,"div",2),le()),r&2&&(Pe("mat-mdc-tab-header-pagination-disabled",o._disableScrollBefore),Le("matRippleDisabled",o._disableScrollBefore||o.disableRipple)("disabled",o._disableScrollBefore||null),Be(3),Pe("_mat-animation-noopable",o._animationMode==="NoopAnimations"),Be(7),Pe("mat-mdc-tab-header-pagination-disabled",o._disableScrollAfter),Le("matRippleDisabled",o._disableScrollAfter||o.disableRipple)("disabled",o._disableScrollAfter||null))},dependencies:[wo,qP],styles:[".mat-mdc-tab-header{display:flex;overflow:hidden;position:relative;flex-shrink:0}.mdc-tab-indicator .mdc-tab-indicator__content{transition-duration:var(--mat-tab-animation-duration, 250ms)}.mat-mdc-tab-header-pagination{-webkit-user-select:none;user-select:none;position:relative;display:none;justify-content:center;align-items:center;min-width:32px;cursor:pointer;z-index:2;-webkit-tap-highlight-color:rgba(0,0,0,0);touch-action:none;box-sizing:content-box;background:none;border:none;outline:0;padding:0}.mat-mdc-tab-header-pagination::-moz-focus-inner{border:0}.mat-mdc-tab-header-pagination .mat-ripple-element{opacity:.12;background-color:var(--mat-tab-header-inactive-ripple-color)}.mat-mdc-tab-header-pagination-controls-enabled .mat-mdc-tab-header-pagination{display:flex}.mat-mdc-tab-header-pagination-before,.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-after{padding-left:4px}.mat-mdc-tab-header-pagination-before .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-after .mat-mdc-tab-header-pagination-chevron{transform:rotate(-135deg)}.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-before,.mat-mdc-tab-header-pagination-after{padding-right:4px}.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-before .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-header-pagination-after .mat-mdc-tab-header-pagination-chevron{transform:rotate(45deg)}.mat-mdc-tab-header-pagination-chevron{border-style:solid;border-width:2px 2px 0 0;height:8px;width:8px;border-color:var(--mat-tab-header-pagination-icon-color)}.mat-mdc-tab-header-pagination-disabled{box-shadow:none;cursor:default;pointer-events:none}.mat-mdc-tab-header-pagination-disabled .mat-mdc-tab-header-pagination-chevron{opacity:.4}.mat-mdc-tab-list{flex-grow:1;position:relative;transition:transform 500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-mdc-tab-list{transition:none}._mat-animation-noopable span.mdc-tab-indicator__content,._mat-animation-noopable span.mdc-tab__text-label{transition:none}.mat-mdc-tab-label-container{display:flex;flex-grow:1;overflow:hidden;z-index:1;border-bottom-style:solid;border-bottom-width:var(--mat-tab-header-divider-height);border-bottom-color:var(--mat-tab-header-divider-color)}.mat-mdc-tab-group-inverted-header .mat-mdc-tab-label-container{border-bottom:none;border-top-style:solid;border-top-width:var(--mat-tab-header-divider-height);border-top-color:var(--mat-tab-header-divider-color)}.mat-mdc-tab-labels{display:flex;flex:1 0 auto}[mat-align-tabs=center]>.mat-mdc-tab-header .mat-mdc-tab-labels{justify-content:center}[mat-align-tabs=end]>.mat-mdc-tab-header .mat-mdc-tab-labels{justify-content:flex-end}.mat-mdc-tab::before{margin:5px}.cdk-high-contrast-active .mat-mdc-tab[aria-disabled=true]{color:GrayText}"],encapsulation:2});let t=e;return t})(),MK=new C("MAT_TABS_CONFIG"),RK=0,PK=xc($N(class{constructor(t){this._elementRef=t}}),"primary"),NK=!0,EF=(()=>{let e=class e extends PK{get fitInkBarToContent(){return this._fitInkBarToContent}set fitInkBarToContent(i){this._fitInkBarToContent=Sn(i),this._changeDetectorRef.markForCheck()}get stretchTabs(){return this._stretchTabs}set stretchTabs(i){this._stretchTabs=Sn(i)}get dynamicHeight(){return this._dynamicHeight}set dynamicHeight(i){this._dynamicHeight=Sn(i)}get selectedIndex(){return this._selectedIndex}set selectedIndex(i){this._indexToSelect=Ss(i,null)}get animationDuration(){return this._animationDuration}set animationDuration(i){this._animationDuration=/^\d+$/.test(i+"")?i+"ms":i}get contentTabIndex(){return this._contentTabIndex}set contentTabIndex(i){this._contentTabIndex=Ss(i,null)}get disablePagination(){return this._disablePagination}set disablePagination(i){this._disablePagination=Sn(i)}get preserveContent(){return this._preserveContent}set preserveContent(i){this._preserveContent=Sn(i)}get backgroundColor(){return this._backgroundColor}set backgroundColor(i){if(!NK)throw new Error("mat-tab-group background color must be set through the Sass theming API");let r=this._elementRef.nativeElement.classList;r.remove("mat-tabs-with-background",`mat-background-${this.backgroundColor}`),i&&r.add("mat-tabs-with-background",`mat-background-${i}`),this._backgroundColor=i}constructor(i,r,o,s){super(i),this._changeDetectorRef=r,this._animationMode=s,this._tabs=new io,this._indexToSelect=0,this._lastFocusedTabIndex=null,this._tabBodyWrapperHeight=0,this._tabsSubscription=Te.EMPTY,this._tabLabelSubscription=Te.EMPTY,this._fitInkBarToContent=!1,this._stretchTabs=!0,this._dynamicHeight=!1,this._selectedIndex=null,this.headerPosition="above",this._disablePagination=!1,this._preserveContent=!1,this.selectedIndexChange=new re,this.focusChange=new re,this.animationDone=new re,this.selectedTabChange=new re(!0),this._groupId=RK++,this.animationDuration=o&&o.animationDuration?o.animationDuration:"500ms",this.disablePagination=o&&o.disablePagination!=null?o.disablePagination:!1,this.dynamicHeight=o&&o.dynamicHeight!=null?o.dynamicHeight:!1,this.contentTabIndex=o?.contentTabIndex??null,this.preserveContent=!!o?.preserveContent,this.fitInkBarToContent=o&&o.fitInkBarToContent!=null?o.fitInkBarToContent:!1,this.stretchTabs=o&&o.stretchTabs!=null?o.stretchTabs:!0}ngAfterContentChecked(){let i=this._indexToSelect=this._clampTabIndex(this._indexToSelect);if(this._selectedIndex!=i){let r=this._selectedIndex==null;if(!r){this.selectedTabChange.emit(this._createChangeEvent(i));let o=this._tabBodyWrapper.nativeElement;o.style.minHeight=o.clientHeight+"px"}Promise.resolve().then(()=>{this._tabs.forEach((o,s)=>o.isActive=s===i),r||(this.selectedIndexChange.emit(i),this._tabBodyWrapper.nativeElement.style.minHeight="")})}this._tabs.forEach((r,o)=>{r.position=o-i,this._selectedIndex!=null&&r.position==0&&!r.origin&&(r.origin=i-this._selectedIndex)}),this._selectedIndex!==i&&(this._selectedIndex=i,this._lastFocusedTabIndex=null,this._changeDetectorRef.markForCheck())}ngAfterContentInit(){this._subscribeToAllTabChanges(),this._subscribeToTabLabels(),this._tabsSubscription=this._tabs.changes.subscribe(()=>{let i=this._clampTabIndex(this._indexToSelect);if(i===this._selectedIndex){let r=this._tabs.toArray(),o;for(let s=0;s<r.length;s++)if(r[s].isActive){this._indexToSelect=this._selectedIndex=s,this._lastFocusedTabIndex=null,o=r[s];break}!o&&r[i]&&Promise.resolve().then(()=>{r[i].isActive=!0,this.selectedTabChange.emit(this._createChangeEvent(i))})}this._changeDetectorRef.markForCheck()})}_subscribeToAllTabChanges(){this._allTabs.changes.pipe(wn(this._allTabs)).subscribe(i=>{this._tabs.reset(i.filter(r=>r._closestTabGroup===this||!r._closestTabGroup)),this._tabs.notifyOnChanges()})}ngOnDestroy(){this._tabs.destroy(),this._tabsSubscription.unsubscribe(),this._tabLabelSubscription.unsubscribe()}realignInkBar(){this._tabHeader&&this._tabHeader._alignInkBarToSelectedTab()}updatePagination(){this._tabHeader&&this._tabHeader.updatePagination()}focusTab(i){let r=this._tabHeader;r&&(r.focusIndex=i)}_focusChanged(i){this._lastFocusedTabIndex=i,this.focusChange.emit(this._createChangeEvent(i))}_createChangeEvent(i){let r=new FE;return r.index=i,this._tabs&&this._tabs.length&&(r.tab=this._tabs.toArray()[i]),r}_subscribeToTabLabels(){this._tabLabelSubscription&&this._tabLabelSubscription.unsubscribe(),this._tabLabelSubscription=rs(...this._tabs.map(i=>i._stateChanges)).subscribe(()=>this._changeDetectorRef.markForCheck())}_clampTabIndex(i){return Math.min(this._tabs.length-1,Math.max(i||0,0))}_getTabLabelId(i){return`mat-tab-label-${this._groupId}-${i}`}_getTabContentId(i){return`mat-tab-content-${this._groupId}-${i}`}_setTabBodyWrapperHeight(i){if(!this._dynamicHeight||!this._tabBodyWrapperHeight)return;let r=this._tabBodyWrapper.nativeElement;r.style.height=this._tabBodyWrapperHeight+"px",this._tabBodyWrapper.nativeElement.offsetHeight&&(r.style.height=i+"px")}_removeTabBodyWrapperHeight(){let i=this._tabBodyWrapper.nativeElement;this._tabBodyWrapperHeight=i.clientHeight,i.style.height="",this.animationDone.emit()}_handleClick(i,r,o){r.focusIndex=o,i.disabled||(this.selectedIndex=o)}_getTabIndex(i){let r=this._lastFocusedTabIndex??this.selectedIndex;return i===r?0:-1}_tabFocusChanged(i,r){i&&i!=="mouse"&&i!=="touch"&&(this._tabHeader.focusIndex=r)}};e.\u0275fac=function(r){return new(r||e)(E(he),E(Yt),E(MK,8),E(Bt,8))},e.\u0275cmp=Qe({type:e,selectors:[["mat-tab-group"]],contentQueries:function(r,o,s){if(r&1&&Ir(s,OE,5),r&2){let a;et(a=tt())&&(o._allTabs=a)}},viewQuery:function(r,o){if(r&1&&(Ut(dK,5),Ut(hK,5)),r&2){let s;et(s=tt())&&(o._tabBodyWrapper=s.first),et(s=tt())&&(o._tabHeader=s.first)}},hostAttrs:["ngSkipHydration","",1,"mat-mdc-tab-group"],hostVars:8,hostBindings:function(r,o){r&2&&(Iu("--mat-tab-animation-duration",o.animationDuration),Pe("mat-mdc-tab-group-dynamic-height",o.dynamicHeight)("mat-mdc-tab-group-inverted-header",o.headerPosition==="below")("mat-mdc-tab-group-stretch-tabs",o.stretchTabs))},inputs:{color:"color",disableRipple:"disableRipple",fitInkBarToContent:"fitInkBarToContent",stretchTabs:["mat-stretch-tabs","stretchTabs"],dynamicHeight:"dynamicHeight",selectedIndex:"selectedIndex",headerPosition:"headerPosition",animationDuration:"animationDuration",contentTabIndex:"contentTabIndex",disablePagination:"disablePagination",preserveContent:"preserveContent",backgroundColor:"backgroundColor"},outputs:{selectedIndexChange:"selectedIndexChange",focusChange:"focusChange",animationDone:"animationDone",selectedTabChange:"selectedTabChange"},exportAs:["matTabGroup"],features:[Zt([{provide:wF,useExisting:e}]),We],decls:8,vars:5,consts:[[3,"selectedIndex","disableRipple","disablePagination","indexFocused","selectFocusedIndex"],["tabHeader",""],[1,"mat-mdc-tab-body-wrapper"],["tabBodyWrapper",""],["role","tab","matTabLabelWrapper","","cdkMonitorElementFocus","",1,"mdc-tab","mat-mdc-tab","mat-mdc-focus-indicator",3,"id","ngClass","disabled","fitInkBarToContent","click","cdkFocusChange"],["tabNode",""],[1,"mdc-tab__ripple"],["mat-ripple","",1,"mat-mdc-tab-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mdc-tab__content"],[1,"mdc-tab__text-label"],[3,"cdkPortalOutlet"],["role","tabpanel",3,"id","ngClass","content","position","origin","animationDuration","preserveContent","_onCentered","_onCentering"],["class","mdc-tab mat-mdc-tab mat-mdc-focus-indicator","role","tab","matTabLabelWrapper","","cdkMonitorElementFocus","",3,"id","mdc-tab--active","ngClass","disabled","fitInkBarToContent"],["role","tabpanel",3,"id","mat-mdc-tab-body-active","ngClass","content","position","origin","animationDuration","preserveContent"]],template:function(r,o){r&1&&(ee(0,"mat-tab-header",0,1),De("indexFocused",function(a){return o._focusChanged(a)})("selectFocusedIndex",function(a){return o.selectedIndex=a}),f0(2,gK,8,16,"div",12,h0),le(),ee(4,"div",2,3),f0(6,_K,1,12,"mat-tab-body",13,h0),le()),r&2&&(Le("selectedIndex",o.selectedIndex||0)("disableRipple",o.disableRipple)("disablePagination",o.disablePagination),Be(2),m0(o._tabs),Be(2),Pe("_mat-animation-noopable",o._animationMode==="NoopAnimations"),Be(2),m0(o._tabs))},dependencies:[Xm,bd,wo,XP,bF,vF,kK],styles:['.mdc-tab{min-width:90px;padding-right:24px;padding-left:24px;display:flex;flex:1 0 auto;justify-content:center;box-sizing:border-box;margin:0;padding-top:0;padding-bottom:0;border:none;outline:none;text-align:center;white-space:nowrap;cursor:pointer;-webkit-appearance:none;z-index:1}.mdc-tab::-moz-focus-inner{padding:0;border:0}.mdc-tab[hidden]{display:none}.mdc-tab--min-width{flex:0 1 auto}.mdc-tab__content{display:flex;align-items:center;justify-content:center;height:inherit;pointer-events:none}.mdc-tab__text-label{transition:150ms color linear;display:inline-block;line-height:1;z-index:2}.mdc-tab__icon{transition:150ms color linear;z-index:2}.mdc-tab--stacked .mdc-tab__content{flex-direction:column;align-items:center;justify-content:center}.mdc-tab--stacked .mdc-tab__text-label{padding-top:6px;padding-bottom:4px}.mdc-tab--active .mdc-tab__text-label,.mdc-tab--active .mdc-tab__icon{transition-delay:100ms}.mdc-tab:not(.mdc-tab--stacked) .mdc-tab__icon+.mdc-tab__text-label{padding-left:8px;padding-right:0}[dir=rtl] .mdc-tab:not(.mdc-tab--stacked) .mdc-tab__icon+.mdc-tab__text-label,.mdc-tab:not(.mdc-tab--stacked) .mdc-tab__icon+.mdc-tab__text-label[dir=rtl]{padding-left:0;padding-right:8px}.mdc-tab-indicator{display:flex;position:absolute;top:0;left:0;justify-content:center;width:100%;height:100%;pointer-events:none;z-index:1}.mdc-tab-indicator__content{transform-origin:left;opacity:0}.mdc-tab-indicator__content--underline{align-self:flex-end;box-sizing:border-box;width:100%;border-top-style:solid}.mdc-tab-indicator__content--icon{align-self:center;margin:0 auto}.mdc-tab-indicator--active .mdc-tab-indicator__content{opacity:1}.mdc-tab-indicator .mdc-tab-indicator__content{transition:250ms transform cubic-bezier(0.4, 0, 0.2, 1)}.mdc-tab-indicator--no-transition .mdc-tab-indicator__content{transition:none}.mdc-tab-indicator--fade .mdc-tab-indicator__content{transition:150ms opacity linear}.mdc-tab-indicator--active.mdc-tab-indicator--fade .mdc-tab-indicator__content{transition-delay:100ms}.mat-mdc-tab-ripple{position:absolute;top:0;left:0;bottom:0;right:0;pointer-events:none}.mat-mdc-tab{-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-decoration:none;background:none;font-family:var(--mat-tab-header-label-text-font);font-size:var(--mat-tab-header-label-text-size);letter-spacing:var(--mat-tab-header-label-text-tracking);line-height:var(--mat-tab-header-label-text-line-height);font-weight:var(--mat-tab-header-label-text-weight)}.mat-mdc-tab .mdc-tab-indicator__content--underline{border-color:var(--mdc-tab-indicator-active-indicator-color)}.mat-mdc-tab .mdc-tab-indicator__content--underline{border-top-width:var(--mdc-tab-indicator-active-indicator-height)}.mat-mdc-tab .mdc-tab-indicator__content--underline{border-radius:var(--mdc-tab-indicator-active-indicator-shape)}.mat-mdc-tab:not(.mdc-tab--stacked){height:var(--mdc-secondary-navigation-tab-container-height)}.mat-mdc-tab:not(:disabled).mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):hover.mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):focus.mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):active.mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:disabled.mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):hover:not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):focus:not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):active:not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:disabled:not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab.mdc-tab{flex-grow:0}.mat-mdc-tab:hover .mdc-tab__text-label{color:var(--mat-tab-header-inactive-hover-label-text-color)}.mat-mdc-tab:focus .mdc-tab__text-label{color:var(--mat-tab-header-inactive-focus-label-text-color)}.mat-mdc-tab.mdc-tab--active .mdc-tab__text-label{color:var(--mat-tab-header-active-label-text-color)}.mat-mdc-tab.mdc-tab--active .mdc-tab__ripple::before,.mat-mdc-tab.mdc-tab--active .mat-ripple-element{background-color:var(--mat-tab-header-active-ripple-color)}.mat-mdc-tab.mdc-tab--active:hover .mdc-tab__text-label{color:var(--mat-tab-header-active-hover-label-text-color)}.mat-mdc-tab.mdc-tab--active:hover .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-active-hover-indicator-color)}.mat-mdc-tab.mdc-tab--active:focus .mdc-tab__text-label{color:var(--mat-tab-header-active-focus-label-text-color)}.mat-mdc-tab.mdc-tab--active:focus .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-active-focus-indicator-color)}.mat-mdc-tab.mat-mdc-tab-disabled{opacity:.4;pointer-events:none}.mat-mdc-tab.mat-mdc-tab-disabled .mdc-tab__content{pointer-events:none}.mat-mdc-tab.mat-mdc-tab-disabled .mdc-tab__ripple::before,.mat-mdc-tab.mat-mdc-tab-disabled .mat-ripple-element{background-color:var(--mat-tab-header-disabled-ripple-color)}.mat-mdc-tab .mdc-tab__ripple::before{content:"";display:block;position:absolute;top:0;left:0;right:0;bottom:0;opacity:0;pointer-events:none;background-color:var(--mat-tab-header-inactive-ripple-color)}.mat-mdc-tab .mdc-tab__text-label{color:var(--mat-tab-header-inactive-label-text-color);display:inline-flex;align-items:center}.mat-mdc-tab .mdc-tab__content{position:relative;pointer-events:auto}.mat-mdc-tab:hover .mdc-tab__ripple::before{opacity:.04}.mat-mdc-tab.cdk-program-focused .mdc-tab__ripple::before,.mat-mdc-tab.cdk-keyboard-focused .mdc-tab__ripple::before{opacity:.12}.mat-mdc-tab .mat-ripple-element{opacity:.12;background-color:var(--mat-tab-header-inactive-ripple-color)}.mat-mdc-tab-group.mat-mdc-tab-group-stretch-tabs>.mat-mdc-tab-header .mat-mdc-tab{flex-grow:1}.mat-mdc-tab-group{display:flex;flex-direction:column;max-width:100%}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination{background-color:var(--mat-tab-header-with-background-background-color)}.mat-mdc-tab-group.mat-tabs-with-background.mat-primary>.mat-mdc-tab-header .mat-mdc-tab .mdc-tab__text-label{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background.mat-primary>.mat-mdc-tab-header .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background:not(.mat-primary)>.mat-mdc-tab-header .mat-mdc-tab:not(.mdc-tab--active) .mdc-tab__text-label{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background:not(.mat-primary)>.mat-mdc-tab-header .mat-mdc-tab:not(.mdc-tab--active) .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-focus-indicator::before,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-focus-indicator::before{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-ripple-element,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mdc-tab__ripple::before,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-ripple-element,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mdc-tab__ripple::before{background-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-tab-header-pagination-chevron{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-mdc-tab-group-inverted-header{flex-direction:column-reverse}.mat-mdc-tab-group.mat-mdc-tab-group-inverted-header .mdc-tab-indicator__content--underline{align-self:flex-start}.mat-mdc-tab-body-wrapper{position:relative;overflow:hidden;display:flex;transition:height 500ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-mdc-tab-body-wrapper._mat-animation-noopable{transition:none !important;animation:none !important}'],encapsulation:2});let t=e;return t})(),FE=class{};var xF=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=H({type:e}),e.\u0275inj=z({imports:[ac,yt,mF,Ic,bc,JP,yt]});let t=e;return t})();var OK=["mat-button",""],LK=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],VK=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"];var jK=".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}";var BK=["mat-icon-button",""],UK=["*"];var $K=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],IF=(()=>{let e=class e{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(i){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,i)}get disableRipple(){return this._disableRipple}set disableRipple(i){this._disableRipple=i,this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(i){this._disabled=i,this._updateRippleDisabled()}constructor(i,r,o,s){this._elementRef=i,this._platform=r,this._ngZone=o,this._animationMode=s,this._focusMonitor=T(Tp),this._rippleLoader=T(zN),this._isFab=!1,this._disableRipple=!1,this._disabled=!1,this._rippleLoader?.configureRipple(this._elementRef.nativeElement,{className:"mat-mdc-button-ripple"});let a=this._elementRef.nativeElement,c=a.classList;for(let{attribute:l,mdcClasses:u}of $K)a.hasAttribute(l)&&c.add(...u)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(i="program",r){i?this._focusMonitor.focusVia(this._elementRef.nativeElement,i,r):this._elementRef.nativeElement.focus(r)}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}};e.\u0275fac=function(r){Rm()},e.\u0275dir=_e({type:e,inputs:{color:"color",disableRipple:["disableRipple","disableRipple",$t],disabled:["disabled","disabled",$t]},features:[yi]});let t=e;return t})();var eg=(()=>{let e=class e extends IF{constructor(i,r,o,s){super(i,r,o,s)}};e.\u0275fac=function(r){return new(r||e)(E(he),E(bt),E(V),E(Bt,8))},e.\u0275cmp=Qe({type:e,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:9,hostBindings:function(r,o){r&2&&(kt("disabled",o.disabled||null),Cu(o.color?"mat-"+o.color:""),Pe("_mat-animation-noopable",o._animationMode==="NoopAnimations")("mat-unthemed",!o.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],features:[We],attrs:OK,ngContentSelectors:VK,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(r,o){r&1&&(fn(LK),ke(0,"span",0),Mt(1),ee(2,"span",1),Mt(3,1),le(),Mt(4,2),ke(5,"span",2)(6,"span",3)),r&2&&Pe("mdc-button__ripple",!o._isFab)("mdc-fab__ripple",o._isFab)},styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px);display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{font-family:var(--mdc-text-button-label-text-font);font-size:var(--mdc-text-button-label-text-size);letter-spacing:var(--mdc-text-button-label-text-tracking);font-weight:var(--mdc-text-button-label-text-weight);text-transform:var(--mdc-text-button-label-text-transform);height:var(--mdc-text-button-container-height);border-radius:var(--mdc-text-button-container-shape);--mdc-text-button-container-shape:4px;--mdc-text-button-container-height:36px;--mdc-text-button-keep-touch-target:false}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-text-button-ripple-color)}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-state-layer-color)}.mat-mdc-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-hover-state-layer-opacity)}.mat-mdc-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-focus-state-layer-opacity)}.mat-mdc-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-pressed-state-layer-opacity)}.mat-mdc-button[disabled]{cursor:default;pointer-events:none;color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-unelevated-button{font-family:var(--mdc-filled-button-label-text-font);font-size:var(--mdc-filled-button-label-text-size);letter-spacing:var(--mdc-filled-button-label-text-tracking);font-weight:var(--mdc-filled-button-label-text-weight);text-transform:var(--mdc-filled-button-label-text-transform);height:var(--mdc-filled-button-container-height);border-radius:var(--mdc-filled-button-container-shape);--mdc-filled-button-container-shape:4px;--mdc-filled-button-container-elevation:0;--mdc-filled-button-disabled-container-elevation:0;--mdc-filled-button-focus-container-elevation:0;--mdc-filled-button-hover-container-elevation:0;--mdc-filled-button-keep-touch-target:false;--mdc-filled-button-pressed-container-elevation:0}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color)}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-filled-button-ripple-color)}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-state-layer-color)}.mat-mdc-unelevated-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-hover-state-layer-opacity)}.mat-mdc-unelevated-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-focus-state-layer-opacity)}.mat-mdc-unelevated-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-pressed-state-layer-opacity)}.mat-mdc-unelevated-button[disabled]{cursor:default;pointer-events:none;color:var(--mdc-filled-button-disabled-label-text-color);background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-raised-button{font-family:var(--mdc-protected-button-label-text-font);font-size:var(--mdc-protected-button-label-text-size);letter-spacing:var(--mdc-protected-button-label-text-tracking);font-weight:var(--mdc-protected-button-label-text-weight);text-transform:var(--mdc-protected-button-label-text-transform);height:var(--mdc-protected-button-container-height);border-radius:var(--mdc-protected-button-container-shape);--mdc-protected-button-container-shape:4px;--mdc-protected-button-keep-touch-target:false}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color)}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-protected-button-ripple-color)}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-state-layer-color)}.mat-mdc-raised-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-hover-state-layer-opacity)}.mat-mdc-raised-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-focus-state-layer-opacity)}.mat-mdc-raised-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-pressed-state-layer-opacity)}.mat-mdc-raised-button[disabled]{cursor:default;pointer-events:none;color:var(--mdc-protected-button-disabled-label-text-color);background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button[disabled][disabled]{box-shadow:none}.mat-mdc-outlined-button{font-family:var(--mdc-outlined-button-label-text-font);font-size:var(--mdc-outlined-button-label-text-size);letter-spacing:var(--mdc-outlined-button-label-text-tracking);font-weight:var(--mdc-outlined-button-label-text-weight);text-transform:var(--mdc-outlined-button-label-text-transform);height:var(--mdc-outlined-button-container-height);border-radius:var(--mdc-outlined-button-container-shape);padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width);--mdc-outlined-button-keep-touch-target:false;--mdc-outlined-button-outline-width:1px;--mdc-outlined-button-container-shape:4px}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color)}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape)}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color)}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width))}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-outlined-button-ripple-color)}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-state-layer-color)}.mat-mdc-outlined-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-hover-state-layer-opacity)}.mat-mdc-outlined-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-focus-state-layer-opacity)}.mat-mdc-outlined-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-pressed-state-layer-opacity)}.mat-mdc-outlined-button[disabled]{cursor:default;pointer-events:none;color:var(--mdc-outlined-button-disabled-label-text-color);border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-button-base{text-decoration:none}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button .mat-mdc-button-touch-target,.mat-mdc-unelevated-button .mat-mdc-button-touch-target,.mat-mdc-raised-button .mat-mdc-button-touch-target,.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}[dir=rtl] .mat-mdc-button>.mat-icon,.mat-mdc-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}.mat-mdc-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon,.mat-mdc-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem;margin-left:-4px;margin-right:8px}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:-4px}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon,.mat-mdc-raised-button .mdc-button__label+.mat-icon,.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:-4px}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon,.mat-mdc-unelevated-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-raised-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-outlined-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:-4px;margin-right:8px}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px)*-1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0});let t=e;return t})();var CF=(()=>{let e=class e extends IF{constructor(i,r,o,s){super(i,r,o,s),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}};e.\u0275fac=function(r){return new(r||e)(E(he),E(bt),E(V),E(Bt,8))},e.\u0275cmp=Qe({type:e,selectors:[["button","mat-icon-button",""]],hostVars:9,hostBindings:function(r,o){r&2&&(kt("disabled",o.disabled||null),Cu(o.color?"mat-"+o.color:""),Pe("_mat-animation-noopable",o._animationMode==="NoopAnimations")("mat-unthemed",!o.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],features:[We],attrs:BK,ngContentSelectors:UK,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(r,o){r&1&&(fn(),ke(0,"span",0),Mt(1),ke(2,"span",1)(3,"span",2))},styles:['.mdc-icon-button{display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;user-select:none;z-index:0;overflow:visible}.mdc-icon-button .mdc-icon-button__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}@media screen and (forced-colors: active){.mdc-icon-button.mdc-ripple-upgraded--background-focused .mdc-icon-button__focus-ring,.mdc-icon-button:not(.mdc-ripple-upgraded):focus .mdc-icon-button__focus-ring{display:block}}.mdc-icon-button:disabled{cursor:default;pointer-events:none}.mdc-icon-button[hidden]{display:none}.mdc-icon-button--display-flex{align-items:center;display:inline-flex;justify-content:center}.mdc-icon-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%;display:none}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring{border-color:CanvasText}}.mdc-icon-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring::after{border-color:CanvasText}}.mdc-icon-button__icon{display:inline-block}.mdc-icon-button__icon.mdc-icon-button__icon--on{display:none}.mdc-icon-button--on .mdc-icon-button__icon{display:none}.mdc-icon-button--on .mdc-icon-button__icon.mdc-icon-button__icon--on{display:inline-block}.mdc-icon-button__link{height:100%;left:0;outline:none;position:absolute;top:0;width:100%}.mat-mdc-icon-button{height:var(--mdc-icon-button-state-layer-size);width:var(--mdc-icon-button-state-layer-size);color:var(--mdc-icon-button-icon-color);--mdc-icon-button-state-layer-size:48px;--mdc-icon-button-icon-size:24px}.mat-mdc-icon-button .mdc-button__icon{font-size:var(--mdc-icon-button-icon-size)}.mat-mdc-icon-button svg,.mat-mdc-icon-button img{width:var(--mdc-icon-button-icon-size);height:var(--mdc-icon-button-icon-size)}.mat-mdc-icon-button:disabled{color:var(--mdc-icon-button-disabled-icon-color)}.mat-mdc-icon-button{padding:12px;border-radius:50%;flex-shrink:0;text-align:center;font-size:var(--mdc-icon-button-icon-size);-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button svg{vertical-align:baseline}.mat-mdc-icon-button[disabled]{cursor:default;pointer-events:none;color:var(--mdc-icon-button-disabled-icon-color)}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-icon-button .mdc-button__label{z-index:1}.mat-mdc-icon-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-icon-button-ripple-color)}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-state-layer-color)}.mat-mdc-icon-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-hover-state-layer-opacity)}.mat-mdc-icon-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-focus-state-layer-opacity)}.mat-mdc-icon-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-pressed-state-layer-opacity)}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',jK],encapsulation:2,changeDetection:0});let t=e;return t})();var TF=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=H({type:e}),e.\u0275inj=z({imports:[yt,Ic,yt]});let t=e;return t})();var zK=["input"],HK=["label"],qK=["*"],WK=new C("mat-checkbox-default-options",{providedIn:"root",factory:kF});function kF(){return{color:"accent",clickAction:"check-indeterminate"}}var GK={provide:gd,useExisting:Wi(()=>VE),multi:!0},LE=class{},KK=0,SF=kF(),VE=(()=>{let e=class e{focus(){this._inputElement.nativeElement.focus()}_createChangeEvent(i){let r=new LE;return r.source=this,r.checked=i,r}_getAnimationTargetElement(){return this._inputElement?.nativeElement}get inputId(){return`${this.id||this._uniqueId}-input`}constructor(i,r,o,s,a,c){this._elementRef=i,this._changeDetectorRef=r,this._ngZone=o,this._animationMode=a,this._options=c,this._animationClasses={uncheckedToChecked:"mdc-checkbox--anim-unchecked-checked",uncheckedToIndeterminate:"mdc-checkbox--anim-unchecked-indeterminate",checkedToUnchecked:"mdc-checkbox--anim-checked-unchecked",checkedToIndeterminate:"mdc-checkbox--anim-checked-indeterminate",indeterminateToChecked:"mdc-checkbox--anim-indeterminate-checked",indeterminateToUnchecked:"mdc-checkbox--anim-indeterminate-unchecked"},this.ariaLabel="",this.ariaLabelledby=null,this.labelPosition="after",this.name=null,this.change=new re,this.indeterminateChange=new re,this._onTouched=()=>{},this._currentAnimationClass="",this._currentCheckState=0,this._controlValueAccessorChangeFn=()=>{},this._checked=!1,this._disabled=!1,this._indeterminate=!1,this._options=this._options||SF,this.color=this._options.color||SF.color,this.tabIndex=parseInt(s)||0,this.id=this._uniqueId=`mat-mdc-checkbox-${++KK}`}ngAfterViewInit(){this._syncIndeterminate(this._indeterminate)}get checked(){return this._checked}set checked(i){i!=this.checked&&(this._checked=i,this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(i){i!==this.disabled&&(this._disabled=i,this._changeDetectorRef.markForCheck())}get indeterminate(){return this._indeterminate}set indeterminate(i){let r=i!=this._indeterminate;this._indeterminate=i,r&&(this._indeterminate?this._transitionCheckState(3):this._transitionCheckState(this.checked?1:2),this.indeterminateChange.emit(this._indeterminate)),this._syncIndeterminate(this._indeterminate)}_isRippleDisabled(){return this.disableRipple||this.disabled}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}writeValue(i){this.checked=!!i}registerOnChange(i){this._controlValueAccessorChangeFn=i}registerOnTouched(i){this._onTouched=i}setDisabledState(i){this.disabled=i}_transitionCheckState(i){let r=this._currentCheckState,o=this._getAnimationTargetElement();if(!(r===i||!o)&&(this._currentAnimationClass&&o.classList.remove(this._currentAnimationClass),this._currentAnimationClass=this._getAnimationClassForCheckStateTransition(r,i),this._currentCheckState=i,this._currentAnimationClass.length>0)){o.classList.add(this._currentAnimationClass);let s=this._currentAnimationClass;this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{o.classList.remove(s)},1e3)})}}_emitChangeEvent(){this._controlValueAccessorChangeFn(this.checked),this.change.emit(this._createChangeEvent(this.checked)),this._inputElement&&(this._inputElement.nativeElement.checked=this.checked)}toggle(){this.checked=!this.checked,this._controlValueAccessorChangeFn(this.checked)}_handleInputClick(){let i=this._options?.clickAction;!this.disabled&&i!=="noop"?(this.indeterminate&&i!=="check"&&Promise.resolve().then(()=>{this._indeterminate=!1,this.indeterminateChange.emit(this._indeterminate)}),this._checked=!this._checked,this._transitionCheckState(this._checked?1:2),this._emitChangeEvent()):!this.disabled&&i==="noop"&&(this._inputElement.nativeElement.checked=this.checked,this._inputElement.nativeElement.indeterminate=this.indeterminate)}_onInteractionEvent(i){i.stopPropagation()}_onBlur(){Promise.resolve().then(()=>{this._onTouched(),this._changeDetectorRef.markForCheck()})}_getAnimationClassForCheckStateTransition(i,r){if(this._animationMode==="NoopAnimations")return"";switch(i){case 0:if(r===1)return this._animationClasses.uncheckedToChecked;if(r==3)return this._checked?this._animationClasses.checkedToIndeterminate:this._animationClasses.uncheckedToIndeterminate;break;case 2:return r===1?this._animationClasses.uncheckedToChecked:this._animationClasses.uncheckedToIndeterminate;case 1:return r===2?this._animationClasses.checkedToUnchecked:this._animationClasses.checkedToIndeterminate;case 3:return r===1?this._animationClasses.indeterminateToChecked:this._animationClasses.indeterminateToUnchecked}return""}_syncIndeterminate(i){let r=this._inputElement;r&&(r.nativeElement.indeterminate=i)}_onInputClick(){this._handleInputClick()}_onTouchTargetClick(){this._handleInputClick(),this.disabled||this._inputElement.nativeElement.focus()}_preventBubblingFromLabel(i){i.target&&this._labelElement.nativeElement.contains(i.target)&&i.stopPropagation()}};e.\u0275fac=function(r){return new(r||e)(E(he),E(Yt),E(V),co("tabindex"),E(Bt,8),E(WK,8))},e.\u0275cmp=Qe({type:e,selectors:[["mat-checkbox"]],viewQuery:function(r,o){if(r&1&&(Ut(zK,5),Ut(HK,5),Ut(wo,5)),r&2){let s;et(s=tt())&&(o._inputElement=s.first),et(s=tt())&&(o._labelElement=s.first),et(s=tt())&&(o.ripple=s.first)}},hostAttrs:[1,"mat-mdc-checkbox"],hostVars:14,hostBindings:function(r,o){r&2&&(Tu("id",o.id),kt("tabindex",null)("aria-label",null)("aria-labelledby",null),Cu(o.color?"mat-"+o.color:"mat-accent"),Pe("_mat-animation-noopable",o._animationMode==="NoopAnimations")("mdc-checkbox--disabled",o.disabled)("mat-mdc-checkbox-disabled",o.disabled)("mat-mdc-checkbox-checked",o.checked))},inputs:{ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],id:"id",required:["required","required",$t],labelPosition:"labelPosition",name:"name",value:"value",disableRipple:["disableRipple","disableRipple",$t],tabIndex:["tabIndex","tabIndex",i=>i==null?void 0:Qm(i)],color:"color",checked:["checked","checked",$t],disabled:["disabled","disabled",$t],indeterminate:["indeterminate","indeterminate",$t]},outputs:{change:"change",indeterminateChange:"indeterminateChange"},exportAs:["matCheckbox"],features:[Zt([GK]),yi],ngContentSelectors:qK,decls:15,vars:20,consts:[[1,"mdc-form-field",3,"click"],[1,"mdc-checkbox"],["checkbox",""],[1,"mat-mdc-checkbox-touch-target",3,"click"],["type","checkbox",1,"mdc-checkbox__native-control",3,"checked","indeterminate","disabled","id","required","tabIndex","blur","click","change"],["input",""],[1,"mdc-checkbox__ripple"],[1,"mdc-checkbox__background"],["focusable","false","viewBox","0 0 24 24","aria-hidden","true",1,"mdc-checkbox__checkmark"],["fill","none","d","M1.73,12.91 8.1,19.28 22.79,4.59",1,"mdc-checkbox__checkmark-path"],[1,"mdc-checkbox__mixedmark"],["mat-ripple","",1,"mat-mdc-checkbox-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mdc-label",3,"for"],["label",""]],template:function(r,o){if(r&1&&(fn(),ee(0,"div",0),De("click",function(a){return o._preventBubblingFromLabel(a)}),ee(1,"div",1,2)(3,"div",3),De("click",function(){return o._onTouchTargetClick()}),le(),ee(4,"input",4,5),De("blur",function(){return o._onBlur()})("click",function(){return o._onInputClick()})("change",function(a){return o._onInteractionEvent(a)}),le(),ke(6,"div",6),ee(7,"div",7),Jk(),ee(8,"svg",8),ke(9,"path",9),le(),eM(),ke(10,"div",10),le(),ke(11,"div",11),le(),ee(12,"label",12,13),Mt(14),le()()),r&2){let s=rc(2);Pe("mdc-form-field--align-end",o.labelPosition=="before"),Be(4),Pe("mdc-checkbox--selected",o.checked),Le("checked",o.checked)("indeterminate",o.indeterminate)("disabled",o.disabled)("id",o.inputId)("required",o.required)("tabIndex",o.disabled?-1:o.tabIndex),kt("aria-label",o.ariaLabel||null)("aria-labelledby",o.ariaLabelledby)("aria-describedby",o.ariaDescribedby)("aria-checked",o.indeterminate?"mixed":null)("name",o.name)("value",o.value),Be(7),Le("matRippleTrigger",s)("matRippleDisabled",o.disableRipple||o.disabled)("matRippleCentered",!0),Be(1),Le("for",o.inputId)}},dependencies:[wo],styles:['.mdc-touch-target-wrapper{display:inline}@keyframes mdc-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:29.7833385}50%{animation-timing-function:cubic-bezier(0, 0, 0.2, 1)}100%{stroke-dashoffset:0}}@keyframes mdc-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0, 0, 0, 1)}100%{transform:scaleX(1)}}@keyframes mdc-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(0.4, 0, 1, 1);opacity:1;stroke-dashoffset:0}to{opacity:0;stroke-dashoffset:-29.7833385}}@keyframes mdc-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(45deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(45deg);opacity:0}to{transform:rotate(360deg);opacity:1}}@keyframes mdc-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:mdc-animation-deceleration-curve-timing-function;transform:rotate(-45deg);opacity:0}to{transform:rotate(0deg);opacity:1}}@keyframes mdc-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(315deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;transform:scaleX(1);opacity:1}32.8%,100%{transform:scaleX(0);opacity:0}}.mdc-checkbox{display:inline-block;position:relative;flex:0 0 18px;box-sizing:content-box;width:18px;height:18px;line-height:0;white-space:nowrap;cursor:pointer;vertical-align:bottom}.mdc-checkbox[hidden]{display:none}.mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring,.mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%}@media screen and (forced-colors: active){.mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring,.mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring{border-color:CanvasText}}.mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring::after,.mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring::after,.mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring::after{border-color:CanvasText}}@media all and (-ms-high-contrast: none){.mdc-checkbox .mdc-checkbox__focus-ring{display:none}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-checkbox__mixedmark{margin:0 1px}}.mdc-checkbox--disabled{cursor:default;pointer-events:none}.mdc-checkbox__background{display:inline-flex;position:absolute;align-items:center;justify-content:center;box-sizing:border-box;width:18px;height:18px;border:2px solid currentColor;border-radius:2px;background-color:rgba(0,0,0,0);pointer-events:none;will-change:background-color,border-color;transition:background-color 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1),border-color 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox__checkmark{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;opacity:0;transition:opacity 180ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox--upgraded .mdc-checkbox__checkmark{opacity:1}.mdc-checkbox__checkmark-path{transition:stroke-dashoffset 180ms 0ms cubic-bezier(0.4, 0, 0.6, 1);stroke:currentColor;stroke-width:3.12px;stroke-dashoffset:29.7833385;stroke-dasharray:29.7833385}.mdc-checkbox__mixedmark{width:100%;height:0;transform:scaleX(0) rotate(0deg);border-width:1px;border-style:solid;opacity:0;transition:opacity 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__background,.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__background,.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__background,.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__background{animation-duration:180ms;animation-timing-function:linear}.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-unchecked-checked-checkmark-path 180ms linear 0s;transition:none}.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-unchecked-indeterminate-mixedmark 90ms linear 0s;transition:none}.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-checked-unchecked-checkmark-path 90ms linear 0s;transition:none}.mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__checkmark{animation:mdc-checkbox-checked-indeterminate-checkmark 90ms linear 0s;transition:none}.mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-checked-indeterminate-mixedmark 90ms linear 0s;transition:none}.mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__checkmark{animation:mdc-checkbox-indeterminate-checked-checkmark 500ms linear 0s;transition:none}.mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-checked-mixedmark 500ms linear 0s;transition:none}.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-unchecked-mixedmark 300ms linear 0s;transition:none}.mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background,.mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background{transition:border-color 90ms 0ms cubic-bezier(0, 0, 0.2, 1),background-color 90ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__checkmark-path,.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__checkmark-path,.mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background .mdc-checkbox__checkmark-path{stroke-dashoffset:0}.mdc-checkbox__native-control{position:absolute;margin:0;padding:0;opacity:0;cursor:inherit}.mdc-checkbox__native-control:disabled{cursor:default;pointer-events:none}.mdc-checkbox--touch{margin:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2)}.mdc-checkbox--touch .mdc-checkbox__native-control{top:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2);right:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2);left:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2);width:var(--mdc-checkbox-state-layer-size);height:var(--mdc-checkbox-state-layer-size)}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__checkmark{transition:opacity 180ms 0ms cubic-bezier(0, 0, 0.2, 1),transform 180ms 0ms cubic-bezier(0, 0, 0.2, 1);opacity:1}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__mixedmark{transform:scaleX(1) rotate(-45deg)}.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__checkmark,.mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background .mdc-checkbox__checkmark{transform:rotate(45deg);opacity:0;transition:opacity 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__mixedmark,.mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background .mdc-checkbox__mixedmark{transform:scaleX(1) rotate(0deg);opacity:1}.mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__background,.mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__checkmark,.mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__checkmark-path,.mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__mixedmark{transition:none}.mdc-form-field{display:inline-flex;align-items:center;vertical-align:middle}.mdc-form-field[hidden]{display:none}.mdc-form-field>label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0;order:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{margin-left:auto;margin-right:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{padding-left:0;padding-right:4px}.mdc-form-field--nowrap>label{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.mdc-form-field--align-end>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px;order:-1}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{margin-left:0;margin-right:auto}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{padding-left:4px;padding-right:0}.mdc-form-field--space-between{justify-content:space-between}.mdc-form-field--space-between>label{margin:0}[dir=rtl] .mdc-form-field--space-between>label,.mdc-form-field--space-between>label[dir=rtl]{margin:0}.mdc-checkbox{padding:calc((var(--mdc-checkbox-state-layer-size) - 18px) / 2);margin:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2)}.mdc-checkbox .mdc-checkbox__native-control[disabled]:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:var(--mdc-checkbox-disabled-unselected-icon-color);background-color:transparent}.mdc-checkbox .mdc-checkbox__native-control[disabled]:checked~.mdc-checkbox__background,.mdc-checkbox .mdc-checkbox__native-control[disabled]:indeterminate~.mdc-checkbox__background,.mdc-checkbox .mdc-checkbox__native-control[data-indeterminate=true][disabled]~.mdc-checkbox__background{border-color:transparent;background-color:var(--mdc-checkbox-disabled-selected-icon-color)}.mdc-checkbox .mdc-checkbox__native-control:enabled~.mdc-checkbox__background .mdc-checkbox__checkmark{color:var(--mdc-checkbox-selected-checkmark-color)}.mdc-checkbox .mdc-checkbox__native-control:enabled~.mdc-checkbox__background .mdc-checkbox__mixedmark{border-color:var(--mdc-checkbox-selected-checkmark-color)}.mdc-checkbox .mdc-checkbox__native-control:disabled~.mdc-checkbox__background .mdc-checkbox__checkmark{color:var(--mdc-checkbox-disabled-selected-checkmark-color)}.mdc-checkbox .mdc-checkbox__native-control:disabled~.mdc-checkbox__background .mdc-checkbox__mixedmark{border-color:var(--mdc-checkbox-disabled-selected-checkmark-color)}.mdc-checkbox .mdc-checkbox__native-control:enabled:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-icon-color);background-color:transparent}.mdc-checkbox .mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mdc-checkbox .mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background,.mdc-checkbox .mdc-checkbox__native-control[data-indeterminate=true]:enabled~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-icon-color);background-color:var(--mdc-checkbox-selected-icon-color)}@keyframes mdc-checkbox-fade-in-background-8A000000FFF4433600000000FFF44336{0%{border-color:var(--mdc-checkbox-unselected-icon-color);background-color:transparent}50%{border-color:var(--mdc-checkbox-selected-icon-color);background-color:var(--mdc-checkbox-selected-icon-color)}}@keyframes mdc-checkbox-fade-out-background-8A000000FFF4433600000000FFF44336{0%,80%{border-color:var(--mdc-checkbox-selected-icon-color);background-color:var(--mdc-checkbox-selected-icon-color)}100%{border-color:var(--mdc-checkbox-unselected-icon-color);background-color:transparent}}.mdc-checkbox.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mdc-checkbox.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-in-background-8A000000FFF4433600000000FFF44336}.mdc-checkbox.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mdc-checkbox.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-out-background-8A000000FFF4433600000000FFF44336}.mdc-checkbox:hover .mdc-checkbox__native-control:enabled:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-hover-icon-color);background-color:transparent}.mdc-checkbox:hover .mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mdc-checkbox:hover .mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background,.mdc-checkbox:hover .mdc-checkbox__native-control[data-indeterminate=true]:enabled~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-hover-icon-color);background-color:var(--mdc-checkbox-selected-hover-icon-color)}@keyframes mdc-checkbox-fade-in-background-FF212121FFF4433600000000FFF44336{0%{border-color:var(--mdc-checkbox-unselected-hover-icon-color);background-color:transparent}50%{border-color:var(--mdc-checkbox-selected-hover-icon-color);background-color:var(--mdc-checkbox-selected-hover-icon-color)}}@keyframes mdc-checkbox-fade-out-background-FF212121FFF4433600000000FFF44336{0%,80%{border-color:var(--mdc-checkbox-selected-hover-icon-color);background-color:var(--mdc-checkbox-selected-hover-icon-color)}100%{border-color:var(--mdc-checkbox-unselected-hover-icon-color);background-color:transparent}}.mdc-checkbox:hover.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mdc-checkbox:hover.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-in-background-FF212121FFF4433600000000FFF44336}.mdc-checkbox:hover.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mdc-checkbox:hover.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-out-background-FF212121FFF4433600000000FFF44336}.mdc-checkbox:not(:disabled):active .mdc-checkbox__native-control:enabled:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-pressed-icon-color);background-color:transparent}.mdc-checkbox:not(:disabled):active .mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mdc-checkbox:not(:disabled):active .mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background,.mdc-checkbox:not(:disabled):active .mdc-checkbox__native-control[data-indeterminate=true]:enabled~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-pressed-icon-color);background-color:var(--mdc-checkbox-selected-pressed-icon-color)}@keyframes mdc-checkbox-fade-in-background-8A000000FFF4433600000000FFF44336{0%{border-color:var(--mdc-checkbox-unselected-pressed-icon-color);background-color:transparent}50%{border-color:var(--mdc-checkbox-selected-pressed-icon-color);background-color:var(--mdc-checkbox-selected-pressed-icon-color)}}@keyframes mdc-checkbox-fade-out-background-8A000000FFF4433600000000FFF44336{0%,80%{border-color:var(--mdc-checkbox-selected-pressed-icon-color);background-color:var(--mdc-checkbox-selected-pressed-icon-color)}100%{border-color:var(--mdc-checkbox-unselected-pressed-icon-color);background-color:transparent}}.mdc-checkbox:not(:disabled):active.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mdc-checkbox:not(:disabled):active.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-in-background-8A000000FFF4433600000000FFF44336}.mdc-checkbox:not(:disabled):active.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mdc-checkbox:not(:disabled):active.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-out-background-8A000000FFF4433600000000FFF44336}.mdc-checkbox .mdc-checkbox__background{top:calc((var(--mdc-checkbox-state-layer-size) - 18px) / 2);left:calc((var(--mdc-checkbox-state-layer-size) - 18px) / 2)}.mdc-checkbox .mdc-checkbox__native-control{top:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2);right:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2);left:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2);width:var(--mdc-checkbox-state-layer-size);height:var(--mdc-checkbox-state-layer-size)}.mdc-checkbox .mdc-checkbox__native-control:enabled:focus:focus:not(:checked):not(:indeterminate)~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-focus-icon-color)}.mdc-checkbox .mdc-checkbox__native-control:enabled:focus:checked~.mdc-checkbox__background,.mdc-checkbox .mdc-checkbox__native-control:enabled:focus:indeterminate~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-focus-icon-color);background-color:var(--mdc-checkbox-selected-focus-icon-color)}.mdc-checkbox:hover .mdc-checkbox__ripple{opacity:var(--mdc-checkbox-unselected-hover-state-layer-opacity);background-color:var(--mdc-checkbox-unselected-hover-state-layer-color)}.mdc-checkbox:hover .mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-unselected-hover-state-layer-color)}.mdc-checkbox .mdc-checkbox__native-control:focus~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-unselected-focus-state-layer-opacity);background-color:var(--mdc-checkbox-unselected-focus-state-layer-color)}.mdc-checkbox .mdc-checkbox__native-control:focus~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-unselected-focus-state-layer-color)}.mdc-checkbox:active .mdc-checkbox__native-control~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-unselected-pressed-state-layer-opacity);background-color:var(--mdc-checkbox-unselected-pressed-state-layer-color)}.mdc-checkbox:active .mdc-checkbox__native-control~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-unselected-pressed-state-layer-color)}.mdc-checkbox:hover .mdc-checkbox__native-control:checked~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-selected-hover-state-layer-opacity);background-color:var(--mdc-checkbox-selected-hover-state-layer-color)}.mdc-checkbox:hover .mdc-checkbox__native-control:checked~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-selected-hover-state-layer-color)}.mdc-checkbox .mdc-checkbox__native-control:focus:checked~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-selected-focus-state-layer-opacity);background-color:var(--mdc-checkbox-selected-focus-state-layer-color)}.mdc-checkbox .mdc-checkbox__native-control:focus:checked~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-selected-focus-state-layer-color)}.mdc-checkbox:active .mdc-checkbox__native-control:checked~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-selected-pressed-state-layer-opacity);background-color:var(--mdc-checkbox-selected-pressed-state-layer-color)}.mdc-checkbox:active .mdc-checkbox__native-control:checked~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-selected-pressed-state-layer-color)}.mat-mdc-checkbox{display:inline-block;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-checkbox .mdc-checkbox__background{-webkit-print-color-adjust:exact;color-adjust:exact}.mat-mdc-checkbox._mat-animation-noopable *,.mat-mdc-checkbox._mat-animation-noopable *::before{transition:none !important;animation:none !important}.mat-mdc-checkbox label{cursor:pointer}.mat-mdc-checkbox.mat-mdc-checkbox-disabled label{cursor:default}.mat-mdc-checkbox label:empty{display:none}.cdk-high-contrast-active .mat-mdc-checkbox.mat-mdc-checkbox-disabled{opacity:.5}.cdk-high-contrast-active .mat-mdc-checkbox .mdc-checkbox__checkmark{--mdc-checkbox-selected-checkmark-color: CanvasText;--mdc-checkbox-disabled-selected-checkmark-color: CanvasText}.mat-mdc-checkbox .mdc-checkbox__ripple{opacity:0}.mat-mdc-checkbox-ripple,.mdc-checkbox__ripple{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:50%;pointer-events:none}.mat-mdc-checkbox-ripple:not(:empty),.mdc-checkbox__ripple:not(:empty){transform:translateZ(0)}.mat-mdc-checkbox-ripple .mat-ripple-element{opacity:.1}.mat-mdc-checkbox-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-checkbox-ripple::before{border-radius:50%}.mdc-checkbox__native-control:focus~.mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0});let t=e;return t})();var AF=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=H({type:e}),e.\u0275inj=z({});let t=e;return t})(),MF=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=H({type:e}),e.\u0275inj=z({imports:[yt,Ic,AF,yt,AF]});let t=e;return t})();function YK(t,e){if(t&1&&(ee(0,"li",7),mn(1),le()),t&2){let n=e.$implicit;Be(1),Du(" ",n," ")}}var RF=(()=>{let e=class e{constructor(){this.result=["Nessun risultato."],this.value="d20+5",this.reroll="1",this.expl=!1}getReroll(){let i=parseInt(this.reroll);return isNaN(i)?1:i}rollAll(){let i=[];for(let r=0;r<this.getReroll();r++)i[r]=this.roll();this.result=i}roll(){let i="",r=0;this.value.startsWith("+")&&(this.value=this.value.substring(1));let o=this.value.split(/([+-])/);for(let s=0;s<o.length;s+=2){let a=s==0||o[s-1]==="+"?"+":"-",c=this.rollDice(o[s]);r=a==="+"?r+c:r-c,i+=`${a}${c}`}return`${i.substring(1)}= ${r}
`}rollDice(i){let r=0,o=i.split(/(d)/),s=o[0]?parseInt(o[0]):1,a=o[2]?parseInt(o[2]):1;for(let c=0;c<s;c++)r+=this.explosion(a);return r}explosion(i){let r=Math.floor(Math.random()*i)+1;return this.expl&&i!==1&&r===i?r+this.explosion(i):r}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Qe({type:e,selectors:[["app-roll"]],decls:15,vars:4,consts:[[1,"roll"],[2,"display","inline","margin-right","10px"],["id","reroll","type","number","matInput","",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],["matInput","","placeholder","cosa vuoi tirare?","type","text","name","value",3,"ngModel","ngModelChange"],["mat-raised-button","",3,"click"],["style","list-style-type: none;",4,"ngFor","ngForOf"],[2,"list-style-type","none"]],template:function(r,o){r&1&&(ke(0,"br"),ee(1,"div",0)(2,"p",1),mn(3,"Ritirare x"),le(),ee(4,"input",2),De("ngModelChange",function(a){return o.reroll=a}),le(),ke(5,"br"),ee(6,"mat-checkbox",3),De("ngModelChange",function(a){return o.expl=a}),mn(7,"Esplosivo"),le(),ke(8,"br"),ee(9,"input",4),De("ngModelChange",function(a){return o.value=a}),le(),ee(10,"button",5),De("click",function(){return o.rollAll()}),mn(11,"ROLL"),le(),ke(12,"br")(13,"br"),ei(14,YK,2,1,"li",6),le()),r&2&&(Be(4),Le("ngModel",o.reroll),Be(2),Le("ngModel",o.expl),Be(3),Le("ngModel",o.value),Be(5),Le("ngForOf",o.result))},dependencies:[S1,eg,Eo,DE,Tc,Ns,VE],styles:["p[_ngcontent-%COMP%]{margin-top:1%;margin-left:1%}button[_ngcontent-%COMP%]{margin-left:1%;font-size:small;transition:transform .1s}button[_ngcontent-%COMP%]:active{transform:rotate(360deg)}input[_ngcontent-%COMP%]{color:#fff;background:none}mat-checkbox[_ngcontent-%COMP%]{margin:0 10px}#reroll[_ngcontent-%COMP%]{width:15px}input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none}"]});let t=e;return t})();var XK="firebase",JK="10.7.1";ht(XK,JK,"app");var An=new qi("ANGULARFIRE2_VERSION");function Ac(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var Os=(t,e)=>{let n=e?[e]:lf(),i=[];return n.forEach(r=>{r.container.getProvider(t).instances.forEach(s=>{i.includes(s)||i.push(s)})}),i},zn=class{constructor(){return Os(eQ)}},eQ="app-check";function Sc(){}var tg=class{zone;delegate;constructor(e,n=Kb){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,i){let r=this.zone,o=function(s){r.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,n,i)}},jE=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Sc,{},Sc,Sc)),n.pipe(Oe({next:i,complete:i,error:i})).subscribe(e).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},ii=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new tg(Zone.current)),this.insideAngular=n.run(()=>new tg(Zone.current,Li)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||t)(y(V))};static \u0275prov=A({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function ng(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function tQ(t){return ng().ngZone.runOutsideAngular(()=>t())}function Fs(t){return ng().ngZone.run(()=>t())}function pn(t){return nQ(ng())(t)}function nQ(t){return function(n){return n=n.lift(new jE(t.ngZone)),n.pipe(Zn(t.outsideAngular),Fn(t.insideAngular))}}var iQ=(t,e)=>function(){let i=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Fs(()=>t.apply(void 0,i))},xo=(t,e)=>function(){let n,i=arguments;for(let o=0;o<arguments.length;o++)typeof i[o]=="function"&&(e&&(n||=Fs(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Sc,{},Sc,Sc))),i[o]=iQ(i[o],n));let r=tQ(()=>t.apply(this,i));if(!e)if(r instanceof Y){let o=ng();return r.pipe(Zn(o.outsideAngular),Fn(o.insideAngular))}else return Fs(()=>r);return r instanceof Y?r.pipe(pn):r instanceof Promise?Fs(()=>new Promise((o,s)=>r.then(a=>Fs(()=>o(a)),a=>Fs(()=>s(a))))):typeof r=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),r.apply(this,arguments)}:Fs(()=>r)};var xi=class{constructor(e){return e}},kr=class{constructor(){return lf()}};function rQ(t){return t&&t.length===1?t[0]:new xi(Jo())}var BE=new C("angularfire2._apps"),oQ={provide:xi,useFactory:rQ,deps:[[new Ye,BE]]},sQ={provide:kr,deps:[[new Ye,BE]]};function aQ(t){return(e,n)=>{let i=e.runOutsideAngular(()=>t(n));return new xi(i)}}var cQ=(()=>{class t{constructor(n){ht("angularfire",An.full,"core"),ht("angularfire",An.full,"app"),ht("angular",$m.full,n.toString())}static \u0275fac=function(i){return new(i||t)(y(Ct))};static \u0275mod=H({type:t});static \u0275inj=z({providers:[oQ,sQ]})}return t})();function NF(t,...e){return{ngModule:cQ,providers:[{provide:BE,useFactory:aQ(t),multi:!0,deps:[V,rt,ii,...e]}]}}var FF=xo(WS,!0);var lQ=new Map,uQ={activated:!1,tokenObservers:[]},dQ={initialized:!1,enabled:!1};function Ii(t){return lQ.get(t)||Object.assign({},uQ)}function BF(){return dQ}var hQ="https://content-firebaseappcheck.googleapis.com/v1";var fQ="exchangeDebugToken",OF={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},pme=24*60*60*1e3;var $E=class{constructor(e,n,i,r,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=r,r>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return v(this,null,function*(){this.stop();try{this.pending=new xa,this.pending.promise.catch(n=>{}),yield mQ(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new xa,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function mQ(t){return new Promise(e=>{setTimeout(e,t)})}var pQ={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Io=new jS("appCheck","AppCheck",pQ);function UF(t){if(!Ii(t).activated)throw Io.create("use-before-activation",{appName:t.name})}function $F(i,r){return v(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let f=yield s.getHeartbeatsHeader();f&&(o["X-Firebase-Client"]=f)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(t,a)}catch(f){throw Io.create("fetch-network-error",{originalErrorMessage:f?.message})}if(c.status!==200)throw Io.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(f){throw Io.create("fetch-parse-error",{originalErrorMessage:f?.message})}let u=l.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw Io.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let d=Number(u[1])*1e3,h=Date.now();return{token:l.token,expireTimeMillis:h+d,issuedAtTimeMillis:h}})}function zF(t,e){let{projectId:n,appId:i,apiKey:r}=t.options;return{url:`${hQ}/projects/${n}/apps/${i}:${fQ}?key=${r}`,body:{debug_token:e}}}var gQ="firebase-app-check-database",_Q=1,zE="firebase-app-check-store";var ig=null;function bQ(){return ig||(ig=new Promise((t,e)=>{try{let n=indexedDB.open(gQ,_Q);n.onsuccess=i=>{t(i.target.result)},n.onerror=i=>{var r;e(Io.create("storage-open",{originalErrorMessage:(r=i.target.error)===null||r===void 0?void 0:r.message}))},n.onupgradeneeded=i=>{let r=i.target.result;switch(i.oldVersion){case 0:r.createObjectStore(zE,{keyPath:"compositeKey"})}}}catch(n){e(Io.create("storage-open",{originalErrorMessage:n?.message}))}}),ig)}function yQ(t,e){return vQ(wQ(t),e)}function vQ(t,e){return v(this,null,function*(){let i=(yield bQ()).transaction(zE,"readwrite"),o=i.objectStore(zE).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},i.onerror=c=>{var l;a(Io.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function wQ(t){return`${t.options.appId}-${t.name}`}var HE=new Ia("@firebase/app-check");function UE(t,e){return sf()?yQ(t,e).catch(n=>{HE.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function HF(){return BF().enabled}function qF(){return v(this,null,function*(){let t=BF();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var EQ={error:"UNKNOWN_ERROR"};function xQ(t){return tf.encodeString(JSON.stringify(t),!1)}function qE(t,e=!1){return v(this,null,function*(){let n=t.app;UF(n);let i=Ii(n),r=i.token,o;if(r&&!yd(r)&&(i.token=void 0,r=void 0),!r){let c=yield i.cachedTokenPromise;c&&(yd(c)?r=c:yield UE(n,void 0))}if(!e&&r&&yd(r))return{token:r.token};let s=!1;if(HF()){i.exchangeTokenPromise||(i.exchangeTokenPromise=$F(zF(n,yield qF()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),s=!0);let c=yield i.exchangeTokenPromise;return yield UE(n,c),i.token=c,{token:c.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),s=!0),r=yield Ii(n).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?HE.warn(c.message):HE.error(c),o=c}let a;return r?o?yd(r)?a={token:r.token,internalError:o}:a=VF(o):(a={token:r.token},i.token=r,yield UE(n,r)):a=VF(o),s&&DQ(n,a),a})}function IQ(t){return v(this,null,function*(){let e=t.app;UF(e);let{provider:n}=Ii(e);if(HF()){let i=yield qF(),{token:r}=yield $F(zF(e,i),t.heartbeatServiceProvider);return{token:r}}else{let{token:i}=yield n.getToken();return{token:i}}})}function CQ(t,e,n,i){let{app:r}=t,o=Ii(r),s={next:n,error:i,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&yd(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),LF(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>LF(t))}function WF(t,e){let n=Ii(t),i=n.tokenObservers.filter(r=>r.next!==e);i.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=i}function LF(t){let{app:e}=t,n=Ii(e),i=n.tokenRefresher;i||(i=TQ(t),n.tokenRefresher=i),!i.isRunning()&&n.isTokenAutoRefreshEnabled&&i.start()}function TQ(t){let{app:e}=t;return new $E(()=>v(this,null,function*(){let n=Ii(e),i;if(n.token?i=yield qE(t,!0):i=yield qE(t),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{let n=Ii(e);if(n.token){let i=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,r=n.token.expireTimeMillis-5*60*1e3;return i=Math.min(i,r),Math.max(0,i-Date.now())}else return 0},OF.RETRIAL_MIN_WAIT,OF.RETRIAL_MAX_WAIT)}function DQ(t,e){let n=Ii(t).tokenObservers;for(let i of n)try{i.type==="EXTERNAL"&&e.error!=null?i.error(e.error):i.next(e)}catch{}}function yd(t){return t.expireTimeMillis-Date.now()>0}function VF(t){return{token:xQ(EQ),error:t}}var WE=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=Ii(this.app);for(let n of e)WF(this.app,n.next);return Promise.resolve()}};function SQ(t,e){return new WE(t,e)}function AQ(t){return{getToken:e=>qE(t,e),getLimitedUseToken:()=>IQ(t),addTokenListener:e=>CQ(t,"INTERNAL",e),removeTokenListener:e=>WF(t.app,e)}}var kQ="@firebase/app-check",MQ="0.8.1";var RQ="app-check",jF="app-check-internal";function PQ(){Xo(new fr(RQ,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return SQ(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(jF).initialize()})),Xo(new fr(jF,t=>{let e=t.getProvider("app-check").getImmediate();return AQ(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),ht(kQ,MQ)}PQ();var NQ=["localhost","0.0.0.0","127.0.0.1"],Dme=typeof window<"u"&&NQ.includes(window.location.hostname);var FQ="firebase",OQ="10.7.1";Nn.registerVersion(FQ,OQ,"app-compat");var LQ=["ngOnDestroy"],QF=(t,e,n,i={})=>new Proxy(t,{get:(r,o)=>n.runOutsideAngular(()=>{if(t[o])return i?.spy?.get&&i.spy.get(o,t[o]),t[o];if(LQ.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let c=a?.[o];return typeof c=="function"?c.bind(a):c?.then?c.then(l=>n.run(()=>l)):n.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>s[c],apply:(a,c,l)=>s.then(u=>{let d=u?.(...l);return i?.spy?.apply&&i.spy.apply(o,l,d),d})})})});var rg=class{constructor(e){return e}},kc=new C("angularfire2.app.options"),Mc=new C("angularfire2.app.name");function vd(t,e,n){let i=typeof n=="string"&&n||"[DEFAULT]",r=typeof n=="object"&&n||{};r.name=r.name||i;let s=Nn.apps.filter(a=>a&&a.name===r.name)[0]||e.runOutsideAngular(()=>Nn.initializeApp(t,r));try{if(JSON.stringify(t)!==JSON.stringify(s.options)){let a=!!module.hot;VQ("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new rg(s)}var VQ=(t,...e)=>{E0()&&typeof console<"u"&&console[t](...e)},jQ={provide:rg,useFactory:vd,deps:[kc,V,[new Ye,Mc]]},YF=(()=>{class t{static initializeApp(n,i){return{ngModule:t,providers:[{provide:kc,useValue:n},{provide:Mc,useValue:i}]}}constructor(n){Nn.registerVersion("angularfire",An.full,"core"),Nn.registerVersion("angularfire",An.full,"app-compat"),Nn.registerVersion("angular",$m.full,n.toString())}static \u0275fac=function(i){return new(i||t)(y(Ct))};static \u0275mod=H({type:t});static \u0275inj=z({providers:[jQ]})}return t})();function og(t,e,n,i,r){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(o)return BQ(r,s)||(KF("error",`${e} was already initialized on the ${n} Firebase App with different settings.${UQ?" You may need to reload as Firebase is not HMR aware.":""}`),KF("warn",{is:r,was:s})),o;{let a=i();return globalThis.\u0275AngularfireInstanceCache.push([t,a,r]),a}}function BQ(t,e){try{return t.toString()===e.toString()}catch{return t===e}}var UQ=typeof module<"u"&&!!module.hot,KF=(t,...e)=>{E0()&&typeof console<"u"&&console[t](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var GE=new C("angularfire2.auth.use-emulator"),KE=new C("angularfire2.auth.settings"),QE=new C("angularfire2.auth.tenant-id"),YE=new C("angularfire2.auth.langugage-code"),ZE=new C("angularfire2.auth.use-device-language"),XE=new C("angularfire.auth.persistence"),JE=(t,e,n,i,r,o,s,a)=>og(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{let c=e.runOutsideAngular(()=>t.auth());if(n&&c.useEmulator(...n),i&&(c.tenantId=i),c.languageCode=r,o&&c.useDeviceLanguage(),s)for(let[l,u]of Object.entries(s))c.settings[l]=u;return a&&c.setPersistence(a),c},[n,i,r,o,s,a]),ZF=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,i,r,o,s,a,c,l,u,d,h,f){let m=new me,p=L(void 0).pipe(Fn(s.outsideAngular),qe(()=>o.runOutsideAngular(()=>import("./chunk-GIL6D3YP.js"))),B(()=>vd(n,o,i)),B(g=>JE(g,o,a,l,u,d,c,h)),Kl({bufferSize:1,refCount:!1}));if(Es(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=L(null);else{p.pipe(On()).subscribe();let g=p.pipe(qe(D=>D.getRedirectResult().then(O=>O,()=>null)),pn,Kl({bufferSize:1,refCount:!1})),w=p.pipe(qe(D=>new Y(O=>({unsubscribe:o.runOutsideAngular(()=>D.onAuthStateChanged(q=>O.next(q),q=>O.error(q),()=>O.complete()))})))),k=p.pipe(qe(D=>new Y(O=>({unsubscribe:o.runOutsideAngular(()=>D.onIdTokenChanged(q=>O.next(q),q=>O.error(q),()=>O.complete()))}))));this.authState=g.pipe(Of(w),Zn(s.outsideAngular),Fn(s.insideAngular)),this.user=g.pipe(Of(k),Zn(s.outsideAngular),Fn(s.insideAngular)),this.idToken=this.user.pipe(qe(D=>D?ve(D.getIdToken()):L(null))),this.idTokenResult=this.user.pipe(qe(D=>D?ve(D.getIdTokenResult()):L(null))),this.credential=rs(g,m,this.authState.pipe(He(D=>!D))).pipe(B(D=>D?.user?D:null),Zn(s.outsideAngular),Fn(s.insideAngular))}return QF(this,p,o,{spy:{apply:(g,w,k)=>{(g.startsWith("signIn")||g.startsWith("createUser"))&&k.then(D=>m.next(D))}}})}static \u0275fac=function(i){return new(i||t)(y(kc),y(Mc,8),y(Ct),y(V),y(ii),y(GE,8),y(KE,8),y(QE,8),y(YE,8),y(ZE,8),y(XE,8),y(zn,8))};static \u0275prov=A({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var zQ=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ti={},N,wx=wx||{},te=zQ||self;function yg(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Nd(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function HQ(t){return Object.prototype.hasOwnProperty.call(t,ex)&&t[ex]||(t[ex]=++qQ)}var ex="closure_uid_"+(1e9*Math.random()>>>0),qQ=0;function WQ(t,e,n){return t.call.apply(t.bind,arguments)}function GQ(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),t.apply(e,r)}}return function(){return t.apply(e,arguments)}}function Xt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Xt=WQ:Xt=GQ,Xt.apply(null,arguments)}function sg(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var i=n.slice();return i.push.apply(i,arguments),t.apply(this,i)}}function Pt(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(i,r,o){for(var s=Array(arguments.length-2),a=2;a<arguments.length;a++)s[a-2]=arguments[a];return e.prototype[r].apply(i,s)}}function Co(){this.s=this.s,this.o=this.o}var KQ=0;Co.prototype.s=!1;Co.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),KQ!=0)&&HQ(this)};Co.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var uO=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Ex(t){let e=t.length;if(0<e){let n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function XF(t,e){for(let n=1;n<arguments.length;n++){let i=arguments[n];if(yg(i)){let r=t.length||0,o=i.length||0;t.length=r+o;for(let s=0;s<o;s++)t[r+s]=i[s]}else t.push(i)}}function Jt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Jt.prototype.h=function(){this.defaultPrevented=!0};var QQ=function(){if(!te.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{let n=()=>{};te.addEventListener("test",n,e),te.removeEventListener("test",n,e)}catch{}return t}();function Td(t){return/^[\s\xa0]*$/.test(t)}function vg(){var t=te.navigator;return t&&(t=t.userAgent)?t:""}function Ji(t){return vg().indexOf(t)!=-1}function xx(t){return xx[" "](t),t}xx[" "]=function(){};function YQ(t,e){var n=V7;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var ZQ=Ji("Opera"),Fc=Ji("Trident")||Ji("MSIE"),dO=Ji("Edge"),ox=dO||Fc,hO=Ji("Gecko")&&!(vg().toLowerCase().indexOf("webkit")!=-1&&!Ji("Edge"))&&!(Ji("Trident")||Ji("MSIE"))&&!Ji("Edge"),XQ=vg().toLowerCase().indexOf("webkit")!=-1&&!Ji("Edge");function fO(){var t=te.document;return t?t.documentMode:void 0}var sx;e:{if(ag="",cg=function(){var t=vg();if(hO)return/rv:([^\);]+)(\)|;)/.exec(t);if(dO)return/Edge\/([\d\.]+)/.exec(t);if(Fc)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(XQ)return/WebKit\/(\S+)/.exec(t);if(ZQ)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),cg&&(ag=cg?cg[1]:""),Fc&&(lg=fO(),lg!=null&&lg>parseFloat(ag))){sx=String(lg);break e}sx=ag}var ag,cg,lg,ax;te.document&&Fc?(tx=fO(),ax=tx||parseInt(sx,10)||void 0):ax=void 0;var tx,JQ=ax;function Dd(t,e){if(Jt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(hO){e:{try{xx(e.nodeName);var r=!0;break e}catch{}r=!1}r||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=i.clientX!==void 0?i.clientX:i.pageX,this.clientY=i.clientY!==void 0?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:e7[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Dd.$.h.call(this)}}Pt(Dd,Jt);var e7={2:"touch",3:"pen",4:"mouse"};Dd.prototype.h=function(){Dd.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Fd="closure_listenable_"+(1e6*Math.random()|0),t7=0;function n7(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.la=r,this.key=++t7,this.fa=this.ia=!1}function wg(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Ix(t,e,n){for(let i in t)e.call(n,t[i],i,t)}function i7(t,e){for(let n in t)e.call(void 0,t[n],n,t)}function mO(t){let e={};for(let n in t)e[n]=t[n];return e}var JF="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function pO(t,e){let n,i;for(let r=1;r<arguments.length;r++){i=arguments[r];for(n in i)t[n]=i[n];for(let o=0;o<JF.length;o++)n=JF[o],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function Eg(t){this.src=t,this.g={},this.h=0}Eg.prototype.add=function(t,e,n,i,r){var o=t.toString();t=this.g[o],t||(t=this.g[o]=[],this.h++);var s=lx(t,e,i,r);return-1<s?(e=t[s],n||(e.ia=!1)):(e=new n7(e,this.src,o,!!i,r),e.ia=n,t.push(e)),e};function cx(t,e){var n=e.type;if(n in t.g){var i=t.g[n],r=uO(i,e),o;(o=0<=r)&&Array.prototype.splice.call(i,r,1),o&&(wg(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function lx(t,e,n,i){for(var r=0;r<t.length;++r){var o=t[r];if(!o.fa&&o.listener==e&&o.capture==!!n&&o.la==i)return r}return-1}var Cx="closure_lm_"+(1e6*Math.random()|0),nx={};function gO(t,e,n,i,r){if(i&&i.once)return bO(t,e,n,i,r);if(Array.isArray(e)){for(var o=0;o<e.length;o++)gO(t,e[o],n,i,r);return null}return n=Sx(n),t&&t[Fd]?t.O(e,n,Nd(i)?!!i.capture:!!i,r):_O(t,e,n,!1,i,r)}function _O(t,e,n,i,r,o){if(!e)throw Error("Invalid event type");var s=Nd(r)?!!r.capture:!!r,a=Dx(t);if(a||(t[Cx]=a=new Eg(t)),n=a.add(e,n,i,s,o),n.proxy)return n;if(i=r7(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)QQ||(r=s),r===void 0&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(vO(e.toString()),i);else if(t.addListener&&t.removeListener)t.addListener(i);else throw Error("addEventListener and attachEvent are unavailable.");return n}function r7(){function t(n){return e.call(t.src,t.listener,n)}let e=o7;return t}function bO(t,e,n,i,r){if(Array.isArray(e)){for(var o=0;o<e.length;o++)bO(t,e[o],n,i,r);return null}return n=Sx(n),t&&t[Fd]?t.P(e,n,Nd(i)?!!i.capture:!!i,r):_O(t,e,n,!0,i,r)}function yO(t,e,n,i,r){if(Array.isArray(e))for(var o=0;o<e.length;o++)yO(t,e[o],n,i,r);else i=Nd(i)?!!i.capture:!!i,n=Sx(n),t&&t[Fd]?(t=t.i,e=String(e).toString(),e in t.g&&(o=t.g[e],n=lx(o,n,i,r),-1<n&&(wg(o[n]),Array.prototype.splice.call(o,n,1),o.length==0&&(delete t.g[e],t.h--)))):t&&(t=Dx(t))&&(e=t.g[e.toString()],t=-1,e&&(t=lx(e,n,i,r)),(n=-1<t?e[t]:null)&&Tx(n))}function Tx(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[Fd])cx(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(vO(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=Dx(e))?(cx(n,t),n.h==0&&(n.src=null,e[Cx]=null)):wg(t)}}}function vO(t){return t in nx?nx[t]:nx[t]="on"+t}function o7(t,e){if(t.fa)t=!0;else{e=new Dd(e,this);var n=t.listener,i=t.la||t.src;t.ia&&Tx(t),t=n.call(i,e)}return t}function Dx(t){return t=t[Cx],t instanceof Eg?t:null}var ix="__closure_events_fn_"+(1e9*Math.random()>>>0);function Sx(t){return typeof t=="function"?t:(t[ix]||(t[ix]=function(e){return t.handleEvent(e)}),t[ix])}function Rt(){Co.call(this),this.i=new Eg(this),this.S=this,this.J=null}Pt(Rt,Co);Rt.prototype[Fd]=!0;Rt.prototype.removeEventListener=function(t,e,n,i){yO(this,t,e,n,i)};function Ht(t,e){var n,i=t.J;if(i)for(n=[];i;i=i.J)n.push(i);if(t=t.S,i=e.type||e,typeof e=="string")e=new Jt(e,t);else if(e instanceof Jt)e.target=e.target||t;else{var r=e;e=new Jt(i,t),pO(e,r)}if(r=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];r=ug(s,i,!0,e)&&r}if(s=e.g=t,r=ug(s,i,!0,e)&&r,r=ug(s,i,!1,e)&&r,n)for(o=0;o<n.length;o++)s=e.g=n[o],r=ug(s,i,!1,e)&&r}Rt.prototype.N=function(){if(Rt.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],i=0;i<n.length;i++)wg(n[i]);delete t.g[e],t.h--}}this.J=null};Rt.prototype.O=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)};Rt.prototype.P=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};function ug(t,e,n,i){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var r=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.fa&&s.capture==n){var a=s.listener,c=s.la||s.src;s.ia&&cx(t.i,s),r=a.call(c,i)!==!1&&r}}return r&&!i.defaultPrevented}var Ax=te.JSON.stringify,ux=class{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}};function s7(){var t=kx;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var dx=class{constructor(){this.h=this.g=null}add(e,n){let i=wO.get();i.set(e,n),this.h?this.h.next=i:this.g=i,this.h=i}},wO=new ux(()=>new hx,t=>t.reset()),hx=class{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}};function a7(t){var e=1;t=t.split(":");let n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function c7(t){te.setTimeout(()=>{throw t},0)}var Sd,Ad=!1,kx=new dx,EO=()=>{let t=te.Promise.resolve(void 0);Sd=()=>{t.then(l7)}},l7=()=>{for(var t;t=s7();){try{t.h.call(t.g)}catch(n){c7(n)}var e=wO;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Ad=!1};function xg(t,e){Rt.call(this),this.h=t||1,this.g=e||te,this.j=Xt(this.qb,this),this.l=Date.now()}Pt(xg,Rt);N=xg.prototype;N.ga=!1;N.T=null;N.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ht(this,"tick"),this.ga&&(Mx(this),this.start()))}};N.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Mx(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}N.N=function(){xg.$.N.call(this),Mx(this),delete this.g};function Rx(t,e,n){if(typeof t=="function")n&&(t=Xt(t,n));else if(t&&typeof t.handleEvent=="function")t=Xt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:te.setTimeout(t,e||0)}function xO(t){t.g=Rx(()=>{t.g=null,t.i&&(t.i=!1,xO(t))},t.j);let e=t.h;t.h=null,t.m.apply(null,e)}var fx=class extends Co{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:xO(this)}N(){super.N(),this.g&&(te.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function kd(t){Co.call(this),this.h=t,this.g={}}Pt(kd,Co);var eO=[];function IO(t,e,n,i){Array.isArray(n)||(n&&(eO[0]=n.toString()),n=eO);for(var r=0;r<n.length;r++){var o=gO(e,n[r],i||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function CO(t){Ix(t.g,function(e,n){this.g.hasOwnProperty(n)&&Tx(e)},t),t.g={}}kd.prototype.N=function(){kd.$.N.call(this),CO(this)};kd.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Ig(){this.g=!0}Ig.prototype.Ea=function(){this.g=!1};function u7(t,e,n,i,r,o){t.info(function(){if(t.g)if(o)for(var s="",a=o.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var d=u.split("_");s=2<=d.length&&d[1]=="type"?s+(u+"="+l+"&"):s+(u+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+`
`+n+`
`+s})}function d7(t,e,n,i,r,o,s){t.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+`
`+n+`
`+o+" "+s})}function Pc(t,e,n,i){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+f7(t,n)+(i?" "+i:"")})}function h7(t,e){t.info(function(){return"TIMEOUT: "+e})}Ig.prototype.info=function(){};function f7(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var o=r[0];if(o!="noop"&&o!="stop"&&o!="close")for(var s=1;s<r.length;s++)r[s]=""}}}}return Ax(n)}catch{return e}}var Bs={},tO=null;function Cg(){return tO=tO||new Rt}Bs.Ta="serverreachability";function TO(t){Jt.call(this,Bs.Ta,t)}Pt(TO,Jt);function Md(t){let e=Cg();Ht(e,new TO(e))}Bs.STAT_EVENT="statevent";function DO(t,e){Jt.call(this,Bs.STAT_EVENT,t),this.stat=e}Pt(DO,Jt);function gn(t){let e=Cg();Ht(e,new DO(e,t))}Bs.Ua="timingevent";function SO(t,e){Jt.call(this,Bs.Ua,t),this.size=e}Pt(SO,Jt);function Od(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return te.setTimeout(function(){t()},e)}var Tg={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},AO={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Px(){}Px.prototype.h=null;function nO(t){return t.h||(t.h=t.i())}function kO(){}var Ld={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Nx(){Jt.call(this,"d")}Pt(Nx,Jt);function Fx(){Jt.call(this,"c")}Pt(Fx,Jt);var mx;function Dg(){}Pt(Dg,Px);Dg.prototype.g=function(){return new XMLHttpRequest};Dg.prototype.i=function(){return{}};mx=new Dg;function Vd(t,e,n,i){this.l=t,this.j=e,this.m=n,this.W=i||1,this.U=new kd(this),this.P=m7,t=ox?125:void 0,this.V=new xg(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new MO}function MO(){this.i=null,this.g="",this.h=!1}var m7=45e3,RO={},px={};N=Vd.prototype;N.setTimeout=function(t){this.P=t};function gx(t,e,n){t.L=1,t.A=Ag(Rr(e)),t.u=n,t.S=!0,PO(t,null)}function PO(t,e){t.G=Date.now(),jd(t),t.B=Rr(t.A);var n=t.B,i=t.W;Array.isArray(i)||(i=[String(i)]),UO(n.i,"t",i),t.o=0,n=t.l.J,t.h=new MO,t.g=cL(t.l,n?e:null,!t.u),0<t.O&&(t.M=new fx(Xt(t.Pa,t,t.g),t.O)),IO(t.U,t.g,"readystatechange",t.nb),e=t.I?mO(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),Md(),u7(t.j,t.v,t.B,t.m,t.W,t.u)}N.nb=function(t){t=t.target;let e=this.M;e&&er(t)==3?e.l():this.Pa(t)};N.Pa=function(t){try{if(t==this.g)e:{let u=er(this.g);var e=this.g.Ia();let d=this.g.da();if(!(3>u)&&(u!=3||ox||this.g&&(this.h.h||this.g.ja()||sO(this.g)))){this.J||u!=4||e==7||(e==8||0>=d?Md(3):Md(2)),Sg(this);var n=this.g.da();this.ca=n;t:if(NO(this)){var i=sO(this.g);t="";var r=i.length,o=er(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ls(this),Cd(this);var s="";break t}this.h.i=new te.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:o&&e==r-1});i.length=0,this.h.g+=t,this.o=0,s=this.h.g}else s=this.g.ja();if(this.i=n==200,d7(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Td(a)){var l=a;break t}}l=null}if(n=l)Pc(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_x(this,n);else{this.i=!1,this.s=3,gn(12),Ls(this),Cd(this);break e}}this.S?(FO(this,u,s),ox&&this.i&&u==3&&(IO(this.U,this.V,"tick",this.mb),this.V.start())):(Pc(this.j,this.m,s,null),_x(this,s)),u==4&&Ls(this),this.i&&!this.J&&(u==4?rL(this.l,this):(this.i=!1,jd(this)))}else F7(this.g),n==400&&0<s.indexOf("Unknown SID")?(this.s=3,gn(12)):(this.s=0,gn(13)),Ls(this),Cd(this)}}}catch{}finally{}};function NO(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function FO(t,e,n){let i=!0,r;for(;!t.J&&t.o<n.length;)if(r=p7(t,n),r==px){e==4&&(t.s=4,gn(14),i=!1),Pc(t.j,t.m,null,"[Incomplete Response]");break}else if(r==RO){t.s=4,gn(15),Pc(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}else Pc(t.j,t.m,r,null),_x(t,r);NO(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,gn(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ux(e),e.M=!0,gn(11))):(Pc(t.j,t.m,n,"[Invalid Chunked Response]"),Ls(t),Cd(t))}N.mb=function(){if(this.g){var t=er(this.g),e=this.g.ja();this.o<e.length&&(Sg(this),FO(this,t,e),this.i&&t!=4&&jd(this))}};function p7(t,e){var n=t.o,i=e.indexOf(`
`,n);return i==-1?px:(n=Number(e.substring(n,i)),isNaN(n)?RO:(i+=1,i+n>e.length?px:(e=e.slice(i,i+n),t.o=i+n,e)))}N.cancel=function(){this.J=!0,Ls(this)};function jd(t){t.Y=Date.now()+t.P,OO(t,t.P)}function OO(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=Od(Xt(t.lb,t),e)}function Sg(t){t.C&&(te.clearTimeout(t.C),t.C=null)}N.lb=function(){this.C=null;let t=Date.now();0<=t-this.Y?(h7(this.j,this.B),this.L!=2&&(Md(),gn(17)),Ls(this),this.s=2,Cd(this)):OO(this,this.Y-t)};function Cd(t){t.l.H==0||t.J||rL(t.l,t)}function Ls(t){Sg(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,Mx(t.V),CO(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function _x(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||bx(n.i,t))){if(!t.K&&bx(n.i,t)&&n.H==3){try{var i=n.Ja.g.parse(e)}catch{i=null}if(Array.isArray(i)&&i.length==3){var r=i;if(r[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)pg(n),Rg(n);else break e;Bx(n),gn(18)}}else n.Fa=r[1],0<n.Fa-n.V&&37500>r[2]&&n.G&&n.A==0&&!n.v&&(n.v=Od(Xt(n.ib,n),6e3));if(1>=HO(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Vs(n,11)}else if((t.K||n.g==t)&&pg(n),!Td(e))for(r=n.Ja.g.parse(e),e=0;e<r.length;e++){let l=r[e];if(n.V=l[0],l=l[1],n.H==2)if(l[0]=="c"){n.K=l[1],n.pa=l[2];let u=l[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));let d=l[4];d!=null&&(n.Ga=d,n.l.info("SVER="+n.Ga));let h=l[5];h!=null&&typeof h=="number"&&0<h&&(i=1.5*h,n.L=i,n.l.info("backChannelRequestTimeoutMs_="+i)),i=n;let f=t.g;if(f){let m=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(m){var o=i.i;o.g||m.indexOf("spdy")==-1&&m.indexOf("quic")==-1&&m.indexOf("h2")==-1||(o.j=o.l,o.g=new Set,o.h&&(Ox(o,o.h),o.h=null))}if(i.F){let p=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;p&&(i.Da=p,Ze(i.I,i.F,p))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),i=n;var s=t;if(i.wa=aL(i,i.J?i.pa:null,i.Y),s.K){qO(i.i,s);var a=s,c=i.L;c&&a.setTimeout(c),a.C&&(Sg(a),jd(a)),i.g=s}else nL(i);0<n.j.length&&Pg(n)}else l[0]!="stop"&&l[0]!="close"||Vs(n,7);else n.H==3&&(l[0]=="stop"||l[0]=="close"?l[0]=="stop"?Vs(n,7):jx(n):l[0]!="noop"&&n.h&&n.h.Aa(l),n.A=0)}}Md(4)}catch{}}function g7(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(yg(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}e=[],n=0;for(i in t)e[n++]=t[i];return e}function _7(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(yg(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(let i in t)e[n++]=i;return e}}}function LO(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(yg(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=_7(t),i=g7(t),r=i.length,o=0;o<r;o++)e.call(void 0,i[o],n&&n[o],t)}var VO=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function b7(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var o=t[n].substring(0,i);r=t[n].substring(i+1)}else o=t[n];e(o,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}function js(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof js){this.h=t.h,fg(this,t.j),this.s=t.s,this.g=t.g,mg(this,t.m),this.l=t.l;var e=t.i,n=new Rd;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),iO(this,n),this.o=t.o}else t&&(e=String(t).match(VO))?(this.h=!1,fg(this,e[1]||"",!0),this.s=xd(e[2]||""),this.g=xd(e[3]||"",!0),mg(this,e[4]),this.l=xd(e[5]||"",!0),iO(this,e[6]||"",!0),this.o=xd(e[7]||"")):(this.h=!1,this.i=new Rd(null,this.h))}js.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Id(e,rO,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Id(e,rO,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Id(n,n.charAt(0)=="/"?w7:v7,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Id(n,x7)),t.join("")};function Rr(t){return new js(t)}function fg(t,e,n){t.j=n?xd(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function mg(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function iO(t,e,n){e instanceof Rd?(t.i=e,I7(t.i,t.h)):(n||(e=Id(e,E7)),t.i=new Rd(e,t.h))}function Ze(t,e,n){t.i.set(e,n)}function Ag(t){return Ze(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function xd(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Id(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,y7),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function y7(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var rO=/[#\/\?@]/g,v7=/[#\?:]/g,w7=/[#\?]/g,E7=/[#\?@]/g,x7=/#/g;function Rd(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function To(t){t.g||(t.g=new Map,t.h=0,t.i&&b7(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}N=Rd.prototype;N.add=function(t,e){To(this),this.i=null,t=Oc(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function jO(t,e){To(t),e=Oc(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function BO(t,e){return To(t),e=Oc(t,e),t.g.has(e)}N.forEach=function(t,e){To(this),this.g.forEach(function(n,i){n.forEach(function(r){t.call(e,r,i,this)},this)},this)};N.ta=function(){To(this);let t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let i=0;i<e.length;i++){let r=t[i];for(let o=0;o<r.length;o++)n.push(e[i])}return n};N.Z=function(t){To(this);let e=[];if(typeof t=="string")BO(this,t)&&(e=e.concat(this.g.get(Oc(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};N.set=function(t,e){return To(this),this.i=null,t=Oc(this,t),BO(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};N.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function UO(t,e,n){jO(t,e),0<n.length&&(t.i=null,t.g.set(Oc(t,e),Ex(n)),t.h+=n.length)}N.toString=function(){if(this.i)return this.i;if(!this.g)return"";let t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var i=e[n];let o=encodeURIComponent(String(i)),s=this.Z(i);for(i=0;i<s.length;i++){var r=o;s[i]!==""&&(r+="="+encodeURIComponent(String(s[i]))),t.push(r)}}return this.i=t.join("&")};function Oc(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function I7(t,e){e&&!t.j&&(To(t),t.i=null,t.g.forEach(function(n,i){var r=i.toLowerCase();i!=r&&(jO(this,i),UO(this,r,n))},t)),t.j=e}var C7=class{constructor(t,e){this.g=t,this.map=e}};function $O(t){this.l=t||T7,te.PerformanceNavigationTiming?(t=te.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(te.g&&te.g.Ka&&te.g.Ka()&&te.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var T7=10;function zO(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function HO(t){return t.h?1:t.g?t.g.size:0}function bx(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Ox(t,e){t.g?t.g.add(e):t.h=e}function qO(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}$O.prototype.cancel=function(){if(this.i=WO(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let t of this.g.values())t.cancel();this.g.clear()}};function WO(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(let n of t.g.values())e=e.concat(n.F);return e}return Ex(t.i)}var D7=class{stringify(t){return te.JSON.stringify(t,void 0)}parse(t){return te.JSON.parse(t,void 0)}};function S7(){this.g=new D7}function A7(t,e,n){let i=n||"";try{LO(t,function(r,o){let s=r;Nd(r)&&(s=Ax(r)),e.push(i+o+"="+encodeURIComponent(s))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function k7(t,e){let n=new Ig;if(te.Image){let i=new Image;i.onload=sg(dg,n,i,"TestLoadImage: loaded",!0,e),i.onerror=sg(dg,n,i,"TestLoadImage: error",!1,e),i.onabort=sg(dg,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=sg(dg,n,i,"TestLoadImage: timeout",!1,e),te.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=t}else e(!1)}function dg(t,e,n,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch{}}function Bd(t){this.l=t.ec||null,this.j=t.ob||!1}Pt(Bd,Px);Bd.prototype.g=function(){return new kg(this.l,this.j)};Bd.prototype.i=function(t){return function(){return t}}({});function kg(t,e){Rt.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Lx,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Pt(kg,Rt);var Lx=0;N=kg.prototype;N.open=function(t,e){if(this.readyState!=Lx)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Pd(this)};N.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||te).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};N.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ud(this)),this.readyState=Lx};N.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Pd(this)),this.g&&(this.readyState=3,Pd(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof te.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;GO(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function GO(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}N.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Ud(this):Pd(this),this.readyState==3&&GO(this)}};N.Za=function(t){this.g&&(this.response=this.responseText=t,Ud(this))};N.Ya=function(t){this.g&&(this.response=t,Ud(this))};N.ka=function(){this.g&&Ud(this)};function Ud(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Pd(t)}N.setRequestHeader=function(t,e){this.v.append(t,e)};N.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};N.getAllResponseHeaders=function(){if(!this.h)return"";let t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Pd(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(kg.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var M7=te.JSON.parse;function lt(t){Rt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=KO,this.L=this.M=!1}Pt(lt,Rt);var KO="",R7=/^https?$/i,P7=["POST","PUT"];N=lt.prototype;N.Oa=function(t){this.M=t};N.ha=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():mx.g(),this.C=this.u?nO(this.u):nO(mx),this.g.onreadystatechange=Xt(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(o){oO(this,o);return}if(t=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)n.set(r,i[r]);else if(typeof i.keys=="function"&&typeof i.get=="function")for(let o of i.keys())n.set(o,i.get(o));else throw Error("Unknown input type for opt_headers: "+String(i));i=Array.from(n.keys()).find(o=>o.toLowerCase()=="content-type"),r=te.FormData&&t instanceof te.FormData,!(0<=uO(P7,e))||i||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[o,s]of n)this.g.setRequestHeader(o,s);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{ZO(this),0<this.B&&((this.L=N7(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Xt(this.ua,this)):this.A=Rx(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){oO(this,o)}};function N7(t){return Fc&&typeof t.timeout=="number"&&t.ontimeout!==void 0}N.ua=function(){typeof wx<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ht(this,"timeout"),this.abort(8))};function oO(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,QO(t),Mg(t)}function QO(t){t.F||(t.F=!0,Ht(t,"complete"),Ht(t,"error"))}N.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Ht(this,"complete"),Ht(this,"abort"),Mg(this))};N.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Mg(this,!0)),lt.$.N.call(this)};N.La=function(){this.s||(this.G||this.v||this.l?YO(this):this.kb())};N.kb=function(){YO(this)};function YO(t){if(t.h&&typeof wx<"u"&&(!t.C[1]||er(t)!=4||t.da()!=2)){if(t.v&&er(t)==4)Rx(t.La,0,t);else if(Ht(t,"readystatechange"),er(t)==4){t.h=!1;try{let s=t.da();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var i;if(i=s===0){var r=String(t.I).match(VO)[1]||null;!r&&te.self&&te.self.location&&(r=te.self.location.protocol.slice(0,-1)),i=!R7.test(r?r.toLowerCase():"")}n=i}if(n)Ht(t,"complete"),Ht(t,"success");else{t.m=6;try{var o=2<er(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.da()+"]",QO(t)}}finally{Mg(t)}}}}function Mg(t,e){if(t.g){ZO(t);let n=t.g,i=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Ht(t,"ready");try{n.onreadystatechange=i}catch{}}}function ZO(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(te.clearTimeout(t.A),t.A=null)}N.isActive=function(){return!!this.g};function er(t){return t.g?t.g.readyState:0}N.da=function(){try{return 2<er(this)?this.g.status:-1}catch{return-1}};N.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};N.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),M7(e)}};function sO(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case KO:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function F7(t){let e={};t=(t.g&&2<=er(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let i=0;i<t.length;i++){if(Td(t[i]))continue;var n=a7(t[i]);let r=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();let o=e[r]||[];e[r]=o,o.push(n)}i7(e,function(i){return i.join(", ")})}N.Ia=function(){return this.m};N.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function XO(t){let e="";return Ix(t,function(n,i){e+=i,e+=":",e+=n,e+=`\r
`}),e}function Vx(t,e,n){e:{for(i in n){var i=!1;break e}i=!0}i||(n=XO(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Ze(t,e,n))}function wd(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function JO(t){this.Ga=0,this.j=[],this.l=new Ig,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=wd("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=wd("baseRetryDelayMs",5e3,t),this.hb=wd("retryDelaySeedMs",1e4,t),this.eb=wd("forwardChannelMaxRetries",2,t),this.xa=wd("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new $O(t&&t.concurrentRequestLimit),this.Ja=new S7,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}N=JO.prototype;N.ra=8;N.H=1;function jx(t){if(eL(t),t.H==3){var e=t.W++,n=Rr(t.I);if(Ze(n,"SID",t.K),Ze(n,"RID",e),Ze(n,"TYPE","terminate"),$d(t,n),e=new Vd(t,t.l,e),e.L=2,e.A=Ag(Rr(n)),n=!1,te.navigator&&te.navigator.sendBeacon)try{n=te.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&te.Image&&(new Image().src=e.A,n=!0),n||(e.g=cL(e.l,null),e.g.ha(e.A)),e.G=Date.now(),jd(e)}sL(t)}function Rg(t){t.g&&(Ux(t),t.g.cancel(),t.g=null)}function eL(t){Rg(t),t.u&&(te.clearTimeout(t.u),t.u=null),pg(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&te.clearTimeout(t.m),t.m=null)}function Pg(t){if(!zO(t.i)&&!t.m){t.m=!0;var e=t.Na;Sd||EO(),Ad||(Sd(),Ad=!0),kx.add(e,t),t.C=0}}function O7(t,e){return HO(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Od(Xt(t.Na,t,e),oL(t,t.C)),t.C++,!0)}N.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;let r=new Vd(this,this.l,t),o=this.s;if(this.U&&(o?(o=mO(o),pO(o,this.U)):o=this.U),this.o!==null||this.O||(r.I=o,o=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var i=this.j[n];if("__data__"in i.map&&(i=i.map.__data__,typeof i=="string")){i=i.length;break t}i=void 0}if(i===void 0)break;if(e+=i,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=tL(this,r,e),n=Rr(this.I),Ze(n,"RID",t),Ze(n,"CVER",22),this.F&&Ze(n,"X-HTTP-Session-Id",this.F),$d(this,n),o&&(this.O?e="headers="+encodeURIComponent(String(XO(o)))+"&"+e:this.o&&Vx(n,this.o,o)),Ox(this.i,r),this.bb&&Ze(n,"TYPE","init"),this.P?(Ze(n,"$req",e),Ze(n,"SID","null"),r.aa=!0,gx(r,n,null)):gx(r,n,e),this.H=2}}else this.H==3&&(t?aO(this,t):this.j.length==0||zO(this.i)||aO(this))};function aO(t,e){var n;e?n=e.m:n=t.W++;let i=Rr(t.I);Ze(i,"SID",t.K),Ze(i,"RID",n),Ze(i,"AID",t.V),$d(t,i),t.o&&t.s&&Vx(i,t.o,t.s),n=new Vd(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=tL(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Ox(t.i,n),gx(n,i,e)}function $d(t,e){t.na&&Ix(t.na,function(n,i){Ze(e,i,n)}),t.h&&LO({},function(n,i){Ze(e,i,n)})}function tL(t,e,n){n=Math.min(t.j.length,n);var i=t.h?Xt(t.h.Va,t.h,t):null;e:{var r=t.j;let o=-1;for(;;){let s=["count="+n];o==-1?0<n?(o=r[0].g,s.push("ofs="+o)):o=0:s.push("ofs="+o);let a=!0;for(let c=0;c<n;c++){let l=r[c].g,u=r[c].map;if(l-=o,0>l)o=Math.max(0,r[c].g-100),a=!1;else try{A7(u,s,"req"+l+"_")}catch{i&&i(u)}}if(a){i=s.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,i}function nL(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Sd||EO(),Ad||(Sd(),Ad=!0),kx.add(e,t),t.A=0}}function Bx(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Od(Xt(t.Ma,t),oL(t,t.A)),t.A++,!0)}N.Ma=function(){if(this.u=null,iL(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Od(Xt(this.jb,this),t)}};N.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,gn(10),Rg(this),iL(this))};function Ux(t){t.B!=null&&(te.clearTimeout(t.B),t.B=null)}function iL(t){t.g=new Vd(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Rr(t.wa);Ze(e,"RID","rpc"),Ze(e,"SID",t.K),Ze(e,"AID",t.V),Ze(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Ze(e,"TO",t.qa),Ze(e,"TYPE","xmlhttp"),$d(t,e),t.o&&t.s&&Vx(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=Ag(Rr(e)),n.u=null,n.S=!0,PO(n,t)}N.ib=function(){this.v!=null&&(this.v=null,Rg(this),Bx(this),gn(19))};function pg(t){t.v!=null&&(te.clearTimeout(t.v),t.v=null)}function rL(t,e){var n=null;if(t.g==e){pg(t),Ux(t),t.g=null;var i=2}else if(bx(t.i,e))n=e.F,qO(t.i,e),i=1;else return;if(t.H!=0){if(e.i)if(i==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var r=t.C;i=Cg(),Ht(i,new SO(i,n)),Pg(t)}else nL(t);else if(r=e.s,r==3||r==0&&0<e.ca||!(i==1&&O7(t,e)||i==2&&Bx(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),r){case 1:Vs(t,5);break;case 4:Vs(t,10);break;case 3:Vs(t,6);break;default:Vs(t,2)}}}function oL(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Vs(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var i=Xt(t.pb,t);n||(n=new js("//www.google.com/images/cleardot.gif"),te.location&&te.location.protocol=="http"||fg(n,"https"),Ag(n)),k7(n.toString(),i)}else gn(2);t.H=0,t.h&&t.h.za(e),sL(t),eL(t)}N.pb=function(t){t?(this.l.info("Successfully pinged google.com"),gn(2)):(this.l.info("Failed to ping google.com"),gn(1))};function sL(t){if(t.H=0,t.ma=[],t.h){let e=WO(t.i);(e.length!=0||t.j.length!=0)&&(XF(t.ma,e),XF(t.ma,t.j),t.i.i.length=0,Ex(t.j),t.j.length=0),t.h.ya()}}function aL(t,e,n){var i=n instanceof js?Rr(n):new js(n);if(i.g!="")e&&(i.g=e+"."+i.g),mg(i,i.m);else{var r=te.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var o=new js(null);i&&fg(o,i),e&&(o.g=e),r&&mg(o,r),n&&(o.l=n),i=o}return n=t.F,e=t.Da,n&&e&&Ze(i,n,e),Ze(i,"VER",t.ra),$d(t,i),i}function cL(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new lt(new Bd({ob:n})):new lt(t.va),e.Oa(t.J),e}N.isActive=function(){return!!this.h&&this.h.isActive(this)};function lL(){}N=lL.prototype;N.Ba=function(){};N.Aa=function(){};N.za=function(){};N.ya=function(){};N.isActive=function(){return!0};N.Va=function(){};function gg(){if(Fc&&!(10<=Number(JQ)))throw Error("Environmental error: no available transport.")}gg.prototype.g=function(t,e){return new Hn(t,e)};function Hn(t,e){Rt.call(this),this.g=new JO(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Td(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Td(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Lc(this)}Pt(Hn,Rt);Hn.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;gn(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=aL(t,null,t.Y),Pg(t)};Hn.prototype.close=function(){jx(this.g)};Hn.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Ax(t),t=n);e.j.push(new C7(e.fb++,t)),e.H==3&&Pg(e)};Hn.prototype.N=function(){this.g.h=null,delete this.j,jx(this.g),delete this.g,Hn.$.N.call(this)};function uL(t){Nx.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(let n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Pt(uL,Nx);function dL(){Fx.call(this),this.status=1}Pt(dL,Fx);function Lc(t){this.g=t}Pt(Lc,lL);Lc.prototype.Ba=function(){Ht(this.g,"a")};Lc.prototype.Aa=function(t){Ht(this.g,new uL(t))};Lc.prototype.za=function(t){Ht(this.g,new dL)};Lc.prototype.ya=function(){Ht(this.g,"b")};function L7(){this.blockSize=-1}function Ci(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Pt(Ci,L7);Ci.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function rx(t,e,n){n||(n=0);var i=Array(16);if(typeof e=="string")for(var r=0;16>r;++r)i[r]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(r=0;16>r;++r)i[r]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],r=t.g[2];var o=t.g[3],s=e+(o^n&(r^o))+i[0]+3614090360&4294967295;e=n+(s<<7&4294967295|s>>>25),s=o+(r^e&(n^r))+i[1]+3905402710&4294967295,o=e+(s<<12&4294967295|s>>>20),s=r+(n^o&(e^n))+i[2]+606105819&4294967295,r=o+(s<<17&4294967295|s>>>15),s=n+(e^r&(o^e))+i[3]+3250441966&4294967295,n=r+(s<<22&4294967295|s>>>10),s=e+(o^n&(r^o))+i[4]+4118548399&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(r^e&(n^r))+i[5]+1200080426&4294967295,o=e+(s<<12&4294967295|s>>>20),s=r+(n^o&(e^n))+i[6]+2821735955&4294967295,r=o+(s<<17&4294967295|s>>>15),s=n+(e^r&(o^e))+i[7]+4249261313&4294967295,n=r+(s<<22&4294967295|s>>>10),s=e+(o^n&(r^o))+i[8]+1770035416&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(r^e&(n^r))+i[9]+2336552879&4294967295,o=e+(s<<12&4294967295|s>>>20),s=r+(n^o&(e^n))+i[10]+4294925233&4294967295,r=o+(s<<17&4294967295|s>>>15),s=n+(e^r&(o^e))+i[11]+2304563134&4294967295,n=r+(s<<22&4294967295|s>>>10),s=e+(o^n&(r^o))+i[12]+1804603682&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(r^e&(n^r))+i[13]+4254626195&4294967295,o=e+(s<<12&4294967295|s>>>20),s=r+(n^o&(e^n))+i[14]+2792965006&4294967295,r=o+(s<<17&4294967295|s>>>15),s=n+(e^r&(o^e))+i[15]+1236535329&4294967295,n=r+(s<<22&4294967295|s>>>10),s=e+(r^o&(n^r))+i[1]+4129170786&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^r&(e^n))+i[6]+3225465664&4294967295,o=e+(s<<9&4294967295|s>>>23),s=r+(e^n&(o^e))+i[11]+643717713&4294967295,r=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(r^o))+i[0]+3921069994&4294967295,n=r+(s<<20&4294967295|s>>>12),s=e+(r^o&(n^r))+i[5]+3593408605&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^r&(e^n))+i[10]+38016083&4294967295,o=e+(s<<9&4294967295|s>>>23),s=r+(e^n&(o^e))+i[15]+3634488961&4294967295,r=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(r^o))+i[4]+3889429448&4294967295,n=r+(s<<20&4294967295|s>>>12),s=e+(r^o&(n^r))+i[9]+568446438&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^r&(e^n))+i[14]+3275163606&4294967295,o=e+(s<<9&4294967295|s>>>23),s=r+(e^n&(o^e))+i[3]+4107603335&4294967295,r=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(r^o))+i[8]+1163531501&4294967295,n=r+(s<<20&4294967295|s>>>12),s=e+(r^o&(n^r))+i[13]+2850285829&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^r&(e^n))+i[2]+4243563512&4294967295,o=e+(s<<9&4294967295|s>>>23),s=r+(e^n&(o^e))+i[7]+1735328473&4294967295,r=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(r^o))+i[12]+2368359562&4294967295,n=r+(s<<20&4294967295|s>>>12),s=e+(n^r^o)+i[5]+4294588738&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^r)+i[8]+2272392833&4294967295,o=e+(s<<11&4294967295|s>>>21),s=r+(o^e^n)+i[11]+1839030562&4294967295,r=o+(s<<16&4294967295|s>>>16),s=n+(r^o^e)+i[14]+4259657740&4294967295,n=r+(s<<23&4294967295|s>>>9),s=e+(n^r^o)+i[1]+2763975236&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^r)+i[4]+1272893353&4294967295,o=e+(s<<11&4294967295|s>>>21),s=r+(o^e^n)+i[7]+4139469664&4294967295,r=o+(s<<16&4294967295|s>>>16),s=n+(r^o^e)+i[10]+3200236656&4294967295,n=r+(s<<23&4294967295|s>>>9),s=e+(n^r^o)+i[13]+681279174&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^r)+i[0]+3936430074&4294967295,o=e+(s<<11&4294967295|s>>>21),s=r+(o^e^n)+i[3]+3572445317&4294967295,r=o+(s<<16&4294967295|s>>>16),s=n+(r^o^e)+i[6]+76029189&4294967295,n=r+(s<<23&4294967295|s>>>9),s=e+(n^r^o)+i[9]+3654602809&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^r)+i[12]+3873151461&4294967295,o=e+(s<<11&4294967295|s>>>21),s=r+(o^e^n)+i[15]+530742520&4294967295,r=o+(s<<16&4294967295|s>>>16),s=n+(r^o^e)+i[2]+3299628645&4294967295,n=r+(s<<23&4294967295|s>>>9),s=e+(r^(n|~o))+i[0]+4096336452&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~r))+i[7]+1126891415&4294967295,o=e+(s<<10&4294967295|s>>>22),s=r+(e^(o|~n))+i[14]+2878612391&4294967295,r=o+(s<<15&4294967295|s>>>17),s=n+(o^(r|~e))+i[5]+4237533241&4294967295,n=r+(s<<21&4294967295|s>>>11),s=e+(r^(n|~o))+i[12]+1700485571&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~r))+i[3]+2399980690&4294967295,o=e+(s<<10&4294967295|s>>>22),s=r+(e^(o|~n))+i[10]+4293915773&4294967295,r=o+(s<<15&4294967295|s>>>17),s=n+(o^(r|~e))+i[1]+2240044497&4294967295,n=r+(s<<21&4294967295|s>>>11),s=e+(r^(n|~o))+i[8]+1873313359&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~r))+i[15]+4264355552&4294967295,o=e+(s<<10&4294967295|s>>>22),s=r+(e^(o|~n))+i[6]+2734768916&4294967295,r=o+(s<<15&4294967295|s>>>17),s=n+(o^(r|~e))+i[13]+1309151649&4294967295,n=r+(s<<21&4294967295|s>>>11),s=e+(r^(n|~o))+i[4]+4149444226&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~r))+i[11]+3174756917&4294967295,o=e+(s<<10&4294967295|s>>>22),s=r+(e^(o|~n))+i[2]+718787259&4294967295,r=o+(s<<15&4294967295|s>>>17),s=n+(o^(r|~e))+i[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(r+(s<<21&4294967295|s>>>11))&4294967295,t.g[2]=t.g[2]+r&4294967295,t.g[3]=t.g[3]+o&4294967295}Ci.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,i=this.m,r=this.h,o=0;o<e;){if(r==0)for(;o<=n;)rx(this,t,o),o+=this.blockSize;if(typeof t=="string"){for(;o<e;)if(i[r++]=t.charCodeAt(o++),r==this.blockSize){rx(this,i),r=0;break}}else for(;o<e;)if(i[r++]=t[o++],r==this.blockSize){rx(this,i),r=0;break}}this.h=r,this.i+=e};Ci.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var i=0;32>i;i+=8)t[n++]=this.g[e]>>>i&255;return t};function Ne(t,e){this.h=e;for(var n=[],i=!0,r=t.length-1;0<=r;r--){var o=t[r]|0;i&&o==e||(n[r]=o,i=!1)}this.g=n}var V7={};function $x(t){return-128<=t&&128>t?YQ(t,function(e){return new Ne([e|0],0>e?-1:0)}):new Ne([t|0],0>t?-1:0)}function tr(t){if(isNaN(t)||!isFinite(t))return Nc;if(0>t)return zt(tr(-t));for(var e=[],n=1,i=0;t>=n;i++)e[i]=t/n|0,n*=yx;return new Ne(e,0)}function hL(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return zt(hL(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=tr(Math.pow(e,8)),i=Nc,r=0;r<t.length;r+=8){var o=Math.min(8,t.length-r),s=parseInt(t.substring(r,r+o),e);8>o?(o=tr(Math.pow(e,o)),i=i.R(o).add(tr(s))):(i=i.R(n),i=i.add(tr(s)))}return i}var yx=4294967296,Nc=$x(0),vx=$x(1),cO=$x(16777216);N=Ne.prototype;N.ea=function(){if(ri(this))return-zt(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var i=this.D(n);t+=(0<=i?i:yx+i)*e,e*=yx}return t};N.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Mr(this))return"0";if(ri(this))return"-"+zt(this).toString(t);for(var e=tr(Math.pow(t,6)),n=this,i="";;){var r=bg(n,e).g;n=_g(n,r.R(e));var o=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=r,Mr(n))return o+i;for(;6>o.length;)o="0"+o;i=o+i}};N.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Mr(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function ri(t){return t.h==-1}N.X=function(t){return t=_g(this,t),ri(t)?-1:Mr(t)?0:1};function zt(t){for(var e=t.g.length,n=[],i=0;i<e;i++)n[i]=~t.g[i];return new Ne(n,~t.h).add(vx)}N.abs=function(){return ri(this)?zt(this):this};N.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0,r=0;r<=e;r++){var o=i+(this.D(r)&65535)+(t.D(r)&65535),s=(o>>>16)+(this.D(r)>>>16)+(t.D(r)>>>16);i=s>>>16,o&=65535,s&=65535,n[r]=s<<16|o}return new Ne(n,n[n.length-1]&-2147483648?-1:0)};function _g(t,e){return t.add(zt(e))}N.R=function(t){if(Mr(this)||Mr(t))return Nc;if(ri(this))return ri(t)?zt(this).R(zt(t)):zt(zt(this).R(t));if(ri(t))return zt(this.R(zt(t)));if(0>this.X(cO)&&0>t.X(cO))return tr(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],i=0;i<2*e;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<t.g.length;r++){var o=this.D(i)>>>16,s=this.D(i)&65535,a=t.D(r)>>>16,c=t.D(r)&65535;n[2*i+2*r]+=s*c,hg(n,2*i+2*r),n[2*i+2*r+1]+=o*c,hg(n,2*i+2*r+1),n[2*i+2*r+1]+=s*a,hg(n,2*i+2*r+1),n[2*i+2*r+2]+=o*a,hg(n,2*i+2*r+2)}for(i=0;i<e;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=e;i<2*e;i++)n[i]=0;return new Ne(n,0)};function hg(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Ed(t,e){this.g=t,this.h=e}function bg(t,e){if(Mr(e))throw Error("division by zero");if(Mr(t))return new Ed(Nc,Nc);if(ri(t))return e=bg(zt(t),e),new Ed(zt(e.g),zt(e.h));if(ri(e))return e=bg(t,zt(e)),new Ed(zt(e.g),e.h);if(30<t.g.length){if(ri(t)||ri(e))throw Error("slowDivide_ only works with positive integers.");for(var n=vx,i=e;0>=i.X(t);)n=lO(n),i=lO(i);var r=Rc(n,1),o=Rc(i,1);for(i=Rc(i,2),n=Rc(n,2);!Mr(i);){var s=o.add(i);0>=s.X(t)&&(r=r.add(n),o=s),i=Rc(i,1),n=Rc(n,1)}return e=_g(t,r.R(e)),new Ed(r,e)}for(r=Nc;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),i=Math.ceil(Math.log(n)/Math.LN2),i=48>=i?1:Math.pow(2,i-48),o=tr(n),s=o.R(e);ri(s)||0<s.X(t);)n-=i,o=tr(n),s=o.R(e);Mr(o)&&(o=vx),r=r.add(o),t=_g(t,s)}return new Ed(r,t)}N.gb=function(t){return bg(this,t).h};N.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)&t.D(i);return new Ne(n,this.h&t.h)};N.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)|t.D(i);return new Ne(n,this.h|t.h)};N.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)^t.D(i);return new Ne(n,this.h^t.h)};function lO(t){for(var e=t.g.length+1,n=[],i=0;i<e;i++)n[i]=t.D(i)<<1|t.D(i-1)>>>31;return new Ne(n,t.h)}function Rc(t,e){var n=e>>5;e%=32;for(var i=t.g.length-n,r=[],o=0;o<i;o++)r[o]=0<e?t.D(o+n)>>>e|t.D(o+n+1)<<32-e:t.D(o+n);return new Ne(r,t.h)}gg.prototype.createWebChannel=gg.prototype.g;Hn.prototype.send=Hn.prototype.u;Hn.prototype.open=Hn.prototype.m;Hn.prototype.close=Hn.prototype.close;Tg.NO_ERROR=0;Tg.TIMEOUT=8;Tg.HTTP_ERROR=6;AO.COMPLETE="complete";kO.EventType=Ld;Ld.OPEN="a";Ld.CLOSE="b";Ld.ERROR="c";Ld.MESSAGE="d";Rt.prototype.listen=Rt.prototype.O;lt.prototype.listenOnce=lt.prototype.P;lt.prototype.getLastError=lt.prototype.Sa;lt.prototype.getLastErrorCode=lt.prototype.Ia;lt.prototype.getStatus=lt.prototype.da;lt.prototype.getResponseJson=lt.prototype.Wa;lt.prototype.getResponseText=lt.prototype.ja;lt.prototype.send=lt.prototype.ha;lt.prototype.setWithCredentials=lt.prototype.Oa;Ci.prototype.digest=Ci.prototype.l;Ci.prototype.reset=Ci.prototype.reset;Ci.prototype.update=Ci.prototype.j;Ne.prototype.add=Ne.prototype.add;Ne.prototype.multiply=Ne.prototype.R;Ne.prototype.modulo=Ne.prototype.gb;Ne.prototype.compare=Ne.prototype.X;Ne.prototype.toNumber=Ne.prototype.ea;Ne.prototype.toString=Ne.prototype.toString;Ne.prototype.getBits=Ne.prototype.D;Ne.fromNumber=tr;Ne.fromString=hL;var fL=Ti.createWebChannelTransport=function(){return new gg},mL=Ti.getStatEventTarget=function(){return Cg()},Ng=Ti.ErrorCode=Tg,pL=Ti.EventType=AO,gL=Ti.Event=Bs,zx=Ti.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Xme=Ti.FetchXmlHttpFactory=Bd,zd=Ti.WebChannel=kO,_L=Ti.XhrIo=lt,bL=Ti.Md5=Ci,Us=Ti.Integer=Ne;var yL="@firebase/firestore";var Et=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Et.UNAUTHENTICATED=new Et(null),Et.GOOGLE_CREDENTIALS=new Et("google-credentials-uid"),Et.FIRST_PARTY=new Et("first-party-uid"),Et.MOCK_USER=new Et("mock-user");var fl="10.7.0";var Po=new Ia("@firebase/firestore");function $c(){return Po.logLevel}function HC(t){Po.setLogLevel(t)}function I(t,...e){if(Po.logLevel<=Yn.DEBUG){let n=e.map(qC);Po.debug(`Firestore (${fl}): ${t}`,...n)}}function mt(t,...e){if(Po.logLevel<=Yn.ERROR){let n=e.map(qC);Po.error(`Firestore (${fl}): ${t}`,...n)}}function si(t,...e){if(Po.logLevel<=Yn.WARN){let n=e.map(qC);Po.warn(`Firestore (${fl}): ${t}`,...n)}}function qC(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function j(t="Unexpected state"){let e=`FIRESTORE (${fl}) INTERNAL ASSERTION FAILED: `+t;throw mt(e),new Error(e)}function $(t,e){t||j()}function bV(t,e){t||j()}function F(t,e){return t}var b={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},x=class extends VS{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var xt=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var qg=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Kx=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Et.UNAUTHENTICATED))}shutdown(){}},Qx=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Yx=class{constructor(e){this.t=e,this.currentUser=Et.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let i=this.i,r=c=>this.i!==i?(i=this.i,n(c)):Promise.resolve(),o=new xt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new xt,e.enqueueRetryable(()=>r(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>v(this,null,function*(){yield c.promise,yield r(this.currentUser)}))},a=c=>{I("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(I("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new xt)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(I("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?($(typeof i.accessToken=="string"),new qg(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return $(e===null||typeof e=="string"),new Et(e)}},Zx=class{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=Et.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Xx=class{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new Zx(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Et.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Jx=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},eI=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let i=o=>{o.error!=null&&I("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,I("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};let r=o=>{I("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?r(o):I("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?($(typeof n.token=="string"),this.R=n.token,new Jx(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function j7(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}var Wg=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,i="";for(;i.length<20;){let r=j7(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%e.length))}return i}};function oe(t,e){return t<e?-1:t>e?1:0}function Zc(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}function yV(t){return t+"\0"}var ot=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new x(b.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new x(b.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new x(b.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new x(b.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new t(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?oe(this.nanoseconds,e.nanoseconds):oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var W=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new ot(0,0))}static max(){return new t(new ot(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Gg=class t{constructor(e,n,i){n===void 0?n=0:n>e.length&&j(),i===void 0?i=e.length-n:i>e.length-n&&j(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let i=Math.min(e.length,n.length);for(let r=0;r<i;r++){let o=e.get(r),s=n.get(r);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Se=class t extends Gg{construct(e,n,i){return new t(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){let n=[];for(let i of e){if(i.indexOf("//")>=0)throw new x(b.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new t(n)}static emptyPath(){return new t([])}},B7=/^[_a-zA-Z][_a-zA-Z0-9]*$/,pt=class t extends Gg{construct(e,n,i){return new t(e,n,i)}static isValidIdentifier(e){return B7.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],i="",r=0,o=()=>{if(i.length===0)throw new x(b.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""},s=!1;for(;r<e.length;){let a=e[r];if(a==="\\"){if(r+1===e.length)throw new x(b.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new x(b.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=c,r+=2}else a==="`"?(s=!s,r++):a!=="."||s?(i+=a,r++):(o(),r++)}if(o(),s)throw new x(b.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var P=class t{constructor(e){this.path=e}static fromPath(e){return new t(Se.fromString(e))}static fromName(e){return new t(Se.fromString(e).popFirst(5))}static empty(){return new t(Se.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Se.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Se.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Se(e.slice()))}};var Xc=class{constructor(e,n,i,r){this.indexId=e,this.collectionGroup=n,this.fields=i,this.indexState=r}};function tI(t){return t.fields.find(e=>e.kind===2)}function zs(t){return t.fields.filter(e=>e.kind!==2)}Xc.UNKNOWN_ID=-1;var Kc=class{constructor(e,n){this.fieldPath=e,this.kind=n}};var th=class t{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new t(0,ai.min())}};function vV(t,e){let n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=W.fromTimestamp(i===1e9?new ot(n+1,0):new ot(n,i));return new ai(r,P.empty(),e)}function wV(t){return new ai(t.readTime,t.key,-1)}var ai=class t{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new t(W.min(),P.empty(),-1)}static max(){return new t(W.max(),P.empty(),-1)}};function WC(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=P.comparator(t.documentKey,e.documentKey),n!==0?n:oe(t.largestBatchId,e.largestBatchId))}var EV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Kg=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Ho(t){return v(this,null,function*(){if(t.code!==b.FAILED_PRECONDITION||t.message!==EV)throw t;I("LocalStore","Unexpectedly lost primary lease")})}var _=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&j(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,i)=>{n(e)})}static reject(e){return new t((n,i)=>{i(e)})}static waitFor(e){return new t((n,i)=>{let r=0,o=0,s=!1;e.forEach(a=>{++r,a.next(()=>{++o,s&&o===r&&n()},c=>i(c))}),s=!0,o===r&&n()})}static or(e){let n=t.resolve(!1);for(let i of e)n=n.next(r=>r?t.resolve(r):i());return n}static forEach(e,n){let i=[];return e.forEach((r,o)=>{i.push(n.call(this,r,o))}),this.waitFor(i)}static mapArray(e,n){return new t((i,r)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let l=c;n(e[l]).next(u=>{s[l]=u,++a,a===o&&i(s)},u=>r(u))}})}static doWhile(e,n){return new t((i,r)=>{let o=()=>{e()===!0?n().next(()=>{o()},r):i()};o()})}};var Qg=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new xt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Qs(e,n.error)):this.V.resolve()},this.transaction.onerror=i=>{let r=GC(i.target.error);this.V.reject(new Qs(e,r))}}static open(e,n,i,r){try{return new t(n,e.transaction(r,i))}catch(o){throw new Qs(n,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(I("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new iI(n)}},No=class t{constructor(e,n,i){this.name=e,this.version=n,this.p=i,t.S(of())===12.2&&mt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return I("SimpleDb","Removing database:",e),Hs(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!sf())return!1;if(t.C())return!0;let e=of(),n=t.S(e),i=0<n&&n<10,r=t.v(e),o=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||o)}static C(){var e;return typeof process<"u"&&((e=process.env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static v(e){let n=e.match(/Android ([\d.]+)/i),i=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(i)}O(e){return v(this,null,function*(){return this.db||(I("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,i)=>{let r=indexedDB.open(this.name,this.version);r.onsuccess=o=>{let s=o.target.result;n(s)},r.onblocked=()=>{i(new Qs(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=o=>{let s=o.target.error;s.name==="VersionError"?i(new x(b.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?i(new x(b.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):i(new Qs(e,s))},r.onupgradeneeded=o=>{I("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.N(s,r.transaction,o.oldVersion,this.version).next(()=>{I("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=n=>this.B(n)),this.db})}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,i,r){return v(this,null,function*(){let o=n==="readonly",s=0;for(;;){++s;try{this.db=yield this.O(e);let a=Qg.open(this.db,e,o?"readonly":"readwrite",i),c=r(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),_.reject(l))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&s<3;if(I("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}},nI=class{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Hs(this.k.delete())}},Qs=class extends x{constructor(e,n){super(b.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function qo(t){return t.name==="IndexedDbTransactionError"}var iI=class{constructor(e){this.store=e}put(e,n){let i;return n!==void 0?(I("SimpleDb","PUT",this.store.name,e,n),i=this.store.put(n,e)):(I("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),Hs(i)}add(e){return I("SimpleDb","ADD",this.store.name,e,e),Hs(this.store.add(e))}get(e){return Hs(this.store.get(e)).next(n=>(n===void 0&&(n=null),I("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return I("SimpleDb","DELETE",this.store.name,e),Hs(this.store.delete(e))}count(){return I("SimpleDb","COUNT",this.store.name),Hs(this.store.count())}W(e,n){let i=this.options(e,n);if(i.index||typeof this.store.getAll!="function"){let r=this.cursor(i),o=[];return this.G(r,(s,a)=>{o.push(a)}).next(()=>o)}{let r=this.store.getAll(i.range);return new _((o,s)=>{r.onerror=a=>{s(a.target.error)},r.onsuccess=a=>{o(a.target.result)}})}}j(e,n){let i=this.store.getAll(e,n===null?void 0:n);return new _((r,o)=>{i.onerror=s=>{o(s.target.error)},i.onsuccess=s=>{r(s.target.result)}})}H(e,n){I("SimpleDb","DELETE ALL",this.store.name);let i=this.options(e,n);i.J=!1;let r=this.cursor(i);return this.G(r,(o,s,a)=>a.delete())}Y(e,n){let i;n?i=e:(i={},n=e);let r=this.cursor(i);return this.G(r,n)}Z(e){let n=this.cursor({});return new _((i,r)=>{n.onerror=o=>{let s=GC(o.target.error);r(s)},n.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():i()}):i()}})}G(e,n){let i=[];return new _((r,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void r();let c=new nI(a),l=n(a.primaryKey,a.value,c);if(l instanceof _){let u=l.catch(d=>(c.done(),_.reject(d)));i.push(u)}c.isDone?r():c.$===null?a.continue():a.continue(c.$)}}).next(()=>_.waitFor(i))}options(e,n){let i;return e!==void 0&&(typeof e=="string"?i=e:n=e),{index:i,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let i=this.store.index(e.index);return e.J?i.openKeyCursor(e.range,n):i.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function Hs(t){return new _((e,n)=>{t.onsuccess=i=>{let r=i.target.result;e(r)},t.onerror=i=>{let r=GC(i.target.error);n(r)}})}var vL=!1;function GC(t){let e=No.S(of());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let i=new x("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return vL||(vL=!0,setTimeout(()=>{throw i},0)),i}}return t}var rI=class{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ee(e){I("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>v(this,null,function*(){this.task=null;try{I("IndexBackiller",`Documents written: ${yield this.X.te()}`)}catch(n){qo(n)?I("IndexBackiller","Ignoring IndexedDB error during index backfill: ",n):yield Ho(n)}yield this.ee(6e4)}))}},oI=class{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){return v(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.ne(n,e))})}ne(e,n){let i=new Set,r=n,o=!0;return _.doWhile(()=>o===!0&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!i.has(s))return I("IndexBackiller",`Processing collection: ${s}`),this.re(e,s,r).next(a=>{r-=a,i.add(s)});o=!1})).next(()=>n-r)}re(e,n,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(r=>this.localStore.localDocuments.getNextDocuments(e,n,r,i).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.ie(r,o)).next(a=>(I("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>s.size)}))}ie(e,n){let i=e;return n.changes.forEach((r,o)=>{let s=wV(o);WC(s,i)>0&&(i=s)}),new ai(i.readTime,i.documentKey,Math.max(n.batchId,e.largestBatchId))}};var qn=(()=>{class t{constructor(n,i){this.previousValue=n,i&&(i.sequenceNumberHandler=r=>this.se(r),this.oe=r=>i.writeSequenceNumber(r))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.oe&&this.oe(n),n}}return t._e=-1,t})();function Ch(t){return t==null}function nh(t){return t===0&&1/t==-1/0}function xV(t){return typeof t=="number"&&Number.isInteger(t)&&!nh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function _n(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=wL(e)),e=U7(t.get(n),e);return wL(e)}function U7(t,e){let n=e,i=t.length;for(let r=0;r<i;r++){let o=t.charAt(r);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function wL(t){return t+""}function nr(t){let e=t.length;if($(e>=2),e===2)return $(t.charAt(0)===""&&t.charAt(1)===""),Se.emptyPath();let n=e-2,i=[],r="";for(let o=0;o<e;){let s=t.indexOf("",o);switch((s<0||s>n)&&j(),t.charAt(s+1)){case"":let a=t.substring(o,s),c;r.length===0?c=a:(r+=a,c=r,r=""),i.push(c);break;case"":r+=t.substring(o,s),r+="\0";break;case"":r+=t.substring(o,s+1);break;default:j()}o=s+2}return new Se(i)}var EL=["userId","batchId"];function jg(t,e){return[t,_n(e)]}function IV(t,e,n){return[t,_n(e),n]}var $7={},z7=["prefixPath","collectionGroup","readTime","documentId"],H7=["prefixPath","collectionGroup","documentId"],q7=["collectionGroup","readTime","prefixPath","documentId"],W7=["canonicalId","targetId"],G7=["targetId","path"],K7=["path","targetId"],Q7=["collectionId","parent"],Y7=["indexId","uid"],Z7=["uid","sequenceNumber"],X7=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],J7=["indexId","uid","orderedDocumentKey"],eY=["userId","collectionPath","documentId"],tY=["userId","collectionPath","largestBatchId"],nY=["userId","collectionGroup","largestBatchId"],CV=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],iY=[...CV,"documentOverlays"],TV=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],DV=TV,rY=[...DV,"indexConfiguration","indexState","indexEntries"];var ih=class extends Kg{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}};function Ft(t,e){let n=F(t);return No.M(n.ae,e)}function xL(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function aa(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function SV(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Xe=class t{constructor(e,n){this.comparator=e,this.root=n||rr.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,rr.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){let e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Gc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Gc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Gc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Gc(this.root,e,this.comparator,!0)}},Gc=class{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},rr=class t{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??t.RED,this.left=r??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,o){return new t(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this,o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return t.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw j();let e=this.left.check();if(e!==this.right.check())throw j();return e+(this.isRed()?0:1)}};rr.EMPTY=null,rr.RED=!0,rr.BLACK=!1;rr.EMPTY=new class{constructor(){this.size=0}get key(){throw j()}get value(){throw j()}get color(){throw j()}get left(){throw j()}get right(){throw j()}copy(e,n,i,r,o){return this}insert(e,n,i){return new rr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ue=class t{constructor(e){this.comparator=e,this.data=new Xe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Yg(this.data.getIterator())}getIteratorFrom(e){return new Yg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){let r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Yg=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Vc(t){return t.hasNext()?t.getNext():void 0}var Wn=class t{constructor(e){this.fields=e,e.sort(pt.comparator)}static empty(){return new t([])}unionWith(e){let n=new Ue(pt.comparator);for(let i of this.fields)n=n.add(i);for(let i of e)n=n.add(i);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Zc(this.fields,e.fields,(n,i)=>n.isEqual(i))}};var Zg=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function AV(){return typeof atob<"u"}var Nt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Zg("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(r){let o="";for(let s=0;s<r.length;++s)o+=String.fromCharCode(r[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Nt.EMPTY_BYTE_STRING=new Nt("");var oY=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fo(t){if($(!!t),typeof t=="string"){let e=0,n=oY.exec(t);if($(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}let i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ut(t.seconds),nanos:ut(t.nanos)}}function ut(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Oo(t){return typeof t=="string"?Nt.fromBase64String(t):Nt.fromUint8Array(t)}function U_(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function KC(t){let e=t.mapValue.fields.__previous_value__;return U_(e)?KC(e):e}function rh(t){let e=Fo(t.mapValue.fields.__local_write_time__.timestampValue);return new ot(e.seconds,e.nanos)}var sI=class{constructor(e,n,i,r,o,s,a,c,l){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},Lo=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Mo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Bg={nullValue:"NULL_VALUE"};function Ys(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?U_(t)?4:kV(t)?9007199254740991:10:j()}function ar(t,e){if(t===e)return!0;let n=Ys(t);if(n!==Ys(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return rh(t).isEqual(rh(e));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;let s=Fo(r.timestampValue),a=Fo(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,o){return Oo(r.bytesValue).isEqual(Oo(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,o){return ut(r.geoPointValue.latitude)===ut(o.geoPointValue.latitude)&&ut(r.geoPointValue.longitude)===ut(o.geoPointValue.longitude)}(t,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return ut(r.integerValue)===ut(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){let s=ut(r.doubleValue),a=ut(o.doubleValue);return s===a?nh(s)===nh(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return Zc(t.arrayValue.values||[],e.arrayValue.values||[],ar);case 10:return function(r,o){let s=r.mapValue.fields||{},a=o.mapValue.fields||{};if(xL(s)!==xL(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!ar(s[c],a[c])))return!1;return!0}(t,e);default:return j()}}function oh(t,e){return(t.values||[]).find(n=>ar(n,e))!==void 0}function Vo(t,e){if(t===e)return 0;let n=Ys(t),i=Ys(e);if(n!==i)return oe(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return oe(t.booleanValue,e.booleanValue);case 2:return function(o,s){let a=ut(o.integerValue||o.doubleValue),c=ut(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return IL(t.timestampValue,e.timestampValue);case 4:return IL(rh(t),rh(e));case 5:return oe(t.stringValue,e.stringValue);case 6:return function(o,s){let a=Oo(o),c=Oo(s);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let l=0;l<a.length&&l<c.length;l++){let u=oe(a[l],c[l]);if(u!==0)return u}return oe(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let a=oe(ut(o.latitude),ut(s.latitude));return a!==0?a:oe(ut(o.longitude),ut(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(o,s){let a=o.values||[],c=s.values||[];for(let l=0;l<a.length&&l<c.length;++l){let u=Vo(a[l],c[l]);if(u)return u}return oe(a.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(o,s){if(o===Mo.mapValue&&s===Mo.mapValue)return 0;if(o===Mo.mapValue)return 1;if(s===Mo.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),l=s.fields||{},u=Object.keys(l);c.sort(),u.sort();for(let d=0;d<c.length&&d<u.length;++d){let h=oe(c[d],u[d]);if(h!==0)return h;let f=Vo(a[c[d]],l[u[d]]);if(f!==0)return f}return oe(c.length,u.length)}(t.mapValue,e.mapValue);default:throw j()}}function IL(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return oe(t,e);let n=Fo(t),i=Fo(e),r=oe(n.seconds,i.seconds);return r!==0?r:oe(n.nanos,i.nanos)}function Jc(t){return aI(t)}function aI(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let i=Fo(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Oo(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return P.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(let o of n.values||[])r?r=!1:i+=",",i+=aI(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){let i=Object.keys(n.fields||{}).sort(),r="{",o=!0;for(let s of i)o?o=!1:r+=",",r+=`${s}:${aI(n.fields[s])}`;return r+"}"}(t.mapValue):j()}function Zs(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function cI(t){return!!t&&"integerValue"in t}function sh(t){return!!t&&"arrayValue"in t}function CL(t){return!!t&&"nullValue"in t}function TL(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ug(t){return!!t&&"mapValue"in t}function Yd(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return aa(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=Yd(i)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Yd(t.arrayValue.values[n]);return e}return Object.assign({},t)}function kV(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function sY(t){return"nullValue"in t?Bg:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Zs(Lo.empty(),P.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:j()}function aY(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Zs(Lo.empty(),P.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?Mo:j()}function DL(t,e){let n=Vo(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function SL(t,e){let n=Vo(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}var tn=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Ug(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Yd(n)}setAll(e){let n=pt.emptyPath(),i={},r=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,i,r),i={},r=[],n=a.popLast()}s?i[a.lastSegment()]=Yd(s):r.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(e){let n=this.field(e.popLast());Ug(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ar(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Ug(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){aa(n,(r,o)=>e[r]=o);for(let r of i)delete e[r]}clone(){return new t(Yd(this.value))}};function MV(t){let e=[];return aa(t.fields,(n,i)=>{let r=new pt([n]);if(Ug(i)){let o=MV(i.mapValue).fields;if(o.length===0)e.push(r);else for(let s of o)e.push(r.child(s))}else e.push(r)}),new Wn(e)}var It=class t{constructor(e,n,i,r,o,s,a){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,W.min(),W.min(),W.min(),tn.empty(),0)}static newFoundDocument(e,n,i,r){return new t(e,1,n,W.min(),i,r,0)}static newNoDocument(e,n){return new t(e,2,n,W.min(),W.min(),tn.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,W.min(),W.min(),tn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(W.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=tn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=tn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=W.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var cr=class{constructor(e,n){this.position=e,this.inclusive=n}};function AL(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){let o=e[r],s=t.position[r];if(o.field.isKeyField()?i=P.comparator(P.fromName(s.referenceValue),n.key):i=Vo(s,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function kL(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ar(t.position[n],e.position[n]))return!1;return!0}var Xs=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function cY(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Xg=class{},pe=class t extends Xg{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new dI(e,n,i):n==="array-contains"?new mI(e,i):n==="in"?new Jg(e,i):n==="not-in"?new pI(e,i):n==="array-contains-any"?new gI(e,i):new t(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new hI(e,i):new fI(e,i)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Vo(n,this.value)):n!==null&&Ys(this.value)===Ys(n)&&this.matchesComparison(Vo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return j()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Fe=class t extends Xg{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new t(e,n)}matches(e){return el(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}};function el(t){return t.op==="and"}function lI(t){return t.op==="or"}function QC(t){return RV(t)&&el(t)}function RV(t){for(let e of t.filters)if(e instanceof Fe)return!1;return!0}function uI(t){if(t instanceof pe)return t.field.canonicalString()+t.op.toString()+Jc(t.value);if(QC(t))return t.filters.map(e=>uI(e)).join(",");{let e=t.filters.map(n=>uI(n)).join(",");return`${t.op}(${e})`}}function PV(t,e){return t instanceof pe?function(i,r){return r instanceof pe&&i.op===r.op&&i.field.isEqual(r.field)&&ar(i.value,r.value)}(t,e):t instanceof Fe?function(i,r){return r instanceof Fe&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,s,a)=>o&&PV(s,r.filters[a]),!0):!1}(t,e):void j()}function NV(t,e){let n=t.filters.concat(e);return Fe.create(n,t.op)}function FV(t){return t instanceof pe?function(n){return`${n.field.canonicalString()} ${n.op} ${Jc(n.value)}`}(t):t instanceof Fe?function(n){return n.op.toString()+" {"+n.getFilters().map(FV).join(" ,")+"}"}(t):"Filter"}var dI=class extends pe{constructor(e,n,i){super(e,n,i),this.key=P.fromName(i.referenceValue)}matches(e){let n=P.comparator(e.key,this.key);return this.matchesComparison(n)}},hI=class extends pe{constructor(e,n){super(e,"in",n),this.keys=OV("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},fI=class extends pe{constructor(e,n){super(e,"not-in",n),this.keys=OV("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function OV(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>P.fromName(i.referenceValue))}var mI=class extends pe{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return sh(n)&&oh(n.arrayValue,this.value)}},Jg=class extends pe{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&oh(this.value.arrayValue,n)}},pI=class extends pe{constructor(e,n){super(e,"not-in",n)}matches(e){if(oh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!oh(this.value.arrayValue,n)}},gI=class extends pe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!sh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>oh(this.value.arrayValue,i))}};var _I=class{constructor(e,n=null,i=[],r=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=s,this.endAt=a,this.ce=null}};function bI(t,e=null,n=[],i=[],r=null,o=null,s=null){return new _I(t,e,n,i,r,o,s)}function Js(t){let e=F(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>uI(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),Ch(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Jc(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Jc(i)).join(",")),e.ce=n}return e.ce}function Th(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!cY(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!PV(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!kL(t.startAt,e.startAt)&&kL(t.endAt,e.endAt)}function e_(t){return P.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function t_(t,e){return t.filters.filter(n=>n instanceof pe&&n.field.isEqual(e))}function ML(t,e,n){let i=Bg,r=!0;for(let o of t_(t,e)){let s=Bg,a=!0;switch(o.op){case"<":case"<=":s=sY(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=Bg}DL({value:i,inclusive:r},{value:s,inclusive:a})<0&&(i=s,r=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];DL({value:i,inclusive:r},{value:s,inclusive:n.inclusive})<0&&(i=s,r=n.inclusive);break}}return{value:i,inclusive:r}}function RL(t,e,n){let i=Mo,r=!0;for(let o of t_(t,e)){let s=Mo,a=!0;switch(o.op){case">=":case">":s=aY(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Mo}SL({value:i,inclusive:r},{value:s,inclusive:a})>0&&(i=s,r=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];SL({value:i,inclusive:r},{value:s,inclusive:n.inclusive})>0&&(i=s,r=n.inclusive);break}}return{value:i,inclusive:r}}var Di=class{constructor(e,n=null,i=[],r=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}};function LV(t,e,n,i,r,o,s,a){return new Di(t,e,n,i,r,o,s,a)}function ml(t){return new Di(t)}function PL(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function YC(t){return t.collectionGroup!==null}function Qc(t){let e=F(t);if(e.le===null){e.le=[];let n=new Set;for(let o of e.explicitOrderBy)e.le.push(o),n.add(o.field.canonicalString());let i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Ue(pt.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.le.push(new Xs(o,i))}),n.has(pt.keyField().canonicalString())||e.le.push(new Xs(pt.keyField(),i))}return e.le}function bn(t){let e=F(t);return e.he||(e.he=lY(e,Qc(t))),e.he}function lY(t,e){if(t.limitType==="F")return bI(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{let o=r.dir==="desc"?"asc":"desc";return new Xs(r.field,o)});let n=t.endAt?new cr(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new cr(t.startAt.position,t.startAt.inclusive):null;return bI(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function yI(t,e){let n=t.filters.concat([e]);return new Di(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function n_(t,e,n){return new Di(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Dh(t,e){return Th(bn(t),bn(e))&&t.limitType===e.limitType}function VV(t){return`${Js(bn(t))}|lt:${t.limitType}`}function zc(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>FV(r)).join(", ")}]`),Ch(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Jc(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Jc(r)).join(",")),`Target(${i})`}(bn(t))}; limitType=${t.limitType})`}function Sh(t,e){return e.isFoundDocument()&&function(i,r){let o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):P.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,r){for(let o of Qc(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,r){for(let o of i.filters)if(!o.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(s,a,c){let l=AL(s,a,c);return s.inclusive?l<=0:l<0}(i.startAt,Qc(i),r)||i.endAt&&!function(s,a,c){let l=AL(s,a,c);return s.inclusive?l>=0:l>0}(i.endAt,Qc(i),r))}(t,e)}function jV(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function BV(t){return(e,n)=>{let i=!1;for(let r of Qc(t)){let o=uY(r,e,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function uY(t,e,n){let i=t.field.isKeyField()?P.comparator(e.key,n.key):function(o,s,a){let c=s.data.field(o),l=a.data.field(o);return c!==null&&l!==null?Vo(c,l):j()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return j()}}var lr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(let[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){aa(this.inner,(n,i)=>{for(let[r,o]of i)e(r,o)})}isEmpty(){return SV(this.inner)}size(){return this.innerSize}};var dY=new Xe(P.comparator);function kn(){return dY}var UV=new Xe(P.comparator);function Kd(...t){let e=UV;for(let n of t)e=e.insert(n.key,n);return e}function $V(t){let e=UV;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function ir(){return Zd()}function zV(){return Zd()}function Zd(){return new lr(t=>t.toString(),(t,e)=>t.isEqual(e))}var hY=new Xe(P.comparator),fY=new Ue(P.comparator);function ce(...t){let e=fY;for(let n of t)e=e.add(n);return e}var mY=new Ue(oe);function ZC(){return mY}function HV(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nh(e)?"-0":e}}function qV(t){return{integerValue:""+t}}function WV(t,e){return xV(e)?qV(e):HV(t,e)}var tl=class{constructor(){this._=void 0}};function pY(t,e,n){return t instanceof jo?function(r,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&U_(o)&&(o=KC(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof Fr?KV(t,e):t instanceof Or?QV(t,e):function(r,o){let s=GV(r,o),a=NL(s)+NL(r.Ie);return cI(s)&&cI(r.Ie)?qV(a):HV(r.serializer,a)}(t,e)}function gY(t,e,n){return t instanceof Fr?KV(t,e):t instanceof Or?QV(t,e):n}function GV(t,e){return t instanceof Bo?function(i){return cI(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}var jo=class extends tl{},Fr=class extends tl{constructor(e){super(),this.elements=e}};function KV(t,e){let n=YV(e);for(let i of t.elements)n.some(r=>ar(r,i))||n.push(i);return{arrayValue:{values:n}}}var Or=class extends tl{constructor(e){super(),this.elements=e}};function QV(t,e){let n=YV(e);for(let i of t.elements)n=n.filter(r=>!ar(r,i));return{arrayValue:{values:n}}}var Bo=class extends tl{constructor(e,n){super(),this.serializer=e,this.Ie=n}};function NL(t){return ut(t.integerValue||t.doubleValue)}function YV(t){return sh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var ea=class{constructor(e,n){this.field=e,this.transform=n}};function _Y(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof Fr&&r instanceof Fr||i instanceof Or&&r instanceof Or?Zc(i.elements,r.elements,ar):i instanceof Bo&&r instanceof Bo?ar(i.Ie,r.Ie):i instanceof jo&&r instanceof jo}(t.transform,e.transform)}var vI=class{constructor(e,n){this.version=e,this.transformResults=n}},dt=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function $g(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var nl=class{};function ZV(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new $o(t.key,dt.none()):new Uo(t.key,t.data,dt.none());{let n=t.data,i=tn.empty(),r=new Ue(pt.comparator);for(let o of e.fields)if(!r.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?i.delete(o):i.set(o,s),r=r.add(o)}return new Si(t.key,i,new Wn(r.toArray()),dt.none())}}function bY(t,e,n){t instanceof Uo?function(r,o,s){let a=r.value.clone(),c=OL(r.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Si?function(r,o,s){if(!$g(r.precondition,o))return void o.convertToUnknownDocument(s.version);let a=OL(r.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(XV(r)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(t,e,n):function(r,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function Xd(t,e,n,i){return t instanceof Uo?function(o,s,a,c){if(!$g(o.precondition,s))return a;let l=o.value.clone(),u=LL(o.fieldTransforms,c,s);return l.setAll(u),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(t,e,n,i):t instanceof Si?function(o,s,a,c){if(!$g(o.precondition,s))return a;let l=LL(o.fieldTransforms,c,s),u=s.data;return u.setAll(XV(o)),u.setAll(l),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(d=>d.field))}(t,e,n,i):function(o,s,a){return $g(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function yY(t,e){let n=null;for(let i of t.fieldTransforms){let r=e.data.field(i.field),o=GV(i.transform,r||null);o!=null&&(n===null&&(n=tn.empty()),n.set(i.field,o))}return n||null}function FL(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Zc(i,r,(o,s)=>_Y(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Uo=class extends nl{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},Si=class extends nl{constructor(e,n,i,r,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function XV(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let i=t.data.field(n);e.set(n,i)}}),e}function OL(t,e,n){let i=new Map;$(t.length===n.length);for(let r=0;r<n.length;r++){let o=t[r],s=o.transform,a=e.data.field(o.field);i.set(o.field,gY(s,a,n[r]))}return i}function LL(t,e,n){let i=new Map;for(let r of t){let o=r.transform,s=n.data.field(r.field);i.set(r.field,pY(o,s,e))}return i}var $o=class extends nl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},ah=class extends nl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var ch=class{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){let i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){let o=this.mutations[r];o.key.isEqual(e.key)&&bY(o,e,i[r])}}applyToLocalView(e,n){for(let i of this.baseMutations)i.key.isEqual(e.key)&&(n=Xd(i,e,n,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(e.key)&&(n=Xd(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let i=zV();return this.mutations.forEach(r=>{let o=e.get(r.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(r.key)?null:a;let c=ZV(s,a);c!==null&&i.set(r.key,c),s.isValidDocument()||s.convertToNoDocument(W.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ce())}isEqual(e){return this.batchId===e.batchId&&Zc(this.mutations,e.mutations,(n,i)=>FL(n,i))&&Zc(this.baseMutations,e.baseMutations,(n,i)=>FL(n,i))}},wI=class t{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){$(e.mutations.length===i.length);let r=function(){return hY}(),o=e.mutations;for(let s=0;s<o.length;s++)r=r.insert(o[s].key,i[s].version);return new t(e,n,i,r)}};var lh=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var EI=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var vt,we;function JV(t){switch(t){default:return j();case b.CANCELLED:case b.UNKNOWN:case b.DEADLINE_EXCEEDED:case b.RESOURCE_EXHAUSTED:case b.INTERNAL:case b.UNAVAILABLE:case b.UNAUTHENTICATED:return!1;case b.INVALID_ARGUMENT:case b.NOT_FOUND:case b.ALREADY_EXISTS:case b.PERMISSION_DENIED:case b.FAILED_PRECONDITION:case b.ABORTED:case b.OUT_OF_RANGE:case b.UNIMPLEMENTED:case b.DATA_LOSS:return!0}}function e2(t){if(t===void 0)return mt("GRPC error has no .code"),b.UNKNOWN;switch(t){case vt.OK:return b.OK;case vt.CANCELLED:return b.CANCELLED;case vt.UNKNOWN:return b.UNKNOWN;case vt.DEADLINE_EXCEEDED:return b.DEADLINE_EXCEEDED;case vt.RESOURCE_EXHAUSTED:return b.RESOURCE_EXHAUSTED;case vt.INTERNAL:return b.INTERNAL;case vt.UNAVAILABLE:return b.UNAVAILABLE;case vt.UNAUTHENTICATED:return b.UNAUTHENTICATED;case vt.INVALID_ARGUMENT:return b.INVALID_ARGUMENT;case vt.NOT_FOUND:return b.NOT_FOUND;case vt.ALREADY_EXISTS:return b.ALREADY_EXISTS;case vt.PERMISSION_DENIED:return b.PERMISSION_DENIED;case vt.FAILED_PRECONDITION:return b.FAILED_PRECONDITION;case vt.ABORTED:return b.ABORTED;case vt.OUT_OF_RANGE:return b.OUT_OF_RANGE;case vt.UNIMPLEMENTED:return b.UNIMPLEMENTED;case vt.DATA_LOSS:return b.DATA_LOSS;default:return j()}}(we=vt||(vt={}))[we.OK=0]="OK",we[we.CANCELLED=1]="CANCELLED",we[we.UNKNOWN=2]="UNKNOWN",we[we.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",we[we.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",we[we.NOT_FOUND=5]="NOT_FOUND",we[we.ALREADY_EXISTS=6]="ALREADY_EXISTS",we[we.PERMISSION_DENIED=7]="PERMISSION_DENIED",we[we.UNAUTHENTICATED=16]="UNAUTHENTICATED",we[we.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",we[we.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",we[we.ABORTED=10]="ABORTED",we[we.OUT_OF_RANGE=11]="OUT_OF_RANGE",we[we.UNIMPLEMENTED=12]="UNIMPLEMENTED",we[we.INTERNAL=13]="INTERNAL",we[we.UNAVAILABLE=14]="UNAVAILABLE",we[we.DATA_LOSS=15]="DATA_LOSS";var VL=null;function t2(){return new TextEncoder}var vY=new Us([4294967295,4294967295],0);function jL(t){let e=t2().encode(t),n=new bL;return n.update(e),new Uint8Array(n.digest())}function BL(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Us([n,i],0),new Us([r,o],0)]}var xI=class t{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Ks(`Invalid padding: ${n}`);if(i<0)throw new Ks(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Ks(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Ks(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=Us.fromNumber(this.Te)}de(e,n,i){let r=e.add(n.multiply(Us.fromNumber(i)));return r.compare(vY)===1&&(r=new Us([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;let n=jL(e),[i,r]=BL(n);for(let o=0;o<this.hashCount;o++){let s=this.de(i,r,o);if(!this.Ae(s))return!1}return!0}static create(e,n,i){let r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,r,n);return i.forEach(a=>s.insert(a)),s}insert(e){if(this.Te===0)return;let n=jL(e),[i,r]=BL(n);for(let o=0;o<this.hashCount;o++){let s=this.de(i,r,o);this.Re(s)}}Re(e){let n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}},Ks=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var uh=class t{constructor(e,n,i,r,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){let r=new Map;return r.set(e,dh.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new t(W.min(),r,new Xe(oe),kn(),ce())}},dh=class t{constructor(e,n,i,r,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new t(i,n,ce(),ce(),ce())}};var Yc=class{constructor(e,n,i,r){this.Ve=e,this.removedTargetIds=n,this.key=i,this.me=r}},i_=class{constructor(e,n){this.targetId=e,this.fe=n}},r_=class{constructor(e,n,i=Nt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}},o_=class{constructor(){this.ge=0,this.pe=$L(),this.ye=Nt.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=ce(),n=ce(),i=ce();return this.pe.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:j()}}),new dh(this.ye,this.we,e,n,i)}Fe(){this.Se=!1,this.pe=$L()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,$(this.ge>=0)}Be(){this.Se=!0,this.we=!0}},II=class{constructor(e){this.Le=e,this.ke=new Map,this.qe=kn(),this.Qe=UL(),this.Ke=new Xe(oe)}$e(e){for(let n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(let n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{let i=this.ze(n);switch(e.state){case 0:this.je(n)&&i.Ce(e.resumeToken);break;case 1:i.Ne(),i.be||i.Fe(),i.Ce(e.resumeToken);break;case 2:i.Ne(),i.be||this.removeTarget(n);break;case 3:this.je(n)&&(i.Be(),i.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),i.Ce(e.resumeToken));break;default:j()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((i,r)=>{this.je(r)&&n(r)})}Je(e){let n=e.targetId,i=e.fe.count,r=this.Ye(n);if(r){let o=r.target;if(e_(o))if(i===0){let s=new P(o.path);this.We(n,s,It.newNoDocument(s,W.min()))}else $(i===1);else{let s=this.Ze(n);if(s!==i){let a=this.Xe(e),c=a?this.et(a,e,s):1;if(c!==0){this.He(n);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,l)}VL?.tt(function(u,d,h,f,m){var p,g,w,k,D,O;let q={localCacheCount:u,existenceFilterCount:d.count,databaseId:h.database,projectId:h.projectId},G=d.unchangedNames;return G&&(q.bloomFilter={applied:m===0,hashCount:(p=G?.hashCount)!==null&&p!==void 0?p:0,bitmapLength:(k=(w=(g=G?.bits)===null||g===void 0?void 0:g.bitmap)===null||w===void 0?void 0:w.length)!==null&&k!==void 0?k:0,padding:(O=(D=G?.bits)===null||D===void 0?void 0:D.padding)!==null&&O!==void 0?O:0,mightContain:de=>{var at;return(at=f?.mightContain(de))!==null&&at!==void 0&&at}}),q}(s,e.fe,this.Le.nt(),a,c))}}}}Xe(e){let n=e.fe.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=n,s,a;try{s=Oo(i).toUint8Array()}catch(c){if(c instanceof Zg)return si("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new xI(s,r,o)}catch(c){return si(c instanceof Ks?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Te===0?null:a}et(e,n,i){return n.fe.count===i-this.rt(e,n.targetId)?0:2}rt(e,n){let i=this.Le.getRemoteKeysForTarget(n),r=0;return i.forEach(o=>{let s=this.Le.nt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.We(n,o,null),r++)}),r}it(e){let n=new Map;this.ke.forEach((o,s)=>{let a=this.Ye(s);if(a){if(o.current&&e_(a.target)){let c=new P(a.target.path);this.qe.get(c)!==null||this.st(s,c)||this.We(s,c,It.newNoDocument(c,e))}o.De&&(n.set(s,o.ve()),o.Fe())}});let i=ce();this.Qe.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let l=this.Ye(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(o))}),this.qe.forEach((o,s)=>s.setReadTime(e));let r=new uh(e,n,this.Ke,this.qe,i);return this.qe=kn(),this.Qe=UL(),this.Ke=new Xe(oe),r}Ue(e,n){if(!this.je(e))return;let i=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,i),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,i){if(!this.je(e))return;let r=this.ze(e);this.st(e,n)?r.Me(n,1):r.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),i&&(this.qe=this.qe.insert(n,i))}removeTarget(e){this.ke.delete(e)}Ze(e){let n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new o_,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new Ue(oe),this.Qe=this.Qe.insert(e,n)),n}je(e){let n=this.Ye(e)!==null;return n||I("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){let n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new o_),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function UL(){return new Xe(P.comparator)}function $L(){return new Xe(P.comparator)}var wY=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),EY=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),xY=(()=>({and:"AND",or:"OR"}))(),CI=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function TI(t,e){return t.useProto3Json||Ch(e)?e:{value:e}}function il(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function n2(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function IY(t,e){return il(t,e.toTimestamp())}function gt(t){return $(!!t),W.fromTimestamp(function(n){let i=Fo(n);return new ot(i.seconds,i.nanos)}(t))}function XC(t,e){return function(i){return new Se(["projects",i.projectId,"databases",i.database])}(t).child("documents").child(e).canonicalString()}function i2(t){let e=Se.fromString(t);return $(h2(e)),e}function hh(t,e){return XC(t.databaseId,e.path)}function or(t,e){let n=i2(e);if(n.get(1)!==t.databaseId.projectId)throw new x(b.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new x(b.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new P(o2(n))}function DI(t,e){return XC(t.databaseId,e)}function r2(t){let e=i2(t);return e.length===4?Se.emptyPath():o2(e)}function fh(t){return new Se(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function o2(t){return $(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function zL(t,e,n){return{name:hh(t,e),fields:n.value.mapValue.fields}}function s2(t,e,n){let i=or(t,e.name),r=gt(e.updateTime),o=e.createTime?gt(e.createTime):W.min(),s=new tn({mapValue:{fields:e.fields}}),a=It.newFoundDocument(i,r,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function CY(t,e){return"found"in e?function(i,r){$(!!r.found),r.found.name,r.found.updateTime;let o=or(i,r.found.name),s=gt(r.found.updateTime),a=r.found.createTime?gt(r.found.createTime):W.min(),c=new tn({mapValue:{fields:r.found.fields}});return It.newFoundDocument(o,s,a,c)}(t,e):"missing"in e?function(i,r){$(!!r.missing),$(!!r.readTime);let o=or(i,r.missing),s=gt(r.readTime);return It.newNoDocument(o,s)}(t,e):j()}function TY(t,e){let n;if("targetChange"in e){e.targetChange;let i=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:j()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(l,u){return l.useProto3Json?($(u===void 0||typeof u=="string"),Nt.fromBase64String(u||"")):($(u===void 0||u instanceof Uint8Array),Nt.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let u=l.code===void 0?b.UNKNOWN:e2(l.code);return new x(u,l.message||"")}(s);n=new r_(i,r,o,a||null)}else if("documentChange"in e){e.documentChange;let i=e.documentChange;i.document,i.document.name,i.document.updateTime;let r=or(t,i.document.name),o=gt(i.document.updateTime),s=i.document.createTime?gt(i.document.createTime):W.min(),a=new tn({mapValue:{fields:i.document.fields}}),c=It.newFoundDocument(r,o,s,a),l=i.targetIds||[],u=i.removedTargetIds||[];n=new Yc(l,u,c.key,c)}else if("documentDelete"in e){e.documentDelete;let i=e.documentDelete;i.document;let r=or(t,i.document),o=i.readTime?gt(i.readTime):W.min(),s=It.newNoDocument(r,o),a=i.removedTargetIds||[];n=new Yc([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let i=e.documentRemove;i.document;let r=or(t,i.document),o=i.removedTargetIds||[];n=new Yc([],o,r,null)}else{if(!("filter"in e))return j();{e.filter;let i=e.filter;i.targetId;let{count:r=0,unchangedNames:o}=i,s=new EI(r,o),a=i.targetId;n=new i_(a,s)}}return n}function mh(t,e){let n;if(e instanceof Uo)n={update:zL(t,e.key,e.value)};else if(e instanceof $o)n={delete:hh(t,e.key)};else if(e instanceof Si)n={update:zL(t,e.key,e.data),updateMask:RY(e.fieldMask)};else{if(!(e instanceof ah))return j();n={verify:hh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,s){let a=s.transform;if(a instanceof jo)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Fr)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Or)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Bo)return{fieldPath:s.field.canonicalString(),increment:a.Ie};throw j()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:IY(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:j()}(t,e.precondition)),n}function SI(t,e){let n=e.currentDocument?function(o){return o.updateTime!==void 0?dt.updateTime(gt(o.updateTime)):o.exists!==void 0?dt.exists(o.exists):dt.none()}(e.currentDocument):dt.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(s,a){let c=null;if("setToServerValue"in a)$(a.setToServerValue==="REQUEST_TIME"),c=new jo;else if("appendMissingElements"in a){let u=a.appendMissingElements.values||[];c=new Fr(u)}else if("removeAllFromArray"in a){let u=a.removeAllFromArray.values||[];c=new Or(u)}else"increment"in a?c=new Bo(s,a.increment):j();let l=pt.fromServerFormat(a.fieldPath);return new ea(l,c)}(t,r)):[];if(e.update){e.update.name;let r=or(t,e.update.name),o=new tn({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(c){let l=c.fieldPaths||[];return new Wn(l.map(u=>pt.fromServerFormat(u)))}(e.updateMask);return new Si(r,o,s,n,i)}return new Uo(r,o,n,i)}if(e.delete){let r=or(t,e.delete);return new $o(r,n)}if(e.verify){let r=or(t,e.verify);return new ah(r,n)}return j()}function DY(t,e){return t&&t.length>0?($(e!==void 0),t.map(n=>function(r,o){let s=r.updateTime?gt(r.updateTime):gt(o);return s.isEqual(W.min())&&(s=gt(o)),new vI(s,r.transformResults||[])}(n,e))):[]}function a2(t,e){return{documents:[DI(t,e.path)]}}function c2(t,e){let n={structuredQuery:{}},i=e.path;e.collectionGroup!==null?(n.parent=DI(t,i),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=DI(t,i.popLast()),n.structuredQuery.from=[{collectionId:i.lastSegment()}]);let r=function(c){if(c.length!==0)return d2(Fe.create(c,"and"))}(e.filters);r&&(n.structuredQuery.where=r);let o=function(c){if(c.length!==0)return c.map(l=>function(d){return{field:Hc(d.field),direction:AY(d.dir)}}(l))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let s=TI(t,e.limit);return s!==null&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),n}function l2(t){let e=r2(t.parent),n=t.structuredQuery,i=n.from?n.from.length:0,r=null;if(i>0){$(i===1);let u=n.from[0];u.allDescendants?r=u.collectionId:e=e.child(u.collectionId)}let o=[];n.where&&(o=function(d){let h=u2(d);return h instanceof Fe&&QC(h)?h.getFilters():[h]}(n.where));let s=[];n.orderBy&&(s=function(d){return d.map(h=>function(m){return new Xs(qc(m.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(h))}(n.orderBy));let a=null;n.limit&&(a=function(d){let h;return h=typeof d=="object"?d.value:d,Ch(h)?null:h}(n.limit));let c=null;n.startAt&&(c=function(d){let h=!!d.before,f=d.values||[];return new cr(f,h)}(n.startAt));let l=null;return n.endAt&&(l=function(d){let h=!d.before,f=d.values||[];return new cr(f,h)}(n.endAt)),LV(e,r,s,o,a,"F",c,l)}function SY(t,e){let n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return j()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function u2(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let i=qc(n.unaryFilter.field);return pe.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=qc(n.unaryFilter.field);return pe.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=qc(n.unaryFilter.field);return pe.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=qc(n.unaryFilter.field);return pe.create(s,"!=",{nullValue:"NULL_VALUE"});default:return j()}}(t):t.fieldFilter!==void 0?function(n){return pe.create(qc(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return j()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Fe.create(n.compositeFilter.filters.map(i=>u2(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return j()}}(n.compositeFilter.op))}(t):j()}function AY(t){return wY[t]}function kY(t){return EY[t]}function MY(t){return xY[t]}function Hc(t){return{fieldPath:t.canonicalString()}}function qc(t){return pt.fromServerFormat(t.fieldPath)}function d2(t){return t instanceof pe?function(n){if(n.op==="=="){if(TL(n.value))return{unaryFilter:{field:Hc(n.field),op:"IS_NAN"}};if(CL(n.value))return{unaryFilter:{field:Hc(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(TL(n.value))return{unaryFilter:{field:Hc(n.field),op:"IS_NOT_NAN"}};if(CL(n.value))return{unaryFilter:{field:Hc(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hc(n.field),op:kY(n.op),value:n.value}}}(t):t instanceof Fe?function(n){let i=n.getFilters().map(r=>d2(r));return i.length===1?i[0]:{compositeFilter:{op:MY(n.op),filters:i}}}(t):j()}function RY(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function h2(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var rl=class t{constructor(e,n,i,r,o=W.min(),s=W.min(),a=Nt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var s_=class{constructor(e){this.ut=e}};function PY(t,e){let n;if(e.document)n=s2(t.ut,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let i=P.fromSegments(e.noDocument.path),r=na(e.noDocument.readTime);n=It.newNoDocument(i,r),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return j();{let i=P.fromSegments(e.unknownDocument.path),r=na(e.unknownDocument.version);n=It.newUnknownDocument(i,r)}}return e.readTime&&n.setReadTime(function(r){let o=new ot(r[0],r[1]);return W.fromTimestamp(o)}(e.readTime)),n}function HL(t,e){let n=e.key,i={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:a_(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=function(o,s){return{name:hh(o,s.key),fields:s.data.value.mapValue.fields,updateTime:il(o,s.version.toTimestamp()),createTime:il(o,s.createTime.toTimestamp())}}(t.ut,e);else if(e.isNoDocument())i.noDocument={path:n.path.toArray(),readTime:ta(e.version)};else{if(!e.isUnknownDocument())return j();i.unknownDocument={path:n.path.toArray(),version:ta(e.version)}}return i}function a_(t){let e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function ta(t){let e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function na(t){let e=new ot(t.seconds,t.nanoseconds);return W.fromTimestamp(e)}function qs(t,e){let n=(e.baseMutations||[]).map(o=>SI(t.ut,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let i=e.mutations.map(o=>SI(t.ut,o)),r=ot.fromMillis(e.localWriteTimeMs);return new ch(e.batchId,r,n,i)}function Qd(t){let e=na(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?na(t.lastLimboFreeSnapshotVersion):W.min(),i;return i=function(o){return o.documents!==void 0}(t.query)?function(o){return $(o.documents.length===1),bn(ml(r2(o.documents[0])))}(t.query):function(o){return bn(l2(o))}(t.query),new rl(i,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Nt.fromBase64String(t.resumeToken))}function f2(t,e){let n=ta(e.snapshotVersion),i=ta(e.lastLimboFreeSnapshotVersion),r;r=e_(e.target)?a2(t.ut,e.target):c2(t.ut,e.target);let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Js(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function JC(t){let e=l2({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?n_(e,e.limit,"L"):e}function Hx(t,e){return new lh(e.largestBatchId,SI(t.ut,e.overlayMutation))}function qL(t,e){let n=e.path.lastSegment();return[t,_n(e.path.popLast()),n]}function WL(t,e,n,i){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:ta(i.readTime),documentKey:_n(i.documentKey.path),largestBatchId:i.largestBatchId}}var AI=class{getBundleMetadata(e,n){return GL(e).get(n).next(i=>{if(i)return function(o){return{id:o.bundleId,createTime:na(o.createTime),version:o.version}}(i)})}saveBundleMetadata(e,n){return GL(e).put(function(r){return{bundleId:r.id,createTime:ta(gt(r.createTime)),version:r.version}}(n))}getNamedQuery(e,n){return KL(e).get(n).next(i=>{if(i)return function(o){return{name:o.name,query:JC(o.bundledQuery),readTime:na(o.readTime)}}(i)})}saveNamedQuery(e,n){return KL(e).put(function(r){return{name:r.name,readTime:ta(gt(r.readTime)),bundledQuery:r.bundledQuery}}(n))}};function GL(t){return Ft(t,"bundles")}function KL(t){return Ft(t,"namedQueries")}var c_=class t{constructor(e,n){this.serializer=e,this.userId=n}static ct(e,n){let i=n.uid||"";return new t(e,i)}getOverlay(e,n){return Hd(e).get(qL(this.userId,n)).next(i=>i?Hx(this.serializer,i):null)}getOverlays(e,n){let i=ir();return _.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){let r=[];return i.forEach((o,s)=>{let a=new lh(n,s);r.push(this.lt(e,a))}),_.waitFor(r)}removeOverlaysForBatchId(e,n,i){let r=new Set;n.forEach(s=>r.add(_n(s.getCollectionPath())));let o=[];return r.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,i+1],!1,!0);o.push(Hd(e).H("collectionPathOverlayIndex",a))}),_.waitFor(o)}getOverlaysForCollection(e,n,i){let r=ir(),o=_n(n),s=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Hd(e).W("collectionPathOverlayIndex",s).next(a=>{for(let c of a){let l=Hx(this.serializer,c);r.set(l.getKey(),l)}return r})}getOverlaysForCollectionGroup(e,n,i,r){let o=ir(),s,a=IDBKeyRange.bound([this.userId,n,i],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Hd(e).Y({index:"collectionGroupOverlayIndex",range:a},(c,l,u)=>{let d=Hx(this.serializer,l);o.size()<r||d.largestBatchId===s?(o.set(d.getKey(),d),s=d.largestBatchId):u.done()}).next(()=>o)}lt(e,n){return Hd(e).put(function(r,o,s){let[a,c,l]=qL(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:mh(r.ut,s.mutation)}}(this.serializer,this.userId,n))}};function Hd(t){return Ft(t,"documentOverlays")}var Pr=class{constructor(){}ht(e,n){this.Pt(e,n),n.It()}Pt(e,n){if("nullValue"in e)this.Tt(n,5);else if("booleanValue"in e)this.Tt(n,10),n.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(n,15),n.Et(ut(e.integerValue));else if("doubleValue"in e){let i=ut(e.doubleValue);isNaN(i)?this.Tt(n,13):(this.Tt(n,15),nh(i)?n.Et(0):n.Et(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Tt(n,20),typeof i=="string"?n.dt(i):(n.dt(`${i.seconds||""}`),n.Et(i.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,n),this.Rt(n);else if("bytesValue"in e)this.Tt(n,30),n.Vt(Oo(e.bytesValue)),this.Rt(n);else if("referenceValue"in e)this.ft(e.referenceValue,n);else if("geoPointValue"in e){let i=e.geoPointValue;this.Tt(n,45),n.Et(i.latitude||0),n.Et(i.longitude||0)}else"mapValue"in e?kV(e)?this.Tt(n,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,n),this.Rt(n)):"arrayValue"in e?(this.yt(e.arrayValue,n),this.Rt(n)):j()}At(e,n){this.Tt(n,25),this.wt(e,n)}wt(e,n){n.dt(e)}gt(e,n){let i=e.fields||{};this.Tt(n,55);for(let r of Object.keys(i))this.At(r,n),this.Pt(i[r],n)}yt(e,n){let i=e.values||[];this.Tt(n,50);for(let r of i)this.Pt(r,n)}ft(e,n){this.Tt(n,37),P.fromName(e).path.forEach(i=>{this.Tt(n,60),this.wt(i,n)})}Tt(e,n){e.Et(n)}Rt(e){e.Et(2)}};Pr.St=new Pr;function NY(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function QL(t){let e=64-function(i){let r=0;for(let o=0;o<8;++o){let s=NY(255&i[o]);if(r+=s,s!==8)break}return r}(t);return Math.ceil(e/8)}var kI=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){let n=e[Symbol.iterator](),i=n.next();for(;!i.done;)this.Dt(i.value),i=n.next();this.Ct()}vt(e){let n=e[Symbol.iterator](),i=n.next();for(;!i.done;)this.Ft(i.value),i=n.next();this.Mt()}xt(e){for(let n of e){let i=n.charCodeAt(0);if(i<128)this.Dt(i);else if(i<2048)this.Dt(960|i>>>6),this.Dt(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Dt(480|i>>>12),this.Dt(128|63&i>>>6),this.Dt(128|63&i);else{let r=n.codePointAt(0);this.Dt(240|r>>>18),this.Dt(128|63&r>>>12),this.Dt(128|63&r>>>6),this.Dt(128|63&r)}}this.Ct()}Ot(e){for(let n of e){let i=n.charCodeAt(0);if(i<128)this.Ft(i);else if(i<2048)this.Ft(960|i>>>6),this.Ft(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i);else{let r=n.codePointAt(0);this.Ft(240|r>>>18),this.Ft(128|63&r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r)}}this.Mt()}Nt(e){let n=this.Bt(e),i=QL(n);this.Lt(1+i),this.buffer[this.position++]=255&i;for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=255&n[r]}kt(e){let n=this.Bt(e),i=QL(n);this.Lt(1+i),this.buffer[this.position++]=~(255&i);for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=~(255&n[r])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Bt(e){let n=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),i=(128&n[0])!=0;n[0]^=i?255:128;for(let r=1;r<n.length;++r)n[r]^=i?255:0;return n}Dt(e){let n=255&e;n===0?(this.Qt(0),this.Qt(255)):n===255?(this.Qt(255),this.Qt(0)):this.Qt(n)}Ft(e){let n=255&e;n===0?(this.$t(0),this.$t(255)):n===255?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Lt(1),this.buffer[this.position++]=e}$t(e){this.Lt(1),this.buffer[this.position++]=~e}Lt(e){let n=e+this.position;if(n<=this.buffer.length)return;let i=2*this.buffer.length;i<n&&(i=n);let r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}},MI=class{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}},RI=class{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}},Ws=class{constructor(){this.Wt=new kI,this.Gt=new MI(this.Wt),this.zt=new RI(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return e===0?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}};var Gs=class t{constructor(e,n,i,r){this.indexId=e,this.documentKey=n,this.arrayValue=i,this.directionalValue=r}Ht(){let e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,i=new Uint8Array(n);return i.set(this.directionalValue,0),n!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new t(this.indexId,this.documentKey,this.arrayValue,i)}};function Do(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=YL(t.arrayValue,e.arrayValue),n!==0?n:(n=YL(t.directionalValue,e.directionalValue),n!==0?n:P.comparator(t.documentKey,e.documentKey)))}function YL(t,e){for(let n=0;n<t.length&&n<e.length;++n){let i=t[n]-e[n];if(i!==0)return i}return t.length-e.length}var l_=class{constructor(e){this.Jt=new Ue((n,i)=>pt.comparator(n.field,i.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(let n of e.filters){let i=n;i.isInequality()?this.Jt=this.Jt.add(i):this.Zt.push(i)}}get Xt(){return this.Jt.size>1}en(e){if($(e.collectionGroup===this.collectionId),this.Xt)return!1;let n=tI(e);if(n!==void 0&&!this.tn(n))return!1;let i=zs(e),r=new Set,o=0,s=0;for(;o<i.length&&this.tn(i[o]);++o)r=r.add(i[o].fieldPath.canonicalString());if(o===i.length)return!0;if(this.Jt.size>0){let a=this.Jt.getIterator().getNext();if(!r.has(a.field.canonicalString())){let c=i[o];if(!this.nn(a,c)||!this.rn(this.Yt[s++],c))return!1}++o}for(;o<i.length;++o){let a=i[o];if(s>=this.Yt.length||!this.rn(this.Yt[s++],a))return!1}return!0}sn(){if(this.Xt)return null;let e=new Ue(pt.comparator),n=[];for(let i of this.Zt)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")n.push(new Kc(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),n.push(new Kc(i.field,0))}for(let i of this.Yt)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),n.push(new Kc(i.field,i.dir==="asc"?0:1)));return new Xc(Xc.UNKNOWN_ID,this.collectionId,n,th.empty())}tn(e){for(let n of this.Zt)if(this.nn(n,e))return!0;return!1}nn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;let i=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===i}rn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}};function m2(t){var e,n;if($(t instanceof pe||t instanceof Fe),t instanceof pe){if(t instanceof Jg){let r=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(o=>pe.create(t.field,"==",o)))||[];return Fe.create(r,"or")}return t}let i=t.filters.map(r=>m2(r));return Fe.create(i,t.op)}function FY(t){if(t.getFilters().length===0)return[];let e=FI(m2(t));return $(p2(e)),PI(e)||NI(e)?[e]:e.getFilters()}function PI(t){return t instanceof pe}function NI(t){return t instanceof Fe&&QC(t)}function p2(t){return PI(t)||NI(t)||function(n){if(n instanceof Fe&&lI(n)){for(let i of n.getFilters())if(!PI(i)&&!NI(i))return!1;return!0}return!1}(t)}function FI(t){if($(t instanceof pe||t instanceof Fe),t instanceof pe)return t;if(t.filters.length===1)return FI(t.filters[0]);let e=t.filters.map(i=>FI(i)),n=Fe.create(e,t.op);return n=u_(n),p2(n)?n:($(n instanceof Fe),$(el(n)),$(n.filters.length>1),n.filters.reduce((i,r)=>eT(i,r)))}function eT(t,e){let n;return $(t instanceof pe||t instanceof Fe),$(e instanceof pe||e instanceof Fe),n=t instanceof pe?e instanceof pe?function(r,o){return Fe.create([r,o],"and")}(t,e):ZL(t,e):e instanceof pe?ZL(e,t):function(r,o){if($(r.filters.length>0&&o.filters.length>0),el(r)&&el(o))return NV(r,o.getFilters());let s=lI(r)?r:o,a=lI(r)?o:r,c=s.filters.map(l=>eT(l,a));return Fe.create(c,"or")}(t,e),u_(n)}function ZL(t,e){if(el(e))return NV(e,t.getFilters());{let n=e.filters.map(i=>eT(t,i));return Fe.create(n,"or")}}function u_(t){if($(t instanceof pe||t instanceof Fe),t instanceof pe)return t;let e=t.getFilters();if(e.length===1)return u_(e[0]);if(RV(t))return t;let n=e.map(r=>u_(r)),i=[];return n.forEach(r=>{r instanceof pe?i.push(r):r instanceof Fe&&(r.op===t.op?i.push(...r.filters):i.push(r))}),i.length===1?i[0]:Fe.create(i,t.op)}var OI=class{constructor(){this.on=new ph}addToCollectionParentIndex(e,n){return this.on.add(n),_.resolve()}getCollectionParents(e,n){return _.resolve(this.on.getEntries(n))}addFieldIndex(e,n){return _.resolve()}deleteFieldIndex(e,n){return _.resolve()}deleteAllFieldIndexes(e){return _.resolve()}createTargetIndexes(e,n){return _.resolve()}getDocumentsMatchingTarget(e,n){return _.resolve(null)}getIndexType(e,n){return _.resolve(0)}getFieldIndexes(e,n){return _.resolve([])}getNextCollectionGroupToUpdate(e){return _.resolve(null)}getMinOffset(e,n){return _.resolve(ai.min())}getMinOffsetFromCollectionGroup(e,n){return _.resolve(ai.min())}updateCollectionGroup(e,n,i){return _.resolve()}updateIndexEntries(e,n){return _.resolve()}},ph=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new Ue(Se.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(e){let n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Ue(Se.comparator)).toArray()}};var Fg=new Uint8Array(0),LI=class{constructor(e,n){this.user=e,this.databaseId=n,this._n=new ph,this.an=new lr(i=>Js(i),(i,r)=>Th(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this._n.has(n)){let i=n.lastSegment(),r=n.popLast();e.addOnCommittedListener(()=>{this._n.add(n)});let o={collectionId:i,parent:_n(r)};return XL(e).put(o)}return _.resolve()}getCollectionParents(e,n){let i=[],r=IDBKeyRange.bound([n,""],[yV(n),""],!1,!0);return XL(e).W(r).next(o=>{for(let s of o){if(s.collectionId!==n)break;i.push(nr(s.parent))}return i})}addFieldIndex(e,n){let i=qd(e),r=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(n);delete r.indexId;let o=i.add(r);if(n.indexState){let s=Bc(e);return o.next(a=>{s.put(WL(a,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return o.next()}deleteFieldIndex(e,n){let i=qd(e),r=Bc(e),o=jc(e);return i.delete(n.indexId).next(()=>r.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let n=qd(e),i=jc(e),r=Bc(e);return n.H().next(()=>i.H()).next(()=>r.H())}createTargetIndexes(e,n){return _.forEach(this.un(n),i=>this.getIndexType(e,i).next(r=>{if(r===0||r===1){let o=new l_(i).sn();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,n){let i=jc(e),r=!0,o=new Map;return _.forEach(this.un(n),s=>this.cn(e,s).next(a=>{r&&(r=!!a),o.set(s,a)})).next(()=>{if(r){let s=ce(),a=[];return _.forEach(o,(c,l)=>{I("IndexedDbIndexManager",`Using index ${function(D){return`id=${D.indexId}|cg=${D.collectionGroup}|f=${D.fields.map(O=>`${O.fieldPath}:${O.kind}`).join(",")}`}(c)} to execute ${Js(n)}`);let u=function(D,O){let q=tI(O);if(q===void 0)return null;for(let G of t_(D,q.fieldPath))switch(G.op){case"array-contains-any":return G.value.arrayValue.values||[];case"array-contains":return[G.value]}return null}(l,c),d=function(D,O){let q=new Map;for(let G of zs(O))for(let de of t_(D,G.fieldPath))switch(de.op){case"==":case"in":q.set(G.fieldPath.canonicalString(),de.value);break;case"not-in":case"!=":return q.set(G.fieldPath.canonicalString(),de.value),Array.from(q.values())}return null}(l,c),h=function(D,O){let q=[],G=!0;for(let de of zs(O)){let at=de.kind===0?ML(D,de.fieldPath,D.startAt):RL(D,de.fieldPath,D.startAt);q.push(at.value),G&&(G=at.inclusive)}return new cr(q,G)}(l,c),f=function(D,O){let q=[],G=!0;for(let de of zs(O)){let at=de.kind===0?RL(D,de.fieldPath,D.endAt):ML(D,de.fieldPath,D.endAt);q.push(at.value),G&&(G=at.inclusive)}return new cr(q,G)}(l,c),m=this.ln(c,l,h),p=this.ln(c,l,f),g=this.hn(c,l,d),w=this.Pn(c.indexId,u,m,h.inclusive,p,f.inclusive,g);return _.forEach(w,k=>i.j(k,n.limit).next(D=>{D.forEach(O=>{let q=P.fromSegments(O.documentKey);s.has(q)||(s=s.add(q),a.push(q))})}))}).next(()=>a)}return _.resolve(null)})}un(e){let n=this.an.get(e);return n||(e.filters.length===0?n=[e]:n=FY(Fe.create(e.filters,"and")).map(i=>bI(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.an.set(e,n),n)}Pn(e,n,i,r,o,s,a){let c=(n!=null?n.length:1)*Math.max(i.length,o.length),l=c/(n!=null?n.length:1),u=[];for(let d=0;d<c;++d){let h=n?this.In(n[d/l]):Fg,f=this.Tn(e,h,i[d%l],r),m=this.En(e,h,o[d%l],s),p=a.map(g=>this.Tn(e,h,g,!0));u.push(...this.createRange(f,m,p))}return u}Tn(e,n,i,r){let o=new Gs(e,P.empty(),n,i);return r?o:o.Ht()}En(e,n,i,r){let o=new Gs(e,P.empty(),n,i);return r?o.Ht():o}cn(e,n){let i=new l_(n),r=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,r).next(o=>{let s=null;for(let a of o)i.en(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,n){let i=2,r=this.un(n);return _.forEach(r,o=>this.cn(e,o).next(s=>{s?i!==0&&s.fields.length<function(c){let l=new Ue(pt.comparator),u=!1;for(let d of c.filters)for(let h of d.getFlattenedFilters())h.field.isKeyField()||(h.op==="array-contains"||h.op==="array-contains-any"?u=!0:l=l.add(h.field));for(let d of c.orderBy)d.field.isKeyField()||(l=l.add(d.field));return l.size+(u?1:0)}(o)&&(i=1):i=0})).next(()=>function(s){return s.limit!==null}(n)&&r.length>1&&i===2?1:i)}dn(e,n){let i=new Ws;for(let r of zs(e)){let o=n.data.field(r.fieldPath);if(o==null)return null;let s=i.jt(r.kind);Pr.St.ht(o,s)}return i.Ut()}In(e){let n=new Ws;return Pr.St.ht(e,n.jt(0)),n.Ut()}An(e,n){let i=new Ws;return Pr.St.ht(Zs(this.databaseId,n),i.jt(function(o){let s=zs(o);return s.length===0?0:s[s.length-1].kind}(e))),i.Ut()}hn(e,n,i){if(i===null)return[];let r=[];r.push(new Ws);let o=0;for(let s of zs(e)){let a=i[o++];for(let c of r)if(this.Rn(n,s.fieldPath)&&sh(a))r=this.Vn(r,s,a);else{let l=c.jt(s.kind);Pr.St.ht(a,l)}}return this.mn(r)}ln(e,n,i){return this.hn(e,n,i.position)}mn(e){let n=[];for(let i=0;i<e.length;++i)n[i]=e[i].Ut();return n}Vn(e,n,i){let r=[...e],o=[];for(let s of i.arrayValue.values||[])for(let a of r){let c=new Ws;c.seed(a.Ut()),Pr.St.ht(s,c.jt(n.kind)),o.push(c)}return o}Rn(e,n){return!!e.filters.find(i=>i instanceof pe&&i.field.isEqual(n)&&(i.op==="in"||i.op==="not-in"))}getFieldIndexes(e,n){let i=qd(e),r=Bc(e);return(n?i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):i.W()).next(o=>{let s=[];return _.forEach(o,a=>r.get([a.indexId,this.uid]).next(c=>{s.push(function(u,d){let h=d?new th(d.sequenceNumber,new ai(na(d.readTime),new P(nr(d.documentKey)),d.largestBatchId)):th.empty(),f=u.fields.map(([m,p])=>new Kc(pt.fromServerFormat(m),p));return new Xc(u.indexId,u.collectionGroup,f,h)}(a,c))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((i,r)=>{let o=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return o!==0?o:oe(i.collectionGroup,r.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,i){let r=qd(e),o=Bc(e);return this.fn(e).next(s=>r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>_.forEach(a,c=>o.put(WL(c.indexId,this.user,s,i)))))}updateIndexEntries(e,n){let i=new Map;return _.forEach(n,(r,o)=>{let s=i.get(r.collectionGroup);return(s?_.resolve(s):this.getFieldIndexes(e,r.collectionGroup)).next(a=>(i.set(r.collectionGroup,a),_.forEach(a,c=>this.gn(e,r,c).next(l=>{let u=this.pn(o,c);return l.isEqual(u)?_.resolve():this.yn(e,o,c,l,u)}))))})}wn(e,n,i,r){return jc(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.An(i,n.key),documentKey:n.key.path.toArray()})}Sn(e,n,i,r){return jc(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.An(i,n.key),n.key.path.toArray()])}gn(e,n,i){let r=jc(e),o=new Ue(Do);return r.Y({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.An(i,n)])},(s,a)=>{o=o.add(new Gs(i.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>o)}pn(e,n){let i=new Ue(Do),r=this.dn(n,e);if(r==null)return i;let o=tI(n);if(o!=null){let s=e.data.field(o.fieldPath);if(sh(s))for(let a of s.arrayValue.values||[])i=i.add(new Gs(n.indexId,e.key,this.In(a),r))}else i=i.add(new Gs(n.indexId,e.key,Fg,r));return i}yn(e,n,i,r,o){I("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);let s=[];return function(c,l,u,d,h){let f=c.getIterator(),m=l.getIterator(),p=Vc(f),g=Vc(m);for(;p||g;){let w=!1,k=!1;if(p&&g){let D=u(p,g);D<0?k=!0:D>0&&(w=!0)}else p!=null?k=!0:w=!0;w?(d(g),g=Vc(m)):k?(h(p),p=Vc(f)):(p=Vc(f),g=Vc(m))}}(r,o,Do,a=>{s.push(this.wn(e,n,i,a))},a=>{s.push(this.Sn(e,n,i,a))}),_.waitFor(s)}fn(e){let n=1;return Bc(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,o)=>{o.done(),n=r.sequenceNumber+1}).next(()=>n)}createRange(e,n,i){i=i.sort((s,a)=>Do(s,a)).filter((s,a,c)=>!a||Do(s,c[a-1])!==0);let r=[];r.push(e);for(let s of i){let a=Do(s,e),c=Do(s,n);if(a===0)r[0]=e.Ht();else if(a>0&&c<0)r.push(s),r.push(s.Ht());else if(c>0)break}r.push(n);let o=[];for(let s=0;s<r.length;s+=2){if(this.bn(r[s],r[s+1]))return[];let a=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,Fg,[]],c=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,Fg,[]];o.push(IDBKeyRange.bound(a,c))}return o}bn(e,n){return Do(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(JL)}getMinOffset(e,n){return _.mapArray(this.un(n),i=>this.cn(e,i).next(r=>r||j())).next(JL)}};function XL(t){return Ft(t,"collectionParents")}function jc(t){return Ft(t,"indexEntries")}function qd(t){return Ft(t,"indexConfiguration")}function Bc(t){return Ft(t,"indexState")}function JL(t){$(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let i=1;i<t.length;i++){let r=t[i].indexState.offset;WC(r,e)<0&&(e=r),n<r.largestBatchId&&(n=r.largestBatchId)}return new ai(e.readTime,e.documentKey,n)}var eV={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},oi=class t{constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function g2(t,e,n){let i=t.store("mutations"),r=t.store("documentMutations"),o=[],s=IDBKeyRange.only(n.batchId),a=0,c=i.Y({range:s},(u,d,h)=>(a++,h.delete()));o.push(c.next(()=>{$(a===1)}));let l=[];for(let u of n.mutations){let d=IV(e,u.key.path,n.batchId);o.push(r.delete(d)),l.push(u.key)}return _.waitFor(o).next(()=>l)}function d_(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw j();e=t.noDocument}return JSON.stringify(e).length}oi.DEFAULT_COLLECTION_PERCENTILE=10,oi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,oi.DEFAULT=new oi(41943040,oi.DEFAULT_COLLECTION_PERCENTILE,oi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),oi.DISABLED=new oi(-1,0,0);var h_=class t{constructor(e,n,i,r){this.userId=e,this.serializer=n,this.indexManager=i,this.referenceDelegate=r,this.Dn={}}static ct(e,n,i,r){$(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new t(o,n,i,r)}checkEmpty(e){let n=!0,i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return So(e).Y({index:"userMutationsIndex",range:i},(r,o,s)=>{n=!1,s.done()}).next(()=>n)}addMutationBatch(e,n,i,r){let o=Wc(e),s=So(e);return s.add({}).next(a=>{$(typeof a=="number");let c=new ch(a,n,i,r),l=function(f,m,p){let g=p.baseMutations.map(k=>mh(f.ut,k)),w=p.mutations.map(k=>mh(f.ut,k));return{userId:m,batchId:p.batchId,localWriteTimeMs:p.localWriteTime.toMillis(),baseMutations:g,mutations:w}}(this.serializer,this.userId,c),u=[],d=new Ue((h,f)=>oe(h.canonicalString(),f.canonicalString()));for(let h of r){let f=IV(this.userId,h.key.path,a);d=d.add(h.key.path.popLast()),u.push(s.put(l)),u.push(o.put(f,$7))}return d.forEach(h=>{u.push(this.indexManager.addToCollectionParentIndex(e,h))}),e.addOnCommittedListener(()=>{this.Dn[a]=c.keys()}),_.waitFor(u).next(()=>c)})}lookupMutationBatch(e,n){return So(e).get(n).next(i=>i?($(i.userId===this.userId),qs(this.serializer,i)):null)}Cn(e,n){return this.Dn[n]?_.resolve(this.Dn[n]):this.lookupMutationBatch(e,n).next(i=>{if(i){let r=i.keys();return this.Dn[n]=r,r}return null})}getNextMutationBatchAfterBatchId(e,n){let i=n+1,r=IDBKeyRange.lowerBound([this.userId,i]),o=null;return So(e).Y({index:"userMutationsIndex",range:r},(s,a,c)=>{a.userId===this.userId&&($(a.batchId>=i),o=qs(this.serializer,a)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),i=-1;return So(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(r,o,s)=>{i=o.batchId,s.done()}).next(()=>i)}getAllMutationBatches(e){let n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return So(e).W("userMutationsIndex",n).next(i=>i.map(r=>qs(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(e,n){let i=jg(this.userId,n.path),r=IDBKeyRange.lowerBound(i),o=[];return Wc(e).Y({range:r},(s,a,c)=>{let[l,u,d]=s,h=nr(u);if(l===this.userId&&n.path.isEqual(h))return So(e).get(d).next(f=>{if(!f)throw j();$(f.userId===this.userId),o.push(qs(this.serializer,f))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Ue(oe),r=[];return n.forEach(o=>{let s=jg(this.userId,o.path),a=IDBKeyRange.lowerBound(s),c=Wc(e).Y({range:a},(l,u,d)=>{let[h,f,m]=l,p=nr(f);h===this.userId&&o.path.isEqual(p)?i=i.add(m):d.done()});r.push(c)}),_.waitFor(r).next(()=>this.vn(e,i))}getAllMutationBatchesAffectingQuery(e,n){let i=n.path,r=i.length+1,o=jg(this.userId,i),s=IDBKeyRange.lowerBound(o),a=new Ue(oe);return Wc(e).Y({range:s},(c,l,u)=>{let[d,h,f]=c,m=nr(h);d===this.userId&&i.isPrefixOf(m)?m.length===r&&(a=a.add(f)):u.done()}).next(()=>this.vn(e,a))}vn(e,n){let i=[],r=[];return n.forEach(o=>{r.push(So(e).get(o).next(s=>{if(s===null)throw j();$(s.userId===this.userId),i.push(qs(this.serializer,s))}))}),_.waitFor(r).next(()=>i)}removeMutationBatch(e,n){return g2(e.ae,this.userId,n).next(i=>(e.addOnCommittedListener(()=>{this.Fn(n.batchId)}),_.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return _.resolve();let i=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),r=[];return Wc(e).Y({range:i},(o,s,a)=>{if(o[0]===this.userId){let c=nr(o[1]);r.push(c)}else a.done()}).next(()=>{$(r.length===0)})})}containsKey(e,n){return _2(e,this.userId,n)}Mn(e){return b2(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function _2(t,e,n){let i=jg(e,n.path),r=i[1],o=IDBKeyRange.lowerBound(i),s=!1;return Wc(t).Y({range:o,J:!0},(a,c,l)=>{let[u,d,h]=a;u===e&&d===r&&(s=!0),l.done()}).next(()=>s)}function So(t){return Ft(t,"mutations")}function Wc(t){return Ft(t,"documentMutations")}function b2(t){return Ft(t,"mutationQueues")}var ol=class t{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new t(0)}static Nn(){return new t(-1)}};var VI=class{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{let i=new ol(n.highestTargetId);return n.highestTargetId=i.next(),this.Ln(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>W.fromTimestamp(new ot(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,i){return this.Bn(e).next(r=>(r.highestListenSequenceNumber=n,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),n>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=n),this.Ln(e,r)))}addTargetData(e,n){return this.kn(e,n).next(()=>this.Bn(e).next(i=>(i.targetCount+=1,this.qn(n,i),this.Ln(e,i))))}updateTargetData(e,n){return this.kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Uc(e).delete(n.targetId)).next(()=>this.Bn(e)).next(i=>($(i.targetCount>0),i.targetCount-=1,this.Ln(e,i)))}removeTargets(e,n,i){let r=0,o=[];return Uc(e).Y((s,a)=>{let c=Qd(a);c.sequenceNumber<=n&&i.get(c.targetId)===null&&(r++,o.push(this.removeTargetData(e,c)))}).next(()=>_.waitFor(o)).next(()=>r)}forEachTarget(e,n){return Uc(e).Y((i,r)=>{let o=Qd(r);n(o)})}Bn(e){return tV(e).get("targetGlobalKey").next(n=>($(n!==null),n))}Ln(e,n){return tV(e).put("targetGlobalKey",n)}kn(e,n){return Uc(e).put(f2(this.serializer,n))}qn(e,n){let i=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,i=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){let i=Js(n),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]),o=null;return Uc(e).Y({range:r,index:"queryTargetsIndex"},(s,a,c)=>{let l=Qd(a);Th(n,l.target)&&(o=l,c.done())}).next(()=>o)}addMatchingKeys(e,n,i){let r=[],o=Ao(e);return n.forEach(s=>{let a=_n(s.path);r.push(o.put({targetId:i,path:a})),r.push(this.referenceDelegate.addReference(e,i,s))}),_.waitFor(r)}removeMatchingKeys(e,n,i){let r=Ao(e);return _.forEach(n,o=>{let s=_n(o.path);return _.waitFor([r.delete([i,s]),this.referenceDelegate.removeReference(e,i,o)])})}removeMatchingKeysForTargetId(e,n){let i=Ao(e),r=IDBKeyRange.bound([n],[n+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,n){let i=IDBKeyRange.bound([n],[n+1],!1,!0),r=Ao(e),o=ce();return r.Y({range:i,J:!0},(s,a,c)=>{let l=nr(s[1]),u=new P(l);o=o.add(u)}).next(()=>o)}containsKey(e,n){let i=_n(n.path),r=IDBKeyRange.bound([i],[yV(i)],!1,!0),o=0;return Ao(e).Y({index:"documentTargetsIndex",J:!0,range:r},([s,a],c,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}_t(e,n){return Uc(e).get(n).next(i=>i?Qd(i):null)}};function Uc(t){return Ft(t,"targets")}function tV(t){return Ft(t,"targetGlobal")}function Ao(t){return Ft(t,"targetDocuments")}function nV([t,e],[n,i]){let r=oe(t,n);return r===0?oe(e,i):r}var jI=class{constructor(e){this.Qn=e,this.buffer=new Ue(nV),this.Kn=0}$n(){return++this.Kn}Un(e){let n=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(n);else{let i=this.buffer.last();nV(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}},BI=class{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Wn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return this.Wn!==null}Gn(e){I("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>v(this,null,function*(){this.Wn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){qo(n)?I("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):yield Ho(n)}yield this.Gn(3e5)}))}},UI=class{constructor(e,n){this.zn=e,this.params=n}calculateTargetCount(e,n){return this.zn.jn(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return _.resolve(qn._e);let i=new jI(n);return this.zn.forEachTarget(e,r=>i.Un(r.sequenceNumber)).next(()=>this.zn.Hn(e,r=>i.Un(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.zn.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.zn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(I("LruGarbageCollector","Garbage collection skipped; disabled"),_.resolve(eV)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(I("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),eV):this.Jn(e,n))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,n){let i,r,o,s,a,c,l,u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(I("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),r=this.params.maximumSequenceNumbersToCollect):r=d,s=Date.now(),this.nthSequenceNumber(e,r))).next(d=>(i=d,a=Date.now(),this.removeTargets(e,i,n))).next(d=>(o=d,c=Date.now(),this.removeOrphanedDocuments(e,i))).next(d=>(l=Date.now(),$c()<=Yn.DEBUG&&I("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-u}ms
	Determined least recently used ${r} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${d} documents in `+(l-c)+`ms
Total Duration: ${l-u}ms`),_.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:d})))}};function OY(t,e){return new UI(t,e)}var $I=class{constructor(e,n){this.db=e,this.garbageCollector=OY(this,n)}jn(e){let n=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}Yn(e){let n=0;return this.Hn(e,i=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Hn(e,n){return this.Zn(e,(i,r)=>n(r))}addReference(e,n,i){return Og(e,i)}removeReference(e,n,i){return Og(e,i)}removeTargets(e,n,i){return this.db.getTargetCache().removeTargets(e,n,i)}markPotentiallyOrphaned(e,n){return Og(e,n)}Xn(e,n){return function(r,o){let s=!1;return b2(r).Z(a=>_2(r,a,o).next(c=>(c&&(s=!0),_.resolve(!c)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){let i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[],o=0;return this.Zn(e,(s,a)=>{if(a<=n){let c=this.Xn(e,s).next(l=>{if(!l)return o++,i.getEntry(e,s).next(()=>(i.removeEntry(s,W.min()),Ao(e).delete(function(d){return[0,_n(d.path)]}(s))))});r.push(c)}}).next(()=>_.waitFor(r)).next(()=>i.apply(e)).next(()=>o)}removeTarget(e,n){let i=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,n){return Og(e,n)}Zn(e,n){let i=Ao(e),r,o=qn._e;return i.Y({index:"documentTargetsIndex"},([s,a],{path:c,sequenceNumber:l})=>{s===0?(o!==qn._e&&n(new P(nr(r)),o),o=l,r=c):o=qn._e}).next(()=>{o!==qn._e&&n(new P(nr(r)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Og(t,e){return Ao(t).put(function(i,r){return{targetId:0,path:_n(i.path),sequenceNumber:r}}(e,t.currentSequenceNumber))}var f_=class{constructor(){this.changes=new lr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,It.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let i=this.changes.get(n);return i!==void 0?_.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var zI=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,i){return $s(e).put(i)}removeEntry(e,n,i){return $s(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],a_(s),a[a.length-1]]}(n,i))}updateMetadata(e,n){return this.getMetadata(e).next(i=>(i.byteSize+=n,this.er(e,i)))}getEntry(e,n){let i=It.newInvalidDocument(n);return $s(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Wd(n))},(r,o)=>{i=this.tr(n,o)}).next(()=>i)}nr(e,n){let i={size:0,document:It.newInvalidDocument(n)};return $s(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Wd(n))},(r,o)=>{i={document:this.tr(n,o),size:d_(o)}}).next(()=>i)}getEntries(e,n){let i=kn();return this.rr(e,n,(r,o)=>{let s=this.tr(r,o);i=i.insert(r,s)}).next(()=>i)}ir(e,n){let i=kn(),r=new Xe(P.comparator);return this.rr(e,n,(o,s)=>{let a=this.tr(o,s);i=i.insert(o,a),r=r.insert(o,d_(s))}).next(()=>({documents:i,sr:r}))}rr(e,n,i){if(n.isEmpty())return _.resolve();let r=new Ue(oV);n.forEach(c=>r=r.add(c));let o=IDBKeyRange.bound(Wd(r.first()),Wd(r.last())),s=r.getIterator(),a=s.getNext();return $s(e).Y({index:"documentKeyIndex",range:o},(c,l,u)=>{let d=P.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&oV(a,d)<0;)i(a,null),a=s.getNext();a&&a.isEqual(d)&&(i(a,l),a=s.hasNext()?s.getNext():null),a?u.U(Wd(a)):u.done()}).next(()=>{for(;a;)i(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,n,i,r,o){let s=n.path,a=[s.popLast().toArray(),s.lastSegment(),a_(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return $s(e).W(IDBKeyRange.bound(a,c,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let u=kn();for(let d of l){let h=this.tr(P.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);h.isFoundDocument()&&(Sh(n,h)||r.has(h.key))&&(u=u.insert(h.key,h))}return u})}getAllFromCollectionGroup(e,n,i,r){let o=kn(),s=rV(n,i),a=rV(n,ai.max());return $s(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(c,l,u)=>{let d=this.tr(P.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(d.key,d),o.size===r&&u.done()}).next(()=>o)}newChangeBuffer(e){return new HI(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return iV(e).get("remoteDocumentGlobalKey").next(n=>($(!!n),n))}er(e,n){return iV(e).put("remoteDocumentGlobalKey",n)}tr(e,n){if(n){let i=PY(this.serializer,n);if(!(i.isNoDocument()&&i.version.isEqual(W.min())))return i}return It.newInvalidDocument(e)}};function y2(t){return new zI(t)}var HI=class extends f_{constructor(e,n){super(),this._r=e,this.trackRemovals=n,this.ar=new lr(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){let n=[],i=0,r=new Ue((o,s)=>oe(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.ar.get(o);if(n.push(this._r.removeEntry(e,o,a.readTime)),s.isValidDocument()){let c=HL(this._r.serializer,s);r=r.add(o.path.popLast());let l=d_(c);i+=l-a.size,n.push(this._r.addEntry(e,o,c))}else if(i-=a.size,this.trackRemovals){let c=HL(this._r.serializer,s.convertToNoDocument(W.min()));n.push(this._r.addEntry(e,o,c))}}),r.forEach(o=>{n.push(this._r.indexManager.addToCollectionParentIndex(e,o))}),n.push(this._r.updateMetadata(e,i)),_.waitFor(n)}getFromCache(e,n){return this._r.nr(e,n).next(i=>(this.ar.set(n,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,n){return this._r.ir(e,n).next(({documents:i,sr:r})=>(r.forEach((o,s)=>{this.ar.set(o,{size:s,readTime:i.get(o).readTime})}),i))}};function iV(t){return Ft(t,"remoteDocumentGlobal")}function $s(t){return Ft(t,"remoteDocumentsV14")}function Wd(t){let e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function rV(t,e){let n=e.documentKey.path.toArray();return[t,a_(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function oV(t,e){let n=t.path.toArray(),i=e.path.toArray(),r=0;for(let o=0;o<n.length-2&&o<i.length-2;++o)if(r=oe(n[o],i[o]),r)return r;return r=oe(n.length,i.length),r||(r=oe(n[n.length-2],i[i.length-2]),r||oe(n[n.length-1],i[i.length-1]))}var qI=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var m_=class{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&Xd(i.mutation,r,Wn.empty(),ot.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,ce()).next(()=>i))}getLocalViewOfDocuments(e,n,i=ce()){let r=ir();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(o=>{let s=Kd();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let i=ir();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,ce()))}populateOverlays(e,n,i){let r=[];return i.forEach(o=>{n.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,i,r){let o=kn(),s=Zd(),a=function(){return Zd()}();return n.forEach((c,l)=>{let u=i.get(l.key);r.has(l.key)&&(u===void 0||u.mutation instanceof Si)?o=o.insert(l.key,l):u!==void 0?(s.set(l.key,u.mutation.getFieldMask()),Xd(u.mutation,l,u.mutation.getFieldMask(),ot.now())):s.set(l.key,Wn.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((l,u)=>s.set(l,u)),n.forEach((l,u)=>{var d;return a.set(l,new qI(u,(d=s.get(l))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){let i=Zd(),r=new Xe((s,a)=>s-a),o=ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(c=>{let l=n.get(c);if(l===null)return;let u=i.get(c)||Wn.empty();u=a.applyToLocalView(l,u),i.set(c,u);let d=(r.get(a.batchId)||ce()).add(c);r=r.insert(a.batchId,d)})}).next(()=>{let s=[],a=r.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,u=c.value,d=zV();u.forEach(h=>{if(!o.has(h)){let f=ZV(n.get(h),i.get(h));f!==null&&d.set(h,f),o=o.add(h)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,d))}return _.waitFor(s)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(s){return P.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):YC(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(o=>{let s=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-o.size):_.resolve(ir()),a=-1,c=o;return s.next(l=>_.forEach(l,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),o.get(u)?_.resolve():this.remoteDocumentCache.getEntry(e,u).next(h=>{c=c.insert(u,h)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,c,l,ce())).next(u=>({batchId:a,changes:$V(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new P(n)).next(i=>{let r=Kd();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){let o=n.collectionGroup,s=Kd();return this.indexManager.getCollectionParents(e,o).next(a=>_.forEach(a,c=>{let l=function(d,h){return new Di(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,i,r).next(u=>{u.forEach((d,h)=>{s=s.insert(d,h)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,r))).next(s=>{o.forEach((c,l)=>{let u=l.getKey();s.get(u)===null&&(s=s.insert(u,It.newInvalidDocument(u)))});let a=Kd();return s.forEach((c,l)=>{let u=o.get(c);u!==void 0&&Xd(u.mutation,l,Wn.empty(),ot.now()),Sh(n,l)&&(a=a.insert(c,l))}),a})}};var WI=class{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,n){return _.resolve(this.ur.get(n))}saveBundleMetadata(e,n){return this.ur.set(n.id,function(r){return{id:r.id,version:r.version,createTime:gt(r.createTime)}}(n)),_.resolve()}getNamedQuery(e,n){return _.resolve(this.cr.get(n))}saveNamedQuery(e,n){return this.cr.set(n.name,function(r){return{name:r.name,query:JC(r.bundledQuery),readTime:gt(r.readTime)}}(n)),_.resolve()}};var GI=class{constructor(){this.overlays=new Xe(P.comparator),this.lr=new Map}getOverlay(e,n){return _.resolve(this.overlays.get(n))}getOverlays(e,n){let i=ir();return _.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,o)=>{this.lt(e,n,o)}),_.resolve()}removeOverlaysForBatchId(e,n,i){let r=this.lr.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.lr.delete(i)),_.resolve()}getOverlaysForCollection(e,n,i){let r=ir(),o=n.length+1,s=new P(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&c.largestBatchId>i&&r.set(c.getKey(),c)}return _.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let o=new Xe((l,u)=>l-u),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>i){let u=o.get(l.largestBatchId);u===null&&(u=ir(),o=o.insert(l.largestBatchId,u)),u.set(l.getKey(),l)}}let a=ir(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,u)=>a.set(l,u)),!(a.size()>=r)););return _.resolve(a)}lt(e,n,i){let r=this.overlays.get(i.key);if(r!==null){let s=this.lr.get(r.largestBatchId).delete(i.key);this.lr.set(r.largestBatchId,s)}this.overlays=this.overlays.insert(i.key,new lh(n,i));let o=this.lr.get(n);o===void 0&&(o=ce(),this.lr.set(n,o)),this.lr.set(n,o.add(i.key))}};var gh=class{constructor(){this.hr=new Ue(wt.Pr),this.Ir=new Ue(wt.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,n){let i=new wt(e,n);this.hr=this.hr.add(i),this.Ir=this.Ir.add(i)}Er(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.dr(new wt(e,n))}Ar(e,n){e.forEach(i=>this.removeReference(i,n))}Rr(e){let n=new P(new Se([])),i=new wt(n,e),r=new wt(n,e+1),o=[];return this.Ir.forEachInRange([i,r],s=>{this.dr(s),o.push(s.key)}),o}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){let n=new P(new Se([])),i=new wt(n,e),r=new wt(n,e+1),o=ce();return this.Ir.forEachInRange([i,r],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new wt(e,0),i=this.hr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}},wt=class{constructor(e,n){this.key=e,this.gr=n}static Pr(e,n){return P.comparator(e.key,n.key)||oe(e.gr,n.gr)}static Tr(e,n){return oe(e.gr,n.gr)||P.comparator(e.key,n.key)}};var KI=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new Ue(wt.Pr)}checkEmpty(e){return _.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){let o=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new ch(o,n,i,r);this.mutationQueue.push(s);for(let a of r)this.yr=this.yr.add(new wt(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return _.resolve(s)}lookupMutationBatch(e,n){return _.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(e,n){let i=n+1,r=this.Sr(i),o=r<0?0:r;return _.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return _.resolve(this.mutationQueue.length===0?-1:this.pr-1)}getAllMutationBatches(e){return _.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let i=new wt(n,0),r=new wt(n,Number.POSITIVE_INFINITY),o=[];return this.yr.forEachInRange([i,r],s=>{let a=this.wr(s.gr);o.push(a)}),_.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Ue(oe);return n.forEach(r=>{let o=new wt(r,0),s=new wt(r,Number.POSITIVE_INFINITY);this.yr.forEachInRange([o,s],a=>{i=i.add(a.gr)})}),_.resolve(this.br(i))}getAllMutationBatchesAffectingQuery(e,n){let i=n.path,r=i.length+1,o=i;P.isDocumentKey(o)||(o=o.child(""));let s=new wt(new P(o),0),a=new Ue(oe);return this.yr.forEachWhile(c=>{let l=c.key.path;return!!i.isPrefixOf(l)&&(l.length===r&&(a=a.add(c.gr)),!0)},s),_.resolve(this.br(a))}br(e){let n=[];return e.forEach(i=>{let r=this.wr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){$(this.Dr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.yr;return _.forEach(n.mutations,r=>{let o=new wt(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.yr=i})}Fn(e){}containsKey(e,n){let i=new wt(n,0),r=this.yr.firstAfterOrEqual(i);return _.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,_.resolve()}Dr(e,n){return this.Sr(e)}Sr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}wr(e){let n=this.Sr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var QI=class{constructor(e){this.Cr=e,this.docs=function(){return new Xe(P.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let i=n.key,r=this.docs.get(i),o=r?r.size:0,s=this.Cr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let i=this.docs.get(n);return _.resolve(i?i.document.mutableCopy():It.newInvalidDocument(n))}getEntries(e,n){let i=kn();return n.forEach(r=>{let o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():It.newInvalidDocument(r))}),_.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let o=kn(),s=n.path,a=new P(s.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:u}}=c.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||WC(wV(u),i)<=0||(r.has(u.key)||Sh(n,u))&&(o=o.insert(u.key,u.mutableCopy()))}return _.resolve(o)}getAllFromCollectionGroup(e,n,i,r){j()}vr(e,n){return _.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new YI(this)}getSize(e){return _.resolve(this.size)}},YI=class extends f_{constructor(e){super(),this._r=e}applyChanges(e){let n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this._r.addEntry(e,r)):this._r.removeEntry(i)}),_.waitFor(n)}getFromCache(e,n){return this._r.getEntry(e,n)}getAllFromCache(e,n){return this._r.getEntries(e,n)}};var ZI=class{constructor(e){this.persistence=e,this.Fr=new lr(n=>Js(n),Th),this.lastRemoteSnapshotVersion=W.min(),this.highestTargetId=0,this.Mr=0,this.Or=new gh,this.targetCount=0,this.Nr=ol.On()}forEachTarget(e,n){return this.Fr.forEach((i,r)=>n(r)),_.resolve()}getLastRemoteSnapshotVersion(e){return _.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return _.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),_.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Mr&&(this.Mr=n),_.resolve()}kn(e){this.Fr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Nr=new ol(n),this.highestTargetId=n),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,n){return this.kn(n),this.targetCount+=1,_.resolve()}updateTargetData(e,n){return this.kn(n),_.resolve()}removeTargetData(e,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,_.resolve()}removeTargets(e,n,i){let r=0,o=[];return this.Fr.forEach((s,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.Fr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),_.waitFor(o).next(()=>r)}getTargetCount(e){return _.resolve(this.targetCount)}getTargetData(e,n){let i=this.Fr.get(n)||null;return _.resolve(i)}addMatchingKeys(e,n,i){return this.Or.Er(n,i),_.resolve()}removeMatchingKeys(e,n,i){this.Or.Ar(n,i);let r=this.persistence.referenceDelegate,o=[];return r&&n.forEach(s=>{o.push(r.markPotentiallyOrphaned(e,s))}),_.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Or.Rr(n),_.resolve()}getMatchingKeysForTargetId(e,n){let i=this.Or.mr(n);return _.resolve(i)}containsKey(e,n){return _.resolve(this.Or.containsKey(n))}};var p_=class{constructor(e,n){this.Br={},this.overlays={},this.Lr=new qn(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new ZI(this),this.indexManager=new OI,this.remoteDocumentCache=function(r){return new QI(r)}(i=>this.referenceDelegate.Qr(i)),this.serializer=new s_(n),this.Kr=new WI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new GI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.Br[e.toKey()];return i||(i=new KI(n,this.referenceDelegate),this.Br[e.toKey()]=i),i}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,n,i){I("MemoryPersistence","Starting transaction:",e);let r=new XI(this.Lr.next());return this.referenceDelegate.$r(),i(r).next(o=>this.referenceDelegate.Ur(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Wr(e,n){return _.or(Object.values(this.Br).map(i=>()=>i.containsKey(e,n)))}},XI=class extends Kg{constructor(e){super(),this.currentSequenceNumber=e}},g_=class t{constructor(e){this.persistence=e,this.Gr=new gh,this.zr=null}static jr(e){return new t(e)}get Hr(){if(this.zr)return this.zr;throw j()}addReference(e,n,i){return this.Gr.addReference(i,n),this.Hr.delete(i.toString()),_.resolve()}removeReference(e,n,i){return this.Gr.removeReference(i,n),this.Hr.add(i.toString()),_.resolve()}markPotentiallyOrphaned(e,n){return this.Hr.add(n.toString()),_.resolve()}removeTarget(e,n){this.Gr.Rr(n.targetId).forEach(r=>this.Hr.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(o=>this.Hr.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}$r(){this.zr=new Set}Ur(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _.forEach(this.Hr,i=>{let r=P.fromPath(i);return this.Jr(e,r).next(o=>{o||n.removeEntry(r,W.min())})}).next(()=>(this.zr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Jr(e,n).next(i=>{i?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(e){return 0}Jr(e,n){return _.or([()=>_.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Wr(e,n)])}};var JI=class{constructor(e){this.serializer=e}N(e,n,i,r){let o=new Qg("createOrUpgrade",n);i<1&&r>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",EL,{unique:!0}),c.createObjectStore("documentMutations")}(e),sV(e),function(c){c.createObjectStore("remoteDocuments")}(e));let s=_.resolve();return i<3&&r>=3&&(i!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),sV(e)),s=s.next(()=>function(c){let l=c.store("targetGlobal"),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:W.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",u)}(o))),i<4&&r>=4&&(i!==0&&(s=s.next(()=>function(c,l){return l.store("mutations").W().next(u=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",EL,{unique:!0});let d=l.store("mutations"),h=u.map(f=>d.put(f));return _.waitFor(h)})}(e,o))),s=s.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),i<5&&r>=5&&(s=s.next(()=>this.Zr(o))),i<6&&r>=6&&(s=s.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(o)))),i<7&&r>=7&&(s=s.next(()=>this.ei(o))),i<8&&r>=8&&(s=s.next(()=>this.ti(e,o))),i<9&&r>=9&&(s=s.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),i<10&&r>=10&&(s=s.next(()=>this.ni(o))),i<11&&r>=11&&(s=s.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&r>=12&&(s=s.next(()=>{(function(c){let l=c.createObjectStore("documentOverlays",{keyPath:eY});l.createIndex("collectionPathOverlayIndex",tY,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",nY,{unique:!1})})(e)})),i<13&&r>=13&&(s=s.next(()=>function(c){let l=c.createObjectStore("remoteDocumentsV14",{keyPath:z7});l.createIndex("documentKeyIndex",H7),l.createIndex("collectionGroupIndex",q7)}(e)).next(()=>this.ri(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(s=s.next(()=>this.ii(e,o))),i<15&&r>=15&&(s=s.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:Y7}).createIndex("sequenceNumberIndex",Z7,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:X7}).createIndex("documentKeyIndex",J7,{unique:!1})}(e))),s}Xr(e){let n=0;return e.store("remoteDocuments").Y((i,r)=>{n+=d_(r)}).next(()=>{let i={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Zr(e){let n=e.store("mutationQueues"),i=e.store("mutations");return n.W().next(r=>_.forEach(r,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return i.W("userMutationsIndex",s).next(a=>_.forEach(a,c=>{$(c.userId===o.userId);let l=qs(this.serializer,c);return g2(e,o.userId,l).next(()=>{})}))}))}ei(e){let n=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(r=>{let o=[];return i.Y((s,a)=>{let c=new Se(s),l=function(d){return[0,_n(d)]}(c);o.push(n.get(l).next(u=>u?_.resolve():(d=>n.put({targetId:0,path:_n(d),sequenceNumber:r.highestListenSequenceNumber}))(c)))}).next(()=>_.waitFor(o))})}ti(e,n){e.createObjectStore("collectionParents",{keyPath:Q7});let i=n.store("collectionParents"),r=new ph,o=s=>{if(r.add(s)){let a=s.lastSegment(),c=s.popLast();return i.put({collectionId:a,parent:_n(c)})}};return n.store("remoteDocuments").Y({J:!0},(s,a)=>{let c=new Se(s);return o(c.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([s,a,c],l)=>{let u=nr(a);return o(u.popLast())}))}ni(e){let n=e.store("targets");return n.Y((i,r)=>{let o=Qd(r),s=f2(this.serializer,o);return n.put(s)})}ri(e,n){let i=n.store("remoteDocuments"),r=[];return i.Y((o,s)=>{let a=n.store("remoteDocumentsV14"),c=function(d){return d.document?new P(Se.fromString(d.document.name).popFirst(5)):d.noDocument?P.fromSegments(d.noDocument.path):d.unknownDocument?P.fromSegments(d.unknownDocument.path):j()}(s).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};r.push(a.put(l))}).next(()=>_.waitFor(r))}ii(e,n){let i=n.store("mutations"),r=y2(this.serializer),o=new p_(g_.jr,this.serializer.ut);return i.W().next(s=>{let a=new Map;return s.forEach(c=>{var l;let u=(l=a.get(c.userId))!==null&&l!==void 0?l:ce();qs(this.serializer,c).keys().forEach(d=>u=u.add(d)),a.set(c.userId,u)}),_.forEach(a,(c,l)=>{let u=new Et(l),d=c_.ct(this.serializer,u),h=o.getIndexManager(u),f=h_.ct(u,this.serializer,h,o.referenceDelegate);return new m_(r,f,d,h).recalculateAndSaveOverlaysForDocumentKeys(new ih(n,qn._e),c).next()})})}};function sV(t){t.createObjectStore("targetDocuments",{keyPath:G7}).createIndex("documentTargetsIndex",K7,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",W7,{unique:!0}),t.createObjectStore("targetGlobal")}var qx="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",eC=class t{constructor(e,n,i,r,o,s,a,c,l,u,d=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=i,this.si=o,this.window=s,this.document=a,this.oi=l,this._i=u,this.ai=d,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=h=>Promise.resolve(),!t.D())throw new x(b.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new $I(this,r),this.Ii=n+"main",this.serializer=new s_(c),this.Ti=new No(this.Ii,this.ai,new JI(this.serializer)),this.qr=new VI(this.referenceDelegate,this.serializer),this.remoteDocumentCache=y2(this.serializer),this.Kr=new AI,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,u===!1&&mt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new x(b.FAILED_PRECONDITION,qx);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.qr.getHighestSequenceNumber(e))}).then(e=>{this.Lr=new qn(e,this.oi)}).then(()=>{this.kr=!0}).catch(e=>(this.Ti&&this.Ti.close(),Promise.reject(e)))}mi(e){return this.Pi=n=>v(this,null,function*(){if(this.started)return e(n)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L(n=>v(this,null,function*(){n.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget(()=>v(this,null,function*(){this.started&&(yield this.di())})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Lg(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(n=>{n||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)))})}).next(()=>this.gi(e)).next(n=>this.isPrimary&&!n?this.pi(e).next(()=>!1):!!n&&this.yi(e).next(()=>!0))).catch(e=>{if(qo(e))return I("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return I("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.Pi(e)),this.isPrimary=e})}fi(e){return Gd(e).get("owner").next(n=>_.resolve(this.wi(n)))}Si(e){return Lg(e).delete(this.clientId)}bi(){return v(this,null,function*(){if(this.isPrimary&&!this.Di(this.hi,18e5)){this.hi=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{let i=Ft(n,"clientMetadata");return i.W().next(r=>{let o=this.Ci(r,18e5),s=r.filter(a=>o.indexOf(a)===-1);return _.forEach(s,a=>i.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Ei)for(let n of e)this.Ei.removeItem(this.vi(n.clientId))}})}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.di().then(()=>this.bi()).then(()=>this.Vi()))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?_.resolve(!0):Gd(e).get("owner").next(n=>{if(n!==null&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)){if(this.wi(n)&&this.networkEnabled)return!0;if(!this.wi(n)){if(!n.allowTabSynchronization)throw new x(b.FAILED_PRECONDITION,qx);return!1}}return!(!this.networkEnabled||!this.inForeground)||Lg(e).W().next(i=>this.Ci(i,5e3).find(r=>{if(this.clientId!==r.clientId){let o=!this.networkEnabled&&r.networkEnabled,s=!this.inForeground&&r.inForeground,a=this.networkEnabled===r.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&I("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){return v(this,null,function*(){this.kr=!1,this.Mi(),this.li&&(this.li.cancel(),this.li=null),this.xi(),this.Oi(),yield this.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let n=new ih(e,qn._e);return this.pi(n).next(()=>this.Si(n))}),this.Ti.close(),this.Ni()})}Ci(e,n){return e.filter(i=>this.Di(i.updateTimeMs,n)&&!this.Fi(i.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>Lg(e).W().next(n=>this.Ci(n,18e5).map(i=>i.clientId)))}get started(){return this.kr}getMutationQueue(e,n){return h_.ct(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new LI(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return c_.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,n,i){I("IndexedDbPersistence","Starting transaction:",e);let r=n==="readonly"?"readonly":"readwrite",o=function(c){return c===15?rY:c===14?DV:c===13?TV:c===12?iY:c===11?CV:void j()}(this.ai),s;return this.Ti.runTransaction(e,r,o,a=>(s=new ih(a,this.Lr?this.Lr.next():qn._e),n==="readwrite-primary"?this.fi(s).next(c=>!!c||this.gi(s)).next(c=>{if(!c)throw mt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)),new x(b.FAILED_PRECONDITION,EV);return i(s)}).next(c=>this.yi(s).next(()=>c)):this.Li(s).next(()=>i(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Li(e){return Gd(e).get("owner").next(n=>{if(n!==null&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)&&!this.wi(n)&&!(this._i||this.allowTabSynchronization&&n.allowTabSynchronization))throw new x(b.FAILED_PRECONDITION,qx)})}yi(e){let n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Gd(e).put("owner",n)}static D(){return No.D()}pi(e){let n=Gd(e);return n.get("owner").next(i=>this.wi(i)?(I("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):_.resolve())}Di(e,n){let i=Date.now();return!(e<i-n)&&(!(e>i)||(mt(`Detected an update time that is in the future: ${e} > ${i}`),!1))}Ai(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.di()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground=this.document.visibilityState==="visible")}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ui=()=>{this.Mi();let n=/(?:Version|Mobile)\/1[456]/;LS()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var n;try{let i=((n=this.Ei)===null||n===void 0?void 0:n.getItem(this.vi(e)))!==null;return I("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return mt("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){mt("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch{}}vi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function Gd(t){return Ft(t,"owner")}function Lg(t){return Ft(t,"clientMetadata")}function tT(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var tC=class t{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.ki=i,this.qi=r}static Qi(e,n){let i=ce(),r=ce();for(let o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new t(e,n.fromCache,i,r)}};var nC=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var __=class{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,n){this.Gi=e,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(e,n,i,r){let o={result:null};return this.zi(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ji(e,n,r,i).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new nC;return this.Hi(e,n,s).next(a=>{if(o.result=a,this.$i)return this.Ji(e,n,s,a.size)})}).next(()=>o.result)}Ji(e,n,i,r){return i.documentReadCount<this.Ui?($c()<=Yn.DEBUG&&I("QueryEngine","SDK will not create cache indexes for query:",zc(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),_.resolve()):($c()<=Yn.DEBUG&&I("QueryEngine","Query:",zc(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Wi*r?($c()<=Yn.DEBUG&&I("QueryEngine","The SDK decides to create cache indexes for query:",zc(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,bn(n))):_.resolve())}zi(e,n){if(PL(n))return _.resolve(null);let i=bn(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=n_(n,null,"F"),i=bn(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{let s=ce(...o);return this.Gi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,i).next(c=>{let l=this.Yi(n,a);return this.Zi(n,l,s,c.readTime)?this.zi(e,n_(n,null,"F")):this.Xi(e,l,n,c)}))})))}ji(e,n,i,r){return PL(n)||r.isEqual(W.min())?_.resolve(null):this.Gi.getDocuments(e,i).next(o=>{let s=this.Yi(n,o);return this.Zi(n,s,i,r)?_.resolve(null):($c()<=Yn.DEBUG&&I("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),zc(n)),this.Xi(e,s,n,vV(r,-1)).next(a=>a))})}Yi(e,n){let i=new Ue(BV(e));return n.forEach((r,o)=>{Sh(e,o)&&(i=i.add(o))}),i}Zi(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Hi(e,n,i){return $c()<=Yn.DEBUG&&I("QueryEngine","Using full collection scan to execute query:",zc(n)),this.Gi.getDocumentsMatchingQuery(e,n,ai.min(),i)}Xi(e,n,i,r){return this.Gi.getDocumentsMatchingQuery(e,i,r).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var iC=class{constructor(e,n,i,r){this.persistence=e,this.es=n,this.serializer=r,this.ts=new Xe(oe),this.ns=new lr(o=>Js(o),Th),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(i)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new m_(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ts))}};function v2(t,e,n,i){return new iC(t,e,n,i)}function w2(t,e){return v(this,null,function*(){let n=F(t);return yield n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,n.os(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{let s=[],a=[],c=ce();for(let l of r){s.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}for(let l of o){a.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}return n.localDocuments.getDocuments(i,c).next(l=>({_s:l,removedBatchIds:s,addedBatchIds:a}))})})})}function LY(t,e){let n=F(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=e.batch.keys(),o=n.ss.newChangeBuffer({trackRemovals:!0});return function(a,c,l,u){let d=l.batch,h=d.keys(),f=_.resolve();return h.forEach(m=>{f=f.next(()=>u.getEntry(c,m)).next(p=>{let g=l.docVersions.get(m);$(g!==null),p.version.compareTo(g)<0&&(d.applyToRemoteDocument(p,l),p.isValidDocument()&&(p.setReadTime(l.commitVersion),u.addEntry(p)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(c,d))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let c=ce();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function E2(t){let e=F(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.qr.getLastRemoteSnapshotVersion(n))}function VY(t,e){let n=F(t),i=e.snapshotVersion,r=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.ss.newChangeBuffer({trackRemovals:!0});r=n.ts;let a=[];e.targetChanges.forEach((u,d)=>{let h=r.get(d);if(!h)return;a.push(n.qr.removeMatchingKeys(o,u.removedDocuments,d).next(()=>n.qr.addMatchingKeys(o,u.addedDocuments,d)));let f=h.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(d)!==null?f=f.withResumeToken(Nt.EMPTY_BYTE_STRING,W.min()).withLastLimboFreeSnapshotVersion(W.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,i)),r=r.insert(d,f),function(p,g,w){return p.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(h,f,u)&&a.push(n.qr.updateTargetData(o,f))});let c=kn(),l=ce();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,u))}),a.push(x2(o,s,e.documentUpdates).next(u=>{c=u.us,l=u.cs})),!i.isEqual(W.min())){let u=n.qr.getLastRemoteSnapshotVersion(o).next(d=>n.qr.setTargetsMetadata(o,o.currentSequenceNumber,i));a.push(u)}return _.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,c,l)).next(()=>c)}).then(o=>(n.ts=r,o))}function x2(t,e,n){let i=ce(),r=ce();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let s=kn();return n.forEach((a,c)=>{let l=o.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(r=r.add(a)),c.isNoDocument()&&c.version.isEqual(W.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):I("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{us:s,cs:r}})}function jY(t,e){let n=F(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function sl(t,e){let n=F(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.qr.getTargetData(i,e).next(o=>o?(r=o,_.resolve(r)):n.qr.allocateTargetId(i).next(s=>(r=new rl(e,s,"TargetPurposeListen",i.currentSequenceNumber),n.qr.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=n.ts.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ts=n.ts.insert(i.targetId,i),n.ns.set(e,i.targetId)),i})}function al(t,e,n){return v(this,null,function*(){let i=F(t),r=i.ts.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield i.persistence.runTransaction("Release target",o,s=>i.persistence.referenceDelegate.removeTarget(s,r)))}catch(s){if(!qo(s))throw s;I("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}i.ts=i.ts.remove(e),i.ns.delete(r.target)})}function b_(t,e,n){let i=F(t),r=W.min(),o=ce();return i.persistence.runTransaction("Execute query","readwrite",s=>function(c,l,u){let d=F(c),h=d.ns.get(u);return h!==void 0?_.resolve(d.ts.get(h)):d.qr.getTargetData(l,u)}(i,s,bn(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.qr.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>i.es.getDocumentsMatchingQuery(s,e,n?r:W.min(),n?o:ce())).next(a=>(T2(i,jV(e),a),{documents:a,ls:o})))}function I2(t,e){let n=F(t),i=F(n.qr),r=n.ts.get(e);return r?Promise.resolve(r.target):n.persistence.runTransaction("Get target data","readonly",o=>i._t(o,e).next(s=>s?s.target:null))}function C2(t,e){let n=F(t),i=n.rs.get(e)||W.min();return n.persistence.runTransaction("Get new document changes","readonly",r=>n.ss.getAllFromCollectionGroup(r,e,vV(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(T2(n,e,r),r))}function T2(t,e,n){let i=t.rs.get(e)||W.min();n.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.rs.set(e,i)}function BY(t,e,n,i){return v(this,null,function*(){let r=F(t),o=ce(),s=kn();for(let l of n){let u=e.hs(l.metadata.name);l.document&&(o=o.add(u));let d=e.Ps(l);d.setReadTime(e.Is(l.metadata.readTime)),s=s.insert(u,d)}let a=r.ss.newChangeBuffer({trackRemovals:!0}),c=yield sl(r,function(u){return bn(ml(Se.fromString(`__bundle__/docs/${u}`)))}(i));return r.persistence.runTransaction("Apply bundle documents","readwrite",l=>x2(l,a,s).next(u=>(a.apply(l),u)).next(u=>r.qr.removeMatchingKeysForTargetId(l,c.targetId).next(()=>r.qr.addMatchingKeys(l,o,c.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(l,u.us,u.cs)).next(()=>u.us)))})}function UY(i,r){return v(this,arguments,function*(t,e,n=ce()){let o=yield sl(t,bn(JC(e.bundledQuery))),s=F(t);return s.persistence.runTransaction("Save named query","readwrite",a=>{let c=gt(e.readTime);if(o.snapshotVersion.compareTo(c)>=0)return s.Kr.saveNamedQuery(a,e);let l=o.withResumeToken(Nt.EMPTY_BYTE_STRING,c);return s.ts=s.ts.insert(l.targetId,l),s.qr.updateTargetData(a,l).next(()=>s.qr.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.qr.addMatchingKeys(a,n,o.targetId)).next(()=>s.Kr.saveNamedQuery(a,e))})})}function aV(t,e){return`firestore_clients_${t}_${e}`}function cV(t,e,n){let i=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function Wx(t,e){return`firestore_targets_${t}_${e}`}var y_=class t{constructor(e,n,i,r){this.user=e,this.batchId=n,this.state=i,this.error=r}static Ts(e,n,i){let r=JSON.parse(i),o,s=typeof r=="object"&&["pending","acknowledged","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(o=new x(r.error.code,r.error.message))),s?new t(e,n,r.state,o):(mt("SharedClientState",`Failed to parse mutation state for ID '${n}': ${i}`),null)}Es(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Jd=class t{constructor(e,n,i){this.targetId=e,this.state=n,this.error=i}static Ts(e,n){let i=JSON.parse(n),r,o=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(r=new x(i.error.code,i.error.message))),o?new t(e,i.state,r):(mt("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Es(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},v_=class t{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ts(e,n){let i=JSON.parse(n),r=typeof i=="object"&&i.activeTargetIds instanceof Array,o=ZC();for(let s=0;r&&s<i.activeTargetIds.length;++s)r=xV(i.activeTargetIds[s]),o=o.add(i.activeTargetIds[s]);return r?new t(e,o):(mt("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}},rC=class t{constructor(e,n){this.clientId=e,this.onlineState=n}static Ts(e){let n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new t(n.clientId,n.onlineState):(mt("SharedClientState",`Failed to parse online state: ${e}`),null)}},_h=class{constructor(){this.activeTargetIds=ZC()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},eh=class{constructor(e,n,i,r,o){this.window=e,this.si=n,this.persistenceKey=i,this.Rs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new Xe(oe),this.started=!1,this.ps=[];let s=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ys=aV(this.persistenceKey,this.Rs),this.ws=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.gs=this.gs.insert(this.Rs,new _h),this.Ss=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.bs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ds=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.Cs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.vs=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}start(){return v(this,null,function*(){let e=yield this.syncEngine.Bi();for(let i of e){if(i===this.Rs)continue;let r=this.getItem(aV(this.persistenceKey,i));if(r){let o=v_.Ts(i,r);o&&(this.gs=this.gs.insert(o.clientId,o))}}this.Fs();let n=this.storage.getItem(this.Cs);if(n){let i=this.Ms(n);i&&this.xs(i)}for(let i of this.ps)this.fs(i);this.ps=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let n=!1;return this.gs.forEach((i,r)=>{r.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,n,i){this.Ns(e,n,i),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(Wx(this.persistenceKey,e));if(i){let r=Jd.Ts(e,i);r&&(n=r.state)}}return this.Ls.ds(e),this.Fs(),n}removeLocalQueryTarget(e){this.Ls.As(e),this.Fs()}isLocalQueryTarget(e){return this.Ls.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Wx(this.persistenceKey,e))}updateQueryState(e,n,i){this.ks(e,n,i)}handleUserChange(e,n,i){n.forEach(r=>{this.Bs(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){let n=this.storage.getItem(e);return I("SharedClientState","READ",e,n),n}setItem(e,n){I("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){I("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){let n=e;if(n.storageArea===this.storage){if(I("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ys)return void mt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable(()=>v(this,null,function*(){if(this.started){if(n.key!==null){if(this.Ss.test(n.key)){if(n.newValue==null){let i=this.Ks(n.key);return this.$s(i,null)}{let i=this.Us(n.key,n.newValue);if(i)return this.$s(i.clientId,i)}}else if(this.bs.test(n.key)){if(n.newValue!==null){let i=this.Ws(n.key,n.newValue);if(i)return this.Gs(i)}}else if(this.Ds.test(n.key)){if(n.newValue!==null){let i=this.zs(n.key,n.newValue);if(i)return this.js(i)}}else if(n.key===this.Cs){if(n.newValue!==null){let i=this.Ms(n.newValue);if(i)return this.xs(i)}}else if(n.key===this.ws){let i=function(o){let s=qn._e;if(o!=null)try{let a=JSON.parse(o);$(typeof a=="number"),s=a}catch(a){mt("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(n.newValue);i!==qn._e&&this.sequenceNumberHandler(i)}else if(n.key===this.vs){let i=this.Hs(n.newValue);yield Promise.all(i.map(r=>this.syncEngine.Js(r)))}}}else this.ps.push(n)}))}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(e,n,i){let r=new y_(this.currentUser,e,n,i),o=cV(this.persistenceKey,this.currentUser,e);this.setItem(o,r.Es())}Bs(e){let n=cV(this.persistenceKey,this.currentUser,e);this.removeItem(n)}qs(e){let n={clientId:this.Rs,onlineState:e};this.storage.setItem(this.Cs,JSON.stringify(n))}ks(e,n,i){let r=Wx(this.persistenceKey,e),o=new Jd(e,n,i);this.setItem(r,o.Es())}Qs(e){let n=JSON.stringify(Array.from(e));this.setItem(this.vs,n)}Ks(e){let n=this.Ss.exec(e);return n?n[1]:null}Us(e,n){let i=this.Ks(e);return v_.Ts(i,n)}Ws(e,n){let i=this.bs.exec(e),r=Number(i[1]),o=i[2]!==void 0?i[2]:null;return y_.Ts(new Et(o),r,n)}zs(e,n){let i=this.Ds.exec(e),r=Number(i[1]);return Jd.Ts(r,n)}Ms(e){return rC.Ts(e)}Hs(e){return JSON.parse(e)}Gs(e){return v(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Ys(e.batchId,e.state,e.error);I("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,n){let i=n?this.gs.insert(e,n):this.gs.remove(e),r=this.Os(this.gs),o=this.Os(i),s=[],a=[];return o.forEach(c=>{r.has(c)||s.push(c)}),r.forEach(c=>{o.has(c)||a.push(c)}),this.syncEngine.Xs(s,a).then(()=>{this.gs=i})}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let n=ZC();return e.forEach((i,r)=>{n=n.unionWith(r.activeTargetIds)}),n}},w_=class{constructor(){this.eo=new _h,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,n,i){this.no[e]=n}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new _h,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var oC=class{ro(e){}shutdown(){}};var E_=class{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){I("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ao)e(0)}_o(){I("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ao)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Vg=null;function Gx(){return Vg===null?Vg=function(){return 268435456+Math.round(2147483648*Math.random())}():Vg++,"0x"+Vg.toString(16)}var $Y={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var sC=class{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}};var en="WebChannelConnection",aC=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.mo=i+"://"+n.host,this.fo=`projects/${r}/databases/${o}`,this.po=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${o}`}get yo(){return!1}wo(n,i,r,o,s){let a=Gx(),c=this.So(n,i);I("RestConnection",`Sending RPC '${n}' ${a}:`,c,r);let l={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(l,o,s),this.Do(n,c,l,r).then(u=>(I("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw si("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",c,"request:",r),u})}Co(n,i,r,o,s,a){return this.wo(n,i,r,o,s)}bo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+fl}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,s)=>n[s]=o),r&&r.headers.forEach((o,s)=>n[s]=o)}So(n,i){let r=$Y[n];return`${this.mo}/v1/${i}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,n,i,r){let o=Gx();return new Promise((s,a)=>{let c=new _L;c.setWithCredentials(!0),c.listenOnce(pL.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Ng.NO_ERROR:let u=c.getResponseJson();I(en,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(u)),s(u);break;case Ng.TIMEOUT:I(en,`RPC '${e}' ${o} timed out`),a(new x(b.DEADLINE_EXCEEDED,"Request time out"));break;case Ng.HTTP_ERROR:let d=c.getStatus();if(I(en,`RPC '${e}' ${o} failed with status:`,d,"response text:",c.getResponseText()),d>0){let h=c.getResponseJson();Array.isArray(h)&&(h=h[0]);let f=h?.error;if(f&&f.status&&f.message){let m=function(g){let w=g.toLowerCase().replace(/_/g,"-");return Object.values(b).indexOf(w)>=0?w:b.UNKNOWN}(f.status);a(new x(m,f.message))}else a(new x(b.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new x(b.UNAVAILABLE,"Connection failed."));break;default:j()}}finally{I(en,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(r);I(en,`RPC '${e}' ${o} sending request:`,r),c.send(n,"POST",l,i,15)})}vo(e,n,i){let r=Gx(),o=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=fL(),a=mL(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.bo(c.initMessageHeaders,n,i),c.encodeInitMessageHeaders=!0;let u=o.join("");I(en,`Creating RPC '${e}' stream ${r}: ${u}`,c);let d=s.createWebChannel(u,c),h=!1,f=!1,m=new sC({co:g=>{f?I(en,`Not sending because RPC '${e}' stream ${r} is closed:`,g):(h||(I(en,`Opening RPC '${e}' stream ${r} transport.`),d.open(),h=!0),I(en,`RPC '${e}' stream ${r} sending:`,g),d.send(g))},lo:()=>d.close()}),p=(g,w,k)=>{g.listen(w,D=>{try{k(D)}catch(O){setTimeout(()=>{throw O},0)}})};return p(d,zd.EventType.OPEN,()=>{f||I(en,`RPC '${e}' stream ${r} transport opened.`)}),p(d,zd.EventType.CLOSE,()=>{f||(f=!0,I(en,`RPC '${e}' stream ${r} transport closed`),m.Ro())}),p(d,zd.EventType.ERROR,g=>{f||(f=!0,si(en,`RPC '${e}' stream ${r} transport errored:`,g),m.Ro(new x(b.UNAVAILABLE,"The operation could not be completed")))}),p(d,zd.EventType.MESSAGE,g=>{var w;if(!f){let k=g.data[0];$(!!k);let D=k,O=D.error||((w=D[0])===null||w===void 0?void 0:w.error);if(O){I(en,`RPC '${e}' stream ${r} received error:`,O);let q=O.status,G=function(Rn){let Kn=vt[Rn];if(Kn!==void 0)return e2(Kn)}(q),de=O.message;G===void 0&&(G=b.INTERNAL,de="Unknown error status: "+q+" with message "+O.message),f=!0,m.Ro(new x(G,de)),d.close()}else I(en,`RPC '${e}' stream ${r} received:`,k),m.Vo(k)}}),p(a,gL.STAT_EVENT,g=>{g.stat===zx.PROXY?I(en,`RPC '${e}' stream ${r} detected buffering proxy`):g.stat===zx.NOPROXY&&I(en,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{m.Ao()},0),m}};function D2(){return typeof window<"u"?window:null}function zg(){return typeof document<"u"?document:null}function Ah(t){return new CI(t,!0)}var bh=class{constructor(e,n,i=1e3,r=1.5,o=6e4){this.si=e,this.timerId=n,this.Fo=i,this.Mo=r,this.xo=o,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();let n=Math.floor(this.Oo+this.qo()),i=Math.max(0,Date.now()-this.Bo),r=Math.max(0,n-i);r>0&&I("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Oo} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,r,()=>(this.Bo=Date.now(),e())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){this.No!==null&&(this.No.skipDelay(),this.No=null)}cancel(){this.No!==null&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}};var x_=class{constructor(e,n,i,r,o,s,a,c){this.si=e,this.Ko=i,this.$o=r,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new bh(e,n)}jo(){return this.state===1||this.state===5||this.Ho()}Ho(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Jo()}stop(){return v(this,null,function*(){this.jo()&&(yield this.close(0))})}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&this.Wo===null&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(e){this.t_(),this.stream.send(e)}Xo(){return v(this,null,function*(){if(this.Ho())return this.close(0)})}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}close(e,n){return v(this,null,function*(){this.t_(),this.n_(),this.zo.cancel(),this.Uo++,e!==4?this.zo.reset():n&&n.code===b.RESOURCE_EXHAUSTED?(mt(n.toString()),mt("Using maximum backoff delay to prevent overloading the backend."),this.zo.Lo()):n&&n.code===b.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.r_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Io(n)})}r_(){}auth(){this.state=1;let e=this.i_(this.Uo),n=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Uo===n&&this.s_(i,r)},i=>{e(()=>{let r=new x(b.UNKNOWN,"Fetching auth token failed: "+i.message);return this.o_(r)})})}s_(e,n){let i=this.i_(this.Uo);this.stream=this.__(e,n),this.stream.ho(()=>{i(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(r=>{i(()=>this.o_(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Jo(){this.state=5,this.zo.ko(()=>v(this,null,function*(){this.state=0,this.start()}))}o_(e){return I("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}i_(e){return n=>{this.si.enqueueAndForget(()=>this.Uo===e?n():(I("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},cC=class extends x_{constructor(e,n,i,r,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,s),this.serializer=o}__(e,n){return this.connection.vo("Listen",e,n)}onMessage(e){this.zo.reset();let n=TY(this.serializer,e),i=function(o){if(!("targetChange"in o))return W.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?W.min():s.readTime?gt(s.readTime):W.min()}(e);return this.listener.a_(n,i)}u_(e){let n={};n.database=fh(this.serializer),n.addTarget=function(o,s){let a,c=s.target;if(a=e_(c)?{documents:a2(o,c)}:{query:c2(o,c)},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=n2(o,s.resumeToken);let l=TI(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(W.min())>0){a.readTime=il(o,s.snapshotVersion.toTimestamp());let l=TI(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let i=SY(this.serializer,e);i&&(n.labels=i),this.e_(n)}c_(e){let n={};n.database=fh(this.serializer),n.removeTarget=e,this.e_(n)}},lC=class extends x_{constructor(e,n,i,r,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,s),this.serializer=o,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,n){return this.connection.vo("Write",e,n)}onMessage(e){if($(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();let n=DY(e.writeResults,e.commitTime),i=gt(e.commitTime);return this.listener.I_(i,n)}return $(!e.writeResults||e.writeResults.length===0),this.l_=!0,this.listener.T_()}E_(){let e={};e.database=fh(this.serializer),this.e_(e)}P_(e){let n={streamToken:this.lastStreamToken,writes:e.map(i=>mh(this.serializer,i))};this.e_(n)}};var uC=class extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.d_=!1}A_(){if(this.d_)throw new x(b.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,n,i){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,o])=>this.connection.wo(e,n,i,r,o)).catch(r=>{throw r.name==="FirebaseError"?(r.code===b.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new x(b.UNKNOWN,r.toString())})}Co(e,n,i,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Co(e,n,i,o,s,r)).catch(o=>{throw o.name==="FirebaseError"?(o.code===b.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new x(b.UNKNOWN,o.toString())})}terminate(){this.d_=!0}};var dC=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){this.V_===0&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(e){this.state==="Online"?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.p_("Offline")))}set(e){this.S_(),this.V_=0,e==="Online"&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(mt(n),this.f_=!1):I("OnlineStateTracker",n)}S_(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}};var hC=class{constructor(e,n,i,r,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=o,this.F_.ro(s=>{i.enqueueAndForget(()=>v(this,null,function*(){Wo(this)&&(I("RemoteStore","Restarting streams for network reachability change."),yield function(c){return v(this,null,function*(){let l=F(c);l.C_.add(4),yield pl(l),l.M_.set("Unknown"),l.C_.delete(4),yield kh(l)})}(this))}))}),this.M_=new dC(i,r)}};function kh(t){return v(this,null,function*(){if(Wo(t))for(let e of t.v_)yield e(!0)})}function pl(t){return v(this,null,function*(){for(let e of t.v_)yield e(!1)})}function $_(t,e){let n=F(t);n.D_.has(e.targetId)||(n.D_.set(e.targetId,e),rT(n)?iT(n):_l(n).Ho()&&nT(n,e))}function yh(t,e){let n=F(t),i=_l(n);n.D_.delete(e),i.Ho()&&S2(n,e),n.D_.size===0&&(i.Ho()?i.Zo():Wo(n)&&n.M_.set("Unknown"))}function nT(t,e){if(t.x_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(W.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}_l(t).u_(e)}function S2(t,e){t.x_.Oe(e),_l(t).c_(e)}function iT(t){t.x_=new II({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.D_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),_l(t).start(),t.M_.g_()}function rT(t){return Wo(t)&&!_l(t).jo()&&t.D_.size>0}function Wo(t){return F(t).C_.size===0}function A2(t){t.x_=void 0}function zY(t){return v(this,null,function*(){t.D_.forEach((e,n)=>{nT(t,e)})})}function HY(t,e){return v(this,null,function*(){A2(t),rT(t)?(t.M_.w_(e),iT(t)):t.M_.set("Unknown")})}function qY(t,e,n){return v(this,null,function*(){if(t.M_.set("Online"),e instanceof r_&&e.state===2&&e.cause)try{yield function(r,o){return v(this,null,function*(){let s=o.cause;for(let a of o.targetIds)r.D_.has(a)&&(yield r.remoteSyncer.rejectListen(a,s),r.D_.delete(a),r.x_.removeTarget(a))})}(t,e)}catch(i){I("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield I_(t,i)}else if(e instanceof Yc?t.x_.$e(e):e instanceof i_?t.x_.Je(e):t.x_.Ge(e),!n.isEqual(W.min()))try{let i=yield E2(t.localStore);n.compareTo(i)>=0&&(yield function(o,s){let a=o.x_.it(s);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let u=o.D_.get(l);u&&o.D_.set(l,u.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,l)=>{let u=o.D_.get(c);if(!u)return;o.D_.set(c,u.withResumeToken(Nt.EMPTY_BYTE_STRING,u.snapshotVersion)),S2(o,c);let d=new rl(u.target,c,l,u.sequenceNumber);nT(o,d)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(i){I("RemoteStore","Failed to raise snapshot:",i),yield I_(t,i)}})}function I_(t,e,n){return v(this,null,function*(){if(!qo(e))throw e;t.C_.add(1),yield pl(t),t.M_.set("Offline"),n||(n=()=>E2(t.localStore)),t.asyncQueue.enqueueRetryable(()=>v(this,null,function*(){I("RemoteStore","Retrying IndexedDB access"),yield n(),t.C_.delete(1),yield kh(t)}))})}function k2(t,e){return e().catch(n=>I_(t,n,e))}function gl(t){return v(this,null,function*(){let e=F(t),n=zo(e),i=e.b_.length>0?e.b_[e.b_.length-1].batchId:-1;for(;WY(e);)try{let r=yield jY(e.localStore,i);if(r===null){e.b_.length===0&&n.Zo();break}i=r.batchId,GY(e,r)}catch(r){yield I_(e,r)}M2(e)&&R2(e)})}function WY(t){return Wo(t)&&t.b_.length<10}function GY(t,e){t.b_.push(e);let n=zo(t);n.Ho()&&n.h_&&n.P_(e.mutations)}function M2(t){return Wo(t)&&!zo(t).jo()&&t.b_.length>0}function R2(t){zo(t).start()}function KY(t){return v(this,null,function*(){zo(t).E_()})}function QY(t){return v(this,null,function*(){let e=zo(t);for(let n of t.b_)e.P_(n.mutations)})}function YY(t,e,n){return v(this,null,function*(){let i=t.b_.shift(),r=wI.from(i,e,n);yield k2(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),yield gl(t)})}function ZY(t,e){return v(this,null,function*(){e&&zo(t).h_&&(yield function(i,r){return v(this,null,function*(){if(function(s){return JV(s)&&s!==b.ABORTED}(r.code)){let o=i.b_.shift();zo(i).Yo(),yield k2(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),yield gl(i)}})}(t,e)),M2(t)&&R2(t)})}function lV(t,e){return v(this,null,function*(){let n=F(t);n.asyncQueue.verifyOperationInProgress(),I("RemoteStore","RemoteStore received new credentials");let i=Wo(n);n.C_.add(3),yield pl(n),i&&n.M_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.C_.delete(3),yield kh(n)})}function fC(t,e){return v(this,null,function*(){let n=F(t);e?(n.C_.delete(2),yield kh(n)):e||(n.C_.add(2),yield pl(n),n.M_.set("Unknown"))})}function _l(t){return t.O_||(t.O_=function(n,i,r){let o=F(n);return o.A_(),new cC(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{ho:zY.bind(null,t),Io:HY.bind(null,t),a_:qY.bind(null,t)}),t.v_.push(e=>v(this,null,function*(){e?(t.O_.Yo(),rT(t)?iT(t):t.M_.set("Unknown")):(yield t.O_.stop(),A2(t))}))),t.O_}function zo(t){return t.N_||(t.N_=function(n,i,r){let o=F(n);return o.A_(),new lC(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{ho:KY.bind(null,t),Io:ZY.bind(null,t),T_:QY.bind(null,t),I_:YY.bind(null,t)}),t.v_.push(e=>v(this,null,function*(){e?(t.N_.Yo(),yield gl(t)):(yield t.N_.stop(),t.b_.length>0&&(I("RemoteStore",`Stopping write stream with ${t.b_.length} pending writes`),t.b_=[]))}))),t.N_}var mC=class t{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new xt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,o){let s=Date.now()+i,a=new t(e,n,s,r,o);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new x(b.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function bl(t,e){if(mt("AsyncQueue",`${e}: ${t}`),qo(t))return new x(b.UNAVAILABLE,`${e}: ${t}`);throw t}var C_=class t{constructor(e){this.comparator=e?(n,i)=>e(n,i)||P.comparator(n.key,i.key):(n,i)=>P.comparator(n.key,i.key),this.keyedMap=Kd(),this.sortedSet=new Xe(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){let r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let i=new t;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}};var T_=class{constructor(){this.B_=new Xe(P.comparator)}track(e){let n=e.doc.key,i=this.B_.get(n);i?e.type!==0&&i.type===3?this.B_=this.B_.insert(n,e):e.type===3&&i.type!==1?this.B_=this.B_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.B_=this.B_.remove(n):e.type===1&&i.type===2?this.B_=this.B_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):j():this.B_=this.B_.insert(n,e)}L_(){let e=[];return this.B_.inorderTraversal((n,i)=>{e.push(i)}),e}},cl=class t{constructor(e,n,i,r,o,s,a,c,l){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,n,i,r,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,C_.emptySet(n),s,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Dh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}};var pC=class{constructor(){this.k_=void 0,this.listeners=[]}},gC=class{constructor(){this.queries=new lr(e=>VV(e),Dh),this.onlineState="Unknown",this.q_=new Set}};function oT(t,e){return v(this,null,function*(){let n=F(t),i=e.query,r=!1,o=n.queries.get(i);if(o||(r=!0,o=new pC),r)try{o.k_=yield n.onListen(i)}catch(s){let a=bl(s,`Initialization of query '${zc(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.listeners.push(e),e.Q_(n.onlineState),o.k_&&e.K_(o.k_)&&aT(n)})}function sT(t,e){return v(this,null,function*(){let n=F(t),i=e.query,r=!1,o=n.queries.get(i);if(o){let s=o.listeners.indexOf(e);s>=0&&(o.listeners.splice(s,1),r=o.listeners.length===0)}if(r)return n.queries.delete(i),n.onUnlisten(i)})}function XY(t,e){let n=F(t),i=!1;for(let r of e){let o=r.query,s=n.queries.get(o);if(s){for(let a of s.listeners)a.K_(r)&&(i=!0);s.k_=r}}i&&aT(n)}function JY(t,e,n){let i=F(t),r=i.queries.get(e);if(r)for(let o of r.listeners)o.onError(n);i.queries.delete(e)}function aT(t){t.q_.forEach(e=>{e.next()})}var vh=class{constructor(e,n,i){this.query=e,this.U_=n,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=i||{}}K_(e){if(!this.options.includeMetadataChanges){let i=[];for(let r of e.docChanges)r.type!==3&&i.push(r);e=new cl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.W_?this.z_(e)&&(this.U_.next(e),n=!0):this.j_(e,this.onlineState)&&(this.H_(e),n=!0),this.G_=e,n}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let n=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),n=!0),n}j_(e,n){if(!e.fromCache)return!0;let i=n!=="Offline";return(!this.options.J_||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}z_(e){if(e.docChanges.length>0)return!0;let n=this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}H_(e){e=cl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}};var _C=class{constructor(e,n){this.Y_=e,this.byteLength=n}Z_(){return"metadata"in this.Y_}};var D_=class{constructor(e){this.serializer=e}hs(e){return or(this.serializer,e)}Ps(e){return e.metadata.exists?s2(this.serializer,e.document,!1):It.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return gt(e)}},bC=class{constructor(e,n,i){this.X_=e,this.localStore=n,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=P2(e)}ea(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++n;let i=Se.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ta(e){let n=new Map,i=new D_(this.serializer);for(let r of e)if(r.metadata.queries){let o=i.hs(r.metadata.name);for(let s of r.metadata.queries){let a=(n.get(s)||ce()).add(o);n.set(s,a)}}return n}complete(){return v(this,null,function*(){let e=yield BY(this.localStore,new D_(this.serializer),this.documents,this.X_.id),n=this.ta(this.documents);for(let i of this.queries)yield UY(this.localStore,i,n.get(i.name));return this.progress.taskState="Success",{progress:this.progress,na:this.collectionGroups,ra:e}})}};function P2(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var S_=class{constructor(e){this.key=e}},A_=class{constructor(e){this.key=e}},k_=class{constructor(e,n){this.query=e,this.ia=n,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=ce(),this.mutatedKeys=ce(),this._a=BV(e),this.aa=new C_(this._a)}get ua(){return this.ia}ca(e,n){let i=n?n.la:new T_,r=n?n.aa:this.aa,o=n?n.mutatedKeys:this.mutatedKeys,s=r,a=!1,c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,l=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((u,d)=>{let h=r.get(u),f=Sh(this.query,d)?d:null,m=!!h&&this.mutatedKeys.has(h.key),p=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations),g=!1;h&&f?h.data.isEqual(f.data)?m!==p&&(i.track({type:3,doc:f}),g=!0):this.ha(h,f)||(i.track({type:2,doc:f}),g=!0,(c&&this._a(f,c)>0||l&&this._a(f,l)<0)&&(a=!0)):!h&&f?(i.track({type:0,doc:f}),g=!0):h&&!f&&(i.track({type:1,doc:h}),g=!0,(c||l)&&(a=!0)),g&&(f?(s=s.add(f),o=p?o.add(u):o.delete(u)):(s=s.delete(u),o=o.delete(u)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let u=this.query.limitType==="F"?s.last():s.first();s=s.delete(u.key),o=o.delete(u.key),i.track({type:1,doc:u})}return{aa:s,la:i,Zi:a,mutatedKeys:o}}ha(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){let o=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;let s=e.la.L_();s.sort((u,d)=>function(f,m){let p=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return j()}};return p(f)-p(m)}(u.type,d.type)||this._a(u.doc,d.doc)),this.Pa(i),r=r!=null&&r;let a=n&&!r?this.Ia():[],c=this.oa.size===0&&this.current&&!r?1:0,l=c!==this.sa;return this.sa=c,s.length!==0||l?{snapshot:new cl(this.query,e.aa,o,s,e.mutatedKeys,c===0,l,!1,!!i&&i.resumeToken.approximateByteSize()>0),Ta:a}:{Ta:a}}Q_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({aa:this.aa,la:new T_,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach(n=>this.ia=this.ia.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ia=this.ia.delete(n)),this.current=e.current)}Ia(){if(!this.current)return[];let e=this.oa;this.oa=ce(),this.aa.forEach(i=>{this.Ea(i.key)&&(this.oa=this.oa.add(i.key))});let n=[];return e.forEach(i=>{this.oa.has(i)||n.push(new A_(i))}),this.oa.forEach(i=>{e.has(i)||n.push(new S_(i))}),n}da(e){this.ia=e.ls,this.oa=ce();let n=this.ca(e.documents);return this.applyChanges(n,!0)}Aa(){return cl.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,this.sa===0,this.hasCachedResults)}},yC=class{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}},vC=class{constructor(e){this.key=e,this.Ra=!1}},wC=class{constructor(e,n,i,r,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Va={},this.ma=new lr(a=>VV(a),Dh),this.fa=new Map,this.ga=new Set,this.pa=new Xe(P.comparator),this.ya=new Map,this.wa=new gh,this.Sa={},this.ba=new Map,this.Da=ol.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return this.Ca===!0}};function eZ(t,e){return v(this,null,function*(){let n=hT(t),i,r,o=n.ma.get(e);if(o)i=o.targetId,n.sharedClientState.addLocalQueryTarget(i),r=o.view.Aa();else{let s=yield sl(n.localStore,bn(e)),a=n.sharedClientState.addLocalQueryTarget(s.targetId);i=s.targetId,r=yield cT(n,e,i,a==="current",s.resumeToken),n.isPrimaryClient&&$_(n.remoteStore,s)}return r})}function cT(t,e,n,i,r){return v(this,null,function*(){t.va=(d,h,f)=>function(p,g,w,k){return v(this,null,function*(){let D=g.view.ca(w);D.Zi&&(D=yield b_(p.localStore,g.query,!1).then(({documents:de})=>g.view.ca(de,D)));let O=k&&k.targetChanges.get(g.targetId),q=k&&k.targetMismatches.get(g.targetId)!=null,G=g.view.applyChanges(D,p.isPrimaryClient,O,q);return EC(p,g.targetId,G.Ta),G.snapshot})}(t,d,h,f);let o=yield b_(t.localStore,e,!0),s=new k_(e,o.ls),a=s.ca(o.documents),c=dh.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),l=s.applyChanges(a,t.isPrimaryClient,c);EC(t,n,l.Ta);let u=new yC(e,n,s);return t.ma.set(e,u),t.fa.has(n)?t.fa.get(n).push(e):t.fa.set(n,[e]),l.snapshot})}function tZ(t,e){return v(this,null,function*(){let n=F(t),i=n.ma.get(e),r=n.fa.get(i.targetId);if(r.length>1)return n.fa.set(i.targetId,r.filter(o=>!Dh(o,e))),void n.ma.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||(yield al(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),yh(n.remoteStore,i.targetId),ll(n,i.targetId)}).catch(Ho))):(ll(n,i.targetId),yield al(n.localStore,i.targetId,!0))})}function nZ(t,e,n){return v(this,null,function*(){let i=fT(t);try{let r=yield function(s,a){let c=F(s),l=ot.now(),u=a.reduce((f,m)=>f.add(m.key),ce()),d,h;return c.persistence.runTransaction("Locally write mutations","readwrite",f=>{let m=kn(),p=ce();return c.ss.getEntries(f,u).next(g=>{m=g,m.forEach((w,k)=>{k.isValidDocument()||(p=p.add(w))})}).next(()=>c.localDocuments.getOverlayedDocuments(f,m)).next(g=>{d=g;let w=[];for(let k of a){let D=yY(k,d.get(k.key).overlayedDocument);D!=null&&w.push(new Si(k.key,D,MV(D.value.mapValue),dt.exists(!0)))}return c.mutationQueue.addMutationBatch(f,l,w,a)}).next(g=>{h=g;let w=g.applyToLocalDocumentSet(d,p);return c.documentOverlayCache.saveOverlays(f,g.batchId,w)})}).then(()=>({batchId:h.batchId,changes:$V(d)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(s,a,c){let l=s.Sa[s.currentUser.toKey()];l||(l=new Xe(oe)),l=l.insert(a,c),s.Sa[s.currentUser.toKey()]=l}(i,r.batchId,n),yield jr(i,r.changes),yield gl(i.remoteStore)}catch(r){let o=bl(r,"Failed to persist write");n.reject(o)}})}function N2(t,e){return v(this,null,function*(){let n=F(t);try{let i=yield VY(n.localStore,e);e.targetChanges.forEach((r,o)=>{let s=n.ya.get(o);s&&($(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?s.Ra=!0:r.modifiedDocuments.size>0?$(s.Ra):r.removedDocuments.size>0&&($(s.Ra),s.Ra=!1))}),yield jr(n,i,e)}catch(i){yield Ho(i)}})}function uV(t,e,n){let i=F(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){let r=[];i.ma.forEach((o,s)=>{let a=s.view.Q_(e);a.snapshot&&r.push(a.snapshot)}),function(s,a){let c=F(s);c.onlineState=a;let l=!1;c.queries.forEach((u,d)=>{for(let h of d.listeners)h.Q_(a)&&(l=!0)}),l&&aT(c)}(i.eventManager,e),r.length&&i.Va.a_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function iZ(t,e,n){return v(this,null,function*(){let i=F(t);i.sharedClientState.updateQueryState(e,"rejected",n);let r=i.ya.get(e),o=r&&r.key;if(o){let s=new Xe(P.comparator);s=s.insert(o,It.newNoDocument(o,W.min()));let a=ce().add(o),c=new uh(W.min(),new Map,new Xe(oe),s,a);yield N2(i,c),i.pa=i.pa.remove(o),i.ya.delete(e),dT(i)}else yield al(i.localStore,e,!1).then(()=>ll(i,e,n)).catch(Ho)})}function rZ(t,e){return v(this,null,function*(){let n=F(t),i=e.batch.batchId;try{let r=yield LY(n.localStore,e);uT(n,i,null),lT(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),yield jr(n,r)}catch(r){yield Ho(r)}})}function oZ(t,e,n){return v(this,null,function*(){let i=F(t);try{let r=yield function(s,a){let c=F(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return c.mutationQueue.lookupMutationBatch(l,a).next(d=>($(d!==null),u=d.keys(),c.mutationQueue.removeMutationBatch(l,d))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,u,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>c.localDocuments.getDocuments(l,u))})}(i.localStore,e);uT(i,e,n),lT(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),yield jr(i,r)}catch(r){yield Ho(r)}})}function sZ(t,e){return v(this,null,function*(){let n=F(t);Wo(n.remoteStore)||I("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let i=yield function(s){let a=F(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(n.localStore);if(i===-1)return void e.resolve();let r=n.ba.get(i)||[];r.push(e),n.ba.set(i,r)}catch(i){let r=bl(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}})}function lT(t,e){(t.ba.get(e)||[]).forEach(n=>{n.resolve()}),t.ba.delete(e)}function uT(t,e,n){let i=F(t),r=i.Sa[i.currentUser.toKey()];if(r){let o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.Sa[i.currentUser.toKey()]=r}}function ll(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let i of t.fa.get(e))t.ma.delete(i),n&&t.Va.Fa(i,n);t.fa.delete(e),t.isPrimaryClient&&t.wa.Rr(e).forEach(i=>{t.wa.containsKey(i)||F2(t,i)})}function F2(t,e){t.ga.delete(e.path.canonicalString());let n=t.pa.get(e);n!==null&&(yh(t.remoteStore,n),t.pa=t.pa.remove(e),t.ya.delete(n),dT(t))}function EC(t,e,n){for(let i of n)i instanceof S_?(t.wa.addReference(i.key,e),aZ(t,i)):i instanceof A_?(I("SyncEngine","Document no longer in limbo: "+i.key),t.wa.removeReference(i.key,e),t.wa.containsKey(i.key)||F2(t,i.key)):j()}function aZ(t,e){let n=e.key,i=n.path.canonicalString();t.pa.get(n)||t.ga.has(i)||(I("SyncEngine","New document in limbo: "+n),t.ga.add(i),dT(t))}function dT(t){for(;t.ga.size>0&&t.pa.size<t.maxConcurrentLimboResolutions;){let e=t.ga.values().next().value;t.ga.delete(e);let n=new P(Se.fromString(e)),i=t.Da.next();t.ya.set(i,new vC(n)),t.pa=t.pa.insert(n,i),$_(t.remoteStore,new rl(bn(ml(n.path)),i,"TargetPurposeLimboResolution",qn._e))}}function jr(t,e,n){return v(this,null,function*(){let i=F(t),r=[],o=[],s=[];i.ma.isEmpty()||(i.ma.forEach((a,c)=>{s.push(i.va(c,e,n).then(l=>{if((l||n)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(c.targetId,l?.fromCache?"not-current":"current"),l){r.push(l);let u=tC.Qi(c.targetId,l);o.push(u)}}))}),yield Promise.all(s),i.Va.a_(r),yield function(c,l){return v(this,null,function*(){let u=F(c);try{yield u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>_.forEach(l,h=>_.forEach(h.ki,f=>u.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>_.forEach(h.qi,f=>u.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!qo(d))throw d;I("LocalStore","Failed to update sequence numbers: "+d)}for(let d of l){let h=d.targetId;if(!d.fromCache){let f=u.ts.get(h),m=f.snapshotVersion,p=f.withLastLimboFreeSnapshotVersion(m);u.ts=u.ts.insert(h,p)}}})}(i.localStore,o))})}function cZ(t,e){return v(this,null,function*(){let n=F(t);if(!n.currentUser.isEqual(e)){I("SyncEngine","User change. New user:",e.toKey());let i=yield w2(n.localStore,e);n.currentUser=e,function(o,s){o.ba.forEach(a=>{a.forEach(c=>{c.reject(new x(b.CANCELLED,s))})}),o.ba.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield jr(n,i._s)}})}function lZ(t,e){let n=F(t),i=n.ya.get(e);if(i&&i.Ra)return ce().add(i.key);{let r=ce(),o=n.fa.get(e);if(!o)return r;for(let s of o){let a=n.ma.get(s);r=r.unionWith(a.view.ua)}return r}}function uZ(t,e){return v(this,null,function*(){let n=F(t),i=yield b_(n.localStore,e.query,!0),r=e.view.da(i);return n.isPrimaryClient&&EC(n,e.targetId,r.Ta),r})}function dZ(t,e){return v(this,null,function*(){let n=F(t);return C2(n.localStore,e).then(i=>jr(n,i))})}function hZ(t,e,n,i){return v(this,null,function*(){let r=F(t),o=yield function(a,c){let l=F(a),u=F(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",d=>u.Cn(d,c).next(h=>h?l.localDocuments.getDocuments(d,h):_.resolve(null)))}(r.localStore,e);o!==null?(n==="pending"?yield gl(r.remoteStore):n==="acknowledged"||n==="rejected"?(uT(r,e,i||null),lT(r,e),function(a,c){F(F(a).mutationQueue).Fn(c)}(r.localStore,e)):j(),yield jr(r,o)):I("SyncEngine","Cannot apply mutation batch with id: "+e)})}function fZ(t,e){return v(this,null,function*(){let n=F(t);if(hT(n),fT(n),e===!0&&n.Ca!==!0){let i=n.sharedClientState.getAllActiveQueryTargets(),r=yield dV(n,i.toArray());n.Ca=!0,yield fC(n.remoteStore,!0);for(let o of r)$_(n.remoteStore,o)}else if(e===!1&&n.Ca!==!1){let i=[],r=Promise.resolve();n.fa.forEach((o,s)=>{n.sharedClientState.isLocalQueryTarget(s)?i.push(s):r=r.then(()=>(ll(n,s),al(n.localStore,s,!0))),yh(n.remoteStore,s)}),yield r,yield dV(n,i),function(s){let a=F(s);a.ya.forEach((c,l)=>{yh(a.remoteStore,l)}),a.wa.Vr(),a.ya=new Map,a.pa=new Xe(P.comparator)}(n),n.Ca=!1,yield fC(n.remoteStore,!1)}})}function dV(t,e,n){return v(this,null,function*(){let i=F(t),r=[],o=[];for(let s of e){let a,c=i.fa.get(s);if(c&&c.length!==0){a=yield sl(i.localStore,bn(c[0]));for(let l of c){let u=i.ma.get(l),d=yield uZ(i,u);d.snapshot&&o.push(d.snapshot)}}else{let l=yield I2(i.localStore,s);a=yield sl(i.localStore,l),yield cT(i,O2(l),s,!1,a.resumeToken)}r.push(a)}return i.Va.a_(o),r})}function O2(t){return LV(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function mZ(t){return function(n){return F(F(n).persistence).Bi()}(F(t).localStore)}function pZ(t,e,n,i){return v(this,null,function*(){let r=F(t);if(r.Ca)return void I("SyncEngine","Ignoring unexpected query state notification.");let o=r.fa.get(e);if(o&&o.length>0)switch(n){case"current":case"not-current":{let s=yield C2(r.localStore,jV(o[0])),a=uh.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Nt.EMPTY_BYTE_STRING);yield jr(r,s,a);break}case"rejected":yield al(r.localStore,e,!0),ll(r,e,i);break;default:j()}})}function gZ(t,e,n){return v(this,null,function*(){let i=hT(t);if(i.Ca){for(let r of e){if(i.fa.has(r)){I("SyncEngine","Adding an already active target "+r);continue}let o=yield I2(i.localStore,r),s=yield sl(i.localStore,o);yield cT(i,O2(o),s.targetId,!1,s.resumeToken),$_(i.remoteStore,s)}for(let r of n)i.fa.has(r)&&(yield al(i.localStore,r,!1).then(()=>{yh(i.remoteStore,r),ll(i,r)}).catch(Ho))}})}function hT(t){let e=F(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=N2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=lZ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=iZ.bind(null,e),e.Va.a_=XY.bind(null,e.eventManager),e.Va.Fa=JY.bind(null,e.eventManager),e}function fT(t){let e=F(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=rZ.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=oZ.bind(null,e),e}function _Z(t,e,n){let i=F(t);(function(o,s,a){return v(this,null,function*(){try{let c=yield s.getMetadata();if(yield function(f,m){let p=F(f),g=gt(m.createTime);return p.persistence.runTransaction("hasNewerBundle","readonly",w=>p.Kr.getBundleMetadata(w,m.id)).then(w=>!!w&&w.createTime.compareTo(g)>=0)}(o.localStore,c))return yield s.close(),a._completeWith(function(f){return{taskState:"Success",documentsLoaded:f.totalDocuments,bytesLoaded:f.totalBytes,totalDocuments:f.totalDocuments,totalBytes:f.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(P2(c));let l=new bC(c,o.localStore,s.serializer),u=yield s.Ma();for(;u;){let h=yield l.ea(u);h&&a._updateProgress(h),u=yield s.Ma()}let d=yield l.complete();return yield jr(o,d.ra,void 0),yield function(f,m){let p=F(f);return p.persistence.runTransaction("Save bundle","readwrite",g=>p.Kr.saveBundleMetadata(g,m))}(o.localStore,c),a._completeWith(d.progress),Promise.resolve(d.na)}catch(c){return si("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(i,e,n).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}var wh=class{constructor(){this.synchronizeTabs=!1}initialize(e){return v(this,null,function*(){this.serializer=Ah(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return v2(this.persistence,new __,e.initialUser,this.serializer)}createPersistence(e){return new p_(g_.jr,this.serializer)}createSharedClientState(e){return new w_}terminate(){return v(this,null,function*(){this.gcScheduler&&this.gcScheduler.stop(),yield this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var M_=class t extends wh{constructor(e,n,i){super(),this.xa=e,this.cacheSizeBytes=n,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(e){return v(this,null,function*(){yield kb(t.prototype,this,"initialize").call(this,e),yield this.xa.initialize(this,e),yield fT(this.xa.syncEngine),yield gl(this.xa.remoteStore),yield this.persistence.mi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return v2(this.persistence,new __,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){let i=this.persistence.referenceDelegate.garbageCollector;return new BI(i,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){let i=new oI(n,this.persistence);return new rI(e.asyncQueue,i)}createPersistence(e){let n=tT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?oi.withCacheSize(this.cacheSizeBytes):oi.DEFAULT;return new eC(this.synchronizeTabs,n,e.clientId,i,e.asyncQueue,D2(),zg(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new w_}},xC=class t extends M_{constructor(e,n){super(e,n,!1),this.xa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){return v(this,null,function*(){yield kb(t.prototype,this,"initialize").call(this,e);let n=this.xa.syncEngine;this.sharedClientState instanceof eh&&(this.sharedClientState.syncEngine={Ys:hZ.bind(null,n),Zs:pZ.bind(null,n),Xs:gZ.bind(null,n),Bi:mZ.bind(null,n),Js:dZ.bind(null,n)},yield this.sharedClientState.start()),yield this.persistence.mi(i=>v(this,null,function*(){yield fZ(this.xa.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let n=D2();if(!eh.D(n))throw new x(b.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let i=tT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new eh(n,e.asyncQueue,i,e.clientId,e.initialUser)}},Eh=class{initialize(e,n){return v(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>uV(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=cZ.bind(null,this.syncEngine),yield fC(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new gC}()}createDatastore(e){let n=Ah(e.databaseInfo.databaseId),i=function(o){return new aC(o)}(e.databaseInfo);return function(o,s,a,c){return new uC(o,s,a,c)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,o,s,a){return new hC(i,r,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,n=>uV(this.syncEngine,n,0),function(){return E_.D()?new E_:new oC}())}createSyncEngine(e,n){return function(r,o,s,a,c,l,u){let d=new wC(r,o,s,a,c,l);return u&&(d.Ca=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return function(n){return v(this,null,function*(){let i=F(n);I("RemoteStore","RemoteStore shutting down."),i.C_.add(5),yield pl(i),i.F_.shutdown(),i.M_.set("Unknown")})}(this.remoteStore)}};function hV(t,e=10240){let n=0;return{read(){return v(this,null,function*(){if(n<t.byteLength){let r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}})},cancel(){return v(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var ul=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):mt("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var IC=class{constructor(e,n){this.Ba=e,this.serializer=n,this.metadata=new xt,this.buffer=new Uint8Array,this.La=function(){return new TextDecoder("utf-8")}(),this.ka().then(i=>{i&&i.Z_()?this.metadata.resolve(i.Y_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(i?.Y_)}`))},i=>this.metadata.reject(i))}close(){return this.Ba.cancel()}getMetadata(){return v(this,null,function*(){return this.metadata.promise})}Ma(){return v(this,null,function*(){return yield this.getMetadata(),this.ka()})}ka(){return v(this,null,function*(){let e=yield this.qa();if(e===null)return null;let n=this.La.decode(e),i=Number(n);isNaN(i)&&this.Qa(`length string (${n}) is not valid number`);let r=yield this.Ka(i);return new _C(JSON.parse(r),e.length+i)})}$a(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}qa(){return v(this,null,function*(){for(;this.$a()<0&&!(yield this.Ua()););if(this.buffer.length===0)return null;let e=this.$a();e<0&&this.Qa("Reached the end of bundle when a length string is expected.");let n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n})}Ka(e){return v(this,null,function*(){for(;this.buffer.length<e;)(yield this.Ua())&&this.Qa("Reached the end of bundle when more is expected.");let n=this.La.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n})}Qa(e){throw this.Ba.cancel(),new Error(`Invalid bundle format: ${e}`)}Ua(){return v(this,null,function*(){let e=yield this.Ba.read();if(!e.done){let n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done})}};var CC=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){return v(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new x(b.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");let n=yield function(r,o){return v(this,null,function*(){let s=F(r),a=fh(s.serializer)+"/documents",c={documents:o.map(h=>hh(s.serializer,h))},l=yield s.Co("BatchGetDocuments",a,c,o.length),u=new Map;l.forEach(h=>{let f=CY(s.serializer,h);u.set(f.key.toString(),f)});let d=[];return o.forEach(h=>{let f=u.get(h.toString());$(!!f),d.push(f)}),d})}(this.datastore,e);return n.forEach(i=>this.recordVersion(i)),n})}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new $o(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return v(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;let e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,i)=>{let r=P.fromPath(i);this.mutations.push(new ah(r,this.precondition(r)))}),yield function(i,r){return v(this,null,function*(){let o=F(i),s=fh(o.serializer)+"/documents",a={writes:r.map(c=>mh(o.serializer,c))};yield o.wo("Commit",s,a)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw j();n=W.min()}let i=this.readVersions.get(e.key.toString());if(i){if(!n.isEqual(i))throw new x(b.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){let n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(W.min())?dt.exists(!1):dt.updateTime(n):dt.none()}preconditionForUpdate(e){let n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(W.min()))throw new x(b.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return dt.updateTime(n)}return dt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var TC=class{constructor(e,n,i,r,o){this.asyncQueue=e,this.datastore=n,this.options=i,this.updateFunction=r,this.deferred=o,this.Wa=i.maxAttempts,this.zo=new bh(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){this.zo.ko(()=>v(this,null,function*(){let e=new CC(this.datastore),n=this.za(e);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.ja(r)}))}).catch(i=>{this.ja(i)})}))}za(e){try{let n=this.updateFunction(e);return!Ch(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}ja(e){this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ga(),Promise.resolve()))):this.deferred.reject(e)}Ha(e){if(e.name==="FirebaseError"){let n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!JV(n)}return!1}};var DC=class{constructor(e,n,i,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Et.UNAUTHENTICATED,this.clientId=Wg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,o=>v(this,null,function*(){I("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(i,o=>(I("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){return v(this,null,function*(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}})}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new x(b.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new xt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>v(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let i=bl(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}};function Hg(t,e){return v(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),I("FirestoreClient","Initializing OfflineComponentProvider");let n=yield t.getConfiguration();yield e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(r=>v(this,null,function*(){i.isEqual(r)||(yield w2(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function SC(t,e){return v(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield mT(t);I("FirestoreClient","Initializing OnlineComponentProvider");let i=yield t.getConfiguration();yield e.initialize(n,i),t.setCredentialChangeListener(r=>lV(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,o)=>lV(e.remoteStore,o)),t._onlineComponents=e})}function L2(t){return t.name==="FirebaseError"?t.code===b.FAILED_PRECONDITION||t.code===b.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function mT(t){return v(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){I("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Hg(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!L2(n))throw n;si("Error using user provided cache. Falling back to memory cache: "+n),yield Hg(t,new wh)}}else I("FirestoreClient","Using default OfflineComponentProvider"),yield Hg(t,new wh);return t._offlineComponents})}function z_(t){return v(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(I("FirestoreClient","Using user provided OnlineComponentProvider"),yield SC(t,t._uninitializedComponentsProvider._online)):(I("FirestoreClient","Using default OnlineComponentProvider"),yield SC(t,new Eh))),t._onlineComponents})}function V2(t){return mT(t).then(e=>e.persistence)}function pT(t){return mT(t).then(e=>e.localStore)}function j2(t){return z_(t).then(e=>e.remoteStore)}function gT(t){return z_(t).then(e=>e.syncEngine)}function bZ(t){return z_(t).then(e=>e.datastore)}function dl(t){return v(this,null,function*(){let e=yield z_(t),n=e.eventManager;return n.onListen=eZ.bind(null,e.syncEngine),n.onUnlisten=tZ.bind(null,e.syncEngine),n})}function yZ(t){return t.asyncQueue.enqueue(()=>v(this,null,function*(){let e=yield V2(t),n=yield j2(t);return e.setNetworkEnabled(!0),function(r){let o=F(r);return o.C_.delete(0),kh(o)}(n)}))}function vZ(t){return t.asyncQueue.enqueue(()=>v(this,null,function*(){let e=yield V2(t),n=yield j2(t);return e.setNetworkEnabled(!1),function(r){return v(this,null,function*(){let o=F(r);o.C_.add(0),yield pl(o),o.M_.set("Offline")})}(n)}))}function wZ(t,e){let n=new xt;return t.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return function(r,o,s){return v(this,null,function*(){try{let a=yield function(l,u){let d=F(l);return d.persistence.runTransaction("read document","readonly",h=>d.localDocuments.getDocument(h,u))}(r,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new x(b.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=bl(a,`Failed to get document '${o} from cache`);s.reject(c)}})}(yield pT(t),e,n)})),n.promise}function B2(t,e,n={}){let i=new xt;return t.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return function(o,s,a,c,l){let u=new ul({next:h=>{s.enqueueAndForget(()=>sT(o,d));let f=h.docs.has(a);!f&&h.fromCache?l.reject(new x(b.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&h.fromCache&&c&&c.source==="server"?l.reject(new x(b.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(h)},error:h=>l.reject(h)}),d=new vh(ml(a.path),u,{includeMetadataChanges:!0,J_:!0});return oT(o,d)}(yield dl(t),t.asyncQueue,e,n,i)})),i.promise}function EZ(t,e){let n=new xt;return t.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return function(r,o,s){return v(this,null,function*(){try{let a=yield b_(r,o,!0),c=new k_(o,a.ls),l=c.ca(a.documents),u=c.applyChanges(l,!1);s.resolve(u.snapshot)}catch(a){let c=bl(a,`Failed to execute query '${o} against cache`);s.reject(c)}})}(yield pT(t),e,n)})),n.promise}function U2(t,e,n={}){let i=new xt;return t.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return function(o,s,a,c,l){let u=new ul({next:h=>{s.enqueueAndForget(()=>sT(o,d)),h.fromCache&&c.source==="server"?l.reject(new x(b.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(h)},error:h=>l.reject(h)}),d=new vh(a,u,{includeMetadataChanges:!0,J_:!0});return oT(o,d)}(yield dl(t),t.asyncQueue,e,n,i)})),i.promise}function xZ(t,e){let n=new ul(e);return t.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return function(r,o){F(r).q_.add(o),o.next()}(yield dl(t),n)})),()=>{n.Na(),t.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return function(r,o){F(r).q_.delete(o)}(yield dl(t),n)}))}}function IZ(t,e,n,i){let r=function(s,a){let c;return c=typeof s=="string"?t2().encode(s):s,function(u,d){return new IC(u,d)}(function(u,d){if(u instanceof Uint8Array)return hV(u,d);if(u instanceof ArrayBuffer)return hV(new Uint8Array(u),d);if(u instanceof ReadableStream)return u.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(n,Ah(e));t.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){_Z(yield gT(t),r,i)}))}function CZ(t,e){return t.asyncQueue.enqueue(()=>v(this,null,function*(){return function(i,r){let o=F(i);return o.persistence.runTransaction("Get named query","readonly",s=>o.Kr.getNamedQuery(s,r))}(yield pT(t),e)}))}function $2(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var fV=new Map;function _T(t,e,n){if(!n)throw new x(b.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function bT(t,e,n,i){if(e===!0&&i===!0)throw new x(b.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function mV(t){if(!P.isDocumentKey(t))throw new x(b.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function pV(t){if(P.isDocumentKey(t))throw new x(b.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function H_(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":j()}function Ee(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new x(b.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=H_(t);throw new x(b.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function z2(t,e){if(e<=0)throw new x(b.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}var R_=class{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new x(b.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new x(b.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}bT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$2((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new x(b.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new x(b.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new x(b.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},ia=class{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new R_({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new x(b.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new x(b.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new R_(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new Kx;switch(i.type){case"firstParty":return new Xx(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new x(b.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let i=fV.get(n);i&&(I("ComponentProvider","Removing Datastore"),fV.delete(n),i.terminate())}(this),Promise.resolve()}};function q_(t,e,n,i={}){var r;let o=(t=Ee(t,ia))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&si("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),i.mockUserToken){let a,c;if(typeof i.mockUserToken=="string")a=i.mockUserToken,c=Et.MOCK_USER;else{a=rf(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);let l=i.mockUserToken.sub||i.mockUserToken.user_id;if(!l)throw new x(b.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Et(l)}t._authCredentials=new Qx(new qg(a,c))}}var qt=class t{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Ge=class t{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new sr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},sr=class t extends qt{constructor(e,n,i){super(e,n,ml(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ge(this.firestore,null,new P(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function W_(t,e,...n){if(t=ze(t),_T("collection","path",e),t instanceof ia){let i=Se.fromString(e,...n);return pV(i),new sr(t,null,i)}{if(!(t instanceof Ge||t instanceof sr))throw new x(b.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=t._path.child(Se.fromString(e,...n));return pV(i),new sr(t.firestore,null,i)}}function yT(t,e){if(t=Ee(t,ia),_T("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new x(b.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new qt(t,null,function(i){return new Di(Se.emptyPath(),i)}(e))}function yl(t,e,...n){if(t=ze(t),arguments.length===1&&(e=Wg.newId()),_T("doc","path",e),t instanceof ia){let i=Se.fromString(e,...n);return mV(i),new Ge(t,null,new P(i))}{if(!(t instanceof Ge||t instanceof sr))throw new x(b.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=t._path.child(Se.fromString(e,...n));return mV(i),new Ge(t.firestore,t instanceof sr?t.converter:null,new P(i))}}function G_(t,e){return t=ze(t),e=ze(e),(t instanceof Ge||t instanceof sr)&&(e instanceof Ge||e instanceof sr)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function K_(t,e){return t=ze(t),e=ze(e),t instanceof qt&&e instanceof qt&&t.firestore===e.firestore&&Dh(t._query,e._query)&&t.converter===e.converter}var AC=class{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new bh(this,"async_queue_retry"),this.iu=()=>{let n=zg();n&&I("AsyncQueue","Visibility state changed to "+n.visibilityState),this.zo.Qo()};let e=zg();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;let n=zg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise(()=>{});let n=new xt;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ya.push(e),this._u()))}_u(){return v(this,null,function*(){if(this.Ya.length!==0){try{yield this.Ya[0](),this.Ya.shift(),this.zo.reset()}catch(e){if(!qo(e))throw e;I("AsyncQueue","Operation failed with retryable error: "+e)}this.Ya.length>0&&this.zo.ko(()=>this._u())}})}ou(e){let n=this.Ja.then(()=>(this.tu=!0,e().catch(i=>{this.eu=i,this.tu=!1;let r=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(i);throw mt("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.tu=!1,i))));return this.Ja=n,n}enqueueAfterDelay(e,n,i){this.su(),this.ru.indexOf(e)>-1&&(n=0);let r=mC.createAndSchedule(this,e,n,i,o=>this.au(o));return this.Xa.push(r),r}su(){this.eu&&j()}verifyOperationInProgress(){}uu(){return v(this,null,function*(){let e;do e=this.Ja,yield e;while(e!==this.Ja)})}cu(e){for(let n of this.Xa)if(n.timerId===e)return!0;return!1}lu(e){return this.uu().then(()=>{this.Xa.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(let n of this.Xa)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.uu()})}hu(e){this.ru.push(e)}au(e){let n=this.Xa.indexOf(e);this.Xa.splice(n,1)}};function kC(t){return function(n,i){if(typeof n!="object"||n===null)return!1;let r=n;for(let o of i)if(o in r&&typeof r[o]=="function")return!0;return!1}(t,["next","error","complete"])}var MC=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new xt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,i){this._progressObserver={next:e,error:n,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var H2=-1,nt=class extends ia{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=function(){return new AC}(),this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||W2(this),this._firestoreClient.terminate()}};function q2(t,e){let n=typeof t=="object"?t:Jo(),i=typeof t=="string"?t:e||"(default)",r=Ul(n,"firestore").getImmediate({identifier:i});if(!r._initialized){let o=nf("firestore");o&&q_(r,...o)}return r}function Tt(t){return t._firestoreClient||W2(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function W2(t){var e,n,i;let r=t._freezeSettings(),o=function(a,c,l,u){return new sI(a,c,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,$2(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new DC(t._authCredentials,t._appCheckCredentials,t._queue,o),!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}function vT(t,e){K2(t=Ee(t,nt));let n=Tt(t);if(n._uninitializedComponentsProvider)throw new x(b.FAILED_PRECONDITION,"SDK cache is already specified.");si("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let i=t._freezeSettings(),r=new Eh;return G2(n,r,new M_(r,i.cacheSizeBytes,e?.forceOwnership))}function wT(t){K2(t=Ee(t,nt));let e=Tt(t);if(e._uninitializedComponentsProvider)throw new x(b.FAILED_PRECONDITION,"SDK cache is already specified.");si("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let n=t._freezeSettings(),i=new Eh;return G2(e,i,new xC(i,n.cacheSizeBytes))}function G2(t,e,n){let i=new xt;return t.asyncQueue.enqueue(()=>v(this,null,function*(){try{yield Hg(t,n),yield SC(t,e),i.resolve()}catch(r){let o=r;if(!L2(o))throw o;si("Error enabling indexeddb cache. Falling back to memory cache: "+o),i.reject(o)}})).then(()=>i.promise)}function ET(t){if(t._initialized&&!t._terminated)throw new x(b.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new xt;return t._queue.enqueueAndForgetEvenWhileRestricted(()=>v(this,null,function*(){try{yield function(i){return v(this,null,function*(){if(!No.D())return Promise.resolve();let r=i+"main";yield No.delete(r)})}(tT(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function xT(t){return function(n){let i=new xt;return n.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return sZ(yield gT(n),i)})),i.promise}(Tt(t=Ee(t,nt)))}function IT(t){return yZ(Tt(t=Ee(t,nt)))}function CT(t){return vZ(Tt(t=Ee(t,nt)))}function TT(t,e){let n=Tt(t=Ee(t,nt)),i=new MC;return IZ(n,t._databaseId,e,i),i}function DT(t,e){return CZ(Tt(t=Ee(t,nt)),e).then(n=>n?new qt(t,null,n.query):null)}function K2(t){if(t._initialized||t._terminated)throw new x(b.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var ur=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Nt.fromBase64String(e))}catch(n){throw new x(b.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Ai=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new x(b.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Lr=class{constructor(e){this._methodName=e}};var ra=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new x(b.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new x(b.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return oe(this._lat,e._lat)||oe(this._long,e._long)}};var TZ=/^__.*__$/,RC=class{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Si(e,this.data,this.fieldMask,n,this.fieldTransforms):new Uo(e,this.data,n,this.fieldTransforms)}},P_=class{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Si(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function Q2(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw j()}}var N_=class t{constructor(e,n,i,r,o,s){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.Pu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var n;let i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Tu({path:i,du:!1});return r.Au(e),r}Ru(e){var n;let i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Tu({path:i,du:!1});return r.Pu(),r}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return F_(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(e.length===0)throw this.mu("Document fields must not be empty");if(Q2(this.Iu)&&TZ.test(e))throw this.mu('Document fields cannot begin and end with "__"')}},PC=class{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Ah(e)}pu(e,n,i,r=!1){return new N_({Iu:e,methodName:n,gu:i,path:pt.emptyPath(),du:!1,fu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function ca(t){let e=t._freezeSettings(),n=Ah(t._databaseId);return new PC(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Q_(t,e,n,i,r,o={}){let s=t.pu(o.merge||o.mergeFields?2:0,e,n,r);kT("Data must be an object, but it was:",s,i);let a=X2(i,s),c,l;if(o.merge)c=new Wn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let u=[];for(let d of o.mergeFields){let h=VC(e,d,n);if(!s.contains(h))throw new x(b.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);ej(u,h)||u.push(h)}c=new Wn(u),l=s.fieldTransforms.filter(d=>c.covers(d.field))}else c=null,l=s.fieldTransforms;return new RC(new tn(a),c,l)}var xh=class t extends Lr{_toFieldTransform(e){if(e.Iu!==2)throw e.Iu===1?e.mu(`${this._methodName}() can only appear at the top level of your update data`):e.mu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function Y2(t,e,n){return new N_({Iu:3,gu:e.settings.gu,methodName:t._methodName,du:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var NC=class t extends Lr{_toFieldTransform(e){return new ea(e.path,new jo)}isEqual(e){return e instanceof t}},FC=class extends Lr{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){let n=Y2(this,e,!0),i=this.yu.map(o=>la(o,n)),r=new Fr(i);return new ea(e.path,r)}isEqual(e){return this===e}},OC=class extends Lr{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){let n=Y2(this,e,!0),i=this.yu.map(o=>la(o,n)),r=new Or(i);return new ea(e.path,r)}isEqual(e){return this===e}},LC=class extends Lr{constructor(e,n){super(e),this.wu=n}_toFieldTransform(e){let n=new Bo(e.serializer,WV(e.serializer,this.wu));return new ea(e.path,n)}isEqual(e){return this===e}};function ST(t,e,n,i){let r=t.pu(1,e,n);kT("Data must be an object, but it was:",r,i);let o=[],s=tn.empty();aa(i,(c,l)=>{let u=MT(e,c,n);l=ze(l);let d=r.Ru(u);if(l instanceof xh)o.push(u);else{let h=la(l,d);h!=null&&(o.push(u),s.set(u,h))}});let a=new Wn(o);return new P_(s,a,r.fieldTransforms)}function AT(t,e,n,i,r,o){let s=t.pu(1,e,n),a=[VC(e,i,n)],c=[r];if(o.length%2!=0)throw new x(b.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<o.length;h+=2)a.push(VC(e,o[h])),c.push(o[h+1]);let l=[],u=tn.empty();for(let h=a.length-1;h>=0;--h)if(!ej(l,a[h])){let f=a[h],m=c[h];m=ze(m);let p=s.Ru(f);if(m instanceof xh)l.push(f);else{let g=la(m,p);g!=null&&(l.push(f),u.set(f,g))}}let d=new Wn(l);return new P_(u,d,s.fieldTransforms)}function Z2(t,e,n,i=!1){return la(n,t.pu(i?4:3,e))}function la(t,e){if(J2(t=ze(t)))return kT("Unsupported field value:",e,t),X2(t,e);if(t instanceof Lr)return function(i,r){if(!Q2(r.Iu))throw r.mu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.mu(`${i._methodName}() is not currently supported inside arrays`);let o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.du&&e.Iu!==4)throw e.mu("Nested arrays are not supported");return function(i,r){let o=[],s=0;for(let a of i){let c=la(a,r.Vu(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(t,e)}return function(i,r){if((i=ze(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return WV(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let o=ot.fromDate(i);return{timestampValue:il(r.serializer,o)}}if(i instanceof ot){let o=new ot(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:il(r.serializer,o)}}if(i instanceof ra)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ur)return{bytesValue:n2(r.serializer,i._byteString)};if(i instanceof Ge){let o=r.databaseId,s=i.firestore._databaseId;if(!s.isEqual(o))throw r.mu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:XC(i.firestore._databaseId||r.databaseId,i._key.path)}}throw r.mu(`Unsupported field value: ${H_(i)}`)}(t,e)}function X2(t,e){let n={};return SV(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):aa(t,(i,r)=>{let o=la(r,e.Eu(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function J2(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ot||t instanceof ra||t instanceof ur||t instanceof Ge||t instanceof Lr)}function kT(t,e,n){if(!J2(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){let i=H_(n);throw i==="an object"?e.mu(t+" a custom object"):e.mu(t+" "+i)}}function VC(t,e,n){if((e=ze(e))instanceof Ai)return e._internalPath;if(typeof e=="string")return MT(t,e);throw F_("Field path arguments must be of type string or ",t,!1,void 0,n)}var DZ=new RegExp("[~\\*/\\[\\]]");function MT(t,e,n){if(e.search(DZ)>=0)throw F_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ai(...e.split("."))._internalPath}catch{throw F_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function F_(t,e,n,i,r){let o=i&&!i.isEmpty(),s=r!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${i}`),s&&(c+=` in document ${r}`),c+=")"),new x(b.INVALID_ARGUMENT,a+t+c)}function ej(t,e){return t.some(n=>n.isEqual(e))}var oa=class{constructor(e,n,i,r,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ge(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new jC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(Y_("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},jC=class extends oa{data(){return super.data()}};function Y_(t,e){return typeof e=="string"?MT(t,e):e instanceof Ai?e._internalPath:e._delegate._internalPath}function tj(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new x(b.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Ih=class{},sa=class extends Ih{};function dr(t,e,...n){let i=[];e instanceof Ih&&i.push(e),i=i.concat(n),function(o){let s=o.filter(c=>c instanceof BC).length,a=o.filter(c=>c instanceof O_).length;if(s>1||s>0&&a>0)throw new x(b.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(let r of i)t=r._apply(t);return t}var O_=class t extends sa{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new t(e,n,i)}_apply(e){let n=this._parse(e);return ij(e._query,n),new qt(e.firestore,e.converter,yI(e._query,n))}_parse(e){let n=ca(e.firestore);return function(o,s,a,c,l,u,d){let h;if(l.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new x(b.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){_V(d,u);let f=[];for(let m of d)f.push(gV(c,o,m));h={arrayValue:{values:f}}}else h=gV(c,o,d)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||_V(d,u),h=Z2(a,s,d,u==="in"||u==="not-in");return pe.create(l,u,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function RT(t,e,n){let i=e,r=Y_("where",t);return O_._create(r,i,n)}var BC=class t extends Ih{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:Fe.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(r,o){let s=r,a=o.getFlattenedFilters();for(let c of a)ij(s,c),s=yI(s,c)}(e._query,n),new qt(e.firestore,e.converter,yI(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var UC=class t extends sa{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(r,o,s){if(r.startAt!==null)throw new x(b.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new x(b.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Xs(o,s)}(e._query,this._field,this._direction);return new qt(e.firestore,e.converter,function(r,o){let s=r.explicitOrderBy.concat([o]);return new Di(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}};function PT(t,e="asc"){let n=e,i=Y_("orderBy",t);return UC._create(i,n)}var L_=class t extends sa{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new t(e,n,i)}_apply(e){return new qt(e.firestore,e.converter,n_(e._query,this._limit,this._limitType))}};function NT(t){return z2("limit",t),L_._create("limit",t,"F")}function FT(t){return z2("limitToLast",t),L_._create("limitToLast",t,"L")}var V_=class t extends sa{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new t(e,n,i)}_apply(e){let n=nj(e,this.type,this._docOrFields,this._inclusive);return new qt(e.firestore,e.converter,function(r,o){return new Di(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)}(e._query,n))}};function OT(...t){return V_._create("startAt",t,!0)}function LT(...t){return V_._create("startAfter",t,!1)}var j_=class t extends sa{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new t(e,n,i)}_apply(e){let n=nj(e,this.type,this._docOrFields,this._inclusive);return new qt(e.firestore,e.converter,function(r,o){return new Di(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)}(e._query,n))}};function VT(...t){return j_._create("endBefore",t,!1)}function jT(...t){return j_._create("endAt",t,!0)}function nj(t,e,n,i){if(n[0]=ze(n[0]),n[0]instanceof oa)return function(o,s,a,c,l){if(!c)throw new x(b.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let u=[];for(let d of Qc(o))if(d.field.isKeyField())u.push(Zs(s,c.key));else{let h=c.data.field(d.field);if(U_(h))throw new x(b.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){let f=d.field.canonicalString();throw new x(b.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${f}' (used as the orderBy) does not exist.`)}u.push(h)}return new cr(u,l)}(t._query,t.firestore._databaseId,e,n[0]._document,i);{let r=ca(t.firestore);return function(s,a,c,l,u,d){let h=s.explicitOrderBy;if(u.length>h.length)throw new x(b.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let f=[];for(let m=0;m<u.length;m++){let p=u[m];if(h[m].field.isKeyField()){if(typeof p!="string")throw new x(b.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof p}`);if(!YC(s)&&p.indexOf("/")!==-1)throw new x(b.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${p}' contains a slash.`);let g=s.path.child(Se.fromString(p));if(!P.isDocumentKey(g))throw new x(b.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${g}' is not because it contains an odd number of segments.`);let w=new P(g);f.push(Zs(a,w))}else{let g=Z2(c,l,p);f.push(g)}}return new cr(f,d)}(t._query,t.firestore._databaseId,r,e,n,i)}}function gV(t,e,n){if(typeof(n=ze(n))=="string"){if(n==="")throw new x(b.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!YC(e)&&n.indexOf("/")!==-1)throw new x(b.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let i=e.path.child(Se.fromString(n));if(!P.isDocumentKey(i))throw new x(b.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Zs(t,new P(i))}if(n instanceof Ge)return Zs(t,n._key);throw new x(b.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${H_(n)}.`)}function _V(t,e){if(!Array.isArray(t)||t.length===0)throw new x(b.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ij(t,e){let n=function(r,o){for(let s of r)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new x(b.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new x(b.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var hl=class{convertValue(e,n="none"){switch(Ys(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ut(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Oo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw j()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let i={};return aa(e,(r,o)=>{i[r]=this.convertValue(o,n)}),i}convertGeoPoint(e){return new ra(ut(e.latitude),ut(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":let i=KC(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(rh(e));default:return null}}convertTimestamp(e){let n=Fo(e);return new ot(n.seconds,n.nanos)}convertDocumentKey(e,n){let i=Se.fromString(e);$(h2(i));let r=new Lo(i.get(1),i.get(3)),o=new P(i.popFirst(5));return r.isEqual(n)||mt(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function Z_(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}var $C=class extends hl{constructor(e){super(),this.firestore=e}convertBytes(e){return new ur(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ge(this.firestore,null,n)}};var Nr=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},ci=class extends oa{constructor(e,n,i,r,o,s){super(e,n,i,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Ro(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let i=this._document.data.field(Y_("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}},Ro=class extends ci{data(e={}){return super.data(e)}},ki=class{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Nr(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Ro(this._firestore,this._userDataWriter,i.key,i,new Nr(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new x(b.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(a=>{let c=new Ro(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Nr(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new Ro(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Nr(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter),l=-1,u=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),u=s.indexOf(a.doc.key)),{type:SZ(a.type),doc:c,oldIndex:l,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function SZ(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return j()}}function X_(t,e){return t instanceof ci&&e instanceof ci?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof ki&&e instanceof ki&&t._firestore===e._firestore&&K_(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function BT(t){t=Ee(t,Ge);let e=Ee(t.firestore,nt);return B2(Tt(e),t._key).then(n=>QT(e,t,n))}var Vr=class extends hl{constructor(e){super(),this.firestore=e}convertBytes(e){return new ur(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ge(this.firestore,null,n)}};function UT(t){t=Ee(t,Ge);let e=Ee(t.firestore,nt),n=Tt(e),i=new Vr(e);return wZ(n,t._key).then(r=>new ci(e,i,t._key,r,new Nr(r!==null&&r.hasLocalMutations,!0),t.converter))}function $T(t){t=Ee(t,Ge);let e=Ee(t.firestore,nt);return B2(Tt(e),t._key,{source:"server"}).then(n=>QT(e,t,n))}function zT(t){t=Ee(t,qt);let e=Ee(t.firestore,nt),n=Tt(e),i=new Vr(e);return tj(t._query),U2(n,t._query).then(r=>new ki(e,i,t,r))}function HT(t){t=Ee(t,qt);let e=Ee(t.firestore,nt),n=Tt(e),i=new Vr(e);return EZ(n,t._query).then(r=>new ki(e,i,t,r))}function qT(t){t=Ee(t,qt);let e=Ee(t.firestore,nt),n=Tt(e),i=new Vr(e);return U2(n,t._query,{source:"server"}).then(r=>new ki(e,i,t,r))}function J_(t,e,n){t=Ee(t,Ge);let i=Ee(t.firestore,nt),r=Z_(t.converter,e,n);return vl(i,[Q_(ca(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,dt.none())])}function eb(t,e,n,...i){t=Ee(t,Ge);let r=Ee(t.firestore,nt),o=ca(r),s;return s=typeof(e=ze(e))=="string"||e instanceof Ai?AT(o,"updateDoc",t._key,e,n,i):ST(o,"updateDoc",t._key,e),vl(r,[s.toMutation(t._key,dt.exists(!0))])}function WT(t){return vl(Ee(t.firestore,nt),[new $o(t._key,dt.none())])}function GT(t,e){let n=Ee(t.firestore,nt),i=yl(t),r=Z_(t.converter,e);return vl(n,[Q_(ca(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,dt.exists(!1))]).then(()=>i)}function tb(t,...e){var n,i,r;t=ze(t);let o={includeMetadataChanges:!1},s=0;typeof e[s]!="object"||kC(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges};if(kC(e[s])){let d=e[s];e[s]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[s+1]=(i=d.error)===null||i===void 0?void 0:i.bind(d),e[s+2]=(r=d.complete)===null||r===void 0?void 0:r.bind(d)}let c,l,u;if(t instanceof Ge)l=Ee(t.firestore,nt),u=ml(t._key.path),c={next:d=>{e[s]&&e[s](QT(l,t,d))},error:e[s+1],complete:e[s+2]};else{let d=Ee(t,qt);l=Ee(d.firestore,nt),u=d._query;let h=new Vr(l);c={next:f=>{e[s]&&e[s](new ki(l,h,d,f))},error:e[s+1],complete:e[s+2]},tj(t._query)}return function(h,f,m,p){let g=new ul(p),w=new vh(f,g,m);return h.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return oT(yield dl(h),w)})),()=>{g.Na(),h.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return sT(yield dl(h),w)}))}}(Tt(l),u,a,c)}function KT(t,e){return xZ(Tt(t=Ee(t,nt)),kC(e)?e:{next:e})}function vl(t,e){return function(i,r){let o=new xt;return i.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return nZ(yield gT(i),r,o)})),o.promise}(Tt(t),e)}function QT(t,e,n){let i=n.docs.get(e._key),r=new Vr(t);return new ci(t,r,e._key,i,new Nr(n.hasPendingWrites,n.fromCache),e.converter)}var AZ={maxAttempts:5};var B_=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=ca(e)}set(e,n,i){this._verifyNotCommitted();let r=ko(e,this._firestore),o=Z_(r.converter,n,i),s=Q_(this._dataReader,"WriteBatch.set",r._key,o,r.converter!==null,i);return this._mutations.push(s.toMutation(r._key,dt.none())),this}update(e,n,i,...r){this._verifyNotCommitted();let o=ko(e,this._firestore),s;return s=typeof(n=ze(n))=="string"||n instanceof Ai?AT(this._dataReader,"WriteBatch.update",o._key,n,i,r):ST(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,dt.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=ko(e,this._firestore);return this._mutations=this._mutations.concat(new $o(n._key,dt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new x(b.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function ko(t,e){if((t=ze(t)).firestore!==e)throw new x(b.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var zC=class extends class{constructor(n,i){this._firestore=n,this._transaction=i,this._dataReader=ca(n)}get(n){let i=ko(n,this._firestore),r=new $C(this._firestore);return this._transaction.lookup([i._key]).then(o=>{if(!o||o.length!==1)return j();let s=o[0];if(s.isFoundDocument())return new oa(this._firestore,r,s.key,s,i.converter);if(s.isNoDocument())return new oa(this._firestore,r,i._key,null,i.converter);throw j()})}set(n,i,r){let o=ko(n,this._firestore),s=Z_(o.converter,i,r),a=Q_(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,r);return this._transaction.set(o._key,a),this}update(n,i,r,...o){let s=ko(n,this._firestore),a;return a=typeof(i=ze(i))=="string"||i instanceof Ai?AT(this._dataReader,"Transaction.update",s._key,i,r,o):ST(this._dataReader,"Transaction.update",s._key,i),this._transaction.update(s._key,a),this}delete(n){let i=ko(n,this._firestore);return this._transaction.delete(i._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){let n=ko(e,this._firestore),i=new Vr(this._firestore);return super.get(e).then(r=>new ci(this._firestore,i,n._key,r._document,new Nr(!1,!1),n.converter))}};function YT(t,e,n){t=Ee(t,nt);let i=Object.assign(Object.assign({},AZ),n);return function(o){if(o.maxAttempts<1)throw new x(b.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(o,s,a){let c=new xt;return o.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){let l=yield bZ(o);new TC(o.asyncQueue,l,a,s,c).run()})),c.promise}(Tt(t),r=>e(new zC(t,r)),i)}function ZT(){return new xh("deleteField")}function XT(){return new NC("serverTimestamp")}function JT(...t){return new FC("arrayUnion",t)}function eD(...t){return new OC("arrayRemove",t)}function tD(t){return new LC("increment",t)}(function(e,n=!0){(function(r){fl=r})(cf),Xo(new fr("firestore",(i,{instanceIdentifier:r,options:o})=>{let s=i.getProvider("app").getImmediate(),a=new nt(new Yx(i.getProvider("auth-internal")),new eI(i.getProvider("app-check-internal")),function(l,u){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new x(b.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Lo(l.options.projectId,u)}(s,r),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),ht(yL,"4.4.0",e),ht(yL,"4.4.0","esm2017")})();var kZ="@firebase/firestore-compat",MZ="0.3.23";function aD(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new x("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function rj(){if(typeof Uint8Array>"u")throw new x("unimplemented","Uint8Arrays are not available in this environment.")}function oj(){if(!AV())throw new x("unimplemented","Blobs are unavailable in Firestore in this environment.")}var nb=class t{constructor(e){this._delegate=e}static fromBase64String(e){return oj(),new t(ur.fromBase64String(e))}static fromUint8Array(e){return rj(),new t(ur.fromUint8Array(e))}toBase64(){return oj(),this._delegate.toBase64()}toUint8Array(){return rj(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function nD(t){return RZ(t,["next","error","complete"])}function RZ(t,e){if(typeof t!="object"||t===null)return!1;let n=t;for(let i of e)if(i in n&&typeof n[i]=="function")return!0;return!1}var iD=class{enableIndexedDbPersistence(e,n){return vT(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return wT(e._delegate)}clearIndexedDbPersistence(e){return ET(e._delegate)}},ib=class{constructor(e,n,i){this._delegate=n,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof Lo||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&si("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,i={}){q_(this._delegate,e,n,i)}enableNetwork(){return IT(this._delegate)}disableNetwork(){return CT(this._delegate)}enablePersistence(e){let n=!1,i=!1;return e&&(n=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,bT("synchronizeTabs",n,"experimentalForceOwningTab",i)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return xT(this._delegate)}onSnapshotsInSync(e){return KT(this._delegate,e)}get app(){if(!this._appCompat)throw new x("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new xl(this,W_(this._delegate,e))}catch(n){throw yn(n,"collection()","Firestore.collection()")}}doc(e){try{return new hr(this,yl(this._delegate,e))}catch(n){throw yn(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new fa(this,yT(this._delegate,e))}catch(n){throw yn(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return YT(this._delegate,n=>e(new rb(this,n)))}batch(){return Tt(this._delegate),new ob(new B_(this._delegate,e=>vl(this._delegate,e)))}loadBundle(e){return TT(this._delegate,e)}namedQuery(e){return DT(this._delegate,e).then(n=>n?new fa(this,n):null)}},wl=class extends hl{constructor(e){super(),this.firestore=e}convertBytes(e){return new nb(new ur(e))}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return hr.forKey(n,this.firestore,null)}};function PZ(t){HC(t)}var rb=class{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new wl(e)}get(e){let n=ua(e);return this._delegate.get(n).then(i=>new da(this._firestore,new ci(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,n.converter)))}set(e,n,i){let r=ua(e);return i?(aD("Transaction.set",i),this._delegate.set(r,n,i)):this._delegate.set(r,n),this}update(e,n,i,...r){let o=ua(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,i,...r),this}delete(e){let n=ua(e);return this._delegate.delete(n),this}},ob=class{constructor(e){this._delegate=e}set(e,n,i){let r=ua(e);return i?(aD("WriteBatch.set",i),this._delegate.set(r,n,i)):this._delegate.set(r,n),this}update(e,n,i,...r){let o=ua(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,i,...r),this}delete(e){let n=ua(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}},El=class t{constructor(e,n,i){this._firestore=e,this._userDataWriter=n,this._delegate=i}fromFirestore(e,n){let i=new Ro(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ha(this._firestore,i),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){let i=t.INSTANCES,r=i.get(e);r||(r=new WeakMap,i.set(e,r));let o=r.get(n);return o||(o=new t(e,new wl(e),n),r.set(n,o)),o}};El.INSTANCES=new WeakMap;var hr=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new wl(e)}static forPath(e,n,i){if(e.length%2!==0)throw new x("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new t(n,new Ge(n._delegate,i,new P(e)))}static forKey(e,n,i){return new t(n,new Ge(n._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new xl(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new xl(this.firestore,W_(this._delegate,e))}catch(n){throw yn(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=ze(e),e instanceof Ge?G_(this._delegate,e):!1}set(e,n){n=aD("DocumentReference.set",n);try{return n?J_(this._delegate,e,n):J_(this._delegate,e)}catch(i){throw yn(i,"setDoc()","DocumentReference.set()")}}update(e,n,...i){try{return arguments.length===1?eb(this._delegate,e):eb(this._delegate,e,n,...i)}catch(r){throw yn(r,"updateDoc()","DocumentReference.update()")}}delete(){return WT(this._delegate)}onSnapshot(...e){let n=sj(e),i=aj(e,r=>new da(this.firestore,new ci(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return tb(this._delegate,n,i)}get(e){let n;return e?.source==="cache"?n=UT(this._delegate):e?.source==="server"?n=$T(this._delegate):n=BT(this._delegate),n.then(i=>new da(this.firestore,new ci(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(El.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function yn(t,e,n){return t.message=t.message.replace(e,n),t}function sj(t){for(let e of t)if(typeof e=="object"&&!nD(e))return e;return{}}function aj(t,e){var n,i;let r;return nD(t[0])?r=t[0]:nD(t[1])?r=t[1]:typeof t[0]=="function"?r={next:t[0],error:t[1],complete:t[2]}:r={next:t[1],error:t[2],complete:t[3]},{next:o=>{r.next&&r.next(e(o))},error:(n=r.error)===null||n===void 0?void 0:n.bind(r),complete:(i=r.complete)===null||i===void 0?void 0:i.bind(r)}}var da=class{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new hr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return X_(this._delegate,e._delegate)}},ha=class extends da{data(e){let n=this._delegate.data(e);return this._delegate._converter||bV(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}},fa=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new wl(e)}where(e,n,i){try{return new t(this.firestore,dr(this._delegate,RT(e,n,i)))}catch(r){throw yn(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new t(this.firestore,dr(this._delegate,PT(e,n)))}catch(i){throw yn(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new t(this.firestore,dr(this._delegate,NT(e)))}catch(n){throw yn(n,"limit()","Query.limit()")}}limitToLast(e){try{return new t(this.firestore,dr(this._delegate,FT(e)))}catch(n){throw yn(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new t(this.firestore,dr(this._delegate,OT(...e)))}catch(n){throw yn(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new t(this.firestore,dr(this._delegate,LT(...e)))}catch(n){throw yn(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new t(this.firestore,dr(this._delegate,VT(...e)))}catch(n){throw yn(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new t(this.firestore,dr(this._delegate,jT(...e)))}catch(n){throw yn(n,"endAt()","Query.endAt()")}}isEqual(e){return K_(this._delegate,e._delegate)}get(e){let n;return e?.source==="cache"?n=HT(this._delegate):e?.source==="server"?n=qT(this._delegate):n=zT(this._delegate),n.then(i=>new Mh(this.firestore,new ki(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){let n=sj(e),i=aj(e,r=>new Mh(this.firestore,new ki(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return tb(this._delegate,n,i)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(El.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},rD=class{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new ha(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Mh=class{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new fa(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new ha(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new rD(this._firestore,n))}forEach(e,n){this._delegate.forEach(i=>{e.call(n,new ha(this._firestore,i))})}isEqual(e){return X_(this._delegate,e._delegate)}},xl=class t extends fa{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new hr(this.firestore,e):null}doc(e){try{return e===void 0?new hr(this.firestore,yl(this._delegate)):new hr(this.firestore,yl(this._delegate,e))}catch(n){throw yn(n,"doc()","CollectionReference.doc()")}}add(e){return GT(this._delegate,e).then(n=>new hr(this.firestore,n))}isEqual(e){return G_(this._delegate,e._delegate)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(El.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function ua(t){return Ee(t,Ge)}var oD=class t{constructor(...e){this._delegate=new Ai(...e)}static documentId(){return new t(pt.keyField().canonicalString())}isEqual(e){return e=ze(e),e instanceof Ai?this._delegate._internalPath.isEqual(e._internalPath):!1}};var sD=class t{constructor(e){this._delegate=e}static serverTimestamp(){let e=XT();return e._methodName="FieldValue.serverTimestamp",new t(e)}static delete(){let e=ZT();return e._methodName="FieldValue.delete",new t(e)}static arrayUnion(...e){let n=JT(...e);return n._methodName="FieldValue.arrayUnion",new t(n)}static arrayRemove(...e){let n=eD(...e);return n._methodName="FieldValue.arrayRemove",new t(n)}static increment(e){let n=tD(e);return n._methodName="FieldValue.increment",new t(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var NZ={Firestore:ib,GeoPoint:ra,Timestamp:ot,Blob:nb,Transaction:rb,WriteBatch:ob,DocumentReference:hr,DocumentSnapshot:da,Query:fa,QueryDocumentSnapshot:ha,QuerySnapshot:Mh,CollectionReference:xl,FieldPath:oD,FieldValue:sD,setLogLevel:PZ,CACHE_SIZE_UNLIMITED:H2};function FZ(t,e){t.INTERNAL.registerComponent(new fr("firestore-compat",n=>{let i=n.getProvider("app-compat").getImmediate(),r=n.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps(Object.assign({},NZ)))}function OZ(t){FZ(t,(e,n)=>new ib(e,n,new iD)),t.registerVersion(kZ,MZ)}OZ(Nn);function LZ(t,e=Li){return new Y(n=>{let i;return e!=null?e.schedule(()=>{i=t.onSnapshot({includeMetadataChanges:!0},n)}):i=t.onSnapshot({includeMetadataChanges:!0},n),()=>{i?.()}})}function cj(t,e){return LZ(t,e)}function VZ(t,e){return cj(t,e).pipe(wn(void 0),La(),B(n=>{let[i,r]=n;return r.exists?i?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}}))}function uD(t,e){return cj(t,e).pipe(B(n=>({payload:n,type:"query"})))}var sb=class{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){let i=this.ref.collection(e),{ref:r,query:o}=dj(i,n);return new cb(r,o,this.afs)}snapshotChanges(){return VZ(this.ref,this.afs.schedulers.outsideAngular).pipe(pn)}valueChanges(e={}){return this.snapshotChanges().pipe(B(({payload:n})=>e.idField?Ae(M({},n.data()),{[e.idField]:n.id}):n.data()))}get(e){return ve(this.ref.get(e)).pipe(pn)}};function ab(t,e){return uD(t,e).pipe(wn(void 0),La(),B(n=>{let[i,r]=n,o=r.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return i&&JSON.stringify(i.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((a,c)=>{let l=o.find(d=>d.doc.ref.isEqual(a.ref)),u=i?.payload.docs.find(d=>d.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&u&&JSON.stringify(u.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),s}))}function lj(t,e,n){return ab(t,n).pipe(ss((i,r)=>jZ(i,r.map(o=>o.payload),e),[]),Qr(),B(i=>i.map(r=>({type:r.type,payload:r}))))}function jZ(t,e,n){return e.forEach(i=>{n.indexOf(i.type)>-1&&(t=BZ(t,i))}),t}function cD(t,e,n,...i){let r=t.slice();return r.splice(e,n,...i),r}function BZ(t,e){switch(e.type){case"added":if(!(t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)))return cD(t,e.newIndex,0,e);break;case"modified":if(t[e.oldIndex]==null||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}else return cD(t,e.newIndex,1,e);break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return cD(t,e.oldIndex,1);break}return t}function uj(t){return(!t||t.length===0)&&(t=["added","removed","modified"]),t}var cb=class{ref;query;afs;constructor(e,n,i){this.ref=e,this.query=n,this.afs=i}stateChanges(e){let n=ab(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(B(i=>i.filter(r=>e.indexOf(r.type)>-1)))),n.pipe(wn(void 0),La(),He(([i,r])=>r.length>0||!i),B(([,i])=>i),pn)}auditTrail(e){return this.stateChanges(e).pipe(ss((n,i)=>[...n,...i],[]))}snapshotChanges(e){let n=uj(e);return lj(this.query,n,this.afs.schedulers.outsideAngular).pipe(pn)}valueChanges(e={}){return uD(this.query,this.afs.schedulers.outsideAngular).pipe(B(n=>n.payload.docs.map(i=>e.idField?Ae(M({},i.data()),{[e.idField]:i.id}):i.data())),pn)}get(e){return ve(this.query.get(e)).pipe(pn)}add(e){return this.ref.add(e)}doc(e){return new sb(this.ref.doc(e),this.afs)}},lD=class{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return!e||e.length===0?ab(this.query,this.afs.schedulers.outsideAngular).pipe(pn):ab(this.query,this.afs.schedulers.outsideAngular).pipe(B(n=>n.filter(i=>e.indexOf(i.type)>-1)),He(n=>n.length>0),pn)}auditTrail(e){return this.stateChanges(e).pipe(ss((n,i)=>[...n,...i],[]))}snapshotChanges(e){let n=uj(e);return lj(this.query,n,this.afs.schedulers.outsideAngular).pipe(pn)}valueChanges(e={}){return uD(this.query,this.afs.schedulers.outsideAngular).pipe(B(i=>i.payload.docs.map(r=>e.idField?M({[e.idField]:r.id},r.data()):r.data())),pn)}get(e){return ve(this.query.get(e)).pipe(pn)}},UZ=new C("angularfire2.enableFirestorePersistence"),$Z=new C("angularfire2.firestore.persistenceSettings"),zZ=new C("angularfire2.firestore.settings"),HZ=new C("angularfire2.firestore.use-emulator");function dj(t,e=n=>n){return{query:e(t),ref:t}}var hj=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,i,r,o,s,a,c,l,u,d,h,f,m,p,g,w,k){this.schedulers=c;let D=vd(n,a,i),O=u;d&&JE(D,a,h,m,p,g,f,w),[this.firestore,this.persistenceEnabled$]=og(`${D.name}.firestore`,"AngularFirestore",D.name,()=>{let q=a.runOutsideAngular(()=>D.firestore());if(o&&q.settings(o),O&&q.useEmulator(...O),r&&!Es(s)){let G=()=>{try{return ve(q.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(de){return typeof console<"u"&&console.warn(de),L(!1)}};return[q,a.runOutsideAngular(G)]}else return[q,L(!1)]},[o,O,r])}collection(n,i){let r;typeof n=="string"?r=this.firestore.collection(n):r=n;let{ref:o,query:s}=dj(r,i),a=this.schedulers.ngZone.run(()=>o);return new cb(a,s,this)}collectionGroup(n,i){let r=i||(s=>s),o=this.firestore.collectionGroup(n);return new lD(r(o),this)}doc(n){let i;typeof n=="string"?i=this.firestore.doc(n):i=n;let r=this.schedulers.ngZone.run(()=>i);return new sb(r,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(i){return new(i||t)(y(kc),y(Mc,8),y(UZ,8),y(zZ,8),y(Ct),y(V),y(ii),y($Z,8),y(HZ,8),y(ZF,8),y(GE,8),y(KE,8),y(QE,8),y(YE,8),y(ZE,8),y(XE,8),y(zn,8))};static \u0275prov=A({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var fj=(()=>{let e=class e{constructor(i){this.store=i}read(){return this.store.collection("data").snapshotChanges()}write(i,r){this.store.collection("data").doc(i).set({value:r})}};e.\u0275fac=function(r){return new(r||e)(y(hj))},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var GZ=["*"],lb;function KZ(){if(lb===void 0&&(lb=null,typeof window<"u")){let t=window;t.trustedTypes!==void 0&&(lb=t.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return lb}function Rh(t){return KZ()?.createHTML(t)||t}function mj(t){return Error(`Unable to find icon with the name "${t}"`)}function QZ(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}function pj(t){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${t}".`)}function gj(t){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${t}".`)}var Br=class{constructor(e,n,i){this.url=e,this.svgText=n,this.options=i}},YZ=(()=>{let e=class e{constructor(i,r,o,s){this._httpClient=i,this._sanitizer=r,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=o}addSvgIcon(i,r,o){return this.addSvgIconInNamespace("",i,r,o)}addSvgIconLiteral(i,r,o){return this.addSvgIconLiteralInNamespace("",i,r,o)}addSvgIconInNamespace(i,r,o,s){return this._addSvgIconConfig(i,r,new Br(o,null,s))}addSvgIconResolver(i){return this._resolvers.push(i),this}addSvgIconLiteralInNamespace(i,r,o,s){let a=this._sanitizer.sanitize(Dn.HTML,o);if(!a)throw gj(o);let c=Rh(a);return this._addSvgIconConfig(i,r,new Br("",c,s))}addSvgIconSet(i,r){return this.addSvgIconSetInNamespace("",i,r)}addSvgIconSetLiteral(i,r){return this.addSvgIconSetLiteralInNamespace("",i,r)}addSvgIconSetInNamespace(i,r,o){return this._addSvgIconSetConfig(i,new Br(r,null,o))}addSvgIconSetLiteralInNamespace(i,r,o){let s=this._sanitizer.sanitize(Dn.HTML,r);if(!s)throw gj(r);let a=Rh(s);return this._addSvgIconSetConfig(i,new Br("",a,o))}registerFontClassAlias(i,r=i){return this._fontCssClassesByAlias.set(i,r),this}classNameForFontAlias(i){return this._fontCssClassesByAlias.get(i)||i}setDefaultFontSetClass(...i){return this._defaultFontSetClass=i,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(i){let r=this._sanitizer.sanitize(Dn.RESOURCE_URL,i);if(!r)throw pj(i);let o=this._cachedIconsByUrl.get(r);return o?L(ub(o)):this._loadSvgIconFromConfig(new Br(i,null)).pipe(Oe(s=>this._cachedIconsByUrl.set(r,s)),B(s=>ub(s)))}getNamedSvgIcon(i,r=""){let o=_j(r,i),s=this._svgIconConfigs.get(o);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(r,i),s)return this._svgIconConfigs.set(o,s),this._getSvgFromConfig(s);let a=this._iconSetConfigs.get(r);return a?this._getSvgFromIconSetConfigs(i,a):Hr(mj(o))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(i){return i.svgText?L(ub(this._svgElementFromConfig(i))):this._loadSvgIconFromConfig(i).pipe(B(r=>ub(r)))}_getSvgFromIconSetConfigs(i,r){let o=this._extractIconWithNameFromAnySet(i,r);if(o)return L(o);let s=r.filter(a=>!a.svgText).map(a=>this._loadSvgIconSetFromConfig(a).pipe(ji(c=>{let u=`Loading icon set URL: ${this._sanitizer.sanitize(Dn.RESOURCE_URL,a.url)} failed: ${c.message}`;return this._errorHandler.handleError(new Error(u)),L(null)})));return ql(s).pipe(B(()=>{let a=this._extractIconWithNameFromAnySet(i,r);if(!a)throw mj(i);return a}))}_extractIconWithNameFromAnySet(i,r){for(let o=r.length-1;o>=0;o--){let s=r[o];if(s.svgText&&s.svgText.toString().indexOf(i)>-1){let a=this._svgElementFromConfig(s),c=this._extractSvgIconFromSet(a,i,s.options);if(c)return c}}return null}_loadSvgIconFromConfig(i){return this._fetchIcon(i).pipe(Oe(r=>i.svgText=r),B(()=>this._svgElementFromConfig(i)))}_loadSvgIconSetFromConfig(i){return i.svgText?L(null):this._fetchIcon(i).pipe(Oe(r=>i.svgText=r))}_extractSvgIconFromSet(i,r,o){let s=i.querySelector(`[id="${r}"]`);if(!s)return null;let a=s.cloneNode(!0);if(a.removeAttribute("id"),a.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(a,o);if(a.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(a),o);let c=this._svgElementFromString(Rh("<svg></svg>"));return c.appendChild(a),this._setSvgAttributes(c,o)}_svgElementFromString(i){let r=this._document.createElement("DIV");r.innerHTML=i;let o=r.querySelector("svg");if(!o)throw Error("<svg> tag not found");return o}_toSvgElement(i){let r=this._svgElementFromString(Rh("<svg></svg>")),o=i.attributes;for(let s=0;s<o.length;s++){let{name:a,value:c}=o[s];a!=="id"&&r.setAttribute(a,c)}for(let s=0;s<i.childNodes.length;s++)i.childNodes[s].nodeType===this._document.ELEMENT_NODE&&r.appendChild(i.childNodes[s].cloneNode(!0));return r}_setSvgAttributes(i,r){return i.setAttribute("fit",""),i.setAttribute("height","100%"),i.setAttribute("width","100%"),i.setAttribute("preserveAspectRatio","xMidYMid meet"),i.setAttribute("focusable","false"),r&&r.viewBox&&i.setAttribute("viewBox",r.viewBox),i}_fetchIcon(i){let{url:r,options:o}=i,s=o?.withCredentials??!1;if(!this._httpClient)throw QZ();if(r==null)throw Error(`Cannot fetch icon from URL "${r}".`);let a=this._sanitizer.sanitize(Dn.RESOURCE_URL,r);if(!a)throw pj(r);let c=this._inProgressUrlFetches.get(a);if(c)return c;let l=this._httpClient.get(a,{responseType:"text",withCredentials:s}).pipe(B(u=>Rh(u)),Yr(()=>this._inProgressUrlFetches.delete(a)),Gl());return this._inProgressUrlFetches.set(a,l),l}_addSvgIconConfig(i,r,o){return this._svgIconConfigs.set(_j(i,r),o),this}_addSvgIconSetConfig(i,r){let o=this._iconSetConfigs.get(i);return o?o.push(r):this._iconSetConfigs.set(i,[r]),this}_svgElementFromConfig(i){if(!i.svgElement){let r=this._svgElementFromString(i.svgText);this._setSvgAttributes(r,i.options),i.svgElement=r}return i.svgElement}_getIconConfigFromResolvers(i,r){for(let o=0;o<this._resolvers.length;o++){let s=this._resolvers[o](r,i);if(s)return ZZ(s)?new Br(s.url,null,s.options):new Br(s,null)}}};e.\u0275fac=function(r){return new(r||e)(y($1,8),y(W0),y(ae,8),y(Cn))},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function ub(t){return t.cloneNode(!0)}function _j(t,e){return t+":"+e}function ZZ(t){return!!(t.url&&t.options)}var XZ=xc(class{constructor(t){this._elementRef=t}}),JZ=new C("MAT_ICON_DEFAULT_OPTIONS"),eX=new C("mat-icon-location",{providedIn:"root",factory:tX});function tX(){let t=T(ae),e=t?t.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}var bj=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],nX=bj.map(t=>`[${t}]`).join(", "),iX=/^url\(['"]?#(.*?)['"]?\)$/,yj=(()=>{let e=class e extends XZ{get inline(){return this._inline}set inline(i){this._inline=Sn(i)}get svgIcon(){return this._svgIcon}set svgIcon(i){i!==this._svgIcon&&(i?this._updateSvgIcon(i):this._svgIcon&&this._clearSvgElement(),this._svgIcon=i)}get fontSet(){return this._fontSet}set fontSet(i){let r=this._cleanupFontValue(i);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(i){let r=this._cleanupFontValue(i);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}constructor(i,r,o,s,a,c){super(i),this._iconRegistry=r,this._location=s,this._errorHandler=a,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=Te.EMPTY,c&&(c.color&&(this.color=this.defaultColor=c.color),c.fontSet&&(this.fontSet=c.fontSet)),o||i.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(i){if(!i)return["",""];let r=i.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${i}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let i=this._elementsWithExternalReferences;if(i&&i.size){let r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(i){this._clearSvgElement();let r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(i),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(i)}_clearSvgElement(){let i=this._elementRef.nativeElement,r=i.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){let o=i.childNodes[r];(o.nodeType!==1||o.nodeName.toLowerCase()==="svg")&&o.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let i=this._elementRef.nativeElement,r=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(o=>o.length>0);this._previousFontSetClass.forEach(o=>i.classList.remove(o)),r.forEach(o=>i.classList.add(o)),this._previousFontSetClass=r,this.fontIcon!==this._previousFontIconClass&&!r.includes("mat-ligature-font")&&(this._previousFontIconClass&&i.classList.remove(this._previousFontIconClass),this.fontIcon&&i.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(i){return typeof i=="string"?i.trim().split(" ")[0]:i}_prependPathToReferences(i){let r=this._elementsWithExternalReferences;r&&r.forEach((o,s)=>{o.forEach(a=>{s.setAttribute(a.name,`url('${i}#${a.value}')`)})})}_cacheChildrenWithExternalReferences(i){let r=i.querySelectorAll(nX),o=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<r.length;s++)bj.forEach(a=>{let c=r[s],l=c.getAttribute(a),u=l?l.match(iX):null;if(u){let d=o.get(c);d||(d=[],o.set(c,d)),d.push({name:a,value:u[1]})}})}_updateSvgIcon(i){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),i){let[r,o]=this._splitIconName(i);r&&(this._svgNamespace=r),o&&(this._svgName=o),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(o,r).pipe(Kt(1)).subscribe(s=>this._setSvgElement(s),s=>{let a=`Error retrieving icon ${r}:${o}! ${s.message}`;this._errorHandler.handleError(new Error(a))})}}};e.\u0275fac=function(r){return new(r||e)(E(he),E(YZ),co("aria-hidden"),E(eX),E(Cn),E(JZ,8))},e.\u0275cmp=Qe({type:e,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:8,hostBindings:function(r,o){r&2&&(kt("data-mat-icon-type",o._usingFontIcon()?"font":"svg")("data-mat-icon-name",o._svgName||o.fontIcon)("data-mat-icon-namespace",o._svgNamespace||o.fontSet)("fontIcon",o._usingFontIcon()?o.fontIcon:null),Pe("mat-icon-inline",o.inline)("mat-icon-no-color",o.color!=="primary"&&o.color!=="accent"&&o.color!=="warn"))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[We],ngContentSelectors:GZ,decls:1,vars:0,template:function(r,o){r&1&&(fn(),Mt(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0});let t=e;return t})(),vj=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=H({type:e}),e.\u0275inj=z({imports:[yt,yt]});let t=e;return t})();var wj=(()=>{let e=class e{constructor(i,r){this.firedataService=i,this.document=r,this.myin="",this.datamem="",this.datachat="",this.datax="",this.size=0,this.bar=!1,this.do=!0,this.read()}changeBar(){this.bar?this.bar=!1:this.bar=!0}read(){this.firedataService.read().subscribe(i=>{let r=i.map(o=>o.payload.doc.data());this.datachat=r[0].value,this.datamem=r[1].value,this.datax=this.datamem+this.datachat,this.size=r[2].value,this.do&&(this.scrollToBottom(),this.do=!1)})}scrollToBottom(){setTimeout(()=>{let i=this.document.getElementById("ta");i&&!this.bar&&(i.scrollTop=i.scrollHeight),this.scrollToBottom()},0)}write(){this.firedataService.write("chat",this.datachat+this.username+": "+this.myin+`
`),this.firedataService.write("size",++this.size),this.size>5e3&&(this.firedataService.write("mem",this.datachat),this.firedataService.write("chat",this.username+": "+this.myin+`
`),this.firedataService.write("size",0)),this.myin=""}};e.\u0275fac=function(r){return new(r||e)(E(fj),E(ae))},e.\u0275cmp=Qe({type:e,selectors:[["app-chat"]],inputs:{username:"username"},decls:8,vars:4,consts:[["matInput","","readonly","","rows","16","cols","50","id","ta",3,"ngModel","ngClass","ngModelChange"],["mat-icon-button","","color","white",2,"font-size","large",3,"ngClass","click"],["matInput","","placeholder","scrivi qui cosa vuoi dire!","type","text","name","value",3,"ngModel","ngModelChange","keyup.enter"],["mat-raised-button","",1,"in",3,"click"]],template:function(r,o){r&1&&(ee(0,"textarea",0),De("ngModelChange",function(a){return o.datax=a}),le(),ke(1,"br"),ee(2,"button",1),De("click",function(){return o.changeBar()}),ee(3,"mat-icon"),mn(4,"unfold_more"),le()(),ee(5,"input",2),De("ngModelChange",function(a){return o.myin=a})("keyup.enter",function(){return o.write()}),le(),ee(6,"button",3),De("click",function(){return o.write()}),mn(7,"SEND"),le()),r&2&&(Le("ngModel",o.datax)("ngClass",o.bar?"yes":"nope"),Be(2),Le("ngClass",o.bar?"up":"right"),Be(3),Le("ngModel",o.myin))},dependencies:[Xm,eg,CF,Eo,Tc,Ns,yj],styles:['@charset "UTF-8";input[_ngcontent-%COMP%]{margin:10px;background:none;font-size:large;color:#fff}textarea[_ngcontent-%COMP%]{background:none;font-size:small;color:#fff;resize:none}.yes[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}.yes[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#212121;outline:1px solid white}.yes[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:none}.nope[_ngcontent-%COMP%]::-webkit-scrollbar{width:0}.in[_ngcontent-%COMP%]{transition:transform .1s;transform:rotate(0)}.in[_ngcontent-%COMP%]:active{transform:rotate(360deg)}.up[_ngcontent-%COMP%]{transition:transform .3s;transform:rotate(0)}.right[_ngcontent-%COMP%]{transition:transform .3s;transform:rotate(90deg)}']}),e.\u0275prov=A({token:e,factory:e.\u0275fac});let t=e;return t})();var Ej=(()=>{let e=class e{constructor(){this.username="user"}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Qe({type:e,selectors:[["app-root"]],decls:10,vars:2,consts:[[2,"color","rgb(158, 84, 255)"],["matInput","","placeholder","inserire username","type","text","name","value","id","userin",3,"ngModel","ngModelChange"],["dynamicHeight",""],["label","Roll"],["label","Chat"],[3,"username"],["label","?"]],template:function(r,o){r&1&&(ee(0,"mat-toolbar",0),mn(1," ! ! ! "),ee(2,"input",1),De("ngModelChange",function(a){return o.username=a}),le()(),ee(3,"mat-tab-group",2)(4,"mat-tab",3),ke(5,"app-roll"),le(),ee(6,"mat-tab",4),ke(7,"app-chat",5),le(),ee(8,"mat-tab",6),mn(9," ??? "),le()()),r&2&&(Be(2),Le("ngModel",o.username),Be(5),Le("username",o.username))},dependencies:[qN,Eo,Tc,Ns,OE,EF,RF,wj],styles:["#userin[_ngcontent-%COMP%]{color:#9e54ff;margin-left:20px;background:none;font-size:large;width:150px}"]});let t=e;return t})();var xj={firebase:{apiKey:"AIzaSyAOVjUyPX3FPyeClJh5MDkYrVYBUfS-tw8",authDomain:"datawhile.firebaseapp.com",projectId:"datawhile",storageBucket:"datawhile.appspot.com",messagingSenderId:"514163878515",appId:"1:514163878515:web:13a0cf8e9827b2f826d806",measurementId:"G-YEEPQ4LF8J"}};var Ij=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=H({type:e}),e.\u0275inj=z({imports:[yt,ac,bc,yt]});let t=e;return t})();var Cj="auth",Ph=class{constructor(e){return e}},ma=class{constructor(){return Os(Cj)}};var dD=new C("angularfire2.auth-instances");function oJ(t,e){let n=Ac(Cj,t,e);return n&&new Ph(n)}function sJ(t){return(e,n)=>{let i=e.runOutsideAngular(()=>t(n));return new Ph(i)}}var aJ={provide:ma,deps:[[new Ye,dD]]},cJ={provide:Ph,useFactory:oJ,deps:[[new Ye,dD],xi]},lJ=(()=>{class t{constructor(){ht("angularfire",An.full,"auth")}static \u0275fac=function(i){return new(i||t)};static \u0275mod=H({type:t});static \u0275inj=z({providers:[cJ,aJ]})}return t})();function Tj(t,...e){return{ngModule:lJ,providers:[{provide:dD,useFactory:sJ(t),multi:!0,deps:[V,rt,ii,kr,[new Ye,zn],...e]}]}}var Dj=xo(Pb,!0);var Nh=class{constructor(e){return e}},Sj="firestore",hD=class{constructor(){return Os(Sj)}};var fD=new C("angularfire2.firestore-instances");function uJ(t,e){let n=Ac(Sj,t,e);return n&&new Nh(n)}function dJ(t){return(e,n)=>{let i=e.runOutsideAngular(()=>t(n));return new Nh(i)}}var hJ={provide:hD,deps:[[new Ye,fD]]},fJ={provide:Nh,useFactory:uJ,deps:[[new Ye,fD],xi]},mJ=(()=>{class t{constructor(){ht("angularfire",An.full,"fst")}static \u0275fac=function(i){return new(i||t)};static \u0275mod=H({type:t});static \u0275inj=z({providers:[fJ,hJ]})}return t})();function Aj(t,...e){return{ngModule:mJ,providers:[{provide:fD,useFactory:dJ(t),multi:!0,deps:[V,rt,ii,kr,[new Ye,ma],[new Ye,zn],...e]}]}}var kj=xo(q2,!0);var Mj="@firebase/database",Rj="1.0.2";var dS="";function pJ(t){dS=t}var wD=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),St(n))}get(e){let n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:af(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var ED=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Oi(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var dB=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){let e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new wD(e)}}catch{}return new ED},ga=dB("localStorage"),xD=dB("sessionStorage");var Dl=new Ia("@firebase/database"),gJ=function(){let t=1;return function(){return t++}}(),hB=function(t){let e=qS(t),n=new zS;n.update(e);let i=n.digest();return tf.encodeByteArray(i)},Gh=function(...t){let e="";for(let n=0;n<t.length;n++){let i=t[n];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=Gh.apply(null,i):typeof i=="object"?e+=St(i):e+=i,e+=" "}return e},_a=null,Pj=!0,_J=function(t,e){R(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Dl.logLevel=Yn.VERBOSE,_a=Dl.log.bind(Dl),e&&xD.set("logging_enabled",!0)):typeof t=="function"?_a=t:(_a=null,xD.remove("logging_enabled"))},nn=function(...t){if(Pj===!0&&(Pj=!1,_a===null&&xD.get("logging_enabled")===!0&&_J(!0)),_a){let e=Gh.apply(null,t);_a(e)}},Kh=function(t){return function(...e){nn(t,...e)}},ID=function(...t){let e="FIREBASE INTERNAL ERROR: "+Gh(...t);Dl.error(e)},$r=function(...t){let e=`FIREBASE FATAL ERROR: ${Gh(...t)}`;throw Dl.error(e),new Error(e)},Gn=function(...t){let e="FIREBASE WARNING: "+Gh(...t);Dl.warn(e)},bJ=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Gn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},fB=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},yJ=function(t){if(Fi()||document.readyState==="complete")t();else{let e=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Al="[MIN_NAME]",ba="[MAX_NAME]",Ol=function(t,e){if(t===e)return 0;if(t===Al||e===ba)return-1;if(e===Al||t===ba)return 1;{let n=Nj(t),i=Nj(e);return n!==null?i!==null?n-i===0?t.length-e.length:n-i:-1:i!==null?1:t<e?-1:1}},vJ=function(t,e){return t===e?0:t<e?-1:1},Fh=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+St(e))},hS=function(t){if(typeof t!="object"||t===null)return St(t);let e=[];for(let i in t)e.push(i);e.sort();let n="{";for(let i=0;i<e.length;i++)i!==0&&(n+=","),n+=St(e[i]),n+=":",n+=hS(t[e[i]]);return n+="}",n},mB=function(t,e){let n=t.length;if(n<=e)return[t];let i=[];for(let r=0;r<n;r+=e)r+e>n?i.push(t.substring(r,n)):i.push(t.substring(r,r+e));return i};function di(t,e){for(let n in t)t.hasOwnProperty(n)&&e(n,t[n])}var pB=function(t){R(!fB(t),"Invalid JSON number");let e=11,n=52,i=(1<<e-1)-1,r,o,s,a,c;t===0?(o=0,s=0,r=1/t===-1/0?1:0):(r=t<0,t=Math.abs(t),t>=Math.pow(2,1-i)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),i),o=a+i,s=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(o=0,s=Math.round(t/Math.pow(2,1-i-n))));let l=[];for(c=n;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);for(c=e;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);l.push(r?1:0),l.reverse();let u=l.join(""),d="";for(c=0;c<64;c+=8){let h=parseInt(u.substr(c,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},wJ=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},EJ=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};var xJ=new RegExp("^-?(0*)\\d{1,10}$"),IJ=-2147483648,CJ=2147483647,Nj=function(t){if(xJ.test(t)){let e=Number(t);if(e>=IJ&&e<=CJ)return e}return null},Qh=function(t){try{t()}catch(e){setTimeout(()=>{let n=e.stack||"";throw Gn("Exception was thrown by user callback.",n),e},Math.floor(0))}},TJ=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Bh=function(t,e){let n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var CD=class{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){Gn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var TD=class{constructor(e,n,i){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(nn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Gn(e)}},Uh=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}t.OWNER="owner";return t})(),hb="5",gB="v",_B="s",bB="r",yB="f",vB=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,wB="ls",EB="p",DD="ac",xB="websocket",IB="long_polling";var fb=class{constructor(e,n,i,r,o=!1,s="",a=!1,c=!1){this.secure=n,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ga.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ga.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}};function DJ(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function CB(t,e,n){R(typeof e=="string","typeof type must == string"),R(typeof n=="object","typeof params must == object");let i;if(e===xB)i=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===IB)i=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);DJ(t)&&(n.ns=t.namespace);let r=[];return di(n,(o,s)=>{r.push(o+"="+s)}),i+r.join("&")}var SD=class{constructor(){this.counters_={}}incrementCounter(e,n=1){Oi(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return FS(this.counters_)}};var mD={},pD={};function fS(t){let e=t.toString();return mD[e]||(mD[e]=new SD),mD[e]}function SJ(t,e){let n=t.toString();return pD[n]||(pD[n]=e()),pD[n]}var AD=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){let i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&Qh(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var Fj="start",AJ="close",kJ="pLPCommand",MJ="pRTLPCB",TB="id",DB="pw",SB="ser",RJ="cb",PJ="seg",NJ="ts",FJ="d",OJ="dframe",AB=1870,kB=30,LJ=AB-kB,VJ=25e3,jJ=3e4,kD=class t{constructor(e,n,i,r,o,s,a){this.connId=e,this.repoInfo=n,this.applicationId=i,this.appCheckToken=r,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Kh(e),this.stats_=fS(n),this.urlFn=c=>(this.appCheckToken&&(c[DD]=this.appCheckToken),CB(n,IB,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new AD(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(jJ)),yJ(()=>{if(this.isClosed_)return;this.scriptTagHolder=new MD((...o)=>{let[s,a,c,l,u]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,s===Fj)this.id=a,this.password=c;else if(s===AJ)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+s)},(...o)=>{let[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);let i={};i[Fj]="t",i[SB]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[RJ]=this.scriptTagHolder.uniqueCallbackIdentifier),i[gB]=hb,this.transportSessionId&&(i[_B]=this.transportSessionId),this.lastSessionId&&(i[wB]=this.lastSessionId),this.applicationId&&(i[EB]=this.applicationId),this.appCheckToken&&(i[DD]=this.appCheckToken),typeof location<"u"&&location.hostname&&vB.test(location.hostname)&&(i[bB]=yB);let r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){t.forceAllow_=!0}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){return Fi()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!wJ()&&!EJ()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let n=St(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let i=NS(n),r=mB(i,LJ);for(let o=0;o<r.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[o]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if(Fi())return;this.myDisconnFrame=document.createElement("iframe");let i={};i[OJ]="t",i[TB]=e,i[DB]=n,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let n=St(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},MD=class t{constructor(e,n,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Fi())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=gJ(),window[kJ+this.uniqueCallbackIdentifier]=e,window[MJ+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');let s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){nn("frame writing exception"),a.stack&&nn(a.stack),nn(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||nn("No IE domain setting required")}catch{let i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[TB]=this.myID,e[DB]=this.myPW,e[SB]=this.currentSerial;let n=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+kB+i.length<=AB;){let s=this.pendingSegs.shift();i=i+"&"+PJ+r+"="+s.seg+"&"+NJ+r+"="+s.ts+"&"+FJ+r+"="+s.d,r++}return n=n+i,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,i){this.pendingSegs.push({seg:e,ts:n,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);let i=()=>{this.outstandingRequests.delete(n),this.newRequest_()},r=setTimeout(i,Math.floor(VJ)),o=()=>{clearTimeout(r),i()};this.addTag(e,o)}addTag(e,n){Fi()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){let r=i.readyState;(!r||r==="loaded"||r==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=()=>{nn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}};var BJ=16384,UJ=45e3,mb=null;typeof MozWebSocket<"u"?mb=MozWebSocket:typeof WebSocket<"u"&&(mb=WebSocket);var Oh=(()=>{class t{constructor(n,i,r,o,s,a,c){this.connId=n,this.applicationId=r,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Kh(this.connId),this.stats_=fS(i),this.connURL=t.connectionURL_(i,a,c,o,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(n,i,r,o,s){let a={};return a[gB]=hb,!Fi()&&typeof location<"u"&&location.hostname&&vB.test(location.hostname)&&(a[bB]=yB),i&&(a[_B]=i),r&&(a[wB]=r),o&&(a[DD]=o),s&&(a[EB]=s),CB(n,xB,a)}open(n,i){this.onDisconnect=i,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ga.set("previous_websocket_failure",!0);try{let r;if(Fi()){let o=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":`Firebase/${hb}/${dS}/${process.platform}/${o}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);let s=process.env,a=this.connURL.indexOf("wss://")===0?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;a&&(r.proxy={origin:a})}this.mySock=new mb(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");let o=r.message||r.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");let o=r.message||r.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let i=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(i);r&&r.length>1&&parseFloat(r[1])<4.4&&(n=!0)}return!n&&mb!==null&&!t.forceDisallow_}static previouslyFailed(){return ga.isInMemoryStorage||ga.get("previous_websocket_failure")===!0}markConnectionHealthy(){ga.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let i=this.frames.join("");this.frames=null;let r=af(i);this.onMessage(r)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(R(this.frames===null,"We already have a frame buffer"),n.length<=6){let i=Number(n);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let i=n.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(i);else{let r=this.extractFrameCount_(i);r!==null&&this.appendFrame_(r)}}send(n){this.resetKeepAlive();let i=St(n);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);let r=mB(i,BJ);r.length>1&&this.sendString_(String(r.length));for(let o=0;o<r.length;o++)this.sendString_(r[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(UJ))}sendString_(n){try{this.mySock.send(n)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4;return t})(),$J=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[kD,Oh]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let i=Oh&&Oh.isAvailable(),r=i&&!Oh.previouslyFailed();if(n.webSocketOnly&&(i||Gn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Oh];else{let o=this.transports_=[];for(let s of t.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}t.globalTransportInitialized_=!1;return t})(),zJ=6e4,HJ=5e3,qJ=10*1024,WJ=100*1024,gD="t",Oj="d",GJ="s",Lj="r",KJ="e",Vj="o",jj="a",Bj="n",Uj="p",QJ="h",RD=class{constructor(e,n,i,r,o,s,a,c,l,u){this.id=e,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Kh("c:"+this.id+":"),this.transportManager_=new $J(n),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,i)},Math.floor(0));let r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=Bh(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>WJ?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>qJ?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){let n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(gD in e){let n=e[gD];n===jj?this.upgradeIfSecondaryHealthy_():n===Lj?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Vj&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let n=Fh("t",e),i=Fh("d",e);if(n==="c")this.onSecondaryControl_(i);else if(n==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Uj,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:jj,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Bj,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let n=Fh("t",e),i=Fh("d",e);n==="c"?this.onControl_(i):n==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let n=Fh(gD,e);if(Oj in e){let i=e[Oj];if(n===QJ){let r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(n===Bj){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===GJ?this.onConnectionShutdown_(i):n===Lj?this.onReset_(i):n===KJ?ID("Server Error: "+i):n===Vj?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ID("Unknown control packet command: "+n)}}onHandshake_(e){let n=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),hb!==i&&Gn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),Bh(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(zJ))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Bh(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(HJ))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Uj,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ga.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var pb=class{put(e,n,i,r){}merge(e,n,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,i){}onDisconnectMerge(e,n,i){}onDisconnectCancel(e,n){}reportStats(e){}};var gb=class{constructor(e){this.allowedEvents_=e,this.listeners_={},R(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){let i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,n)}}on(e,n,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:i});let r=this.getInitialEvent(e);r&&n.apply(i,r)}off(e,n,i){this.validateEventType_(e);let r=this.listeners_[e]||[];for(let o=0;o<r.length;o++)if(r[o].callback===n&&(!i||i===r[o].context)){r.splice(o,1);return}}validateEventType_(e){R(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};var _b=class t extends gb{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Mb()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new t}getInitialEvent(e){return R(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var $j=32,zj=768,$e=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function Ve(){return new $e("")}function xe(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Ko(t){return t.pieces_.length-t.pieceNum_}function Je(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new $e(t.pieces_,e)}function MB(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function YJ(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function RB(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function PB(t){if(t.pieceNum_>=t.pieces_.length)return null;let e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new $e(e,0)}function Ot(t,e){let n=[];for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);if(e instanceof $e)for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);else{let i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new $e(n,0)}function ye(t){return t.pieceNum_>=t.pieces_.length}function li(t,e){let n=xe(t),i=xe(e);if(n===null)return e;if(n===i)return li(Je(t),Je(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function NB(t,e){if(Ko(t)!==Ko(e))return!1;for(let n=t.pieceNum_,i=e.pieceNum_;n<=t.pieces_.length;n++,i++)if(t.pieces_[n]!==e.pieces_[i])return!1;return!0}function Ri(t,e){let n=t.pieceNum_,i=e.pieceNum_;if(Ko(t)>Ko(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[i])return!1;++n,++i}return!0}var PD=class{constructor(e,n){this.errorPrefix_=n,this.parts_=RB(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=Bl(this.parts_[i]);FB(this)}};function ZJ(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Bl(e),FB(t)}function XJ(t){let e=t.parts_.pop();t.byteLength_-=Bl(e),t.parts_.length>0&&(t.byteLength_-=1)}function FB(t){if(t.byteLength_>zj)throw new Error(t.errorPrefix_+"has a key path longer than "+zj+" bytes ("+t.byteLength_+").");if(t.parts_.length>$j)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+$j+") or object contains a cycle "+pa(t))}function pa(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}var ND=class t extends gb{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new t}getInitialEvent(e){return R(e==="visible","Unknown event type: "+e),[this.visible_]}};var Lh=1e3,JJ=60*5*1e3,Hj=30*1e3,eee=1.3,tee=3e4,nee="server_kill",qj=3,mS=(()=>{class t extends pb{constructor(n,i,r,o,s,a,c,l){if(super(),this.repoInfo_=n,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=t.nextPersistentConnectionId_++,this.log_=Kh("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Lh,this.maxReconnectDelay_=JJ,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!Fi())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");ND.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&_b.getInstance().on("online",this.onOnline_,this)}sendRequest(n,i,r){let o=++this.requestNumber_,s={r:o,a:n,b:i};this.log_(St(s)),R(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[o]=r)}get(n){this.initConnection_();let i=new xa,o={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?i.resolve(c):i.reject(c)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;let s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),i.promise}listen(n,i,r,o){this.initConnection_();let s=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),R(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),R(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");let c={onComplete:o,hashFn:i,query:n,tag:r};this.listens.get(a).set(s,c),this.connected_&&this.sendListen_(c)}sendGet_(n){let i=this.outstandingGets_[n];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(n){let i=n.query,r=i._path.toString(),o=i._queryIdentifier;this.log_("Listen on "+r+" for "+o);let s={p:r},a="q";n.tag&&(s.q=i._queryObject,s.t=n.tag),s.h=n.hashFn(),this.sendRequest(a,s,c=>{let l=c.d,u=c.s;t.warnOnListenWarnings_(l,i),(this.listens.get(r)&&this.listens.get(r).get(o))===n&&(this.log_("listen response",c),u!=="ok"&&this.removeListen_(r,o),n.onComplete&&n.onComplete(u,l))})}static warnOnListenWarnings_(n,i){if(n&&typeof n=="object"&&Oi(n,"w")){let r=Zo(n,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){let o='".indexOn": "'+i._queryParams.getIndex().toString()+'"',s=i._path.toString();Gn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||US(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Hj)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,i=BS(n)?"auth":"gauth",r={cred:n};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(i,r,o=>{let s=o.s,a=o.d||"error";this.authToken_===n&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let i=n.s,r=n.d||"error";i==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(n,i){let r=n._path.toString(),o=n._queryIdentifier;this.log_("Unlisten called for "+r+" "+o),R(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,o)&&this.connected_&&this.sendUnlisten_(r,o,n._queryObject,i)}sendUnlisten_(n,i,r,o){this.log_("Unlisten on "+n+" for "+i);let s={p:n},a="n";o&&(s.q=r,s.t=o),this.sendRequest(a,s)}onDisconnectPut(n,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,i,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:i,onComplete:r})}onDisconnectMerge(n,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,i,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:i,onComplete:r})}onDisconnectCancel(n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(n,i,r,o){let s={p:i,d:r};this.log_("onDisconnect "+n,s),this.sendRequest(n,s,a=>{o&&setTimeout(()=>{o(a.s,a.d)},Math.floor(0))})}put(n,i,r,o){this.putInternal("p",n,i,r,o)}merge(n,i,r,o){this.putInternal("m",n,i,r,o)}putInternal(n,i,r,o,s){this.initConnection_();let a={p:i,d:r};s!==void 0&&(a.h=s),this.outstandingPuts_.push({action:n,request:a,onComplete:o}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+i)}sendPut_(n){let i=this.outstandingPuts_[n].action,r=this.outstandingPuts_[n].request,o=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(i,r,s=>{this.log_(i+" response",s),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(n){if(this.connected_){let i={c:n};this.log_("reportStats",i),this.sendRequest("s",i,r=>{if(r.s!=="ok"){let s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+St(n));let i=n.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,i){this.log_("handleServerMessage",n,i),n==="d"?this.onDataUpdate_(i.p,i.d,!1,i.t):n==="m"?this.onDataUpdate_(i.p,i.d,!0,i.t):n==="c"?this.onListenRevoked_(i.p,i.q):n==="ac"?this.onAuthRevoked_(i.s,i.d):n==="apc"?this.onAppCheckRevoked_(i.s,i.d):n==="sd"?this.onSecurityDebugPacket_(i):ID("Unrecognized action received from server: "+St(n)+`
Are you using the latest client?`)}onReady_(n,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){R(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Lh,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Lh,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>tee&&(this.reconnectDelay_=Lh),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,i=Math.max(0,this.reconnectDelay_-n);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*eee)}this.onConnectStatus_(!1)}establishConnection_(){return v(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),i=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+t.nextConnectionId_++,s=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,r())},u=function(h){R(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(h)};this.realtime_={close:l,sendRequest:u};let d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[h,f]=yield Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?nn("getToken() completed but was canceled"):(nn("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=f&&f.token,c=new RD(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,i,r,m=>{Gn(m+" ("+this.repoInfo_.toString()+")"),this.interrupt(nee)},s))}catch(h){this.log_("Failed to get token: "+h),a||(this.repoInfo_.nodeAdmin&&Gn(h),l())}}})}interrupt(n){nn("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){nn("Resuming connection for reason: "+n),delete this.interruptReasons_[n],Rb(this.interruptReasons_)&&(this.reconnectDelay_=Lh,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let i=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let i=this.outstandingPuts_[n];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,i){let r;i?r=i.map(s=>hS(s)).join("$"):r="default";let o=this.removeListen_(n,r);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(n,i){let r=new $e(n).toString(),o;if(this.listens.has(r)){let s=this.listens.get(r);o=s.get(i),s.delete(i),s.size===0&&this.listens.delete(r)}else o=void 0;return o}onAuthRevoked_(n,i){nn("Auth token revoked: "+n+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=qj&&(this.reconnectDelay_=Hj,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,i){nn("App check token revoked: "+n+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=qj&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let i of n.values())this.sendListen_(i);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},i="js";Fi()&&(this.repoInfo_.nodeAdmin?i="admin_node":i="node"),n["sdk."+i+"."+dS.replace(/\./g,"-")]=1,Mb()?n["framework.cordova"]=1:OS()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=_b.getInstance().currentlyOnline();return Rb(this.interruptReasons_)&&n}}t.nextPersistentConnectionId_=0,t.nextConnectionId_=0;return t})(),Ie=class t{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new t(e,n)}};var kl=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){let i=new Ie(Al,e),r=new Ie(Al,n);return this.compare(i,r)!==0}minPost(){return Ie.MIN}};var db,bb=class extends kl{static get __EMPTY_NODE(){return db}static set __EMPTY_NODE(e){db=e}compare(e,n){return Ol(e.name,n.name)}isDefinedOn(e){throw Ea("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Ie.MIN}maxPost(){return new Ie(ba,db)}makePost(e,n){return R(typeof e=="string","KeyIndex indexValue must always be a string."),new Ie(e,db)}toString(){return".key"}},Sl=new bb;var Cl=class{constructor(e,n,i,r,o=null){this.isReverse_=r,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(e=e,s=n?i(e.key,n):1,r&&(s*=-1),s<0)this.isReverse_?e=e.left:e=e.right;else if(s===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Mi=(()=>{class t{constructor(n,i,r,o,s){this.key=n,this.value=i,this.color=r??t.RED,this.left=o??ui.EMPTY_NODE,this.right=s??ui.EMPTY_NODE}copy(n,i,r,o,s){return new t(n??this.key,i??this.value,r??this.color,o??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,i,r){let o=this,s=r(n,o.key);return s<0?o=o.copy(null,null,null,o.left.insert(n,i,r),null):s===0?o=o.copy(null,i,null,null,null):o=o.copy(null,null,null,null,o.right.insert(n,i,r)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return ui.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,i){let r,o;if(r=this,i(n,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(n,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),i(n,r.key)===0){if(r.right.isEmpty())return ui.EMPTY_NODE;o=r.right.min_(),r=r.copy(o.key,o.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(n,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,i)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})(),FD=class{copy(e,n,i,r,o){return this}insert(e,n,i){return new Mi(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},ui=class t{constructor(e,n=t.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Mi.BLACK,null,null))}remove(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Mi.BLACK,null,null))}get(e){let n,i=this.root_;for(;!i.isEmpty();){if(n=this.comparator_(e,i.key),n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}getPredecessorKey(e){let n,i=this.root_,r=null;for(;!i.isEmpty();)if(n=this.comparator_(e,i.key),n===0){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else n<0?i=i.left:n>0&&(r=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Cl(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Cl(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Cl(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Cl(this.root_,null,this.comparator_,!0,e)}};ui.EMPTY_NODE=new FD;function iee(t,e){return Ol(t.name,e.name)}function pS(t,e){return Ol(t,e)}var OD;function ree(t){OD=t}var OB=function(t){return typeof t=="number"?"number:"+pB(t):"string:"+t},LB=function(t){if(t.isLeafNode()){let e=t.val();R(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Oi(e,".sv"),"Priority must be a string or number.")}else R(t===OD||t.isEmpty(),"priority of unexpected type.");R(t===OD||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var Wj,Ml=(()=>{class t{constructor(n,i=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=i,this.lazyHash_=null,R(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),LB(this.priorityNode_)}static set __childrenNodeConstructor(n){Wj=n}static get __childrenNodeConstructor(){return Wj}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return ye(n)?this:xe(n)===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,i){return null}updateImmediateChild(n,i){return n===".priority"?this.updatePriority(i):i.isEmpty()&&n!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,i).updatePriority(this.priorityNode_)}updateChild(n,i){let r=xe(n);return r===null?i:i.isEmpty()&&r!==".priority"?this:(R(r!==".priority"||Ko(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(Je(n),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,i){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+OB(this.priorityNode_.val())+":");let i=typeof this.value_;n+=i+":",i==="number"?n+=pB(this.value_):n+=this.value_,this.lazyHash_=hB(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(R(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let i=typeof n.value_,r=typeof this.value_,o=t.VALUE_TYPE_ORDER.indexOf(i),s=t.VALUE_TYPE_ORDER.indexOf(r);return R(o>=0,"Unknown leaf type: "+i),R(s>=0,"Unknown leaf type: "+r),o===s?r==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let i=n;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}else return!1}}t.VALUE_TYPE_ORDER=["object","boolean","number","string"];return t})(),VB,jB;function oee(t){VB=t}function see(t){jB=t}var LD=class extends kl{compare(e,n){let i=e.node.getPriority(),r=n.node.getPriority(),o=i.compareTo(r);return o===0?Ol(e.name,n.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Ie.MIN}maxPost(){return new Ie(ba,new Ml("[PRIORITY-POST]",jB))}makePost(e,n){let i=VB(e);return new Ie(n,new Ml("[PRIORITY-POST]",i))}toString(){return".priority"}},on=new LD;var aee=Math.log(2),VD=class{constructor(e){let n=o=>parseInt(Math.log(o)/aee,10),i=o=>parseInt(Array(o+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;let r=i(this.count);this.bits_=e+1&r}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},yb=function(t,e,n,i){t.sort(e);let r=function(c,l){let u=l-c,d,h;if(u===0)return null;if(u===1)return d=t[c],h=n?n(d):d,new Mi(h,d.node,Mi.BLACK,null,null);{let f=parseInt(u/2,10)+c,m=r(c,f),p=r(f+1,l);return d=t[f],h=n?n(d):d,new Mi(h,d.node,Mi.BLACK,m,p)}},o=function(c){let l=null,u=null,d=t.length,h=function(m,p){let g=d-m,w=d;d-=m;let k=r(g+1,w),D=t[g],O=n?n(D):D;f(new Mi(O,D.node,p,null,k))},f=function(m){l?(l.left=m,l=m):(u=m,l=m)};for(let m=0;m<c.count;++m){let p=c.nextBitIsOne(),g=Math.pow(2,c.count-(m+1));p?h(g,Mi.BLACK):(h(g,Mi.BLACK),h(g,Mi.RED))}return u},s=new VD(t.length),a=o(s);return new ui(i||e,a)};var _D,Il={},Rl=class t{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return R(Il&&on,"ChildrenNode.ts has not been loaded"),_D=_D||new t({".priority":Il},{".priority":on}),_D}get(e){let n=Zo(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof ui?n:null}hasIndex(e){return Oi(this.indexSet_,e.toString())}addIndex(e,n){R(e!==Sl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let i=[],r=!1,o=n.getIterator(Ie.Wrap),s=o.getNext();for(;s;)r=r||e.isDefinedOn(s.node),i.push(s),s=o.getNext();let a;r?a=yb(i,e.getCompare()):a=Il;let c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;let u=Object.assign({},this.indexes_);return u[c]=a,new t(u,l)}addToIndexes(e,n){let i=jl(this.indexes_,(r,o)=>{let s=Zo(this.indexSet_,o);if(R(s,"Missing index implementation for "+o),r===Il)if(s.isDefinedOn(e.node)){let a=[],c=n.getIterator(Ie.Wrap),l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),yb(a,s.getCompare())}else return Il;else{let a=n.get(e.name),c=r;return a&&(c=c.remove(new Ie(e.name,a))),c.insert(e,e.node)}});return new t(i,this.indexSet_)}removeFromIndexes(e,n){let i=jl(this.indexes_,r=>{if(r===Il)return r;{let o=n.get(e.name);return o?r.remove(new Ie(e.name,o)):r}});return new t(i,this.indexSet_)}};var Vh,st=(()=>{class t{constructor(n,i,r){this.children_=n,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&LB(this.priorityNode_),this.children_.isEmpty()&&R(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Vh||(Vh=new t(new ui(pS),null,Rl.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Vh}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let i=this.children_.get(n);return i===null?Vh:i}}getChild(n){let i=xe(n);return i===null?this:this.getImmediateChild(i).getChild(Je(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,i){if(R(i,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(i);{let r=new Ie(n,i),o,s;i.isEmpty()?(o=this.children_.remove(n),s=this.indexMap_.removeFromIndexes(r,this.children_)):(o=this.children_.insert(n,i),s=this.indexMap_.addToIndexes(r,this.children_));let a=o.isEmpty()?Vh:this.priorityNode_;return new t(o,a,s)}}updateChild(n,i){let r=xe(n);if(r===null)return i;{R(xe(n)!==".priority"||Ko(n)===1,".priority must be the last token in a path");let o=this.getImmediateChild(r).updateChild(Je(n),i);return this.updateImmediateChild(r,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let i={},r=0,o=0,s=!0;if(this.forEachChild(on,(a,c)=>{i[a]=c.val(n),r++,s&&t.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):s=!1}),!n&&s&&o<2*r){let a=[];for(let c in i)a[c]=i[c];return a}else return n&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+OB(this.getPriority().val())+":"),this.forEachChild(on,(i,r)=>{let o=r.hash();o!==""&&(n+=":"+i+":"+o)}),this.lazyHash_=n===""?"":hB(n)}return this.lazyHash_}getPredecessorChildName(n,i,r){let o=this.resolveIndex_(r);if(o){let s=o.getPredecessorKey(new Ie(n,i));return s?s.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let i=this.resolveIndex_(n);if(i){let r=i.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(n){let i=this.getFirstChildName(n);return i?new Ie(i,this.children_.get(i)):null}getLastChildName(n){let i=this.resolveIndex_(n);if(i){let r=i.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(n){let i=this.getLastChildName(n);return i?new Ie(i,this.children_.get(i)):null}forEachChild(n,i){let r=this.resolveIndex_(n);return r?r.inorderTraversal(o=>i(o.name,o.node)):this.children_.inorderTraversal(i)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,i){let r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(n,o=>o);{let o=this.children_.getIteratorFrom(n.name,Ie.Wrap),s=o.peek();for(;s!=null&&i.compare(s,n)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,i){let r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(n,o=>o);{let o=this.children_.getReverseIteratorFrom(n.name,Ie.Wrap),s=o.peek();for(;s!=null&&i.compare(s,n)>0;)o.getNext(),s=o.peek();return o}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===Yh?-1:0}withIndex(n){if(n===Sl||this.indexMap_.hasIndex(n))return this;{let i=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,i)}}isIndexed(n){return n===Sl||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let i=n;if(this.getPriority().equals(i.getPriority()))if(this.children_.count()===i.children_.count()){let r=this.getIterator(on),o=i.getIterator(on),s=r.getNext(),a=o.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=r.getNext(),a=o.getNext()}return s===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===Sl?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})(),jD=class extends st{constructor(){super(new ui(pS),st.EMPTY_NODE,Rl.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return st.EMPTY_NODE}isEmpty(){return!1}},Yh=new jD;Object.defineProperties(Ie,{MIN:{value:new Ie(Al,st.EMPTY_NODE)},MAX:{value:new Ie(ba,Yh)}});bb.__EMPTY_NODE=st.EMPTY_NODE;Ml.__childrenNodeConstructor=st;ree(Yh);see(Yh);var cee=!0;function rn(t,e=null){if(t===null)return st.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),R(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){let n=t;return new Ml(n,rn(e))}if(!(t instanceof Array)&&cee){let n=[],i=!1;if(di(t,(s,a)=>{if(s.substring(0,1)!=="."){let c=rn(a);c.isEmpty()||(i=i||!c.getPriority().isEmpty(),n.push(new Ie(s,c)))}}),n.length===0)return st.EMPTY_NODE;let o=yb(n,iee,s=>s.name,pS);if(i){let s=yb(n,on.getCompare());return new st(o,rn(e),new Rl({".priority":s},{".priority":on}))}else return new st(o,rn(e),Rl.Default)}else{let n=st.EMPTY_NODE;return di(t,(i,r)=>{if(Oi(t,i)&&i.substring(0,1)!=="."){let o=rn(r);(o.isLeafNode()||!o.isEmpty())&&(n=n.updateImmediateChild(i,o))}}),n.updatePriority(rn(e))}}oee(rn);var BD=class extends kl{constructor(e){super(),this.indexPath_=e,R(!ye(e)&&xe(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){let i=this.extractChild(e.node),r=this.extractChild(n.node),o=i.compareTo(r);return o===0?Ol(e.name,n.name):o}makePost(e,n){let i=rn(e),r=st.EMPTY_NODE.updateChild(this.indexPath_,i);return new Ie(n,r)}maxPost(){let e=st.EMPTY_NODE.updateChild(this.indexPath_,Yh);return new Ie(ba,e)}toString(){return RB(this.indexPath_,0).join("/")}};var UD=class extends kl{compare(e,n){let i=e.node.compareTo(n.node);return i===0?Ol(e.name,n.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Ie.MIN}maxPost(){return Ie.MAX}makePost(e,n){let i=rn(e);return new Ie(n,i)}toString(){return".value"}},lee=new UD;function uee(t){return{type:"value",snapshotNode:t}}function dee(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function hee(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Gj(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function fee(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}var $D=class t{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=on}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return R(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return R(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Al}hasEnd(){return this.endSet_}getIndexEndValue(){return R(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return R(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ba}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return R(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===on}copy(){let e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function Kj(t){let e={};if(t.isDefault())return e;let n;if(t.index_===on?n="$priority":t.index_===lee?n="$value":t.index_===Sl?n="$key":(R(t.index_ instanceof BD,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=St(n),t.startSet_){let i=t.startAfterSet_?"startAfter":"startAt";e[i]=St(t.indexStartValue_),t.startNameSet_&&(e[i]+=","+St(t.indexStartName_))}if(t.endSet_){let i=t.endBeforeSet_?"endBefore":"endAt";e[i]=St(t.indexEndValue_),t.endNameSet_&&(e[i]+=","+St(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Qj(t){let e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==on&&(e.i=t.index_.toString()),e}var zD=class t extends pb{constructor(e,n,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=Kh("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(R(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,i,r){let o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);let s=t.getListenId_(e,i),a={};this.listens_[s]=a;let c=Kj(e._queryParams);this.restRequest_(o+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(o,d,!1,i),Zo(this.listens_,s)===a){let h;l?l===401?h="permission_denied":h="rest_error:"+l:h="ok",r(h,null)}})}unlisten(e,n){let i=t.getListenId_(e,n);delete this.listens_[i]}get(e){let n=Kj(e._queryParams),i=e._path.toString(),r=new xa;return this.restRequest_(i+".json",n,(o,s)=>{let a=s;o===404&&(a=null,o=null),o===null?(this.onDataUpdate_(i,a,!1,null),r.resolve(a)):r.reject(new Error(a))}),r.promise}refreshAuthToken(e){}restRequest_(e,n={},i){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,o])=>{r&&r.accessToken&&(n.auth=r.accessToken),o&&o.token&&(n.ac=o.token);let s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+$S(n);this.log_("Sending REST request for "+s);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(i&&a.readyState===4){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=af(a.responseText)}catch{Gn("Failed to parse JSON response for "+s+": "+a.responseText)}i(null,c)}else a.status!==401&&a.status!==404&&Gn("Got unsuccessful REST response for "+s+" Status: "+a.status),i(a.status);i=null}},a.open("GET",s,!0),a.send()})}};var HD=class{constructor(){this.rootNode_=st.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}};function vb(){return{value:null,children:new Map}}function BB(t,e,n){if(ye(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{let i=xe(e);t.children.has(i)||t.children.set(i,vb());let r=t.children.get(i);e=Je(e),BB(r,e,n)}}function qD(t,e,n){t.value!==null?n(e,t.value):mee(t,(i,r)=>{let o=new $e(e.toString()+"/"+i);qD(r,o,n)})}function mee(t,e){t.children.forEach((n,i)=>{e(i,n)})}var WD=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),n=Object.assign({},e);return this.last_&&di(this.last_,(i,r)=>{n[i]=n[i]-r}),this.last_=e,n}};var Yj=10*1e3,pee=30*1e3,gee=5*60*1e3,GD=class{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new WD(e);let i=Yj+(pee-Yj)*Math.random();Bh(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){let e=this.statsListener_.get(),n={},i=!1;di(e,(r,o)=>{o>0&&Oi(this.statsToReport_,r)&&(n[r]=o,i=!0)}),i&&this.server_.reportStats(n),Bh(this.reportStats_.bind(this),Math.floor(Math.random()*2*gee))}};var Ur=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(Ur||{});function UB(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function $B(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function zB(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var KD=class t{constructor(e,n,i){this.path=e,this.affectedTree=n,this.revert=i,this.type=Ur.ACK_USER_WRITE,this.source=UB()}operationForChild(e){if(ye(this.path)){if(this.affectedTree.value!=null)return R(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new $e(e));return new t(Ve(),n,this.revert)}}else return R(xe(this.path)===e,"operationForChild called for unrelated child."),new t(Je(this.path),this.affectedTree,this.revert)}};var Pl=class t{constructor(e,n,i){this.source=e,this.path=n,this.snap=i,this.type=Ur.OVERWRITE}operationForChild(e){return ye(this.path)?new t(this.source,Ve(),this.snap.getImmediateChild(e)):new t(this.source,Je(this.path),this.snap)}};var wb=class t{constructor(e,n,i){this.source=e,this.path=n,this.children=i,this.type=Ur.MERGE}operationForChild(e){if(ye(this.path)){let n=this.children.subtree(new $e(e));return n.isEmpty()?null:n.value?new Pl(this.source,Ve(),n.value):new t(this.source,Ve(),n)}else return R(xe(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,Je(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Hh=class{constructor(e,n,i){this.node_=e,this.fullyInitialized_=n,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ye(e))return this.isFullyInitialized()&&!this.filtered_;let n=xe(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};function _ee(t,e,n,i){let r=[],o=[];return e.forEach(s=>{s.type==="child_changed"&&t.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(fee(s.childName,s.snapshotNode))}),jh(t,r,"child_removed",e,i,n),jh(t,r,"child_added",e,i,n),jh(t,r,"child_moved",o,i,n),jh(t,r,"child_changed",e,i,n),jh(t,r,"value",e,i,n),r}function jh(t,e,n,i,r,o){let s=i.filter(a=>a.type===n);s.sort((a,c)=>yee(t,a,c)),s.forEach(a=>{let c=bee(t,a,o);r.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function bee(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function yee(t,e,n){if(e.childName==null||n.childName==null)throw Ea("Should only compare child_ events.");let i=new Ie(e.childName,e.snapshotNode),r=new Ie(n.childName,n.snapshotNode);return t.index_.compare(i,r)}function HB(t,e){return{eventCache:t,serverCache:e}}function $h(t,e,n,i){return HB(new Hh(e,n,i),t.serverCache)}function qB(t,e,n,i){return HB(t.eventCache,new Hh(e,n,i))}function QD(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function ya(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var bD,vee=()=>(bD||(bD=new ui(vJ)),bD),Mn=class t{constructor(e,n=vee()){this.value=e,this.children=n}static fromObject(e){let n=new t(null);return di(e,(i,r)=>{n=n.set(new $e(i),r)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Ve(),value:this.value};if(ye(e))return null;{let i=xe(e),r=this.children.get(i);if(r!==null){let o=r.findRootMostMatchingPathAndValue(Je(e),n);return o!=null?{path:Ot(new $e(i),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ye(e))return this;{let n=xe(e),i=this.children.get(n);return i!==null?i.subtree(Je(e)):new t(null)}}set(e,n){if(ye(e))return new t(n,this.children);{let i=xe(e),o=(this.children.get(i)||new t(null)).set(Je(e),n),s=this.children.insert(i,o);return new t(this.value,s)}}remove(e){if(ye(e))return this.children.isEmpty()?new t(null):new t(null,this.children);{let n=xe(e),i=this.children.get(n);if(i){let r=i.remove(Je(e)),o;return r.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,r),this.value===null&&o.isEmpty()?new t(null):new t(this.value,o)}else return this}}get(e){if(ye(e))return this.value;{let n=xe(e),i=this.children.get(n);return i?i.get(Je(e)):null}}setTree(e,n){if(ye(e))return n;{let i=xe(e),o=(this.children.get(i)||new t(null)).setTree(Je(e),n),s;return o.isEmpty()?s=this.children.remove(i):s=this.children.insert(i,o),new t(this.value,s)}}fold(e){return this.fold_(Ve(),e)}fold_(e,n){let i={};return this.children.inorderTraversal((r,o)=>{i[r]=o.fold_(Ot(e,r),n)}),n(e,this.value,i)}findOnPath(e,n){return this.findOnPath_(e,Ve(),n)}findOnPath_(e,n,i){let r=this.value?i(n,this.value):!1;if(r)return r;if(ye(e))return null;{let o=xe(e),s=this.children.get(o);return s?s.findOnPath_(Je(e),Ot(n,o),i):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Ve(),n)}foreachOnPath_(e,n,i){if(ye(e))return this;{this.value&&i(n,this.value);let r=xe(e),o=this.children.get(r);return o?o.foreachOnPath_(Je(e),Ot(n,r),i):new t(null)}}foreach(e){this.foreach_(Ve(),e)}foreach_(e,n){this.children.inorderTraversal((i,r)=>{r.foreach_(Ot(e,i),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,i)=>{i.value&&e(n,i.value)})}};var Pi=class t{constructor(e){this.writeTree_=e}static empty(){return new t(new Mn(null))}};function zh(t,e,n){if(ye(e))return new Pi(new Mn(n));{let i=t.writeTree_.findRootMostValueAndPath(e);if(i!=null){let r=i.path,o=i.value,s=li(r,e);return o=o.updateChild(s,n),new Pi(t.writeTree_.set(r,o))}else{let r=new Mn(n),o=t.writeTree_.setTree(e,r);return new Pi(o)}}}function Zj(t,e,n){let i=t;return di(n,(r,o)=>{i=zh(i,Ot(e,r),o)}),i}function Xj(t,e){if(ye(e))return Pi.empty();{let n=t.writeTree_.setTree(e,new Mn(null));return new Pi(n)}}function YD(t,e){return va(t,e)!=null}function va(t,e){let n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(li(n.path,e)):null}function Jj(t){let e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(on,(i,r)=>{e.push(new Ie(i,r))}):t.writeTree_.children.inorderTraversal((i,r)=>{r.value!=null&&e.push(new Ie(i,r.value))}),e}function Go(t,e){if(ye(e))return t;{let n=va(t,e);return n!=null?new Pi(new Mn(n)):new Pi(t.writeTree_.subtree(e))}}function ZD(t){return t.writeTree_.isEmpty()}function Nl(t,e){return WB(Ve(),t.writeTree_,e)}function WB(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let i=null;return e.children.inorderTraversal((r,o)=>{r===".priority"?(R(o.value!==null,"Priority writes must always be leaf nodes"),i=o.value):n=WB(Ot(t,r),o,n)}),!n.getChild(t).isEmpty()&&i!==null&&(n=n.updateChild(Ot(t,".priority"),i)),n}}function GB(t,e){return XB(e,t)}function wee(t,e,n,i,r){R(i>t.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),t.allWrites.push({path:e,snap:n,writeId:i,visible:r}),r&&(t.visibleWrites=zh(t.visibleWrites,e,n)),t.lastWriteId=i}function Eee(t,e){for(let n=0;n<t.allWrites.length;n++){let i=t.allWrites[n];if(i.writeId===e)return i}return null}function xee(t,e){let n=t.allWrites.findIndex(a=>a.writeId===e);R(n>=0,"removeWrite called with nonexistent writeId.");let i=t.allWrites[n];t.allWrites.splice(n,1);let r=i.visible,o=!1,s=t.allWrites.length-1;for(;r&&s>=0;){let a=t.allWrites[s];a.visible&&(s>=n&&Iee(a,i.path)?r=!1:Ri(i.path,a.path)&&(o=!0)),s--}if(r){if(o)return Cee(t),!0;if(i.snap)t.visibleWrites=Xj(t.visibleWrites,i.path);else{let a=i.children;di(a,c=>{t.visibleWrites=Xj(t.visibleWrites,Ot(i.path,c))})}return!0}else return!1}function Iee(t,e){if(t.snap)return Ri(t.path,e);for(let n in t.children)if(t.children.hasOwnProperty(n)&&Ri(Ot(t.path,n),e))return!0;return!1}function Cee(t){t.visibleWrites=KB(t.allWrites,Tee,Ve()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function Tee(t){return t.visible}function KB(t,e,n){let i=Pi.empty();for(let r=0;r<t.length;++r){let o=t[r];if(e(o)){let s=o.path,a;if(o.snap)Ri(n,s)?(a=li(n,s),i=zh(i,a,o.snap)):Ri(s,n)&&(a=li(s,n),i=zh(i,Ve(),o.snap.getChild(a)));else if(o.children){if(Ri(n,s))a=li(n,s),i=Zj(i,a,o.children);else if(Ri(s,n))if(a=li(s,n),ye(a))i=Zj(i,Ve(),o.children);else{let c=Zo(o.children,xe(a));if(c){let l=c.getChild(Je(a));i=zh(i,Ve(),l)}}}else throw Ea("WriteRecord should have .snap or .children")}}return i}function QB(t,e,n,i,r){if(!i&&!r){let o=va(t.visibleWrites,e);if(o!=null)return o;{let s=Go(t.visibleWrites,e);if(ZD(s))return n;if(n==null&&!YD(s,Ve()))return null;{let a=n||st.EMPTY_NODE;return Nl(s,a)}}}else{let o=Go(t.visibleWrites,e);if(!r&&ZD(o))return n;if(!r&&n==null&&!YD(o,Ve()))return null;{let s=function(l){return(l.visible||r)&&(!i||!~i.indexOf(l.writeId))&&(Ri(l.path,e)||Ri(e,l.path))},a=KB(t.allWrites,s,e),c=n||st.EMPTY_NODE;return Nl(a,c)}}}function Dee(t,e,n){let i=st.EMPTY_NODE,r=va(t.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(on,(o,s)=>{i=i.updateImmediateChild(o,s)}),i;if(n){let o=Go(t.visibleWrites,e);return n.forEachChild(on,(s,a)=>{let c=Nl(Go(o,new $e(s)),a);i=i.updateImmediateChild(s,c)}),Jj(o).forEach(s=>{i=i.updateImmediateChild(s.name,s.node)}),i}else{let o=Go(t.visibleWrites,e);return Jj(o).forEach(s=>{i=i.updateImmediateChild(s.name,s.node)}),i}}function See(t,e,n,i,r){R(i||r,"Either existingEventSnap or existingServerSnap must exist");let o=Ot(e,n);if(YD(t.visibleWrites,o))return null;{let s=Go(t.visibleWrites,o);return ZD(s)?r.getChild(n):Nl(s,r.getChild(n))}}function Aee(t,e,n,i){let r=Ot(e,n),o=va(t.visibleWrites,r);if(o!=null)return o;if(i.isCompleteForChild(n)){let s=Go(t.visibleWrites,r);return Nl(s,i.getNode().getImmediateChild(n))}else return null}function kee(t,e){return va(t.visibleWrites,e)}function Mee(t,e,n,i,r,o,s){let a,c=Go(t.visibleWrites,e),l=va(c,Ve());if(l!=null)a=l;else if(n!=null)a=Nl(c,n);else return[];if(a=a.withIndex(s),!a.isEmpty()&&!a.isLeafNode()){let u=[],d=s.getCompare(),h=o?a.getReverseIteratorFrom(i,s):a.getIteratorFrom(i,s),f=h.getNext();for(;f&&u.length<r;)d(f,i)!==0&&u.push(f),f=h.getNext();return u}else return[]}function Ree(){return{visibleWrites:Pi.empty(),allWrites:[],lastWriteId:-1}}function XD(t,e,n,i){return QB(t.writeTree,t.treePath,e,n,i)}function YB(t,e){return Dee(t.writeTree,t.treePath,e)}function eB(t,e,n,i){return See(t.writeTree,t.treePath,e,n,i)}function Eb(t,e){return kee(t.writeTree,Ot(t.treePath,e))}function Pee(t,e,n,i,r,o){return Mee(t.writeTree,t.treePath,e,n,i,r,o)}function gS(t,e,n){return Aee(t.writeTree,t.treePath,e,n)}function ZB(t,e){return XB(Ot(t.treePath,e),t.writeTree)}function XB(t,e){return{treePath:t,writeTree:e}}var JD=class{constructor(){this.changeMap=new Map}trackChildChange(e){let n=e.type,i=e.childName;R(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),R(i!==".priority","Only non-priority child changes can be tracked.");let r=this.changeMap.get(i);if(r){let o=r.type;if(n==="child_added"&&o==="child_removed")this.changeMap.set(i,Gj(i,e.snapshotNode,r.snapshotNode));else if(n==="child_removed"&&o==="child_added")this.changeMap.delete(i);else if(n==="child_removed"&&o==="child_changed")this.changeMap.set(i,hee(i,r.oldSnap));else if(n==="child_changed"&&o==="child_added")this.changeMap.set(i,dee(i,e.snapshotNode));else if(n==="child_changed"&&o==="child_changed")this.changeMap.set(i,Gj(i,e.snapshotNode,r.oldSnap));else throw Ea("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}};var eS=class{getCompleteChild(e){return null}getChildAfterChild(e,n,i){return null}},JB=new eS,qh=class{constructor(e,n,i=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=i}getCompleteChild(e){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{let i=this.optCompleteServerCache_!=null?new Hh(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return gS(this.writes_,e,i)}}getChildAfterChild(e,n,i){let r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ya(this.viewCache_),o=Pee(this.writes_,r,n,1,i,e);return o.length===0?null:o[0]}};function Nee(t,e){R(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),R(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function Fee(t,e,n,i,r){let o=new JD,s,a;if(n.type===Ur.OVERWRITE){let l=n;l.source.fromUser?s=tS(t,e,l.path,l.snap,i,r,o):(R(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!ye(l.path),s=xb(t,e,l.path,l.snap,i,r,a,o))}else if(n.type===Ur.MERGE){let l=n;l.source.fromUser?s=Lee(t,e,l.path,l.children,i,r,o):(R(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),s=nS(t,e,l.path,l.children,i,r,a,o))}else if(n.type===Ur.ACK_USER_WRITE){let l=n;l.revert?s=Bee(t,e,l.path,i,r,o):s=Vee(t,e,l.path,l.affectedTree,i,r,o)}else if(n.type===Ur.LISTEN_COMPLETE)s=jee(t,e,n.path,i,o);else throw Ea("Unknown operation type: "+n.type);let c=o.getChanges();return Oee(e,s,c),{viewCache:s,changes:c}}function Oee(t,e,n){let i=e.eventCache;if(i.isFullyInitialized()){let r=i.getNode().isLeafNode()||i.getNode().isEmpty(),o=QD(t);(n.length>0||!t.eventCache.isFullyInitialized()||r&&!i.getNode().equals(o)||!i.getNode().getPriority().equals(o.getPriority()))&&n.push(uee(QD(e)))}}function eU(t,e,n,i,r,o){let s=e.eventCache;if(Eb(i,n)!=null)return e;{let a,c;if(ye(n))if(R(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let l=ya(e),u=l instanceof st?l:st.EMPTY_NODE,d=YB(i,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,o)}else{let l=XD(i,ya(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,o)}else{let l=xe(n);if(l===".priority"){R(Ko(n)===1,"Can't have a priority with additional path components");let u=s.getNode();c=e.serverCache.getNode();let d=eB(i,n,u,c);d!=null?a=t.filter.updatePriority(u,d):a=s.getNode()}else{let u=Je(n),d;if(s.isCompleteForChild(l)){c=e.serverCache.getNode();let h=eB(i,n,s.getNode(),c);h!=null?d=s.getNode().getImmediateChild(l).updateChild(u,h):d=s.getNode().getImmediateChild(l)}else d=gS(i,l,e.serverCache);d!=null?a=t.filter.updateChild(s.getNode(),l,d,u,r,o):a=s.getNode()}}return $h(e,a,s.isFullyInitialized()||ye(n),t.filter.filtersNodes())}}function xb(t,e,n,i,r,o,s,a){let c=e.serverCache,l,u=s?t.filter:t.filter.getIndexedFilter();if(ye(n))l=u.updateFullNode(c.getNode(),i,null);else if(u.filtersNodes()&&!c.isFiltered()){let f=c.getNode().updateChild(n,i);l=u.updateFullNode(c.getNode(),f,null)}else{let f=xe(n);if(!c.isCompleteForPath(n)&&Ko(n)>1)return e;let m=Je(n),g=c.getNode().getImmediateChild(f).updateChild(m,i);f===".priority"?l=u.updatePriority(c.getNode(),g):l=u.updateChild(c.getNode(),f,g,m,JB,null)}let d=qB(e,l,c.isFullyInitialized()||ye(n),u.filtersNodes()),h=new qh(r,d,o);return eU(t,d,n,r,h,a)}function tS(t,e,n,i,r,o,s){let a=e.eventCache,c,l,u=new qh(r,e,o);if(ye(n))l=t.filter.updateFullNode(e.eventCache.getNode(),i,s),c=$h(e,l,!0,t.filter.filtersNodes());else{let d=xe(n);if(d===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),i),c=$h(e,l,a.isFullyInitialized(),a.isFiltered());else{let h=Je(n),f=a.getNode().getImmediateChild(d),m;if(ye(h))m=i;else{let p=u.getCompleteChild(d);p!=null?MB(h)===".priority"&&p.getChild(PB(h)).isEmpty()?m=p:m=p.updateChild(h,i):m=st.EMPTY_NODE}if(f.equals(m))c=e;else{let p=t.filter.updateChild(a.getNode(),d,m,h,u,s);c=$h(e,p,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function tB(t,e){return t.eventCache.isCompleteForChild(e)}function Lee(t,e,n,i,r,o,s){let a=e;return i.foreach((c,l)=>{let u=Ot(n,c);tB(e,xe(u))&&(a=tS(t,a,u,l,r,o,s))}),i.foreach((c,l)=>{let u=Ot(n,c);tB(e,xe(u))||(a=tS(t,a,u,l,r,o,s))}),a}function nB(t,e,n){return n.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function nS(t,e,n,i,r,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;ye(n)?l=i:l=new Mn(null).setTree(n,i);let u=e.serverCache.getNode();return l.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){let f=e.serverCache.getNode().getImmediateChild(d),m=nB(t,f,h);c=xb(t,c,new $e(d),m,r,o,s,a)}}),l.children.inorderTraversal((d,h)=>{let f=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!u.hasChild(d)&&!f){let m=e.serverCache.getNode().getImmediateChild(d),p=nB(t,m,h);c=xb(t,c,new $e(d),p,r,o,s,a)}}),c}function Vee(t,e,n,i,r,o,s){if(Eb(r,n)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(i.value!=null){if(ye(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return xb(t,e,n,c.getNode().getChild(n),r,o,a,s);if(ye(n)){let l=new Mn(null);return c.getNode().forEachChild(Sl,(u,d)=>{l=l.set(new $e(u),d)}),nS(t,e,n,l,r,o,a,s)}else return e}else{let l=new Mn(null);return i.foreach((u,d)=>{let h=Ot(n,u);c.isCompleteForPath(h)&&(l=l.set(u,c.getNode().getChild(h)))}),nS(t,e,n,l,r,o,a,s)}}function jee(t,e,n,i,r){let o=e.serverCache,s=qB(e,o.getNode(),o.isFullyInitialized()||ye(n),o.isFiltered());return eU(t,s,n,i,JB,r)}function Bee(t,e,n,i,r,o){let s;if(Eb(i,n)!=null)return e;{let a=new qh(i,e,r),c=e.eventCache.getNode(),l;if(ye(n)||xe(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=XD(i,ya(e));else{let d=e.serverCache.getNode();R(d instanceof st,"serverChildren would be complete if leaf node"),u=YB(i,d)}u=u,l=t.filter.updateFullNode(c,u,o)}else{let u=xe(n),d=gS(i,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=t.filter.updateChild(c,u,d,Je(n),a,o):e.eventCache.getNode().hasChild(u)?l=t.filter.updateChild(c,u,st.EMPTY_NODE,Je(n),a,o):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(s=XD(i,ya(e)),s.isLeafNode()&&(l=t.filter.updateFullNode(l,s,o)))}return s=e.serverCache.isFullyInitialized()||Eb(i,Ve())!=null,$h(e,l,s,t.filter.filtersNodes())}}function Uee(t,e){let n=ya(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!ye(e)&&!n.getImmediateChild(xe(e)).isEmpty())?n.getChild(e):null}function iB(t,e,n,i){e.type===Ur.MERGE&&e.source.queryId!==null&&(R(ya(t.viewCache_),"We should always have a full cache before handling merges"),R(QD(t.viewCache_),"Missing event cache, even though we have a server cache"));let r=t.viewCache_,o=Fee(t.processor_,r,e,n,i);return Nee(t.processor_,o.viewCache),R(o.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=o.viewCache,$ee(t,o.changes,o.viewCache.eventCache.getNode(),null)}function $ee(t,e,n,i){let r=i?[i]:t.eventRegistrations_;return _ee(t.eventGenerator_,e,n,r)}var rB;function zee(t){R(!rB,"__referenceConstructor has already been defined"),rB=t}function _S(t,e,n,i){let r=e.source.queryId;if(r!==null){let o=t.views.get(r);return R(o!=null,"SyncTree gave us an op for an invalid query."),iB(o,e,n,i)}else{let o=[];for(let s of t.views.values())o=o.concat(iB(s,e,n,i));return o}}function bS(t,e){let n=null;for(let i of t.views.values())n=n||Uee(i,e);return n}var oB;function Hee(t){R(!oB,"__referenceConstructor has already been defined"),oB=t}var Ib=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Mn(null),this.pendingWriteTree_=Ree(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function qee(t,e,n,i,r){return wee(t.pendingWriteTree_,e,n,i,r),r?Tb(t,new Pl(UB(),e,n)):[]}function Tl(t,e,n=!1){let i=Eee(t.pendingWriteTree_,e);if(xee(t.pendingWriteTree_,e)){let o=new Mn(null);return i.snap!=null?o=o.set(Ve(),!0):di(i.children,s=>{o=o.set(new $e(s),!0)}),Tb(t,new KD(i.path,o,n))}else return[]}function Cb(t,e,n){return Tb(t,new Pl($B(),e,n))}function Wee(t,e,n){let i=Mn.fromObject(n);return Tb(t,new wb($B(),e,i))}function Gee(t,e,n,i){let r=rU(t,i);if(r!=null){let o=oU(r),s=o.path,a=o.queryId,c=li(s,e),l=new Pl(zB(a),c,n);return sU(t,s,l)}else return[]}function Kee(t,e,n,i){let r=rU(t,i);if(r){let o=oU(r),s=o.path,a=o.queryId,c=li(s,e),l=Mn.fromObject(n),u=new wb(zB(a),c,l);return sU(t,s,u)}else return[]}function tU(t,e,n){let r=t.pendingWriteTree_,o=t.syncPointTree_.findOnPath(e,(s,a)=>{let c=li(s,e),l=bS(a,c);if(l)return l});return QB(r,e,o,n,!0)}function Tb(t,e){return nU(e,t.syncPointTree_,null,GB(t.pendingWriteTree_,Ve()))}function nU(t,e,n,i){if(ye(t.path))return iU(t,e,n,i);{let r=e.get(Ve());n==null&&r!=null&&(n=bS(r,Ve()));let o=[],s=xe(t.path),a=t.operationForChild(s),c=e.children.get(s);if(c&&a){let l=n?n.getImmediateChild(s):null,u=ZB(i,s);o=o.concat(nU(a,c,l,u))}return r&&(o=o.concat(_S(r,t,i,n))),o}}function iU(t,e,n,i){let r=e.get(Ve());n==null&&r!=null&&(n=bS(r,Ve()));let o=[];return e.children.inorderTraversal((s,a)=>{let c=n?n.getImmediateChild(s):null,l=ZB(i,s),u=t.operationForChild(s);u&&(o=o.concat(iU(u,a,c,l)))}),r&&(o=o.concat(_S(r,t,i,n))),o}function rU(t,e){return t.tagToQueryMap.get(e)}function oU(t){let e=t.indexOf("$");return R(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new $e(t.substr(0,e))}}function sU(t,e,n){let i=t.syncPointTree_.get(e);R(i,"Missing sync point for query tag that we're tracking");let r=GB(t.pendingWriteTree_,e);return _S(i,n,r,null)}var iS=class t{constructor(e){this.node_=e}getImmediateChild(e){let n=this.node_.getImmediateChild(e);return new t(n)}node(){return this.node_}},rS=class t{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){let n=Ot(this.path_,e);return new t(this.syncTree_,n)}node(){return tU(this.syncTree_,this.path_)}},Qee=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},sB=function(t,e,n){if(!t||typeof t!="object")return t;if(R(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return Yee(t[".sv"],e,n);if(typeof t[".sv"]=="object")return Zee(t[".sv"],e);R(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},Yee=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:R(!1,"Unexpected server value: "+t)}},Zee=function(t,e,n){t.hasOwnProperty("increment")||R(!1,"Unexpected server value: "+JSON.stringify(t,null,2));let i=t.increment;typeof i!="number"&&R(!1,"Unexpected increment value: "+i);let r=e.node();if(R(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;let s=r.getValue();return typeof s!="number"?i:s+i},Xee=function(t,e,n,i){return yS(e,new rS(n,t),i)},Jee=function(t,e,n){return yS(t,new iS(e),n)};function yS(t,e,n){let i=t.getPriority().val(),r=sB(i,e.getImmediateChild(".priority"),n),o;if(t.isLeafNode()){let s=t,a=sB(s.getValue(),e,n);return a!==s.getValue()||r!==s.getPriority().val()?new Ml(a,rn(r)):t}else{let s=t;return o=s,r!==s.getPriority().val()&&(o=o.updatePriority(new Ml(r))),s.forEachChild(on,(a,c)=>{let l=yS(c,e.getImmediateChild(a),n);l!==c&&(o=o.updateImmediateChild(a,l))}),o}}var Wh=class{constructor(e="",n=null,i={children:{},childCount:0}){this.name=e,this.parent=n,this.node=i}};function vS(t,e){let n=e instanceof $e?e:new $e(e),i=t,r=xe(n);for(;r!==null;){let o=Zo(i.node.children,r)||{children:{},childCount:0};i=new Wh(r,i,o),n=Je(n),r=xe(n)}return i}function Ll(t){return t.node.value}function aU(t,e){t.node.value=e,oS(t)}function cU(t){return t.node.childCount>0}function ete(t){return Ll(t)===void 0&&!cU(t)}function Db(t,e){di(t.node.children,(n,i)=>{e(new Wh(n,t,i))})}function lU(t,e,n,i){n&&!i&&e(t),Db(t,r=>{lU(r,e,!0,i)}),n&&i&&e(t)}function tte(t,e,n){let i=n?t:t.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function Zh(t){return new $e(t.parent===null?t.name:Zh(t.parent)+"/"+t.name)}function oS(t){t.parent!==null&&nte(t.parent,t.name,t)}function nte(t,e,n){let i=ete(n),r=Oi(t.node.children,e);i&&r?(delete t.node.children[e],t.node.childCount--,oS(t)):!i&&!r&&(t.node.children[e]=n.node,t.node.childCount++,oS(t))}var ite=/[\[\].#$\/\u0000-\u001F\u007F]/,rte=/[\[\].#$\u0000-\u001F\u007F]/,yD=10*1024*1024,uU=function(t){return typeof t=="string"&&t.length!==0&&!ite.test(t)},ote=function(t){return typeof t=="string"&&t.length!==0&&!rte.test(t)},ste=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),ote(t)};var dU=function(t,e,n){let i=n instanceof $e?new PD(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+pa(i));if(typeof e=="function")throw new Error(t+"contains a function "+pa(i)+" with contents = "+e.toString());if(fB(e))throw new Error(t+"contains "+e.toString()+" "+pa(i));if(typeof e=="string"&&e.length>yD/3&&Bl(e)>yD)throw new Error(t+"contains a string greater than "+yD+" utf8 bytes "+pa(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,o=!1;if(di(e,(s,a)=>{if(s===".value")r=!0;else if(s!==".priority"&&s!==".sv"&&(o=!0,!uU(s)))throw new Error(t+" contains an invalid key ("+s+") "+pa(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);ZJ(i,s),dU(t,a,i),XJ(i)}),r&&o)throw new Error(t+' contains ".value" child '+pa(i)+" in addition to actual children.")}};var ate=function(t,e){let n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!uU(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!ste(n))throw new Error(HS(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var sS=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function cte(t,e){let n=null;for(let i=0;i<e.length;i++){let r=e[i],o=r.getPath();n!==null&&!NB(o,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:o}),n.events.push(r)}n&&t.eventLists_.push(n)}function wa(t,e,n){cte(t,n),lte(t,i=>Ri(i,e)||Ri(e,i))}function lte(t,e){t.recursionDepth_++;let n=!0;for(let i=0;i<t.eventLists_.length;i++){let r=t.eventLists_[i];if(r){let o=r.path;e(o)?(ute(t.eventLists_[i]),t.eventLists_[i]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function ute(t){for(let e=0;e<t.events.length;e++){let n=t.events[e];if(n!==null){t.events[e]=null;let i=n.getEventRunner();_a&&nn("event: "+n.toString()),Qh(i)}}}var dte="repo_interrupt",hte=25,aS=class{constructor(e,n,i,r){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new sS,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=vb(),this.transactionQueueTree_=new Wh,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function fte(t,e,n){if(t.stats_=fS(t.repoInfo_),t.forceRestClient_||TJ())t.server_=new zD(t.repoInfo_,(i,r,o,s)=>{aB(t,i,r,o,s)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>cB(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{St(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}t.persistentConnection_=new mS(t.repoInfo_,e,(i,r,o,s)=>{aB(t,i,r,o,s)},i=>{cB(t,i)},i=>{pte(t,i)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(i=>{t.server_.refreshAuthToken(i)}),t.appCheckProvider_.addTokenChangeListener(i=>{t.server_.refreshAppCheckToken(i.token)}),t.statsReporter_=SJ(t.repoInfo_,()=>new GD(t.stats_,t.server_)),t.infoData_=new HD,t.infoSyncTree_=new Ib({startListening:(i,r,o,s)=>{let a=[],c=t.infoData_.getNode(i._path);return c.isEmpty()||(a=Cb(t.infoSyncTree_,i._path,c),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),wS(t,"connected",!1),t.serverSyncTree_=new Ib({startListening:(i,r,o,s)=>(t.server_.listen(i,o,r,(a,c)=>{let l=s(a,c);wa(t.eventQueue_,i._path,l)}),[]),stopListening:(i,r)=>{t.server_.unlisten(i,r)}})}function mte(t){let n=t.infoData_.getNode(new $e(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function hU(t){return Qee({timestamp:mte(t)})}function aB(t,e,n,i,r){t.dataUpdateCount++;let o=new $e(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let s=[];if(r)if(i){let c=jl(n,l=>rn(l));s=Kee(t.serverSyncTree_,o,c,r)}else{let c=rn(n);s=Gee(t.serverSyncTree_,o,c,r)}else if(i){let c=jl(n,l=>rn(l));s=Wee(t.serverSyncTree_,o,c)}else{let c=rn(n);s=Cb(t.serverSyncTree_,o,c)}let a=o;s.length>0&&(a=xS(t,o)),wa(t.eventQueue_,a,s)}function cB(t,e){wS(t,"connected",e),e===!1&&_te(t)}function pte(t,e){di(e,(n,i)=>{wS(t,n,i)})}function wS(t,e,n){let i=new $e("/.info/"+e),r=rn(n);t.infoData_.updateSnapshot(i,r);let o=Cb(t.infoSyncTree_,i,r);wa(t.eventQueue_,i,o)}function gte(t){return t.nextWriteId_++}function _te(t){fU(t,"onDisconnectEvents");let e=hU(t),n=vb();qD(t.onDisconnect_,Ve(),(r,o)=>{let s=Xee(r,o,t.serverSyncTree_,e);BB(n,r,s)});let i=[];qD(n,Ve(),(r,o)=>{i=i.concat(Cb(t.serverSyncTree_,r,o));let s=wte(t,r);xS(t,s)}),t.onDisconnect_=vb(),wa(t.eventQueue_,Ve(),i)}function bte(t){t.persistentConnection_&&t.persistentConnection_.interrupt(dte)}function fU(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),nn(n,...e)}function mU(t,e,n){return tU(t.serverSyncTree_,e,n)||st.EMPTY_NODE}function ES(t,e=t.transactionQueueTree_){if(e||Sb(t,e),Ll(e)){let n=gU(t,e);R(n.length>0,"Sending zero length transaction queue"),n.every(r=>r.status===0)&&yte(t,Zh(e),n)}else cU(e)&&Db(e,n=>{ES(t,n)})}function yte(t,e,n){let i=n.map(l=>l.currentWriteId),r=mU(t,e,i),o=r,s=r.hash();for(let l=0;l<n.length;l++){let u=n[l];R(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let d=li(e,u.path);o=o.updateChild(d,u.currentOutputSnapshotRaw)}let a=o.val(!0),c=e;t.server_.put(c.toString(),a,l=>{fU(t,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){let d=[];for(let h=0;h<n.length;h++)n[h].status=2,u=u.concat(Tl(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();Sb(t,vS(t.transactionQueueTree_,e)),ES(t,t.transactionQueueTree_),wa(t.eventQueue_,e,u);for(let h=0;h<d.length;h++)Qh(d[h])}else{if(l==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{Gn("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}xS(t,e)}},s)}function xS(t,e){let n=pU(t,e),i=Zh(n),r=gU(t,n);return vte(t,r,i),i}function vte(t,e,n){if(e.length===0)return;let i=[],r=[],s=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],l=li(n,c.path),u=!1,d;if(R(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,r=r.concat(Tl(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=hte)u=!0,d="maxretry",r=r.concat(Tl(t.serverSyncTree_,c.currentWriteId,!0));else{let h=mU(t,c.path,s);c.currentInputSnapshot=h;let f=e[a].update(h.val());if(f!==void 0){dU("transaction failed: Data returned ",f,c.path);let m=rn(f);typeof f=="object"&&f!=null&&Oi(f,".priority")||(m=m.updatePriority(h.getPriority()));let g=c.currentWriteId,w=hU(t),k=Jee(m,h,w);c.currentOutputSnapshotRaw=m,c.currentOutputSnapshotResolved=k,c.currentWriteId=gte(t),s.splice(s.indexOf(g),1),r=r.concat(qee(t.serverSyncTree_,c.path,k,c.currentWriteId,c.applyLocally)),r=r.concat(Tl(t.serverSyncTree_,g,!0))}else u=!0,d="nodata",r=r.concat(Tl(t.serverSyncTree_,c.currentWriteId,!0))}wa(t.eventQueue_,n,r),r=[],u&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?i.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):i.push(()=>e[a].onComplete(new Error(d),!1,null))))}Sb(t,t.transactionQueueTree_);for(let a=0;a<i.length;a++)Qh(i[a]);ES(t,t.transactionQueueTree_)}function pU(t,e){let n,i=t.transactionQueueTree_;for(n=xe(e);n!==null&&Ll(i)===void 0;)i=vS(i,n),e=Je(e),n=xe(e);return i}function gU(t,e){let n=[];return _U(t,e,n),n.sort((i,r)=>i.order-r.order),n}function _U(t,e,n){let i=Ll(e);if(i)for(let r=0;r<i.length;r++)n.push(i[r]);Db(e,r=>{_U(t,r,n)})}function Sb(t,e){let n=Ll(e);if(n){let i=0;for(let r=0;r<n.length;r++)n[r].status!==2&&(n[i]=n[r],i++);n.length=i,aU(e,n.length>0?n:void 0)}Db(e,i=>{Sb(t,i)})}function wte(t,e){let n=Zh(pU(t,e)),i=vS(t.transactionQueueTree_,e);return tte(i,r=>{vD(t,r)}),vD(t,i),lU(i,r=>{vD(t,r)}),n}function vD(t,e){let n=Ll(e);if(n){let i=[],r=[],o=-1;for(let s=0;s<n.length;s++)n[s].status===3||(n[s].status===1?(R(o===s-1,"All SENT items should be at beginning of queue."),o=s,n[s].status=3,n[s].abortReason="set"):(R(n[s].status===0,"Unexpected transaction status in abort"),n[s].unwatcher(),r=r.concat(Tl(t.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&i.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));o===-1?aU(e,void 0):n.length=o+1,wa(t.eventQueue_,Zh(e),r);for(let s=0;s<i.length;s++)Qh(i[s])}}function Ete(t){let e="",n=t.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let r=n[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function xte(t){let e={};t.charAt(0)==="?"&&(t=t.substring(1));for(let n of t.split("&")){if(n.length===0)continue;let i=n.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Gn(`Invalid query segment '${n}' in query '${t}'`)}return e}var lB=function(t,e){let n=Ite(t),i=n.namespace;n.domain==="firebase.com"&&$r(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&n.domain!=="localhost"&&$r("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||bJ();let r=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new fb(n.host,n.secure,i,r,e,"",i!==n.subdomain),path:new $e(n.pathString)}},Ite=function(t){let e="",n="",i="",r="",o="",s=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(r=Ete(t.substring(u,d)));let h=xte(t.substring(Math.min(t.length,d)));l=e.indexOf(":"),l>=0?(s=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;let f=e.slice(0,l);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{let m=e.indexOf(".");i=e.substring(0,m).toLowerCase(),n=e.substring(m+1),o=i}"ns"in h&&(o=h.ns)}return{host:e,port:c,domain:n,subdomain:i,secure:s,scheme:a,pathString:r,namespace:o}};var uB="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",V_e=function(){let t=0,e=[];return function(n){let i=n===t;t=n;let r,o=new Array(8);for(r=7;r>=0;r--)o[r]=uB.charAt(n%64),n=Math.floor(n/64);R(n===0,"Cannot push at time == 0");let s=o.join("");if(i){for(r=11;r>=0&&e[r]===63;r--)e[r]=0;e[r]++}else for(r=0;r<12;r++)e[r]=Math.floor(Math.random()*64);for(r=0;r<12;r++)s+=uB.charAt(e[r]);return R(s.length===20,"nextPushId: Length should be 20."),s}}();var cS=class t{constructor(e,n,i,r){this._repo=e,this._path=n,this._queryParams=i,this._orderByCalled=r}get key(){return ye(this._path)?null:MB(this._path)}get ref(){return new Fl(this._repo,this._path)}get _queryIdentifier(){let e=Qj(this._queryParams),n=hS(e);return n==="{}"?"default":n}get _queryObject(){return Qj(this._queryParams)}isEqual(e){if(e=ze(e),!(e instanceof t))return!1;let n=this._repo===e._repo,i=NB(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return n&&i&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+YJ(this._path)}};var Fl=class t extends cS{constructor(e,n){super(e,n,new $D,!1)}get parent(){let e=PB(this._path);return e===null?null:new t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}};zee(Fl);Hee(Fl);var Cte="FIREBASE_DATABASE_EMULATOR_HOST",lS={},Tte=!1;function Dte(t,e,n,i){t.repoInfo_=new fb(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),i&&(t.authTokenProvider_=i)}function Ste(t,e,n,i,r){let o=i||t.options.databaseURL;o===void 0&&(t.options.projectId||$r("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),nn("Using default host for project ",t.options.projectId),o=`${t.options.projectId}-default-rtdb.firebaseio.com`);let s=lB(o,r),a=s.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[Cte]),l?(c=!0,o=`http://${l}?ns=${a.namespace}`,s=lB(o,r),a=s.repoInfo):c=!s.repoInfo.secure;let u=r&&c?new Uh(Uh.OWNER):new TD(t.name,t.options,e);ate("Invalid Firebase Database URL",s),ye(s.path)||$r("Database URL must point to the root of a Firebase Database (not including a child path).");let d=kte(a,t,u,new CD(t.name,n));return new uS(d,t)}function Ate(t,e){let n=lS[e];(!n||n[t.key]!==t)&&$r(`Database ${e}(${t.repoInfo_}) has already been deleted.`),bte(t),delete n[t.key]}function kte(t,e,n,i){let r=lS[e.name];r||(r={},lS[e.name]=r);let o=r[t.toURLString()];return o&&$r("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new aS(t,Tte,n,i),r[t.toURLString()]=o,o}var uS=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(fte(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Fl(this._repo,Ve())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Ate(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&$r("Cannot call "+e+" on a deleted database.")}};function bU(t=Jo(),e){let n=Ul(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){let i=nf("database");i&&yU(n,...i)}return n}function yU(t,e,n,i={}){t=ze(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&$r("Cannot call useEmulator() after instance has already been initialized.");let r=t._repoInternal,o;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&$r('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Uh(Uh.OWNER);else if(i.mockUserToken){let s=typeof i.mockUserToken=="string"?i.mockUserToken:rf(i.mockUserToken,t.app.options.projectId);o=new Uh(s)}Dte(r,e,n,o)}function Mte(t){pJ(cf),Xo(new fr("database",(e,{instanceIdentifier:n})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return Ste(i,r,o,n)},"PUBLIC").setMultipleInstances(!0)),ht(Mj,Rj,t),ht(Mj,Rj,"esm2017")}mS.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};mS.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};Mte();var Xh=class{constructor(e){return e}},vU="database",IS=class{constructor(){return Os(vU)}};var CS=new C("angularfire2.database-instances");function Rte(t,e){let n=Ac(vU,t,e);return n&&new Xh(n)}function Pte(t){return(e,n)=>{let i=e.runOutsideAngular(()=>t(n));return new Xh(i)}}var Nte={provide:IS,deps:[[new Ye,CS]]},Fte={provide:Xh,useFactory:Rte,deps:[[new Ye,CS],xi]},Ote=(()=>{class t{constructor(){ht("angularfire",An.full,"rtdb")}static \u0275fac=function(i){return new(i||t)};static \u0275mod=H({type:t});static \u0275inj=z({providers:[Fte,Nte]})}return t})();function wU(t,...e){return{ngModule:Ote,providers:[{provide:CS,useFactory:Pte(t),multi:!0,deps:[V,rt,ii,kr,[new Ye,ma],[new Ye,zn],...e]}]}}var EU=xo(bU,!0);var xU=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=H({type:e,bootstrap:[Ej]}),e.\u0275inj=z({providers:[X1()],imports:[rp,UP,PN,WN,TF,hF,xF,YF.initializeApp(xj.firebase),Ij,MF,vj,NF(()=>FF({projectId:"datawhile",appId:"1:514163878515:web:13a0cf8e9827b2f826d806",storageBucket:"datawhile.appspot.com",apiKey:"AIzaSyAOVjUyPX3FPyeClJh5MDkYrVYBUfS-tw8",authDomain:"datawhile.firebaseapp.com",messagingSenderId:"514163878515",measurementId:"G-YEEPQ4LF8J"})),Tj(()=>Dj()),Aj(()=>kj()),wU(()=>EU())]});let t=e;return t})();Y1().bootstrapModule(xU).catch(t=>console.error(t));
